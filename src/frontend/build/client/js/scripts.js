/*
 Copyright (c) 2010, Linden Research, Inc.
 Copyright (c) 2014, Joshua Bell

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 $/LicenseInfo$
 */

// Original can be found at:
//   https://bitbucket.org/lindenlab/llsd
// Modifications by Joshua Bell inexorabletash@gmail.com
//   https://github.com/inexorabletash/polyfill

// ES3/ES5 implementation of the Krhonos Typed Array Specification
//   Ref: http://www.khronos.org/registry/typedarray/specs/latest/
//   Date: 2011-02-01
//
// Variations:
//  * Allows typed_array.get/set() as alias for subscripts (typed_array[])
//  * Gradually migrating structure from Khronos spec to ES6 spec
(function(global) {
  'use strict';
  var undefined = (void 0); // Paranoia

  // Beyond this value, index getters/setters (i.e. array[0], array[1]) are so slow to
  // create, and consume so much memory, that the browser appears frozen.
  var MAX_ARRAY_LENGTH = 1e5;

  // Approximations of internal ECMAScript conversion functions
  function Type(v) {
    switch(typeof v) {
    case 'undefined': return 'undefined';
    case 'boolean': return 'boolean';
    case 'number': return 'number';
    case 'string': return 'string';
    default: return v === null ? 'null' : 'object';
    }
  }

  // Class returns internal [[Class]] property, used to avoid cross-frame instanceof issues:
  function Class(v) { return Object.prototype.toString.call(v).replace(/^\[object *|\]$/g, ''); }
  function IsCallable(o) { return typeof o === 'function'; }
  function ToObject(v) {
    if (v === null || v === undefined) throw TypeError();
    return Object(v);
  }
  function ToInt32(v) { return v >> 0; }
  function ToUint32(v) { return v >>> 0; }

  // Snapshot intrinsics
  var LN2 = Math.LN2,
      abs = Math.abs,
      floor = Math.floor,
      log = Math.log,
      max = Math.max,
      min = Math.min,
      pow = Math.pow,
      round = Math.round;

  // emulate ES5 getter/setter API using legacy APIs
  // http://blogs.msdn.com/b/ie/archive/2010/09/07/transitioning-existing-code-to-the-es5-getter-setter-apis.aspx
  // (second clause tests for Object.defineProperty() in IE<9 that only supports extending DOM prototypes, but
  // note that IE<9 does not support __defineGetter__ or __defineSetter__ so it just renders the method harmless)

  (function() {
    var orig = Object.defineProperty;
    var dom_only = !(function(){try{return Object.defineProperty({},'x',{});}catch(_){return false;}}());

    if (!orig || dom_only) {
      Object.defineProperty = function (o, prop, desc) {
        // In IE8 try built-in implementation for defining properties on DOM prototypes.
        if (orig)
          try { return orig(o, prop, desc); } catch (_) {}
        if (o !== Object(o))
          throw TypeError('Object.defineProperty called on non-object');
        if (Object.prototype.__defineGetter__ && ('get' in desc))
          Object.prototype.__defineGetter__.call(o, prop, desc.get);
        if (Object.prototype.__defineSetter__ && ('set' in desc))
          Object.prototype.__defineSetter__.call(o, prop, desc.set);
        if ('value' in desc)
          o[prop] = desc.value;
        return o;
      };
    }
  }());

  // ES5: Make obj[index] an alias for obj._getter(index)/obj._setter(index, value)
  // for index in 0 ... obj.length
  function makeArrayAccessors(obj) {
    if (obj.length > MAX_ARRAY_LENGTH) throw RangeError('Array too large for polyfill');

    function makeArrayAccessor(index) {
      Object.defineProperty(obj, index, {
        'get': function() { return obj._getter(index); },
        'set': function(v) { obj._setter(index, v); },
        enumerable: true,
        configurable: false
      });
    }

    var i;
    for (i = 0; i < obj.length; i += 1) {
      makeArrayAccessor(i);
    }
  }

  // Internal conversion functions:
  //    pack<Type>()   - take a number (interpreted as Type), output a byte array
  //    unpack<Type>() - take a byte array, output a Type-like number

  function as_signed(value, bits) { var s = 32 - bits; return (value << s) >> s; }
  function as_unsigned(value, bits) { var s = 32 - bits; return (value << s) >>> s; }

  function packI8(n) { return [n & 0xff]; }
  function unpackI8(bytes) { return as_signed(bytes[0], 8); }

  function packU8(n) { return [n & 0xff]; }
  function unpackU8(bytes) { return as_unsigned(bytes[0], 8); }

  function packU8Clamped(n) { n = round(Number(n)); return [n < 0 ? 0 : n > 0xff ? 0xff : n & 0xff]; }

  function packI16(n) { return [n & 0xff, (n >> 8) & 0xff]; }
  function unpackI16(bytes) { return as_signed(bytes[1] << 8 | bytes[0], 16); }

  function packU16(n) { return [n & 0xff, (n >> 8) & 0xff]; }
  function unpackU16(bytes) { return as_unsigned(bytes[1] << 8 | bytes[0], 16); }

  function packI32(n) { return [n & 0xff, (n >> 8) & 0xff, (n >> 16) & 0xff, (n >> 24) & 0xff]; }
  function unpackI32(bytes) { return as_signed(bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0], 32); }

  function packU32(n) { return [n & 0xff, (n >> 8) & 0xff, (n >> 16) & 0xff, (n >> 24) & 0xff]; }
  function unpackU32(bytes) { return as_unsigned(bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0], 32); }

  function packIEEE754(v, ebits, fbits) {

    var bias = (1 << (ebits - 1)) - 1;

    function roundToEven(n) {
      var w = floor(n), f = n - w;
      if (f < 0.5)
        return w;
      if (f > 0.5)
        return w + 1;
      return w % 2 ? w + 1 : w;
    }

    // Compute sign, exponent, fraction
    var s, e, f;
    if (v !== v) {
      // NaN
      // http://dev.w3.org/2006/webapi/WebIDL/#es-type-mapping
      e = (1 << ebits) - 1; f = pow(2, fbits - 1); s = 0;
    } else if (v === Infinity || v === -Infinity) {
      e = (1 << ebits) - 1; f = 0; s = (v < 0) ? 1 : 0;
    } else if (v === 0) {
      e = 0; f = 0; s = (1 / v === -Infinity) ? 1 : 0;
    } else {
      s = v < 0;
      v = abs(v);

      if (v >= pow(2, 1 - bias)) {
        // Normalized
        e = min(floor(log(v) / LN2), 1023);
        var significand = v / pow(2, e);
        if (significand < 1) {
          e -= 1;
          significand *= 2;
        }
        if (significand >= 2) {
          e += 1;
          significand /= 2;
        }
        var d = pow(2, fbits);
        f = roundToEven(significand * d) - d;
        e += bias;
        if (f / d >= 1) {
          e += 1;
          f = 0;
        }
        if (e > 2 * bias) {
          // Overflow
          e = (1 << ebits) - 1;
          f = 0;
        }
      } else {
        // Denormalized
        e = 0;
        f = roundToEven(v / pow(2, 1 - bias - fbits));
      }
    }

    // Pack sign, exponent, fraction
    var bits = [], i;
    for (i = fbits; i; i -= 1) { bits.push(f % 2 ? 1 : 0); f = floor(f / 2); }
    for (i = ebits; i; i -= 1) { bits.push(e % 2 ? 1 : 0); e = floor(e / 2); }
    bits.push(s ? 1 : 0);
    bits.reverse();
    var str = bits.join('');

    // Bits to bytes
    var bytes = [];
    while (str.length) {
      bytes.unshift(parseInt(str.substring(0, 8), 2));
      str = str.substring(8);
    }
    return bytes;
  }

  function unpackIEEE754(bytes, ebits, fbits) {
    // Bytes to bits
    var bits = [], i, j, b, str,
        bias, s, e, f;

    for (i = 0; i < bytes.length; ++i) {
      b = bytes[i];
      for (j = 8; j; j -= 1) {
        bits.push(b % 2 ? 1 : 0); b = b >> 1;
      }
    }
    bits.reverse();
    str = bits.join('');

    // Unpack sign, exponent, fraction
    bias = (1 << (ebits - 1)) - 1;
    s = parseInt(str.substring(0, 1), 2) ? -1 : 1;
    e = parseInt(str.substring(1, 1 + ebits), 2);
    f = parseInt(str.substring(1 + ebits), 2);

    // Produce number
    if (e === (1 << ebits) - 1) {
      return f !== 0 ? NaN : s * Infinity;
    } else if (e > 0) {
      // Normalized
      return s * pow(2, e - bias) * (1 + f / pow(2, fbits));
    } else if (f !== 0) {
      // Denormalized
      return s * pow(2, -(bias - 1)) * (f / pow(2, fbits));
    } else {
      return s < 0 ? -0 : 0;
    }
  }

  function unpackF64(b) { return unpackIEEE754(b, 11, 52); }
  function packF64(v) { return packIEEE754(v, 11, 52); }
  function unpackF32(b) { return unpackIEEE754(b, 8, 23); }
  function packF32(v) { return packIEEE754(v, 8, 23); }

  //
  // 3 The ArrayBuffer Type
  //

  (function() {

    function ArrayBuffer(length) {
      length = ToInt32(length);
      if (length < 0) throw RangeError('ArrayBuffer size is not a small enough positive integer.');
      Object.defineProperty(this, 'byteLength', {value: length});
      Object.defineProperty(this, '_bytes', {value: Array(length)});

      for (var i = 0; i < length; i += 1)
        this._bytes[i] = 0;
    }

    global.ArrayBuffer = global.ArrayBuffer || ArrayBuffer;

    //
    // 5 The Typed Array View Types
    //

    function $TypedArray$() {

      // %TypedArray% ( length )
      if (!arguments.length || typeof arguments[0] !== 'object') {
        return (function(length) {
          length = ToInt32(length);
          if (length < 0) throw RangeError('length is not a small enough positive integer.');
          Object.defineProperty(this, 'length', {value: length});
          Object.defineProperty(this, 'byteLength', {value: length * this.BYTES_PER_ELEMENT});
          Object.defineProperty(this, 'buffer', {value: new ArrayBuffer(this.byteLength)});
          Object.defineProperty(this, 'byteOffset', {value: 0});

         }).apply(this, arguments);
      }

      // %TypedArray% ( typedArray )
      if (arguments.length >= 1 &&
          Type(arguments[0]) === 'object' &&
          arguments[0] instanceof $TypedArray$) {
        return (function(typedArray){
          if (this.constructor !== typedArray.constructor) throw TypeError();

          var byteLength = typedArray.length * this.BYTES_PER_ELEMENT;
          Object.defineProperty(this, 'buffer', {value: new ArrayBuffer(byteLength)});
          Object.defineProperty(this, 'byteLength', {value: byteLength});
          Object.defineProperty(this, 'byteOffset', {value: 0});
          Object.defineProperty(this, 'length', {value: typedArray.length});

          for (var i = 0; i < this.length; i += 1)
            this._setter(i, typedArray._getter(i));

        }).apply(this, arguments);
      }

      // %TypedArray% ( array )
      if (arguments.length >= 1 &&
          Type(arguments[0]) === 'object' &&
          !(arguments[0] instanceof $TypedArray$) &&
          !(arguments[0] instanceof ArrayBuffer || Class(arguments[0]) === 'ArrayBuffer')) {
        return (function(array) {

          var byteLength = array.length * this.BYTES_PER_ELEMENT;
          Object.defineProperty(this, 'buffer', {value: new ArrayBuffer(byteLength)});
          Object.defineProperty(this, 'byteLength', {value: byteLength});
          Object.defineProperty(this, 'byteOffset', {value: 0});
          Object.defineProperty(this, 'length', {value: array.length});

          for (var i = 0; i < this.length; i += 1) {
            var s = array[i];
            this._setter(i, Number(s));
          }
        }).apply(this, arguments);
      }

      // %TypedArray% ( buffer, byteOffset=0, length=undefined )
      if (arguments.length >= 1 &&
          Type(arguments[0]) === 'object' &&
          (arguments[0] instanceof ArrayBuffer || Class(arguments[0]) === 'ArrayBuffer')) {
        return (function(buffer, byteOffset, length) {

          byteOffset = ToUint32(byteOffset);
          if (byteOffset > buffer.byteLength)
            throw RangeError('byteOffset out of range');

          // The given byteOffset must be a multiple of the element
          // size of the specific type, otherwise an exception is raised.
          if (byteOffset % this.BYTES_PER_ELEMENT)
            throw RangeError('buffer length minus the byteOffset is not a multiple of the element size.');

          if (length === undefined) {
            var byteLength = buffer.byteLength - byteOffset;
            if (byteLength % this.BYTES_PER_ELEMENT)
              throw RangeError('length of buffer minus byteOffset not a multiple of the element size');
            length = byteLength / this.BYTES_PER_ELEMENT;

          } else {
            length = ToUint32(length);
            byteLength = length * this.BYTES_PER_ELEMENT;
          }

          if ((byteOffset + byteLength) > buffer.byteLength)
            throw RangeError('byteOffset and length reference an area beyond the end of the buffer');

          Object.defineProperty(this, 'buffer', {value: buffer});
          Object.defineProperty(this, 'byteLength', {value: byteLength});
          Object.defineProperty(this, 'byteOffset', {value: byteOffset});
          Object.defineProperty(this, 'length', {value: length});

        }).apply(this, arguments);
      }

      // %TypedArray% ( all other argument combinations )
      throw TypeError();
    }

    // Properties of the %TypedArray Instrinsic Object

    // %TypedArray%.from ( source , mapfn=undefined, thisArg=undefined )
    Object.defineProperty($TypedArray$, 'from', {value: function(iterable) {
      return new this(iterable);
    }});

    // %TypedArray%.of ( ...items )
    Object.defineProperty($TypedArray$, 'of', {value: function(/*...items*/) {
      return new this(arguments);
    }});

    // %TypedArray%.prototype
    var $TypedArrayPrototype$ = {};
    $TypedArray$.prototype = $TypedArrayPrototype$;

    // WebIDL: getter type (unsigned long index);
    Object.defineProperty($TypedArray$.prototype, '_getter', {value: function(index) {
      if (arguments.length < 1) throw SyntaxError('Not enough arguments');

      index = ToUint32(index);
      if (index >= this.length)
        return undefined;

      var bytes = [], i, o;
      for (i = 0, o = this.byteOffset + index * this.BYTES_PER_ELEMENT;
           i < this.BYTES_PER_ELEMENT;
           i += 1, o += 1) {
        bytes.push(this.buffer._bytes[o]);
      }
      return this._unpack(bytes);
    }});

    // NONSTANDARD: convenience alias for getter: type get(unsigned long index);
    Object.defineProperty($TypedArray$.prototype, 'get', {value: $TypedArray$.prototype._getter});

    // WebIDL: setter void (unsigned long index, type value);
    Object.defineProperty($TypedArray$.prototype, '_setter', {value: function(index, value) {
      if (arguments.length < 2) throw SyntaxError('Not enough arguments');

      index = ToUint32(index);
      if (index >= this.length)
        return;

      var bytes = this._pack(value), i, o;
      for (i = 0, o = this.byteOffset + index * this.BYTES_PER_ELEMENT;
           i < this.BYTES_PER_ELEMENT;
           i += 1, o += 1) {
        this.buffer._bytes[o] = bytes[i];
      }
    }});

    // get %TypedArray%.prototype.buffer
    // get %TypedArray%.prototype.byteLength
    // get %TypedArray%.prototype.byteOffset
    // -- applied directly to the object in the constructor

    // %TypedArray%.prototype.constructor
    Object.defineProperty($TypedArray$.prototype, 'constructor', {value: $TypedArray$});

    // %TypedArray%.prototype.copyWithin (target, start, end = this.length )
    Object.defineProperty($TypedArray$.prototype, 'copyWithin', {value: function(target, start) {
      var end = arguments[2];

      var o = ToObject(this);
      var lenVal = o.length;
      var len = ToUint32(lenVal);
      len = max(len, 0);
      var relativeTarget = ToInt32(target);
      var to;
      if (relativeTarget < 0)
        to = max(len + relativeTarget, 0);
      else
        to = min(relativeTarget, len);
      var relativeStart = ToInt32(start);
      var from;
      if (relativeStart < 0)
        from = max(len + relativeStart, 0);
      else
        from = min(relativeStart, len);
      var relativeEnd;
      if (end === undefined)
        relativeEnd = len;
      else
        relativeEnd = ToInt32(end);
      var final;
      if (relativeEnd < 0)
        final = max(len + relativeEnd, 0);
      else
        final = min(relativeEnd, len);
      var count = min(final - from, len - to);
      var direction;
      if (from < to && to < from + count) {
        direction = -1;
        from = from + count - 1;
        to = to + count - 1;
      } else {
        direction = 1;
      }
      while (count > 0) {
        o._setter(to, o._getter(from));
        from = from + direction;
        to = to + direction;
        count = count - 1;
      }
      return o;
    }});

    // %TypedArray%.prototype.entries ( )
    // -- defined in es6.js to shim browsers w/ native TypedArrays

    // %TypedArray%.prototype.every ( callbackfn, thisArg = undefined )
    Object.defineProperty($TypedArray$.prototype, 'every', {value: function(callbackfn) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      if (!IsCallable(callbackfn)) throw TypeError();
      var thisArg = arguments[1];
      for (var i = 0; i < len; i++) {
        if (!callbackfn.call(thisArg, t._getter(i), i, t))
          return false;
      }
      return true;
    }});

    // %TypedArray%.prototype.fill (value, start = 0, end = this.length )
    Object.defineProperty($TypedArray$.prototype, 'fill', {value: function(value) {
      var start = arguments[1],
          end = arguments[2];

      var o = ToObject(this);
      var lenVal = o.length;
      var len = ToUint32(lenVal);
      len = max(len, 0);
      var relativeStart = ToInt32(start);
      var k;
      if (relativeStart < 0)
        k = max((len + relativeStart), 0);
      else
        k = min(relativeStart, len);
      var relativeEnd;
      if (end === undefined)
        relativeEnd = len;
      else
        relativeEnd = ToInt32(end);
      var final;
      if (relativeEnd < 0)
        final = max((len + relativeEnd), 0);
      else
        final = min(relativeEnd, len);
      while (k < final) {
        o._setter(k, value);
        k += 1;
      }
      return o;
    }});

    // %TypedArray%.prototype.filter ( callbackfn, thisArg = undefined )
    Object.defineProperty($TypedArray$.prototype, 'filter', {value: function(callbackfn) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      if (!IsCallable(callbackfn)) throw TypeError();
      var res = [];
      var thisp = arguments[1];
      for (var i = 0; i < len; i++) {
        var val = t._getter(i); // in case fun mutates this
        if (callbackfn.call(thisp, val, i, t))
          res.push(val);
      }
      return new this.constructor(res);
    }});

    // %TypedArray%.prototype.find (predicate, thisArg = undefined)
    Object.defineProperty($TypedArray$.prototype, 'find', {value: function(predicate) {
      var o = ToObject(this);
      var lenValue = o.length;
      var len = ToUint32(lenValue);
      if (!IsCallable(predicate)) throw TypeError();
      var t = arguments.length > 1 ? arguments[1] : undefined;
      var k = 0;
      while (k < len) {
        var kValue = o._getter(k);
        var testResult = predicate.call(t, kValue, k, o);
        if (Boolean(testResult))
          return kValue;
        ++k;
      }
      return undefined;
    }});

    // %TypedArray%.prototype.findIndex ( predicate, thisArg = undefined )
    Object.defineProperty($TypedArray$.prototype, 'findIndex', {value: function(predicate) {
      var o = ToObject(this);
      var lenValue = o.length;
      var len = ToUint32(lenValue);
      if (!IsCallable(predicate)) throw TypeError();
      var t = arguments.length > 1 ? arguments[1] : undefined;
      var k = 0;
      while (k < len) {
        var kValue = o._getter(k);
        var testResult = predicate.call(t, kValue, k, o);
        if (Boolean(testResult))
          return k;
        ++k;
      }
      return -1;
    }});

    // %TypedArray%.prototype.forEach ( callbackfn, thisArg = undefined )
    Object.defineProperty($TypedArray$.prototype, 'forEach', {value: function(callbackfn) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      if (!IsCallable(callbackfn)) throw TypeError();
      var thisp = arguments[1];
      for (var i = 0; i < len; i++)
        callbackfn.call(thisp, t._getter(i), i, t);
    }});

    // %TypedArray%.prototype.indexOf (searchElement, fromIndex = 0 )
    Object.defineProperty($TypedArray$.prototype, 'indexOf', {value: function(searchElement) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      if (len === 0) return -1;
      var n = 0;
      if (arguments.length > 0) {
        n = Number(arguments[1]);
        if (n !== n) {
          n = 0;
        } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {
          n = (n > 0 || -1) * floor(abs(n));
        }
      }
      if (n >= len) return -1;
      var k = n >= 0 ? n : max(len - abs(n), 0);
      for (; k < len; k++) {
        if (t._getter(k) === searchElement) {
          return k;
        }
      }
      return -1;
    }});

    // %TypedArray%.prototype.join ( separator )
    Object.defineProperty($TypedArray$.prototype, 'join', {value: function(separator) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      var tmp = Array(len);
      for (var i = 0; i < len; ++i)
        tmp[i] = t._getter(i);
      return tmp.join(separator === undefined ? ',' : separator); // Hack for IE7
    }});

    // %TypedArray%.prototype.keys ( )
    // -- defined in es6.js to shim browsers w/ native TypedArrays

    // %TypedArray%.prototype.lastIndexOf ( searchElement, fromIndex = this.length-1 )
    Object.defineProperty($TypedArray$.prototype, 'lastIndexOf', {value: function(searchElement) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      if (len === 0) return -1;
      var n = len;
      if (arguments.length > 1) {
        n = Number(arguments[1]);
        if (n !== n) {
          n = 0;
        } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {
          n = (n > 0 || -1) * floor(abs(n));
        }
      }
      var k = n >= 0 ? min(n, len - 1) : len - abs(n);
      for (; k >= 0; k--) {
        if (t._getter(k) === searchElement)
          return k;
      }
      return -1;
    }});

    // get %TypedArray%.prototype.length
    // -- applied directly to the object in the constructor

    // %TypedArray%.prototype.map ( callbackfn, thisArg = undefined )
    Object.defineProperty($TypedArray$.prototype, 'map', {value: function(callbackfn) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      if (!IsCallable(callbackfn)) throw TypeError();
      var res = []; res.length = len;
      var thisp = arguments[1];
      for (var i = 0; i < len; i++)
        res[i] = callbackfn.call(thisp, t._getter(i), i, t);
      return new this.constructor(res);
    }});

    // %TypedArray%.prototype.reduce ( callbackfn [, initialValue] )
    Object.defineProperty($TypedArray$.prototype, 'reduce', {value: function(callbackfn) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      if (!IsCallable(callbackfn)) throw TypeError();
      // no value to return if no initial value and an empty array
      if (len === 0 && arguments.length === 1) throw TypeError();
      var k = 0;
      var accumulator;
      if (arguments.length >= 2) {
        accumulator = arguments[1];
      } else {
        accumulator = t._getter(k++);
      }
      while (k < len) {
        accumulator = callbackfn.call(undefined, accumulator, t._getter(k), k, t);
        k++;
      }
      return accumulator;
    }});

    // %TypedArray%.prototype.reduceRight ( callbackfn [, initialValue] )
    Object.defineProperty($TypedArray$.prototype, 'reduceRight', {value: function(callbackfn) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      if (!IsCallable(callbackfn)) throw TypeError();
      // no value to return if no initial value, empty array
      if (len === 0 && arguments.length === 1) throw TypeError();
      var k = len - 1;
      var accumulator;
      if (arguments.length >= 2) {
        accumulator = arguments[1];
      } else {
        accumulator = t._getter(k--);
      }
      while (k >= 0) {
        accumulator = callbackfn.call(undefined, accumulator, t._getter(k), k, t);
        k--;
      }
      return accumulator;
    }});

    // %TypedArray%.prototype.reverse ( )
    Object.defineProperty($TypedArray$.prototype, 'reverse', {value: function() {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      var half = floor(len / 2);
      for (var i = 0, j = len - 1; i < half; ++i, --j) {
        var tmp = t._getter(i);
        t._setter(i, t._getter(j));
        t._setter(j, tmp);
      }
      return t;
    }});

    // %TypedArray%.prototype.set(array, offset = 0 )
    // %TypedArray%.prototype.set(typedArray, offset = 0 )
    // WebIDL: void set(TypedArray array, optional unsigned long offset);
    // WebIDL: void set(sequence<type> array, optional unsigned long offset);
    Object.defineProperty($TypedArray$.prototype, 'set', {value: function(index, value) {
      if (arguments.length < 1) throw SyntaxError('Not enough arguments');
      var array, sequence, offset, len,
          i, s, d,
          byteOffset, byteLength, tmp;

      if (typeof arguments[0] === 'object' && arguments[0].constructor === this.constructor) {
        // void set(TypedArray array, optional unsigned long offset);
        array = arguments[0];
        offset = ToUint32(arguments[1]);

        if (offset + array.length > this.length) {
          throw RangeError('Offset plus length of array is out of range');
        }

        byteOffset = this.byteOffset + offset * this.BYTES_PER_ELEMENT;
        byteLength = array.length * this.BYTES_PER_ELEMENT;

        if (array.buffer === this.buffer) {
          tmp = [];
          for (i = 0, s = array.byteOffset; i < byteLength; i += 1, s += 1) {
            tmp[i] = array.buffer._bytes[s];
          }
          for (i = 0, d = byteOffset; i < byteLength; i += 1, d += 1) {
            this.buffer._bytes[d] = tmp[i];
          }
        } else {
          for (i = 0, s = array.byteOffset, d = byteOffset;
               i < byteLength; i += 1, s += 1, d += 1) {
            this.buffer._bytes[d] = array.buffer._bytes[s];
          }
        }
      } else if (typeof arguments[0] === 'object' && typeof arguments[0].length !== 'undefined') {
        // void set(sequence<type> array, optional unsigned long offset);
        sequence = arguments[0];
        len = ToUint32(sequence.length);
        offset = ToUint32(arguments[1]);

        if (offset + len > this.length) {
          throw RangeError('Offset plus length of array is out of range');
        }

        for (i = 0; i < len; i += 1) {
          s = sequence[i];
          this._setter(offset + i, Number(s));
        }
      } else {
        throw TypeError('Unexpected argument type(s)');
      }
    }});

    // %TypedArray%.prototype.slice ( start, end )
    Object.defineProperty($TypedArray$.prototype, 'slice', {value: function(start, end) {
      var o = ToObject(this);
      var lenVal = o.length;
      var len = ToUint32(lenVal);
      var relativeStart = ToInt32(start);
      var k = (relativeStart < 0) ? max(len + relativeStart, 0) : min(relativeStart, len);
      var relativeEnd = (end === undefined) ? len : ToInt32(end);
      var final = (relativeEnd < 0) ? max(len + relativeEnd, 0) : min(relativeEnd, len);
      var count = final - k;
      var c = o.constructor;
      var a = new c(count);
      var n = 0;
      while (k < final) {
        var kValue = o._getter(k);
        a._setter(n, kValue);
        ++k;
        ++n;
      }
      return a;
    }});

    // %TypedArray%.prototype.some ( callbackfn, thisArg = undefined )
    Object.defineProperty($TypedArray$.prototype, 'some', {value: function(callbackfn) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      if (!IsCallable(callbackfn)) throw TypeError();
      var thisp = arguments[1];
      for (var i = 0; i < len; i++) {
        if (callbackfn.call(thisp, t._getter(i), i, t)) {
          return true;
        }
      }
      return false;
    }});

    // %TypedArray%.prototype.sort ( comparefn )
    Object.defineProperty($TypedArray$.prototype, 'sort', {value: function(comparefn) {
      if (this === undefined || this === null) throw TypeError();
      var t = Object(this);
      var len = ToUint32(t.length);
      var tmp = Array(len);
      for (var i = 0; i < len; ++i)
        tmp[i] = t._getter(i);
      if (comparefn) tmp.sort(comparefn); else tmp.sort(); // Hack for IE8/9
      for (i = 0; i < len; ++i)
        t._setter(i, tmp[i]);
      return t;
    }});

    // %TypedArray%.prototype.subarray(begin = 0, end = this.length )
    // WebIDL: TypedArray subarray(long begin, optional long end);
    Object.defineProperty($TypedArray$.prototype, 'subarray', {value: function(start, end) {
      function clamp(v, min, max) { return v < min ? min : v > max ? max : v; }

      start = ToInt32(start);
      end = ToInt32(end);

      if (arguments.length < 1) { start = 0; }
      if (arguments.length < 2) { end = this.length; }

      if (start < 0) { start = this.length + start; }
      if (end < 0) { end = this.length + end; }

      start = clamp(start, 0, this.length);
      end = clamp(end, 0, this.length);

      var len = end - start;
      if (len < 0) {
        len = 0;
      }

      return new this.constructor(
        this.buffer, this.byteOffset + start * this.BYTES_PER_ELEMENT, len);
    }});

    // %TypedArray%.prototype.toLocaleString ( )
    // %TypedArray%.prototype.toString ( )
    // %TypedArray%.prototype.values ( )
    // %TypedArray%.prototype [ @@iterator ] ( )
    // get %TypedArray%.prototype [ @@toStringTag ]
    // -- defined in es6.js to shim browsers w/ native TypedArrays

    function makeTypedArray(elementSize, pack, unpack) {
      // Each TypedArray type requires a distinct constructor instance with
      // identical logic, which this produces.
      var TypedArray = function() {
        Object.defineProperty(this, 'constructor', {value: TypedArray});
        $TypedArray$.apply(this, arguments);
        makeArrayAccessors(this);
      };
      if ('__proto__' in TypedArray) {
        TypedArray.__proto__ = $TypedArray$;
      } else {
        TypedArray.from = $TypedArray$.from;
        TypedArray.of = $TypedArray$.of;
      }

      TypedArray.BYTES_PER_ELEMENT = elementSize;

      var TypedArrayPrototype = function() {};
      TypedArrayPrototype.prototype = $TypedArrayPrototype$;

      TypedArray.prototype = new TypedArrayPrototype();

      Object.defineProperty(TypedArray.prototype, 'BYTES_PER_ELEMENT', {value: elementSize});
      Object.defineProperty(TypedArray.prototype, '_pack', {value: pack});
      Object.defineProperty(TypedArray.prototype, '_unpack', {value: unpack});

      return TypedArray;
    }

    var Int8Array = makeTypedArray(1, packI8, unpackI8);
    var Uint8Array = makeTypedArray(1, packU8, unpackU8);
    var Uint8ClampedArray = makeTypedArray(1, packU8Clamped, unpackU8);
    var Int16Array = makeTypedArray(2, packI16, unpackI16);
    var Uint16Array = makeTypedArray(2, packU16, unpackU16);
    var Int32Array = makeTypedArray(4, packI32, unpackI32);
    var Uint32Array = makeTypedArray(4, packU32, unpackU32);
    var Float32Array = makeTypedArray(4, packF32, unpackF32);
    var Float64Array = makeTypedArray(8, packF64, unpackF64);

    global.Int8Array = global.Int8Array || Int8Array;
    global.Uint8Array = global.Uint8Array || Uint8Array;
    global.Uint8ClampedArray = global.Uint8ClampedArray || Uint8ClampedArray;
    global.Int16Array = global.Int16Array || Int16Array;
    global.Uint16Array = global.Uint16Array || Uint16Array;
    global.Int32Array = global.Int32Array || Int32Array;
    global.Uint32Array = global.Uint32Array || Uint32Array;
    global.Float32Array = global.Float32Array || Float32Array;
    global.Float64Array = global.Float64Array || Float64Array;
  }());

  //
  // 6 The DataView View Type
  //

  (function() {
    function r(array, index) {
      return IsCallable(array.get) ? array.get(index) : array[index];
    }

    var IS_BIG_ENDIAN = (function() {
      var u16array = new Uint16Array([0x1234]),
          u8array = new Uint8Array(u16array.buffer);
      return r(u8array, 0) === 0x12;
    }());

    // DataView(buffer, byteOffset=0, byteLength=undefined)
    // WebIDL: Constructor(ArrayBuffer buffer,
    //                     optional unsigned long byteOffset,
    //                     optional unsigned long byteLength)
    function DataView(buffer, byteOffset, byteLength) {
      if (!(buffer instanceof ArrayBuffer || Class(buffer) === 'ArrayBuffer')) throw TypeError();

      byteOffset = ToUint32(byteOffset);
      if (byteOffset > buffer.byteLength)
        throw RangeError('byteOffset out of range');

      if (byteLength === undefined)
        byteLength = buffer.byteLength - byteOffset;
      else
        byteLength = ToUint32(byteLength);

      if ((byteOffset + byteLength) > buffer.byteLength)
        throw RangeError('byteOffset and length reference an area beyond the end of the buffer');

      Object.defineProperty(this, 'buffer', {value: buffer});
      Object.defineProperty(this, 'byteLength', {value: byteLength});
      Object.defineProperty(this, 'byteOffset', {value: byteOffset});
    };

    // get DataView.prototype.buffer
    // get DataView.prototype.byteLength
    // get DataView.prototype.byteOffset
    // -- applied directly to instances by the constructor

    function makeGetter(arrayType) {
      return function GetViewValue(byteOffset, littleEndian) {
        byteOffset = ToUint32(byteOffset);

        if (byteOffset + arrayType.BYTES_PER_ELEMENT > this.byteLength)
          throw RangeError('Array index out of range');

        byteOffset += this.byteOffset;

        var uint8Array = new Uint8Array(this.buffer, byteOffset, arrayType.BYTES_PER_ELEMENT),
            bytes = [];
        for (var i = 0; i < arrayType.BYTES_PER_ELEMENT; i += 1)
          bytes.push(r(uint8Array, i));

        if (Boolean(littleEndian) === Boolean(IS_BIG_ENDIAN))
          bytes.reverse();

        return r(new arrayType(new Uint8Array(bytes).buffer), 0);
      };
    }

    Object.defineProperty(DataView.prototype, 'getUint8', {value: makeGetter(Uint8Array)});
    Object.defineProperty(DataView.prototype, 'getInt8', {value: makeGetter(Int8Array)});
    Object.defineProperty(DataView.prototype, 'getUint16', {value: makeGetter(Uint16Array)});
    Object.defineProperty(DataView.prototype, 'getInt16', {value: makeGetter(Int16Array)});
    Object.defineProperty(DataView.prototype, 'getUint32', {value: makeGetter(Uint32Array)});
    Object.defineProperty(DataView.prototype, 'getInt32', {value: makeGetter(Int32Array)});
    Object.defineProperty(DataView.prototype, 'getFloat32', {value: makeGetter(Float32Array)});
    Object.defineProperty(DataView.prototype, 'getFloat64', {value: makeGetter(Float64Array)});

    function makeSetter(arrayType) {
      return function SetViewValue(byteOffset, value, littleEndian) {
        byteOffset = ToUint32(byteOffset);
        if (byteOffset + arrayType.BYTES_PER_ELEMENT > this.byteLength)
          throw RangeError('Array index out of range');

        // Get bytes
        var typeArray = new arrayType([value]),
            byteArray = new Uint8Array(typeArray.buffer),
            bytes = [], i, byteView;

        for (i = 0; i < arrayType.BYTES_PER_ELEMENT; i += 1)
          bytes.push(r(byteArray, i));

        // Flip if necessary
        if (Boolean(littleEndian) === Boolean(IS_BIG_ENDIAN))
          bytes.reverse();

        // Write them
        byteView = new Uint8Array(this.buffer, byteOffset, arrayType.BYTES_PER_ELEMENT);
        byteView.set(bytes);
      };
    }

    Object.defineProperty(DataView.prototype, 'setUint8', {value: makeSetter(Uint8Array)});
    Object.defineProperty(DataView.prototype, 'setInt8', {value: makeSetter(Int8Array)});
    Object.defineProperty(DataView.prototype, 'setUint16', {value: makeSetter(Uint16Array)});
    Object.defineProperty(DataView.prototype, 'setInt16', {value: makeSetter(Int16Array)});
    Object.defineProperty(DataView.prototype, 'setUint32', {value: makeSetter(Uint32Array)});
    Object.defineProperty(DataView.prototype, 'setInt32', {value: makeSetter(Int32Array)});
    Object.defineProperty(DataView.prototype, 'setFloat32', {value: makeSetter(Float32Array)});
    Object.defineProperty(DataView.prototype, 'setFloat64', {value: makeSetter(Float64Array)});

    global.DataView = global.DataView || DataView;

  }());

}(self));

!function(e,n){"use strict";"function"==typeof define&&define.amd?define("stackframe",[],n):"object"==typeof exports?module.exports=n():e.StackFrame=n()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e,n,t,r,o,i){void 0!==e&&this.setFunctionName(e),void 0!==n&&this.setArgs(n),void 0!==t&&this.setFileName(t),void 0!==r&&this.setLineNumber(r),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return n.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(n){if(!e(n))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(n)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(n){if(!e(n))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(n)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){var n=this.getFunctionName()||"{anonymous}",t="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",o=e(this.getLineNumber())?":"+this.getLineNumber():"",i=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return n+t+r+o+i}},n});var SourceMap=function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){function r(e){var n=e;return"string"==typeof e&&(n=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=n.sections?new s(n):new o(n)}function o(e){var n=e;"string"==typeof e&&(n=JSON.parse(e.replace(/^\)\]\}'/,"")));var t=a.getArg(n,"version"),r=a.getArg(n,"sources"),o=a.getArg(n,"names",[]),i=a.getArg(n,"sourceRoot",null),s=a.getArg(n,"sourcesContent",null),u=a.getArg(n,"mappings"),l=a.getArg(n,"file",null);if(t!=this._version)throw new Error("Unsupported version: "+t);r=r.map(a.normalize).map(function(e){return i&&a.isAbsolute(i)&&a.isAbsolute(e)?a.relative(i,e):e}),this._names=c.fromArray(o,!0),this._sources=c.fromArray(r,!0),this.sourceRoot=i,this.sourcesContent=s,this._mappings=u,this.file=l}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function s(e){var n=e;"string"==typeof e&&(n=JSON.parse(e.replace(/^\)\]\}'/,"")));var t=a.getArg(n,"version"),o=a.getArg(n,"sections");if(t!=this._version)throw new Error("Unsupported version: "+t);this._sources=new c,this._names=new c;var i={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var n=a.getArg(e,"offset"),t=a.getArg(n,"line"),o=a.getArg(n,"column");if(t<i.line||t===i.line&&o<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=n,{generatedOffset:{generatedLine:t+1,generatedColumn:o+1},consumer:new r(a.getArg(e,"map"))}})}var a=t(1),u=t(2),c=t(3).ArraySet,l=t(4),f=t(6).quickSort;r.fromSourceMap=function(e){return o.fromSourceMap(e)},r.prototype._version=3,r.prototype.__generatedMappings=null,Object.defineProperty(r.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),r.prototype.__originalMappings=null,Object.defineProperty(r.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),r.prototype._charIsMappingSeparator=function(e,n){var t=e.charAt(n);return";"===t||","===t},r.prototype._parseMappings=function(e,n){throw new Error("Subclasses must implement _parseMappings")},r.GENERATED_ORDER=1,r.ORIGINAL_ORDER=2,r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.prototype.eachMapping=function(e,n,t){var o,i=n||null,s=t||r.GENERATED_ORDER;switch(s){case r.GENERATED_ORDER:o=this._generatedMappings;break;case r.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;o.map(function(e){var n=null===e.source?null:this._sources.at(e.source);return null!=n&&null!=u&&(n=a.join(u,n)),{source:n,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},r.prototype.allGeneratedPositionsFor=function(e){var n=a.getArg(e,"line"),t={source:a.getArg(e,"source"),originalLine:n,originalColumn:a.getArg(e,"column",0)};if(null!=this.sourceRoot&&(t.source=a.relative(this.sourceRoot,t.source)),!this._sources.has(t.source))return[];t.source=this._sources.indexOf(t.source);var r=[],o=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var s=i.originalLine;i&&i.originalLine===s;)r.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o];else for(var c=i.originalColumn;i&&i.originalLine===n&&i.originalColumn==c;)r.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o]}return r},n.SourceMapConsumer=r,o.prototype=Object.create(r.prototype),o.prototype.consumer=r,o.fromSourceMap=function(e){var n=Object.create(o.prototype),t=n._names=c.fromArray(e._names.toArray(),!0),r=n._sources=c.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file;for(var s=e._mappings.toArray().slice(),u=n.__generatedMappings=[],l=n.__originalMappings=[],p=0,g=s.length;g>p;p++){var h=s[p],m=new i;m.generatedLine=h.generatedLine,m.generatedColumn=h.generatedColumn,h.source&&(m.source=r.indexOf(h.source),m.originalLine=h.originalLine,m.originalColumn=h.originalColumn,h.name&&(m.name=t.indexOf(h.name)),l.push(m)),u.push(m)}return f(n.__originalMappings,a.compareByOriginalPositions),n},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?a.join(this.sourceRoot,e):e},this)}}),o.prototype._parseMappings=function(e,n){for(var t,r,o,s,u,c=1,p=0,g=0,h=0,m=0,d=0,_=e.length,v=0,y={},w={},b=[],O=[];_>v;)if(";"===e.charAt(v))c++,v++,p=0;else if(","===e.charAt(v))v++;else{for(t=new i,t.generatedLine=c,s=v;_>s&&!this._charIsMappingSeparator(e,s);s++);if(r=e.slice(v,s),o=y[r])v+=r.length;else{for(o=[];s>v;)l.decode(e,v,w),u=w.value,v=w.rest,o.push(u);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");y[r]=o}t.generatedColumn=p+o[0],p=t.generatedColumn,o.length>1&&(t.source=m+o[1],m+=o[1],t.originalLine=g+o[2],g=t.originalLine,t.originalLine+=1,t.originalColumn=h+o[3],h=t.originalColumn,o.length>4&&(t.name=d+o[4],d+=o[4])),O.push(t),"number"==typeof t.originalLine&&b.push(t)}f(O,a.compareByGeneratedPositionsDeflated),this.__generatedMappings=O,f(b,a.compareByOriginalPositions),this.__originalMappings=b},o.prototype._findMapping=function(e,n,t,r,o,i){if(e[t]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[t]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return u.search(e,n,o,i)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var t=this._generatedMappings[e+1];if(n.generatedLine===t.generatedLine){n.lastGeneratedColumn=t.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var n={generatedLine:a.getArg(e,"line"),generatedColumn:a.getArg(e,"column")},t=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",a.compareByGeneratedPositionsDeflated,a.getArg(e,"bias",r.GREATEST_LOWER_BOUND));if(t>=0){var o=this._generatedMappings[t];if(o.generatedLine===n.generatedLine){var i=a.getArg(o,"source",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=a.join(this.sourceRoot,i)));var s=a.getArg(o,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:a.getArg(o,"originalLine",null),column:a.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}):!1},o.prototype.sourceContentFor=function(e,n){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=a.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(null!=this.sourceRoot&&(t=a.urlParse(this.sourceRoot))){var r=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(r))return this.sourcesContent[this._sources.indexOf(r)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var n=a.getArg(e,"source");if(null!=this.sourceRoot&&(n=a.relative(this.sourceRoot,n)),!this._sources.has(n))return{line:null,column:null,lastColumn:null};n=this._sources.indexOf(n);var t={source:n,originalLine:a.getArg(e,"line"),originalColumn:a.getArg(e,"column")},o=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,a.getArg(e,"bias",r.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===t.source)return{line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=o,s.prototype=Object.create(r.prototype),s.prototype.constructor=r,s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){for(var e=[],n=0;n<this._sections.length;n++)for(var t=0;t<this._sections[n].consumer.sources.length;t++)e.push(this._sections[n].consumer.sources[t]);return e}}),s.prototype.originalPositionFor=function(e){var n={generatedLine:a.getArg(e,"line"),generatedColumn:a.getArg(e,"column")},t=u.search(n,this._sections,function(e,n){var t=e.generatedLine-n.generatedOffset.generatedLine;return t?t:e.generatedColumn-n.generatedOffset.generatedColumn}),r=this._sections[t];return r?r.consumer.originalPositionFor({line:n.generatedLine-(r.generatedOffset.generatedLine-1),column:n.generatedColumn-(r.generatedOffset.generatedLine===n.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},s.prototype.sourceContentFor=function(e,n){for(var t=0;t<this._sections.length;t++){var r=this._sections[t],o=r.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(e){for(var n=0;n<this._sections.length;n++){var t=this._sections[n];if(-1!==t.consumer.sources.indexOf(a.getArg(e,"source"))){var r=t.consumer.generatedPositionFor(e);if(r){var o={line:r.line+(t.generatedOffset.generatedLine-1),column:r.column+(t.generatedOffset.generatedLine===r.line?t.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},s.prototype._parseMappings=function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var t=0;t<this._sections.length;t++)for(var r=this._sections[t],o=r.consumer._generatedMappings,i=0;i<o.length;i++){var s=o[i],u=r.consumer._sources.at(s.source);null!==r.consumer.sourceRoot&&(u=a.join(r.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var c=r.consumer._names.at(s.name);this._names.add(c),c=this._names.indexOf(c);var l={source:u,generatedLine:s.generatedLine+(r.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(r.generatedOffset.generatedLine===s.generatedLine?r.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:c};this.__generatedMappings.push(l),"number"==typeof l.originalLine&&this.__originalMappings.push(l)}f(this.__generatedMappings,a.compareByGeneratedPositionsDeflated),f(this.__originalMappings,a.compareByOriginalPositions)},n.IndexedSourceMapConsumer=s},function(e,n){function t(e,n,t){if(n in e)return e[n];if(3===arguments.length)return t;throw new Error('"'+n+'" is a required argument.')}function r(e){var n=e.match(h);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function o(e){var n="";return e.scheme&&(n+=e.scheme+":"),n+="//",e.auth&&(n+=e.auth+"@"),e.host&&(n+=e.host),e.port&&(n+=":"+e.port),e.path&&(n+=e.path),n}function i(e){var t=e,i=r(e);if(i){if(!i.path)return e;t=i.path}for(var s,a=n.isAbsolute(t),u=t.split(/\/+/),c=0,l=u.length-1;l>=0;l--)s=u[l],"."===s?u.splice(l,1):".."===s?c++:c>0&&(""===s?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return t=u.join("/"),""===t&&(t=a?"/":"."),i?(i.path=t,o(i)):t}function s(e,n){""===e&&(e="."),""===n&&(n=".");var t=r(n),s=r(e);if(s&&(e=s.path||"/"),t&&!t.scheme)return s&&(t.scheme=s.scheme),o(t);if(t||n.match(m))return n;if(s&&!s.host&&!s.path)return s.host=n,o(s);var a="/"===n.charAt(0)?n:i(e.replace(/\/+$/,"")+"/"+n);return s?(s.path=a,o(s)):a}function a(e,n){""===e&&(e="."),e=e.replace(/\/$/,"");for(var t=0;0!==n.indexOf(e+"/");){var r=e.lastIndexOf("/");if(0>r)return n;if(e=e.slice(0,r),e.match(/^([^\/]+:\/)?\/*$/))return n;++t}return Array(t+1).join("../")+n.substr(e.length+1)}function u(e){return"$"+e}function c(e){return e.substr(1)}function l(e,n,t){var r=e.source-n.source;return 0!==r?r:(r=e.originalLine-n.originalLine,0!==r?r:(r=e.originalColumn-n.originalColumn,0!==r||t?r:(r=e.generatedColumn-n.generatedColumn,0!==r?r:(r=e.generatedLine-n.generatedLine,0!==r?r:e.name-n.name))))}function f(e,n,t){var r=e.generatedLine-n.generatedLine;return 0!==r?r:(r=e.generatedColumn-n.generatedColumn,0!==r||t?r:(r=e.source-n.source,0!==r?r:(r=e.originalLine-n.originalLine,0!==r?r:(r=e.originalColumn-n.originalColumn,0!==r?r:e.name-n.name))))}function p(e,n){return e===n?0:e>n?1:-1}function g(e,n){var t=e.generatedLine-n.generatedLine;return 0!==t?t:(t=e.generatedColumn-n.generatedColumn,0!==t?t:(t=p(e.source,n.source),0!==t?t:(t=e.originalLine-n.originalLine,0!==t?t:(t=e.originalColumn-n.originalColumn,0!==t?t:p(e.name,n.name)))))}n.getArg=t;var h=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,m=/^data:.+\,.+$/;n.urlParse=r,n.urlGenerate=o,n.normalize=i,n.join=s,n.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(h)},n.relative=a,n.toSetString=u,n.fromSetString=c,n.compareByOriginalPositions=l,n.compareByGeneratedPositionsDeflated=f,n.compareByGeneratedPositionsInflated=g},function(e,n){function t(e,r,o,i,s,a){var u=Math.floor((r-e)/2)+e,c=s(o,i[u],!0);return 0===c?u:c>0?r-u>1?t(u,r,o,i,s,a):a==n.LEAST_UPPER_BOUND?r<i.length?r:-1:u:u-e>1?t(e,u,o,i,s,a):a==n.LEAST_UPPER_BOUND?u:0>e?-1:e}n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.search=function(e,r,o,i){if(0===r.length)return-1;var s=t(-1,r.length,e,r,o,i||n.GREATEST_LOWER_BOUND);if(0>s)return-1;for(;s-1>=0&&0===o(r[s],r[s-1],!0);)--s;return s}},function(e,n,t){function r(){this._array=[],this._set={}}var o=t(1);r.fromArray=function(e,n){for(var t=new r,o=0,i=e.length;i>o;o++)t.add(e[o],n);return t},r.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},r.prototype.add=function(e,n){var t=o.toSetString(e),r=this._set.hasOwnProperty(t),i=this._array.length;(!r||n)&&this._array.push(e),r||(this._set[t]=i)},r.prototype.has=function(e){var n=o.toSetString(e);return this._set.hasOwnProperty(n)},r.prototype.indexOf=function(e){var n=o.toSetString(e);if(this._set.hasOwnProperty(n))return this._set[n];throw new Error('"'+e+'" is not in the set.')},r.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},r.prototype.toArray=function(){return this._array.slice()},n.ArraySet=r},function(e,n,t){function r(e){return 0>e?(-e<<1)+1:(e<<1)+0}function o(e){var n=1===(1&e),t=e>>1;return n?-t:t}var i=t(5),s=5,a=1<<s,u=a-1,c=a;n.encode=function(e){var n,t="",o=r(e);do n=o&u,o>>>=s,o>0&&(n|=c),t+=i.encode(n);while(o>0);return t},n.decode=function(e,n,t){var r,a,l=e.length,f=0,p=0;do{if(n>=l)throw new Error("Expected more digits in base 64 VLQ value.");if(a=i.decode(e.charCodeAt(n++)),-1===a)throw new Error("Invalid base64 digit: "+e.charAt(n-1));r=!!(a&c),a&=u,f+=a<<p,p+=s}while(r);t.value=o(f),t.rest=n}},function(e,n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");n.encode=function(e){if(e>=0&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},n.decode=function(e){var n=65,t=90,r=97,o=122,i=48,s=57,a=43,u=47,c=26,l=52;return e>=n&&t>=e?e-n:e>=r&&o>=e?e-r+c:e>=i&&s>=e?e-i+l:e==a?62:e==u?63:-1}},function(e,n){function t(e,n,t){var r=e[n];e[n]=e[t],e[t]=r}function r(e,n){return Math.round(e+Math.random()*(n-e))}function o(e,n,i,s){if(s>i){var a=r(i,s),u=i-1;t(e,a,s);for(var c=e[s],l=i;s>l;l++)n(e[l],c)<=0&&(u+=1,t(e,u,l));t(e,u+1,l);var f=u+1;o(e,n,i,f-1),o(e,n,f+1,s)}}n.quickSort=function(e,n){o(e,n,0,e.length-1)}}]);!function(e,n){"use strict";"function"==typeof define&&define.amd?define("stacktrace-gps",["source-map","stackframe"],n):"object"==typeof exports?module.exports=n(require("source-map/lib/source-map-consumer"),require("stackframe")):e.StackTraceGPS=n(e.SourceMap||e.sourceMap,e.StackFrame)}(this,function(e,n){"use strict";function t(e){return new Promise(function(n,t){var r=new XMLHttpRequest;r.open("get",e),r.onerror=t,r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300?n(r.responseText):t(new Error("HTTP status: "+r.status+" retrieving "+e)))},r.send()})}function r(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function o(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(e,n){for(var t,r=/function\s+([^(]*?)\s*\(([^)]*)\)/,o=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,i=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,s=e.split("\n"),a="",u=Math.min(n,20),c=0;u>c;++c){var l=s[n-c-1],f=l.indexOf("//");if(f>=0&&(l=l.substr(0,f)),l){if(a=l+a,t=o.exec(a),t&&t[1])return t[1];if(t=r.exec(a),t&&t[1])return t[1];if(t=i.exec(a),t&&t[1])return t[1]}}}function s(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function a(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!==0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!==0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function u(e){var n=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/.exec(e);if(n&&n[1])return n[1];throw new Error("sourceMappingURL not found")}function c(t,r,o,i,s){var a=new e.SourceMapConsumer(t),u=a.originalPositionFor({line:o,column:i}),c=a.sourceContentFor(u.source);return c&&(s[u.source]=c),new n(u.name,r,u.source,u.line,u.column)}return function l(e){return this instanceof l?(e=e||{},this.sourceCache=e.sourceCache||{},this.ajax=e.ajax||t,this._atob=e.atob||r,this._get=function(n){return new Promise(function(t,r){var o="data:"===n.substr(0,5);if(this.sourceCache[n])t(this.sourceCache[n]);else if(e.offline&&!o)r(new Error("Cannot make network requests in offline mode"));else if(o){var i=/^data:application\/json;([\w=:"-]+;)*base64,/,s=n.match(i);if(s){var a=s[0].length,u=n.substr(a),c=this._atob(u);this.sourceCache[n]=c,t(c)}else r(new Error("The encoding of the inline sourcemap is not supported"))}else{var l=this.ajax(n,{method:"get"});this.sourceCache[n]=l,l.then(t,r)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(n,t){this.getMappedLocation(e).then(function(e){function t(){n(e)}this.findFunctionName(e).then(n,t)["catch"](t)}.bind(this),t)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(t,r){a(e),this._get(e.fileName).then(function(r){var o=i(r,e.lineNumber,e.columnNumber);t(new n(o,e.args,e.fileName,e.lineNumber,e.columnNumber))},r)["catch"](r)}.bind(this))},void(this.getMappedLocation=function(e){return new Promise(function(n,t){s(),a(e);var r=this.sourceCache,i=e.fileName;this._get(i).then(function(s){var a=u(s),l="data:"===a.substr(0,5),f=i.substring(0,i.lastIndexOf("/")+1);"/"===a[0]||l||/^https?:\/\/|^\/\//i.test(a)||(a=f+a),this._get(a).then(function(t){var i=e.lineNumber,s=e.columnNumber;"string"==typeof t&&(t=o(t.replace(/^\)\]\}'/,""))),"undefined"==typeof t.sourceRoot&&(t.sourceRoot=f),n(c(t,e.args,i,s,r))},t)["catch"](t)}.bind(this),t)["catch"](t)}.bind(this))})):new l(e)}}),function(e,n){"use strict";"function"==typeof define&&define.amd?define("stack-generator",["stackframe"],n):"object"==typeof exports?module.exports=n(require("stackframe")):e.StackGenerator=n(e.StackFrame)}(this,function(e){return{backtrace:function(n){var t=[],r=10;"object"==typeof n&&"number"==typeof n.maxStackSize&&(r=n.maxStackSize);for(var o=arguments.callee;o&&t.length<r;){for(var i=new Array(o.arguments.length),s=0;s<i.length;++s)i[s]=o.arguments[s];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?t.push(new e(RegExp.$1||void 0,i)):t.push(new e(void 0,i));try{o=o.caller}catch(a){break}}return t}}}),function(e,n){"use strict";"function"==typeof define&&define.amd?define("error-stack-parser",["stackframe"],n):"object"==typeof exports?module.exports=n(require("stackframe")):e.ErrorStackParser=n(e.StackFrame)}(this,function(e){"use strict";var n=/(^|@)\S+\:\d+/,t=/\s+at .*(\S+\:\d+|\(native\))/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(t))return this.parseV8OrIE(e);if(e.stack&&e.stack.match(n))return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var n=e.replace(/[\(\)\s]/g,"").split(":"),t=n.pop(),r=n[n.length-1];if(!isNaN(parseFloat(r))&&isFinite(r)){var o=n.pop();return[n.join(":"),o,t]}return[n.join(":"),t,void 0]},parseV8OrIE:function(n){return n.stack.split("\n").filter(function(e){return!!e.match(t)},this).map(function(n){var t=n.replace(/^\s+/,"").split(/\s+/).slice(1),r=this.extractLocation(t.pop()),o=t[0]&&"Anonymous"!==t[0]?t[0]:void 0;return new e(o,void 0,r[0],r[1],r[2],n)},this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter(function(e){return!!e.match(n)},this).map(function(n){var t=n.split("@"),r=this.extractLocation(t.pop()),o=t.shift()||void 0;return new e(o,void 0,r[0],r[1],r[2],n)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(n){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,r=n.message.split("\n"),o=[],i=2,s=r.length;s>i;i+=2){var a=t.exec(r[i]);a&&o.push(new e(void 0,void 0,a[2],a[1],void 0,r[i]))}return o},parseOpera10:function(n){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=n.stacktrace.split("\n"),o=[],i=0,s=r.length;s>i;i+=2){var a=t.exec(r[i]);a&&o.push(new e(a[3]||void 0,void 0,a[2],a[1],void 0,r[i]))}return o},parseOpera11:function(t){return t.stack.split("\n").filter(function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this).map(function(n){var t,r=n.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(t=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===t||"[arguments not available]"===t?void 0:t.split(",");return new e(s,a,o[0],o[1],o[2],n)},this)}}}),function(e,n){"use strict";"function"==typeof define&&define.amd?define("stacktrace",["error-stack-parser","stack-generator","stacktrace-gps"],n):"object"==typeof exports?module.exports=n(require("error-stack-parser"),require("stack-generator"),require("stacktrace-gps")):e.StackTrace=n(e.ErrorStackParser,e.StackGenerator,e.StackTraceGPS)}(this,function(e,n,t){function r(e,n){var t={};return[e,n].forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}),t}function o(e){return e.stack||e["opera#sourceloc"]}var i={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")}};return{get:function(e){try{throw new Error}catch(n){return o(n)?this.fromError(n,e):this.generateArtificially(e)}},fromError:function(n,o){return o=r(i,o),new Promise(function(r){var i=e.parse(n);"function"==typeof o.filter&&(i=i.filter(o.filter)),r(Promise.all(i.map(function(e){return new Promise(function(n){function r(){n(e)}new t(o).pinpoint(e).then(n,r)["catch"](r)})})))}.bind(this))},generateArtificially:function(e){e=r(i,e);var t=n.backtrace(e);return"function"==typeof e.filter&&(t=t.filter(e.filter)),Promise.resolve(t)},instrument:function(e,n,t,r){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(n,t)["catch"](t),e.apply(r||this,arguments)}catch(i){throw o(i)&&this.fromError(i).then(n,t)["catch"](t),i}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,n){return new Promise(function(t,r){var o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<400?t(o.responseText):r(new Error("POST to "+n+" failed with status: "+o.status)))},o.open("post",n),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify({stack:e}))})}}});
//# sourceMappingURL=stacktrace.min.js.map

/*!
 * Fast "async" scrypt implementation in JavaScript.
 * Copyright (c) 2013-2015 Dmitry Chestnykh | BSD License
 * https://github.com/dchest/scrypt-async-js
 */
function scrypt(a,b,c,d,e,f,g,h){"use strict";function i(a){function b(a){for(var b=0,m=a.length;m>=64;){var n,o,p,q,r,s=d,t=e,u=f,v=g,w=h,x=i,y=j,z=k;for(o=0;16>o;o++)p=b+4*o,l[o]=(255&a[p])<<24|(255&a[p+1])<<16|(255&a[p+2])<<8|255&a[p+3];for(o=16;64>o;o++)n=l[o-2],q=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,n=l[o-15],r=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,l[o]=(q+l[o-7]|0)+(r+l[o-16]|0)|0;for(o=0;64>o;o++)q=(((w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7))+(w&x^~w&y)|0)+(z+(c[o]+l[o]|0)|0)|0,r=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&t^s&u^t&u)|0,z=y,y=x,x=w,w=v+q|0,v=u,u=t,t=s,s=q+r|0;d=d+s|0,e=e+t|0,f=f+u|0,g=g+v|0,h=h+w|0,i=i+x|0,j=j+y|0,k=k+z|0,b+=64,m-=64}}var c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=1779033703,e=3144134277,f=1013904242,g=2773480762,h=1359893119,i=2600822924,j=528734635,k=1541459225,l=new Array(64);b(a);var m,n=a.length%64,o=a.length/536870912|0,p=a.length<<3,q=56>n?56:120,r=a.slice(a.length-n,a.length);for(r.push(128),m=n+1;q>m;m++)r.push(0);return r.push(o>>>24&255),r.push(o>>>16&255),r.push(o>>>8&255),r.push(o>>>0&255),r.push(p>>>24&255),r.push(p>>>16&255),r.push(p>>>8&255),r.push(p>>>0&255),b(r),[d>>>24&255,d>>>16&255,d>>>8&255,d>>>0&255,e>>>24&255,e>>>16&255,e>>>8&255,e>>>0&255,f>>>24&255,f>>>16&255,f>>>8&255,f>>>0&255,g>>>24&255,g>>>16&255,g>>>8&255,g>>>0&255,h>>>24&255,h>>>16&255,h>>>8&255,h>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,j>>>24&255,j>>>16&255,j>>>8&255,j>>>0&255,k>>>24&255,k>>>16&255,k>>>8&255,k>>>0&255]}function j(a,b,c){function d(){for(var a=f-1;a>=f-4;a--){if(g[a]++,g[a]<=255)return;g[a]=0}}a=a.length<=64?a:i(a);var e,f=64+b.length+4,g=new Array(f),h=new Array(64),j=[];for(e=0;64>e;e++)g[e]=54;for(e=0;e<a.length;e++)g[e]^=a[e];for(e=0;e<b.length;e++)g[64+e]=b[e];for(e=f-4;f>e;e++)g[e]=0;for(e=0;64>e;e++)h[e]=92;for(e=0;e<a.length;e++)h[e]^=a[e];for(;c>=32;)d(),j=j.concat(i(h.concat(i(g)))),c-=32;return c>0&&(d(),j=j.concat(i(h.concat(i(g))).slice(0,c))),j}function k(a,b,c,d){var e,f,g=a[0]^b[c++],h=a[1]^b[c++],i=a[2]^b[c++],j=a[3]^b[c++],k=a[4]^b[c++],l=a[5]^b[c++],m=a[6]^b[c++],n=a[7]^b[c++],o=a[8]^b[c++],p=a[9]^b[c++],q=a[10]^b[c++],r=a[11]^b[c++],s=a[12]^b[c++],t=a[13]^b[c++],u=a[14]^b[c++],v=a[15]^b[c++],w=g,x=h,y=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v;for(f=0;8>f;f+=2)e=w+I,A^=e<<7|e>>>25,e=A+w,E^=e<<9|e>>>23,e=E+A,I^=e<<13|e>>>19,e=I+E,w^=e<<18|e>>>14,e=B+x,F^=e<<7|e>>>25,e=F+B,J^=e<<9|e>>>23,e=J+F,x^=e<<13|e>>>19,e=x+J,B^=e<<18|e>>>14,e=G+C,K^=e<<7|e>>>25,e=K+G,y^=e<<9|e>>>23,e=y+K,C^=e<<13|e>>>19,e=C+y,G^=e<<18|e>>>14,e=L+H,z^=e<<7|e>>>25,e=z+L,D^=e<<9|e>>>23,e=D+z,H^=e<<13|e>>>19,e=H+D,L^=e<<18|e>>>14,e=w+z,x^=e<<7|e>>>25,e=x+w,y^=e<<9|e>>>23,e=y+x,z^=e<<13|e>>>19,e=z+y,w^=e<<18|e>>>14,e=B+A,C^=e<<7|e>>>25,e=C+B,D^=e<<9|e>>>23,e=D+C,A^=e<<13|e>>>19,e=A+D,B^=e<<18|e>>>14,e=G+F,H^=e<<7|e>>>25,e=H+G,E^=e<<9|e>>>23,e=E+H,F^=e<<13|e>>>19,e=F+E,G^=e<<18|e>>>14,e=L+K,I^=e<<7|e>>>25,e=I+L,J^=e<<9|e>>>23,e=J+I,K^=e<<13|e>>>19,e=K+J,L^=e<<18|e>>>14;b[d++]=a[0]=w+g|0,b[d++]=a[1]=x+h|0,b[d++]=a[2]=y+i|0,b[d++]=a[3]=z+j|0,b[d++]=a[4]=A+k|0,b[d++]=a[5]=B+l|0,b[d++]=a[6]=C+m|0,b[d++]=a[7]=D+n|0,b[d++]=a[8]=E+o|0,b[d++]=a[9]=F+p|0,b[d++]=a[10]=G+q|0,b[d++]=a[11]=H+r|0,b[d++]=a[12]=I+s|0,b[d++]=a[13]=J+t|0,b[d++]=a[14]=K+u|0,b[d++]=a[15]=L+v|0}function l(a,b,c,d,e){for(;e--;)a[b++]=c[d++]}function m(a,b,c,d,e){for(;e--;)a[b++]^=c[d++]}function n(a,b,c,d,e){l(a,0,b,c+16*(2*e-1),16);for(var f=0;2*e>f;f+=2)k(a,b,c+16*f,d+8*f),k(a,b,c+16*f+16,d+8*f+16*e)}function o(a,b,c){return a[b+16*(2*c-1)]}function p(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b.push(d):d>127&&2048>d?(b.push(d>>6|192),b.push(63&d|128)):(b.push(d>>12|224),b.push(d>>6&63|128),b.push(63&d|128))}return b}function q(a){for(var b="0123456789abcdef".split(""),c=a.length,d=[],e=0;c>e;e++)d.push(b[a[e]>>>4&15]),d.push(b[a[e]>>>0&15]);return d.join("")}function r(a){for(var b,c,d,e,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),g=a.length,h=[],i=0;g>i;)b=g>i?a[i++]:0,c=g>i?a[i++]:0,d=g>i?a[i++]:0,e=(b<<16)+(c<<8)+d,h.push(f[e>>>18&63]),h.push(f[e>>>12&63]),h.push(f[e>>>6&63]),h.push(f[e>>>0&63]);return g%3>0&&(h[h.length-1]="=",g%3===1&&(h[h.length-2]="=")),h.join("")}function s(){for(var a=0;32*d>a;a++){var b=4*a;z[F+a]=(255&B[b+3])<<24|(255&B[b+2])<<16|(255&B[b+1])<<8|(255&B[b+0])<<0}}function t(a,b){for(var c=a;b>c;c+=2)l(A,32*c*d,z,F,32*d),n(C,z,F,G,d),l(A,32*(c+1)*d,z,G,32*d),n(C,z,G,F,d)}function u(a,b){for(var c=a;b>c;c+=2){var e=o(z,F,d)&E-1;m(z,F,A,32*e*d,32*d),n(C,z,F,G,d),e=o(z,G,d)&E-1,m(z,G,A,32*e*d,32*d),n(C,z,G,F,d)}}function v(){for(var a=0;32*d>a;a++){var b=z[F+a];B[4*a+0]=b>>>0&255,B[4*a+1]=b>>>8&255,B[4*a+2]=b>>>16&255,B[4*a+3]=b>>>24&255}}function w(a,b,c,d,e){!function f(){H(function(){d(a,b>a+c?a+c:b),a+=c,b>a?f():e()})}()}function x(b){var c=j(a,B,e);return"base64"===b?r(c):"hex"===b?q(c):c}var y=1;if(1>c||c>31)throw new Error("scrypt: logN not be between 1 and 31");var z,A,B,C,D=1<<31>>>0,E=1<<c>>>0;if(d*y>=1<<30||d>D/128/y||d>D/256||E>D/128/d)throw new Error("scrypt: parameters are too large");"string"==typeof a&&(a=p(a)),"string"==typeof b&&(b=p(b)),"undefined"!=typeof Int32Array?(z=new Int32Array(64*d),A=new Int32Array(32*E*d),C=new Int32Array(16)):(z=[],A=[],C=new Array(16)),B=j(a,b,128*y*d);var F=0,G=32*d,H="undefined"!=typeof setImmediate?setImmediate:setTimeout;"function"==typeof f&&(h=g,g=f,f=1e3),0>=f?(s(),t(0,E),u(0,E),v(),g(x(h))):(s(),w(0,E,2*f,t,function(){w(0,E,2*f,u,function(){v(),g(x(h))})}))}"undefined"!=typeof module&&(module.exports=scrypt);
/*! OpenPGP.js v2.6.2 - 2018-01-21 - this is LGPL licensed code, see LICENSE/our website http://openpgpjs.org/ for more information. */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).openpgp=e()}}(function(){return function e(t,r,n){function i(a,o){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var h=r[a]={exports:{}};t[a][0].call(h.exports,function(e){var r=t[a][1][e];return i(r||e)},h,h.exports,e,t,r,n)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){!function(e,r){function n(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}function i(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}function s(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}function a(e,t){t=!!t;for(var r=e.length,n=new Uint8Array(t?4*r:r),i=0,s=0;i<r;i++){var a=e.charCodeAt(i);if(t&&55296<=a&&a<=56319){if(++i>=r)throw new Error("Malformed string, low surrogate expected at position "+i);a=(55296^a)<<10|65536|56320^e.charCodeAt(i)}else if(!t&&a>>>8)throw new Error("Wide characters are not allowed.");!t||a<=127?n[s++]=a:a<=2047?(n[s++]=192|a>>6,n[s++]=128|63&a):a<=65535?(n[s++]=224|a>>12,n[s++]=128|a>>6&63,n[s++]=128|63&a):(n[s++]=240|a>>18,n[s++]=128|a>>12&63,n[s++]=128|a>>6&63,n[s++]=128|63&a)}return n.subarray(0,s)}function o(e){return btoa(function(e,t){t=!!t;for(var r=e.length,n=new Array(r),i=0,s=0;i<r;i++){var a=e[i];if(!t||a<128)n[s++]=a;else if(a>=192&&a<224&&i+1<r)n[s++]=(31&a)<<6|63&e[++i];else if(a>=224&&a<240&&i+2<r)n[s++]=(15&a)<<12|(63&e[++i])<<6|63&e[++i];else{if(!(a>=240&&a<248&&i+3<r))throw new Error("Malformed UTF8 character at byte offset "+i);var o=(7&a)<<18|(63&e[++i])<<12|(63&e[++i])<<6|63&e[++i];o<=65535?n[s++]=o:(o^=65536,n[s++]=55296|o>>10,n[s++]=56320|1023&o)}}for(var u="",i=0;i<s;i+=16384)u+=String.fromCharCode.apply(String,n.slice(i,i+16384<=s?i+16384:s));return u}(e))}function u(e){return"number"==typeof e}function f(e){return"string"==typeof e}function h(e){return e instanceof ArrayBuffer}function l(e){return e instanceof Uint8Array}function c(e,t){var r=t.heap,n=r?r.byteLength:t.heapSize||65536;if(4095&n||n<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return r=r||new e(new ArrayBuffer(n))}function d(e,t,r,n,i){var s=e.length-t,a=s<i?s:i;return e.set(r.subarray(n,n+a),t),a}function p(e){e=e||{},this.heap=c(Uint8Array,e).subarray(D.HEAP_DATA),this.asm=e.asm||D(r,null,this.heap.buffer),this.mode=null,this.key=null,this.reset(e)}function y(e){if(void 0!==e){if(h(e)||l(e))e=new Uint8Array(e);else{if(!f(e))throw new TypeError("unexpected iv type");e=a(e)}if(16!==e.length)throw new i("illegal iv size");var t=new DataView(e.buffer,e.byteOffset,e.byteLength);this.iv=e,this.asm.set_iv(t.getUint32(0),t.getUint32(4),t.getUint32(8),t.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0)}function g(e){return e=e||{},this.result=null,this.pos=0,this.len=0,function(e){if(void 0!==e){if(h(e)||l(e))e=new Uint8Array(e);else{if(!f(e))throw new TypeError("unexpected key type");e=a(e)}var t=e.length;if(16!==t&&24!==t&&32!==t)throw new i("illegal key size");var r=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(t>>2,r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12),t>16?r.getUint32(16):0,t>16?r.getUint32(20):0,t>24?r.getUint32(24):0,t>24?r.getUint32(28):0),this.key=e}else if(!this.key)throw new Error("key is required")}.call(this,e.key),this.hasOwnProperty("iv")&&y.call(this,e.iv),this.hasOwnProperty("padding")&&function(e){this.padding=void 0===e||!!e}.call(this,e.padding),this}function m(e){if(f(e)&&(e=a(e)),h(e)&&(e=new Uint8Array(e)),!l(e))throw new TypeError("data isn't of expected type");for(var t=this.asm,r=this.heap,n=D.ENC[this.mode],i=D.HEAP_DATA,s=this.pos,o=this.len,u=0,c=e.length||0,p=0,y=o+c&-16,g=0,m=new Uint8Array(y);c>0;)o+=g=d(r,s+o,e,u,c),u+=g,c-=g,(g=t.cipher(n,i+s,o))&&m.set(r.subarray(s,s+g),p),p+=g,g<o?(s+=g,o-=g):(s=0,o=0);return this.result=m,this.pos=s,this.len=o,this}function v(e){var t=null,r=0;void 0!==e&&(r=(t=m.call(this,e).result).length);var n=this.asm,s=this.heap,a=D.ENC[this.mode],o=D.HEAP_DATA,u=this.pos,f=this.len,h=16-f%16,l=f;if(this.hasOwnProperty("padding")){if(this.padding){for(var c=0;c<h;++c)s[u+f+c]=h;l=f+=h}else if(f%16)throw new i("data length must be a multiple of the block size")}else f+=h;var d=new Uint8Array(r+l);return r&&d.set(t),f&&n.cipher(a,o+u,f),l&&d.set(s.subarray(u,u+l),r),this.result=d,this.pos=0,this.len=0,this}function w(e){if(f(e)&&(e=a(e)),h(e)&&(e=new Uint8Array(e)),!l(e))throw new TypeError("data isn't of expected type");var t=this.asm,r=this.heap,n=D.DEC[this.mode],i=D.HEAP_DATA,s=this.pos,o=this.len,u=0,c=e.length||0,p=0,y=o+c&-16,g=0,m=0;this.hasOwnProperty("padding")&&this.padding&&(y-=g=o+c-y||16);for(var v=new Uint8Array(y);c>0;)o+=m=d(r,s+o,e,u,c),u+=m,c-=m,(m=t.cipher(n,i+s,o-(c?0:g)))&&v.set(r.subarray(s,s+m),p),p+=m,m<o?(s+=m,o-=m):(s=0,o=0);return this.result=v,this.pos=s,this.len=o,this}function b(e){var t=null,r=0;void 0!==e&&(r=(t=w.call(this,e).result).length);var n=this.asm,a=this.heap,o=D.DEC[this.mode],u=D.HEAP_DATA,f=this.pos,h=this.len,l=h;if(h>0){if(h%16){if(this.hasOwnProperty("padding"))throw new i("data length must be a multiple of the block size");h+=16-h%16}if(n.cipher(o,u+f,h),this.hasOwnProperty("padding")&&this.padding){var c=a[f+l-1];if(c<1||c>16||c>l)throw new s("bad padding");for(var d=0,p=c;p>1;p--)d|=c^a[f+l-p];if(d)throw new s("bad padding");l-=c}}var y=new Uint8Array(r+l);return r>0&&y.set(t),l>0&&y.set(a.subarray(f,f+l),r),this.result=y,this.pos=0,this.len=0,this}function k(e){this.iv=null,p.call(this,e),this.mode="CFB"}function A(e){k.call(this,e)}function _(e){k.call(this,e)}function E(e){this.nonce=null,this.counter=0,this.counterSize=0,p.call(this,e),this.mode="CTR"}function S(e){return e=e||{},g.call(this,e),function(e,t,r){if(void 0!==r){if(r<8||r>48)throw new i("illegal counter size");this.counterSize=r;var n=Math.pow(2,r)-1;this.asm.set_mask(0,0,n/4294967296|0,0|n)}else this.counterSize=r=48,this.asm.set_mask(0,0,65535,4294967295);if(void 0===e)throw new Error("nonce is required");if(h(e)||l(e))e=new Uint8Array(e);else{if(!f(e))throw new TypeError("unexpected nonce type");e=a(e)}var s=e.length;if(!s||s>16)throw new i("illegal nonce size");this.nonce=e;var o=new DataView(new ArrayBuffer(16));if(new Uint8Array(o.buffer).set(e),this.asm.set_nonce(o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)),void 0!==t){if(!u(t))throw new TypeError("unexpected counter type");if(t<0||t>=Math.pow(2,r))throw new i("illegal counter value");this.counter=t,this.asm.set_counter(0,0,t/4294967296|0,0|t)}else this.counter=t=0}.call(this,e.nonce,e.counter,e.counterSize),this}function U(e){for(var t=this.heap,r=this.asm,n=0,i=e.length||0,s=0;i>0;){for(n+=s=d(t,0,e,n,i),i-=s;15&s;)t[s++]=0;r.mac(D.MAC.GCM,D.HEAP_DATA,s)}}function K(e){this.nonce=null,this.adata=null,this.iv=null,this.counter=1,this.tagSize=16,p.call(this,e),this.mode="GCM"}function P(e){K.call(this,e)}function j(e){K.call(this,e)}function x(e){g.call(this,e=e||{});var t=this.asm,r=this.heap;t.gcm_init();var n=e.tagSize;if(void 0!==n){if(!u(n))throw new TypeError("tagSize must be a number");if(n<4||n>16)throw new i("illegal tagSize value");this.tagSize=n}else this.tagSize=16;var s=e.nonce;if(void 0===s)throw new Error("nonce is required");if(l(s)||h(s))s=new Uint8Array(s);else{if(!f(s))throw new TypeError("unexpected nonce type");s=a(s)}this.nonce=s;var o=s.length||0,c=new Uint8Array(16);12!==o?(U.call(this,s),r[0]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=0,r[11]=o>>>29,r[12]=o>>>21&255,r[13]=o>>>13&255,r[14]=o>>>5&255,r[15]=o<<3&255,t.mac(D.MAC.GCM,D.HEAP_DATA,16),t.get_iv(D.HEAP_DATA),t.set_iv(),c.set(r.subarray(0,16))):(c.set(s),c[15]=1);var d=new DataView(c.buffer);this.gamma0=d.getUint32(12),t.set_nonce(d.getUint32(0),d.getUint32(4),d.getUint32(8),0),t.set_mask(0,0,0,4294967295);var p=e.adata;if(void 0!==p&&null!==p){if(l(p)||h(p))p=new Uint8Array(p);else{if(!f(p))throw new TypeError("unexpected adata type");p=a(p)}if(p.length>z)throw new i("illegal adata length");p.length?(this.adata=p,U.call(this,p)):this.adata=null}else this.adata=null;var m=e.counter;if(void 0!==m){if(!u(m))throw new TypeError("counter must be a number");if(m<1||m>4294967295)throw new RangeError("counter must be a positive 32-bit integer");this.counter=m,t.set_counter(0,0,0,this.gamma0+m|0)}else this.counter=1,t.set_counter(0,0,0,this.gamma0+1|0);var v=e.iv;if(void 0!==v){if(!u(m))throw new TypeError("counter must be a number");this.iv=v,y.call(this,v)}return this}function T(e){if(f(e)&&(e=a(e)),h(e)&&(e=new Uint8Array(e)),!l(e))throw new TypeError("data isn't of expected type");var t=0,r=e.length||0,n=this.asm,i=this.heap,s=this.counter,o=this.pos,u=this.len,c=0,p=u+r&-16,y=0;if((s-1<<4)+u+r>z)throw new RangeError("counter overflow");for(var g=new Uint8Array(p);r>0;)u+=y=d(i,o+u,e,t,r),t+=y,r-=y,y=n.cipher(D.ENC.CTR,D.HEAP_DATA+o,u),(y=n.mac(D.MAC.GCM,D.HEAP_DATA+o,y))&&g.set(i.subarray(o,o+y),c),s+=y>>>4,c+=y,y<u?(o+=y,u-=y):(o=0,u=0);return this.result=g,this.counter=s,this.pos=o,this.len=u,this}function O(){var e=this.asm,t=this.heap,r=this.counter,n=this.tagSize,i=this.adata,s=this.pos,a=this.len,o=new Uint8Array(a+n);e.cipher(D.ENC.CTR,D.HEAP_DATA+s,a+15&-16),a&&o.set(t.subarray(s,s+a));for(var u=a;15&u;u++)t[s+u]=0;e.mac(D.MAC.GCM,D.HEAP_DATA+s,u);var f=null!==i?i.length:0,h=(r-1<<4)+a;return t[0]=t[1]=t[2]=0,t[3]=f>>>29,t[4]=f>>>21,t[5]=f>>>13&255,t[6]=f>>>5&255,t[7]=f<<3&255,t[8]=t[9]=t[10]=0,t[11]=h>>>29,t[12]=h>>>21&255,t[13]=h>>>13&255,t[14]=h>>>5&255,t[15]=h<<3&255,e.mac(D.MAC.GCM,D.HEAP_DATA,16),e.get_iv(D.HEAP_DATA),e.set_counter(0,0,0,this.gamma0),e.cipher(D.ENC.CTR,D.HEAP_DATA,16),o.set(t.subarray(0,n),a),this.result=o,this.counter=1,this.pos=0,this.len=0,this}function C(e){if(f(e)&&(e=a(e)),h(e)&&(e=new Uint8Array(e)),!l(e))throw new TypeError("data isn't of expected type");var t=0,r=e.length||0,n=this.asm,i=this.heap,s=this.counter,o=this.tagSize,u=this.pos,c=this.len,p=0,y=c+r>o?c+r-o&-16:0,g=c+r-y,m=0;if((s-1<<4)+c+r>z)throw new RangeError("counter overflow");for(var v=new Uint8Array(y);r>g;)c+=m=d(i,u+c,e,t,r-g),t+=m,r-=m,m=n.mac(D.MAC.GCM,D.HEAP_DATA+u,m),(m=n.cipher(D.DEC.CTR,D.HEAP_DATA+u,m))&&v.set(i.subarray(u,u+m),p),s+=m>>>4,p+=m,u=0,c=0;return r>0&&(c+=d(i,0,e,t,r)),this.result=v,this.counter=s,this.pos=u,this.len=c,this}function I(){var e=this.asm,t=this.heap,r=this.tagSize,i=this.adata,a=this.counter,o=this.pos,u=this.len,f=u-r;if(u<r)throw new n("authentication tag not found");for(var h=new Uint8Array(f),l=new Uint8Array(t.subarray(o+f,o+u)),c=f;15&c;c++)t[o+c]=0;e.mac(D.MAC.GCM,D.HEAP_DATA+o,c),e.cipher(D.DEC.CTR,D.HEAP_DATA+o,c),f&&h.set(t.subarray(o,o+f));var d=null!==i?i.length:0,p=(a-1<<4)+u-r;t[0]=t[1]=t[2]=0,t[3]=d>>>29,t[4]=d>>>21,t[5]=d>>>13&255,t[6]=d>>>5&255,t[7]=d<<3&255,t[8]=t[9]=t[10]=0,t[11]=p>>>29,t[12]=p>>>21&255,t[13]=p>>>13&255,t[14]=p>>>5&255,t[15]=p<<3&255,e.mac(D.MAC.GCM,D.HEAP_DATA,16),e.get_iv(D.HEAP_DATA),e.set_counter(0,0,0,this.gamma0),e.cipher(D.ENC.CTR,D.HEAP_DATA,16);for(var y=0,c=0;c<r;++c)y|=l[c]^t[c];if(y)throw new s("data integrity check failed");return this.result=h,this.counter=1,this.pos=0,this.len=0,this}function M(e){e=e||{},this.heap=c(Uint8Array,e),this.asm=e.asm||function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,u=0,f=0,h=0,l=0,c=0,d=0,p=0,y=0,g=0,m=0,v=0,w=0,b=0,k=0,A=0,_=0,E=0,S=0,U=0,K=0,P=0,j=new e.Uint8Array(r);function x(e,t,r,l,c,d,p,y,g,m,v,w,b,k,A,_){e=e|0;t=t|0;r=r|0;l=l|0;c=c|0;d=d|0;p=p|0;y=y|0;g=g|0;m=m|0;v=v|0;w=w|0;b=b|0;k=k|0;A=A|0;_=_|0;var E=0,S=0,U=0,K=0,P=0,j=0,x=0,T=0,O=0;E=n;S=i;U=s;K=a;P=o;j=u;x=f;T=h;O=e+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x428a2f98|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=t+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x71374491|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=r+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xb5c0fbcf|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=l+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xe9b5dba5|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=c+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x3956c25b|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=d+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x59f111f1|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=p+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x923f82a4|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=y+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xab1c5ed5|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=g+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xd807aa98|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=m+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x12835b01|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=v+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x243185be|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=w+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x550c7dc3|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=b+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x72be5d74|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=k+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x80deb1fe|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=A+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x9bdc06a7|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;O=_+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xc19bf174|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;e=O=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+e+m|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xe49b69c1|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=O=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+t+v|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xefbe4786|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;r=O=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+w|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x0fc19dc6|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;l=O=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+l+b|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x240ca1cc|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;c=O=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+c+k|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x2de92c6f|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;d=O=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+d+A|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x4a7484aa|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;p=O=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+p+_|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x5cb0a9dc|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;y=O=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+y+e|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x76f988da|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=O=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+g+t|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x983e5152|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;m=O=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+m+r|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xa831c66d|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;v=O=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+v+l|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xb00327c8|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;w=O=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+w+c|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xbf597fc7|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;b=O=(k>>>7^k>>>18^k>>>3^k<<25^k<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+b+d|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xc6e00bf3|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;k=O=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+k+p|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xd5a79147|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;A=O=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+A+y|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x06ca6351|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;_=O=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(k>>>17^k>>>19^k>>>10^k<<15^k<<13)+_+g|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x14292967|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;e=O=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+e+m|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x27b70a85|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=O=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+t+v|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x2e1b2138|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;r=O=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+w|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x4d2c6dfc|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;l=O=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+l+b|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x53380d13|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;c=O=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+c+k|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x650a7354|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;d=O=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+d+A|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x766a0abb|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;p=O=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+p+_|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x81c2c92e|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;y=O=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+y+e|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x92722c85|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=O=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+g+t|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xa2bfe8a1|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;m=O=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+m+r|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xa81a664b|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;v=O=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+v+l|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xc24b8b70|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;w=O=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+w+c|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xc76c51a3|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;b=O=(k>>>7^k>>>18^k>>>3^k<<25^k<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+b+d|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xd192e819|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;k=O=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+k+p|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xd6990624|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;A=O=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+A+y|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xf40e3585|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;_=O=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(k>>>17^k>>>19^k>>>10^k<<15^k<<13)+_+g|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x106aa070|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;e=O=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+e+m|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x19a4c116|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=O=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+t+v|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x1e376c08|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;r=O=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+w|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x2748774c|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;l=O=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+l+b|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x34b0bcb5|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;c=O=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+c+k|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x391c0cb3|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;d=O=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+d+A|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x4ed8aa4a|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;p=O=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+p+_|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x5b9cca4f|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;y=O=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+y+e|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x682e6ff3|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=O=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+g+t|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x748f82ee|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;m=O=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+m+r|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x78a5636f|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;v=O=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+v+l|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x84c87814|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;w=O=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+w+c|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x8cc70208|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;b=O=(k>>>7^k>>>18^k>>>3^k<<25^k<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+b+d|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0x90befffa|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;k=O=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+k+p|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xa4506ceb|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;A=O=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+A+y|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xbef9a3f7|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;_=O=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(k>>>17^k>>>19^k>>>10^k<<15^k<<13)+_+g|0;O=O+T+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(x^P&(j^x))+0xc67178f2|0;T=x;x=j;j=P;P=K+O|0;K=U;U=S;S=E;E=O+(S&U^K&(S^U))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;n=n+E|0;i=i+S|0;s=s+U|0;a=a+K|0;o=o+P|0;u=u+j|0;f=f+x|0;h=h+T|0}function T(e){e=e|0;x(j[e|0]<<24|j[e|1]<<16|j[e|2]<<8|j[e|3],j[e|4]<<24|j[e|5]<<16|j[e|6]<<8|j[e|7],j[e|8]<<24|j[e|9]<<16|j[e|10]<<8|j[e|11],j[e|12]<<24|j[e|13]<<16|j[e|14]<<8|j[e|15],j[e|16]<<24|j[e|17]<<16|j[e|18]<<8|j[e|19],j[e|20]<<24|j[e|21]<<16|j[e|22]<<8|j[e|23],j[e|24]<<24|j[e|25]<<16|j[e|26]<<8|j[e|27],j[e|28]<<24|j[e|29]<<16|j[e|30]<<8|j[e|31],j[e|32]<<24|j[e|33]<<16|j[e|34]<<8|j[e|35],j[e|36]<<24|j[e|37]<<16|j[e|38]<<8|j[e|39],j[e|40]<<24|j[e|41]<<16|j[e|42]<<8|j[e|43],j[e|44]<<24|j[e|45]<<16|j[e|46]<<8|j[e|47],j[e|48]<<24|j[e|49]<<16|j[e|50]<<8|j[e|51],j[e|52]<<24|j[e|53]<<16|j[e|54]<<8|j[e|55],j[e|56]<<24|j[e|57]<<16|j[e|58]<<8|j[e|59],j[e|60]<<24|j[e|61]<<16|j[e|62]<<8|j[e|63])}function O(e){e=e|0;j[e|0]=n>>>24;j[e|1]=n>>>16&255;j[e|2]=n>>>8&255;j[e|3]=n&255;j[e|4]=i>>>24;j[e|5]=i>>>16&255;j[e|6]=i>>>8&255;j[e|7]=i&255;j[e|8]=s>>>24;j[e|9]=s>>>16&255;j[e|10]=s>>>8&255;j[e|11]=s&255;j[e|12]=a>>>24;j[e|13]=a>>>16&255;j[e|14]=a>>>8&255;j[e|15]=a&255;j[e|16]=o>>>24;j[e|17]=o>>>16&255;j[e|18]=o>>>8&255;j[e|19]=o&255;j[e|20]=u>>>24;j[e|21]=u>>>16&255;j[e|22]=u>>>8&255;j[e|23]=u&255;j[e|24]=f>>>24;j[e|25]=f>>>16&255;j[e|26]=f>>>8&255;j[e|27]=f&255;j[e|28]=h>>>24;j[e|29]=h>>>16&255;j[e|30]=h>>>8&255;j[e|31]=h&255}function C(){n=0x6a09e667;i=0xbb67ae85;s=0x3c6ef372;a=0xa54ff53a;o=0x510e527f;u=0x9b05688c;f=0x1f83d9ab;h=0x5be0cd19;l=c=0}function I(e,t,r,d,p,y,g,m,v,w){e=e|0;t=t|0;r=r|0;d=d|0;p=p|0;y=y|0;g=g|0;m=m|0;v=v|0;w=w|0;n=e;i=t;s=r;a=d;o=p;u=y;f=g;h=m;l=v;c=w}function M(e,t){e=e|0;t=t|0;var r=0;if(e&63)return-1;while((t|0)>=64){T(e);e=e+64|0;t=t-64|0;r=r+64|0}l=l+r|0;if(l>>>0<r>>>0)c=c+1|0;return r|0}function B(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,i=0;if(e&63)return-1;if(~r)if(r&31)return-1;if((t|0)>=64){n=M(e,t)|0;if((n|0)==-1)return-1;e=e+n|0;t=t-n|0}n=n+t|0;l=l+t|0;if(l>>>0<t>>>0)c=c+1|0;j[e|t]=0x80;if((t|0)>=56){for(i=t+1|0;(i|0)<64;i=i+1|0)j[e|i]=0x00;T(e);t=0;j[e|0]=0}for(i=t+1|0;(i|0)<59;i=i+1|0)j[e|i]=0;j[e|56]=c>>>21&255;j[e|57]=c>>>13&255;j[e|58]=c>>>5&255;j[e|59]=c<<3&255|l>>>29;j[e|60]=l>>>21&255;j[e|61]=l>>>13&255;j[e|62]=l>>>5&255;j[e|63]=l<<3&255;T(e);if(~r)O(r);return n|0}function D(){n=d;i=p;s=y;a=g;o=m;u=v;f=w;h=b;l=64;c=0}function N(){n=k;i=A;s=_;a=E;o=S;u=U;f=K;h=P;l=64;c=0}function L(e,t,r,j,T,O,I,M,B,D,N,L,R,H,F,z){e=e|0;t=t|0;r=r|0;j=j|0;T=T|0;O=O|0;I=I|0;M=M|0;B=B|0;D=D|0;N=N|0;L=L|0;R=R|0;H=H|0;F=F|0;z=z|0;C();x(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,j^0x5c5c5c5c,T^0x5c5c5c5c,O^0x5c5c5c5c,I^0x5c5c5c5c,M^0x5c5c5c5c,B^0x5c5c5c5c,D^0x5c5c5c5c,N^0x5c5c5c5c,L^0x5c5c5c5c,R^0x5c5c5c5c,H^0x5c5c5c5c,F^0x5c5c5c5c,z^0x5c5c5c5c);k=n;A=i;_=s;E=a;S=o;U=u;K=f;P=h;C();x(e^0x36363636,t^0x36363636,r^0x36363636,j^0x36363636,T^0x36363636,O^0x36363636,I^0x36363636,M^0x36363636,B^0x36363636,D^0x36363636,N^0x36363636,L^0x36363636,R^0x36363636,H^0x36363636,F^0x36363636,z^0x36363636);d=n;p=i;y=s;g=a;m=o;v=u;w=f;b=h;l=64;c=0}function R(e,t,r){e=e|0;t=t|0;r=r|0;var l=0,c=0,d=0,p=0,y=0,g=0,m=0,v=0,w=0;if(e&63)return-1;if(~r)if(r&31)return-1;w=B(e,t,-1)|0;l=n,c=i,d=s,p=a,y=o,g=u,m=f,v=h;N();x(l,c,d,p,y,g,m,v,0x80000000,0,0,0,0,0,0,768);if(~r)O(r);return w|0}function H(e,t,r,l,c){e=e|0;t=t|0;r=r|0;l=l|0;c=c|0;var d=0,p=0,y=0,g=0,m=0,v=0,w=0,b=0,k=0,A=0,_=0,E=0,S=0,U=0,K=0,P=0;if(e&63)return-1;if(~c)if(c&31)return-1;j[e+t|0]=r>>>24;j[e+t+1|0]=r>>>16&255;j[e+t+2|0]=r>>>8&255;j[e+t+3|0]=r&255;R(e,t+4|0,-1)|0;d=k=n,p=A=i,y=_=s,g=E=a,m=S=o,v=U=u,w=K=f,b=P=h;l=l-1|0;while((l|0)>0){D();x(k,A,_,E,S,U,K,P,0x80000000,0,0,0,0,0,0,768);k=n,A=i,_=s,E=a,S=o,U=u,K=f,P=h;N();x(k,A,_,E,S,U,K,P,0x80000000,0,0,0,0,0,0,768);k=n,A=i,_=s,E=a,S=o,U=u,K=f,P=h;d=d^n;p=p^i;y=y^s;g=g^a;m=m^o;v=v^u;w=w^f;b=b^h;l=l-1|0}n=d;i=p;s=y;a=g;o=m;u=v;f=w;h=b;if(~c)O(c);return 0}return{reset:C,init:I,process:M,finish:B,hmac_reset:D,hmac_init:L,hmac_finish:R,pbkdf2_generate_block:H}}(r,null,this.heap.buffer),this.BLOCK_SIZE=X,this.HASH_SIZE=W,this.reset()}function B(e){if(void 0===e)throw new SyntaxError("data required");return(null===J&&(J=new M({heapSize:1048576})),J).reset().process(e).finish().result}n.prototype=Object.create(Error.prototype,{name:{value:"IllegalStateError"}}),i.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),s.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}});r.Float64Array||r.Float32Array;r.IllegalStateError=n,r.IllegalArgumentError=i,r.SecurityError=s;var D=function(){"use strict";function e(e,t){var i=r[(n[e]+n[t])%255];return 0!==e&&0!==t||(i=0),i}function t(){function t(e){var t,i,s;for(i=s=function(e){var t=r[255-n[e]];return 0===e&&(t=0),t}(e),t=0;t<4;t++)s^=i=255&(i<<1|i>>>7);return s^=99}u||function(){r=[],n=[];var e,t,i=1;for(e=0;e<255;e++)r[e]=i,t=128&i,i<<=1,i&=255,128===t&&(i^=27),i^=r[e],n[r[e]]=e;r[255]=r[0],n[0]=0,u=!0}(),i=[],s=[],a=[[],[],[],[]],o=[[],[],[],[]];for(var f=0;f<256;f++){var h=t(f);i[f]=h,s[h]=f,a[0][f]=e(2,h)<<24|h<<16|h<<8|e(3,h),o[0][h]=e(14,f)<<24|e(9,f)<<16|e(13,f)<<8|e(11,f);for(var l=1;l<4;l++)a[l][f]=a[l-1][f]>>>8|a[l-1][f]<<24,o[l][h]=o[l-1][h]>>>8|o[l-1][h]<<24}}var r,n,i,s,a,o,u=!1,f=function(e,r,n){t();var u=new Uint32Array(n);u.set(i,512),u.set(s,768);for(var f=0;f<4;f++)u.set(a[f],4096+1024*f>>2),u.set(o[f],8192+1024*f>>2);var h=function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,u=0,f=0,h=0,l=0,c=0,d=0,p=0,y=0,g=0,m=0,v=0,w=0,b=0,k=0,A=0,_=0;var E=new e.Uint32Array(r),S=new e.Uint8Array(r);function U(e,t,r,o,u,f,h,l){e=e|0;t=t|0;r=r|0;o=o|0;u=u|0;f=f|0;h=h|0;l=l|0;var c=0,d=0,p=0,y=0,g=0,m=0,v=0,w=0;c=r|0x400,d=r|0x800,p=r|0xc00;u=u^E[(e|0)>>2],f=f^E[(e|4)>>2],h=h^E[(e|8)>>2],l=l^E[(e|12)>>2];for(w=16;(w|0)<=o<<4;w=w+16|0){y=E[(r|u>>22&1020)>>2]^E[(c|f>>14&1020)>>2]^E[(d|h>>6&1020)>>2]^E[(p|l<<2&1020)>>2]^E[(e|w|0)>>2],g=E[(r|f>>22&1020)>>2]^E[(c|h>>14&1020)>>2]^E[(d|l>>6&1020)>>2]^E[(p|u<<2&1020)>>2]^E[(e|w|4)>>2],m=E[(r|h>>22&1020)>>2]^E[(c|l>>14&1020)>>2]^E[(d|u>>6&1020)>>2]^E[(p|f<<2&1020)>>2]^E[(e|w|8)>>2],v=E[(r|l>>22&1020)>>2]^E[(c|u>>14&1020)>>2]^E[(d|f>>6&1020)>>2]^E[(p|h<<2&1020)>>2]^E[(e|w|12)>>2];u=y,f=g,h=m,l=v}n=E[(t|u>>22&1020)>>2]<<24^E[(t|f>>14&1020)>>2]<<16^E[(t|h>>6&1020)>>2]<<8^E[(t|l<<2&1020)>>2]^E[(e|w|0)>>2],i=E[(t|f>>22&1020)>>2]<<24^E[(t|h>>14&1020)>>2]<<16^E[(t|l>>6&1020)>>2]<<8^E[(t|u<<2&1020)>>2]^E[(e|w|4)>>2],s=E[(t|h>>22&1020)>>2]<<24^E[(t|l>>14&1020)>>2]<<16^E[(t|u>>6&1020)>>2]<<8^E[(t|f<<2&1020)>>2]^E[(e|w|8)>>2],a=E[(t|l>>22&1020)>>2]<<24^E[(t|u>>14&1020)>>2]<<16^E[(t|f>>6&1020)>>2]<<8^E[(t|h<<2&1020)>>2]^E[(e|w|12)>>2]}function K(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;U(0x0000,0x0800,0x1000,_,e,t,r,n)}function P(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var s=0;U(0x0400,0x0c00,0x2000,_,e,n,r,t);s=i,i=a,a=s}function j(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;U(0x0000,0x0800,0x1000,_,o^e,u^t,f^r,h^l);o=n,u=i,f=s,h=a}function x(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;var c=0;U(0x0400,0x0c00,0x2000,_,e,l,r,t);c=i,i=a,a=c;n=n^o,i=i^u,s=s^f,a=a^h;o=e,u=t,f=r,h=l}function T(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;U(0x0000,0x0800,0x1000,_,o,u,f,h);o=n=n^e,u=i=i^t,f=s=s^r,h=a=a^l}function O(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;U(0x0000,0x0800,0x1000,_,o,u,f,h);n=n^e,i=i^t,s=s^r,a=a^l;o=e,u=t,f=r,h=l}function C(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;U(0x0000,0x0800,0x1000,_,o,u,f,h);o=n,u=i,f=s,h=a;n=n^e,i=i^t,s=s^r,a=a^l}function I(e,t,r,o){e=e|0;t=t|0;r=r|0;o=o|0;U(0x0000,0x0800,0x1000,_,l,c,d,p);p=~v&p|v&p+1,d=~m&d|m&d+((p|0)==0),c=~g&c|g&c+((d|0)==0),l=~y&l|y&l+((c|0)==0);n=n^e,i=i^t,s=s^r,a=a^o}function M(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var i=0,s=0,a=0,l=0,c=0,d=0,p=0,y=0,g=0,m=0;e=e^o,t=t^u,r=r^f,n=n^h;i=w|0,s=b|0,a=k|0,l=A|0;for(;(g|0)<128;g=g+1|0){if(i>>>31){c=c^e,d=d^t,p=p^r,y=y^n}i=i<<1|s>>>31,s=s<<1|a>>>31,a=a<<1|l>>>31,l=l<<1;m=n&1;n=n>>>1|r<<31,r=r>>>1|t<<31,t=t>>>1|e<<31,e=e>>>1;if(m)e=e^0xe1000000}o=c,u=d,f=p,h=y}function B(e){e=e|0;_=e}function D(e,t,r,o){e=e|0;t=t|0;r=r|0;o=o|0;n=e,i=t,s=r,a=o}function N(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;o=e,u=t,f=r,h=n}function L(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;l=e,c=t,d=r,p=n}function R(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;y=e,g=t,m=r,v=n}function H(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;p=~v&p|v&n,d=~m&d|m&r,c=~g&c|g&t,l=~y&l|y&e}function F(e){e=e|0;if(e&15)return-1;S[e|0]=n>>>24,S[e|1]=n>>>16&255,S[e|2]=n>>>8&255,S[e|3]=n&255,S[e|4]=i>>>24,S[e|5]=i>>>16&255,S[e|6]=i>>>8&255,S[e|7]=i&255,S[e|8]=s>>>24,S[e|9]=s>>>16&255,S[e|10]=s>>>8&255,S[e|11]=s&255,S[e|12]=a>>>24,S[e|13]=a>>>16&255,S[e|14]=a>>>8&255,S[e|15]=a&255;return 16}function z(e){e=e|0;if(e&15)return-1;S[e|0]=o>>>24,S[e|1]=o>>>16&255,S[e|2]=o>>>8&255,S[e|3]=o&255,S[e|4]=u>>>24,S[e|5]=u>>>16&255,S[e|6]=u>>>8&255,S[e|7]=u&255,S[e|8]=f>>>24,S[e|9]=f>>>16&255,S[e|10]=f>>>8&255,S[e|11]=f&255,S[e|12]=h>>>24,S[e|13]=h>>>16&255,S[e|14]=h>>>8&255,S[e|15]=h&255;return 16}function q(){K(0,0,0,0);w=n,b=i,k=s,A=a}function G(e,t,r){e=e|0;t=t|0;r=r|0;var o=0;if(t&15)return-1;while((r|0)>=16){Z[e&7](S[t|0]<<24|S[t|1]<<16|S[t|2]<<8|S[t|3],S[t|4]<<24|S[t|5]<<16|S[t|6]<<8|S[t|7],S[t|8]<<24|S[t|9]<<16|S[t|10]<<8|S[t|11],S[t|12]<<24|S[t|13]<<16|S[t|14]<<8|S[t|15]);S[t|0]=n>>>24,S[t|1]=n>>>16&255,S[t|2]=n>>>8&255,S[t|3]=n&255,S[t|4]=i>>>24,S[t|5]=i>>>16&255,S[t|6]=i>>>8&255,S[t|7]=i&255,S[t|8]=s>>>24,S[t|9]=s>>>16&255,S[t|10]=s>>>8&255,S[t|11]=s&255,S[t|12]=a>>>24,S[t|13]=a>>>16&255,S[t|14]=a>>>8&255,S[t|15]=a&255;o=o+16|0,t=t+16|0,r=r-16|0}return o|0}function V(e,t,r){e=e|0;t=t|0;r=r|0;var n=0;if(t&15)return-1;while((r|0)>=16){Y[e&1](S[t|0]<<24|S[t|1]<<16|S[t|2]<<8|S[t|3],S[t|4]<<24|S[t|5]<<16|S[t|6]<<8|S[t|7],S[t|8]<<24|S[t|9]<<16|S[t|10]<<8|S[t|11],S[t|12]<<24|S[t|13]<<16|S[t|14]<<8|S[t|15]);n=n+16|0,t=t+16|0,r=r-16|0}return n|0}var Z=[K,P,j,x,T,O,C,I];var Y=[j,M];return{set_rounds:B,set_state:D,set_iv:N,set_nonce:L,set_mask:R,set_counter:H,get_state:F,get_iv:z,gcm_init:q,cipher:G,mac:V}}(e,r,n);return h.set_key=function(e,t,r,n,s,a,f,l,c){var d=u.subarray(0,60),p=u.subarray(256,316);d.set([t,r,n,s,a,f,l,c]);for(var y=e,g=1;y<4*e+28;y++)w=d[y-1],(y%e==0||8===e&&y%e==4)&&(w=i[w>>>24]<<24^i[w>>>16&255]<<16^i[w>>>8&255]<<8^i[255&w]),y%e==0&&(w=w<<8^w>>>24^g<<24,g=g<<1^(128&g?27:0)),d[y]=d[y-e]^w;for(var m=0;m<y;m+=4)for(var v=0;v<4;v++){var w=d[y-(4+m)+(4-v)%4];p[m+v]=m<4||m>=y-4?w:o[0][i[w>>>24]]^o[1][i[w>>>16&255]]^o[2][i[w>>>8&255]]^o[3][i[255&w]]}h.set_rounds(e+5)},h};return f.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},f.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},f.MAC={CBC:0,GCM:1},f.HEAP_DATA=16384,f}(),N=k.prototype;N.BLOCK_SIZE=16,N.reset=g,N.encrypt=v,N.decrypt=b;var L=A.prototype;L.BLOCK_SIZE=16,L.reset=g,L.process=m,L.finish=v;var R=_.prototype;R.BLOCK_SIZE=16,R.reset=g,R.process=w,R.finish=b;var H=E.prototype;H.BLOCK_SIZE=16,H.reset=S,H.encrypt=v,H.decrypt=v;var F=function(e){E.call(this,e)}.prototype;F.BLOCK_SIZE=16,F.reset=S,F.process=m,F.finish=v;var z=68719476704,q=K.prototype;q.BLOCK_SIZE=16,q.reset=x,q.encrypt=function(e){var t=T.call(this,e).result,r=O.call(this).result,n=new Uint8Array(t.length+r.length);return t.length&&n.set(t),r.length&&n.set(r,t.length),this.result=n,this},q.decrypt=function(e){var t=C.call(this,e).result,r=I.call(this).result,n=new Uint8Array(t.length+r.length);return t.length&&n.set(t),r.length&&n.set(r,t.length),this.result=n,this};var G=P.prototype;G.BLOCK_SIZE=16,G.reset=x,G.process=T,G.finish=O;var V=j.prototype;V.BLOCK_SIZE=16,V.reset=x,V.process=C,V.finish=I;var Z=new Uint8Array(1048576),Y=D(r,null,Z.buffer);e.AES_CFB=k,e.AES_CFB.encrypt=function(e,t,r){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new k({heap:Z,asm:Y,key:t,iv:r}).encrypt(e).result},e.AES_CFB.decrypt=function(e,t,r){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new k({heap:Z,asm:Y,key:t,iv:r}).decrypt(e).result},e.AES_CFB.Encrypt=A,e.AES_CFB.Decrypt=_,e.AES_GCM=K,e.AES_GCM.encrypt=function(e,t,r,n,i){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");if(void 0===r)throw new SyntaxError("nonce required");return new K({heap:Z,asm:Y,key:t,nonce:r,adata:n,tagSize:i}).encrypt(e).result},e.AES_GCM.decrypt=function(e,t,r,n,i){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");if(void 0===r)throw new SyntaxError("nonce required");return new K({heap:Z,asm:Y,key:t,nonce:r,adata:n,tagSize:i}).decrypt(e).result},e.AES_GCM.Encrypt=P,e.AES_GCM.Decrypt=j;var X=64,W=32;M.BLOCK_SIZE=X,M.HASH_SIZE=W;var $=M.prototype;$.reset=function(){return this.result=null,this.pos=0,this.len=0,this.asm.reset(),this},$.process=function(e){if(null!==this.result)throw new n("state must be reset before processing new data");if(f(e)&&(e=a(e)),h(e)&&(e=new Uint8Array(e)),!l(e))throw new TypeError("data isn't of expected type");for(var t=this.asm,r=this.heap,i=this.pos,s=this.len,o=0,u=e.length,c=0;u>0;)s+=c=d(r,i+s,e,o,u),o+=c,u-=c,i+=c=t.process(i,s),(s-=c)||(i=0);return this.pos=i,this.len=s,this},$.finish=function(){if(null!==this.result)throw new n("state must be reset before processing new data");return this.asm.finish(this.pos,this.len,0),this.result=new Uint8Array(this.HASH_SIZE),this.result.set(this.heap.subarray(0,this.HASH_SIZE)),this.pos=0,this.len=0,this};var J=null;M.bytes=B,M.hex=function(e){return function(e){for(var t="",r=0;r<e.length;r++){var n=(255&e[r]).toString(16);n.length<2&&(t+="0"),t+=n}return t}(B(e))},M.base64=function(e){return o(B(e))},e.SHA256=M,"object"==typeof t&&t.exports?t.exports=e:r.asmCrypto=e}({},function(){return this}())},{}],2:[function(e,t,r){(function(n,i){!function(e,n){"object"==typeof r&&void 0!==t?t.exports=n():e.ES6Promise=n()}(this,function(){"use strict";function t(e){return"function"==typeof e}function r(){var e=setTimeout;return function(){return e(s,1)}}function s(){for(var e=0;e<E;e+=2){(0,C[e])(C[e+1]),C[e]=void 0,C[e+1]=void 0}E=0}function a(e,t){var r=arguments,n=this,i=new this.constructor(u);void 0===i[M]&&w(i);var s=n._state;return s?function(){var e=r[s-1];K(function(){return v(s,i,e,n._result)})}():y(n,i,e,t),i}function o(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(u);return l(t,e),t}function u(){}function f(e){try{return e.then}catch(e){return L.error=e,L}}function h(e,r,n){r.constructor===e.constructor&&n===a&&r.constructor.resolve===o?function(e,t){t._state===D?d(e,t._result):t._state===N?p(e,t._result):y(t,void 0,function(t){return l(e,t)},function(t){return p(e,t)})}(e,r):n===L?(p(e,L.error),L.error=null):void 0===n?d(e,r):t(n)?function(e,t,r){K(function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?l(e,r):d(e,r))},function(t){n||(n=!0,p(e,t))},e._label);!n&&i&&(n=!0,p(e,i))},e)}(e,r,n):d(e,r)}function l(e,t){e===t?p(e,new TypeError("You cannot resolve a promise with itself")):!function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?d(e,t):h(e,t,f(t))}function c(e){e._onerror&&e._onerror(e._result),g(e)}function d(e,t){e._state===B&&(e._result=t,e._state=D,0!==e._subscribers.length&&K(g,e))}function p(e,t){e._state===B&&(e._state=N,e._result=t,K(c,e))}function y(e,t,r,n){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+D]=r,i[s+N]=n,0===s&&e._state&&K(g,e)}function g(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,s=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?v(r,n,i,s):i(s);e._subscribers.length=0}}function m(){this.error=null}function v(e,r,n,i){var s=t(n),a=void 0,o=void 0,u=void 0,f=void 0;if(s){if((a=function(e,t){try{return e(t)}catch(e){return R.error=e,R}}(n,i))===R?(f=!0,o=a.error,a.error=null):u=!0,r===a)return void p(r,new TypeError("A promises callback cannot return that same promise."))}else a=i,u=!0;r._state!==B||(s&&u?l(r,a):f?p(r,o):e===D?d(r,a):e===N&&p(r,a))}function w(e){e[M]=H++,e._state=void 0,e._result=void 0,e._subscribers=[]}function b(e,t){this._instanceConstructor=e,this.promise=new e(u),this.promise[M]||w(this.promise),_(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?d(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&d(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}function k(e){this[M]=H++,this._result=this._state=void 0,this._subscribers=[],u!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof k?function(e,t){try{t(function(t){l(e,t)},function(t){p(e,t)})}catch(t){p(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var A=void 0,_=A=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},E=0,S=void 0,U=void 0,K=function(e,t){C[E]=e,C[E+1]=t,2===(E+=2)&&(U?U(s):I())},P="undefined"!=typeof window?window:void 0,j=P||{},x=j.MutationObserver||j.WebKitMutationObserver,T="undefined"==typeof self&&void 0!==n&&"[object process]"==={}.toString.call(n),O="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,C=new Array(1e3),I=void 0;I=T?function(){return n.nextTick(s)}:x?function(){var e=0,t=new x(s),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():O?function(){var e=new MessageChannel;return e.port1.onmessage=s,function(){return e.port2.postMessage(0)}}():void 0===P&&"function"==typeof e?function(){try{var t=e("vertx");return void 0!==(S=t.runOnLoop||t.runOnContext)?function(){S(s)}:r()}catch(e){return r()}}():r();var M=Math.random().toString(36).substring(16),B=void 0,D=1,N=2,L=new m,R=new m,H=0;return b.prototype._enumerate=function(e){for(var t=0;this._state===B&&t<e.length;t++)this._eachEntry(e[t],t)},b.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===o){var i=f(e);if(i===a&&e._state!==B)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===k){var s=new r(u);h(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},b.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===B&&(this._remaining--,e===N?p(n,r):this._result[t]=r),0===this._remaining&&d(n,this._result)},b.prototype._willSettleAt=function(e,t){var r=this;y(e,void 0,function(e){return r._settledAt(D,t,e)},function(e){return r._settledAt(N,t,e)})},k.all=function(e){return new b(this,e).promise},k.race=function(e){var t=this;return new t(_(e)?function(r,n){for(var i=e.length,s=0;s<i;s++)t.resolve(e[s]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},k.resolve=o,k.reject=function(e){var t=new this(u);return p(t,e),t},k._setScheduler=function(e){U=e},k._setAsap=function(e){K=e},k._asap=K,k.prototype={constructor:k,then:a,catch:function(e){return this.then(null,e)}},k.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=k},k.Promise=k,k})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],3:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(h===setTimeout)return setTimeout(e,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function a(){y&&d&&(y=!1,d.length?p=d.concat(p):g=-1,p.length&&o())}function o(){if(!y){var e=s(a);y=!0;for(var t=p.length;t;){for(d=p,p=[];++g<t;)d&&d[g].run();g=-1,t=p.length}d=null,y=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function f(){}var h,l,c=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(e){h=n}try{l="function"==typeof clearTimeout?clearTimeout:i}catch(e){l=i}}();var d,p=[],y=!1,g=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new u(e,t)),1!==p.length||y||s(o)},u.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=f,c.addListener=f,c.once=f,c.off=f,c.removeListener=f,c.removeAllListeners=f,c.emit=f,c.prependListener=f,c.prependOnceListener=f,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],4:[function(e,t,r){(function(e){!function(){function r(t){"use strict";for(var i=function(t){if("string"==typeof t)return"string";if(t instanceof Array)return"array";if(void 0!==e&&e.Buffer&&e.Buffer.isBuffer(t))return"buffer";if(t instanceof ArrayBuffer)return"arraybuffer";if(t.buffer instanceof ArrayBuffer)return"view";if(t instanceof Blob)return"blob";throw new Error("Unsupported data type.")},s={fill:0},a=function(e){for(e+=9;e%64>0;e+=1);return e},o=function(e,t,r,n,i){var s,a=i%4,o=(n+a)%4,u=n-o;switch(a){case 0:e[i]=this[r+3];case 1:e[i+1-(a<<1)|0]=this[r+2];case 2:e[i+2-(a<<1)|0]=this[r+1];case 3:e[i+3-(a<<1)|0]=this[r]}if(!(n<o+a)){for(s=4-a;s<u;s=s+4|0)t[i+s>>2|0]=this[r+s]<<24|this[r+s+1]<<16|this[r+s+2]<<8|this[r+s+3];switch(o){case 3:e[i+u+1|0]=this[r+u+2];case 2:e[i+u+2|0]=this[r+u+1];case 1:e[i+u+3|0]=this[r+u]}}},u=function(e){switch(i(e)){case"string":return function(e,t,r,n,i){var s,a=i%4,o=(n+a)%4,u=n-o;switch(a){case 0:e[i]=this.charCodeAt(r+3);case 1:e[i+1-(a<<1)|0]=this.charCodeAt(r+2);case 2:e[i+2-(a<<1)|0]=this.charCodeAt(r+1);case 3:e[i+3-(a<<1)|0]=this.charCodeAt(r)}if(!(n<o+a)){for(s=4-a;s<u;s=s+4|0)t[i+s>>2]=this.charCodeAt(r+s)<<24|this.charCodeAt(r+s+1)<<16|this.charCodeAt(r+s+2)<<8|this.charCodeAt(r+s+3);switch(o){case 3:e[i+u+1|0]=this.charCodeAt(r+u+2);case 2:e[i+u+2|0]=this.charCodeAt(r+u+1);case 1:e[i+u+3|0]=this.charCodeAt(r+u)}}}.bind(e);case"array":case"buffer":return o.bind(e);case"arraybuffer":return o.bind(new Uint8Array(e));case"view":return o.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return function(e,t,r,i,s){var a,o=s%4,u=(i+o)%4,f=i-u,h=new Uint8Array(n.readAsArrayBuffer(this.slice(r,r+i)));switch(o){case 0:e[s]=h[3];case 1:e[s+1-(o<<1)|0]=h[2];case 2:e[s+2-(o<<1)|0]=h[1];case 3:e[s+3-(o<<1)|0]=h[0]}if(!(i<u+o)){for(a=4-o;a<f;a=a+4|0)t[s+a>>2|0]=h[a]<<24|h[a+1]<<16|h[a+2]<<8|h[a+3];switch(u){case 3:e[s+f+1|0]=h[f+2];case 2:e[s+f+2|0]=h[f+1];case 1:e[s+f+3|0]=h[f]}}}.bind(e)}},f=new Array(256),h=0;h<256;h++)f[h]=(h<16?"0":"")+h.toString(16);var l=function(e){for(var t=new Uint8Array(e),r=new Array(e.byteLength),n=0;n<r.length;n++)r[n]=f[t[n]];return r.join("")};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");s.offset=0,s.maxChunkLen=e,s.padMaxChunkLen=a(e),s.heap=new ArrayBuffer(function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t}(s.padMaxChunkLen+320+20)),s.h32=new Int32Array(s.heap),s.h8=new Int8Array(s.heap),s.core=new r._core({Int32Array:Int32Array,DataView:DataView},{},s.heap),s.buffer=null}(t||65536);var c=function(e,t){s.offset=0;var r=new Int32Array(e,t+320,5);r[0]=1732584193,r[1]=-271733879,r[2]=-1732584194,r[3]=271733878,r[4]=-1009589776},d=function(e,t){var r=a(e),n=new Int32Array(s.heap,0,r>>2);return function(e,t){var r=new Uint8Array(e.buffer),n=t%4,i=t-n;switch(n){case 0:r[i+3]=0;case 1:r[i+2]=0;case 2:r[i+1]=0;case 3:r[i+0]=0}for(var s=1+(t>>2);s<e.length;s++)e[s]=0}(n,e),function(e,t,r){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=r/(1<<29)|0,e[15+(2+(t>>2)&-16)]=r<<3}(n,e,t),r},p=function(e,t,r,n){u(e)(s.h8,s.h32,t,r,n||0)},y=function(e,t,r,n,i){var a=r;p(e,t,r),i&&(a=d(r,n)),s.core.hash(a,s.padMaxChunkLen)},g=function(e,t){var r=new Int32Array(e,t+320,5),n=new Int32Array(5),i=new DataView(n.buffer);return i.setInt32(0,r[0],!1),i.setInt32(4,r[1],!1),i.setInt32(8,r[2],!1),i.setInt32(12,r[3],!1),i.setInt32(16,r[4],!1),n},m=this.rawDigest=function(e){var t=e.byteLength||e.length||e.size||0;c(s.heap,s.padMaxChunkLen);var r=0,n=s.maxChunkLen;for(r=0;t>r+n;r+=n)y(e,r,n,t,!1);return y(e,r,t-r,t,!0),g(s.heap,s.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return l(m(e).buffer)},this.resetState=function(){return c(s.heap,s.padMaxChunkLen),this},this.append=function(e){var t,r=0,n=e.byteLength||e.length||e.size||0,i=s.offset%s.maxChunkLen;for(s.offset+=n;r<n;)t=Math.min(n-r,s.maxChunkLen-i),p(e,r,t,i),r+=t,(i+=t)===s.maxChunkLen&&(s.core.hash(s.maxChunkLen,s.padMaxChunkLen),i=0);return this},this.getState=function(){var e;if(s.offset%s.maxChunkLen)e=s.heap.slice(0);else{var t=new Int32Array(s.heap,s.padMaxChunkLen+320,5);e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}return{offset:s.offset,heap:e}},this.setState=function(e){if(s.offset=e.offset,20===e.heap.byteLength){new Int32Array(s.heap,s.padMaxChunkLen+320,5).set(new Int32Array(e.heap))}else s.h32.set(new Int32Array(e.heap));return this};var v=this.rawEnd=function(){var e=s.offset,t=e%s.maxChunkLen,r=d(t,e);s.core.hash(r,s.padMaxChunkLen);var n=g(s.heap,s.padMaxChunkLen);return c(s.heap,s.padMaxChunkLen),n};this.end=function(){return l(v().buffer)}}if(r._core=function(e,t,r){"use asm";var n=new e.Int32Array(r);function i(e,t){e=e|0;t=t|0;var r=0,i=0,s=0,a=0,o=0,u=0,f=0,h=0,l=0,c=0,d=0,p=0,y=0,g=0;s=n[t+320>>2]|0;o=n[t+324>>2]|0;f=n[t+328>>2]|0;l=n[t+332>>2]|0;d=n[t+336>>2]|0;for(r=0;(r|0)<(e|0);r=r+64|0){a=s;u=o;h=f;c=l;p=d;for(i=0;(i|0)<64;i=i+4|0){g=n[r+i>>2]|0;y=((s<<5|s>>>27)+(o&f|~o&l)|0)+((g+d|0)+1518500249|0)|0;d=l;l=f;f=o<<30|o>>>2;o=s;s=y;n[e+i>>2]=g}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){g=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;y=((s<<5|s>>>27)+(o&f|~o&l)|0)+((g+d|0)+1518500249|0)|0;d=l;l=f;f=o<<30|o>>>2;o=s;s=y;n[i>>2]=g}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){g=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;y=((s<<5|s>>>27)+(o^f^l)|0)+((g+d|0)+1859775393|0)|0;d=l;l=f;f=o<<30|o>>>2;o=s;s=y;n[i>>2]=g}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){g=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;y=((s<<5|s>>>27)+(o&f|o&l|f&l)|0)+((g+d|0)-1894007588|0)|0;d=l;l=f;f=o<<30|o>>>2;o=s;s=y;n[i>>2]=g}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){g=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;y=((s<<5|s>>>27)+(o^f^l)|0)+((g+d|0)-899497514|0)|0;d=l;l=f;f=o<<30|o>>>2;o=s;s=y;n[i>>2]=g}s=s+a|0;o=o+u|0;f=f+h|0;l=l+c|0;d=d+p|0}n[t+320>>2]=s;n[t+324>>2]=o;n[t+328>>2]=f;n[t+332>>2]=l;n[t+336>>2]=d}return{hash:i}},void 0!==t?t.exports=r:"undefined"!=typeof window&&(window.Rusha=r),"undefined"!=typeof FileReaderSync){var n=new FileReaderSync,i=function(e,t,r,n,s){var a=new self.FileReader;a.onloadend=function(){var o=a.result;t+=a.result.byteLength;try{e.append(o)}catch(e){return void s(e)}t<n.size?i(e,t,r,n,s):s(null,e.end())},a.readAsArrayBuffer(n.slice(t,t+r))};self.onmessage=function(e){var t=e.data.data,n=e.data.file,s=e.data.id;if(void 0!==s&&(n||t)){var a=e.data.blockSize||4194304,o=new r(a);o.resetState();var u=function(e,t){e?self.postMessage({id:s,error:e.name}):self.postMessage({id:s,hash:t})};t&&function(e,t,r){try{r(null,e.digest(t))}catch(e){return r(e)}}(o,t,u),n&&i(o,0,a,n,u)}}}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(this instanceof i))return new i(e,t);if(this.text=e.replace(/\r/g,"").replace(/[\t ]+\n/g,"\n").replace(/\n/g,"\r\n"),t&&!(t instanceof f.Signature))throw new Error("Invalid signature input");this.signature=t||new f.Signature(new a.default.List)}Object.defineProperty(r,"__esModule",{value:!0}),r.CleartextMessage=i,r.readArmored=function(e){var t=u.default.decode(e);if(t.type!==o.default.armor.signed)throw new Error("No cleartext signed message.");var r=new a.default.List;r.read(t.data),function(e,t){var r=function(e){function r(e){return t[n].hashAlgorithm===e}for(var n=0;n<t.length;n++)if(t[n].tag===o.default.packet.signature&&!e.some(r))return!1;return!0},n=null,i=[];if(e.forEach(function(e){if(!(n=e.match(/Hash: (.+)/)))throw new Error('Only "Hash" header allowed in cleartext signed message');n=(n=(n=n[1].replace(/\s/g,"")).split(",")).map(function(e){e=e.toLowerCase();try{return o.default.write(o.default.hash,e)}catch(t){throw new Error("Unknown hash algorithm in armor header: "+e)}}),i=i.concat(n)}),!i.length&&!r([o.default.hash.md5]))throw new Error('If no "Hash" header in cleartext signed message, then only MD5 signatures allowed');if(!r(i))throw new Error("Hash algorithm mismatch in armor header and signature")}(t.headers,r);var n=new f.Signature(r);return new i(t.text,n)};var s=n(e("./config")),a=n(e("./packet")),o=n(e("./enums.js")),u=n(e("./encoding/armor.js")),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./signature.js"));i.prototype.getSigningKeyIds=function(){var e=[];return this.signature.packets.forEach(function(t){e.push(t.issuerKeyId)}),e},i.prototype.sign=function(e){return new i(this.text,this.signDetached(e))},i.prototype.signDetached=function(e){var t=new a.default.List,r=new a.default.Literal;r.setText(this.text);for(var n=0;n<e.length;n++){if(e[n].isPublic())throw new Error("Need private key for signing");var i=new a.default.Signature;i.signatureType=o.default.signature.text,i.hashAlgorithm=s.default.prefer_hash_algorithm;var u=e[n].getSigningKeyPacket();if(i.publicKeyAlgorithm=u.algorithm,!u.isDecrypted)throw new Error("Private key is not decrypted.");i.sign(u,r),t.push(i)}return new f.Signature(t)},i.prototype.verify=function(e){return this.verifyDetached(this.signature,e)},i.prototype.verifyDetached=function(e,t){var r=[],n=e.packets,i=new a.default.Literal;i.setText(this.text);for(var s=0;s<n.length;s++){for(var o=null,u=0;u<t.length&&!(o=t[u].getSigningKeyPacket(n[s].issuerKeyId));u++);var h={};o?(h.keyid=n[s].issuerKeyId,h.valid=n[s].verify(o,i)):(h.keyid=n[s].issuerKeyId,h.valid=null);var l=new a.default.List;l.push(n[s]),h.signature=new f.Signature(l),r.push(h)}return r},i.prototype.getText=function(){return this.text.replace(/\r\n/g,"\n")},i.prototype.armor=function(){var e={hash:o.default.read(o.default.hash,s.default.prefer_hash_algorithm).toUpperCase(),text:this.text,data:this.signature.packets.write()};return u.default.encode(o.default.armor.signed,e)}},{"./config":10,"./encoding/armor.js":33,"./enums.js":35,"./packet":47,"./signature.js":66}],6:[function(e,t,r){(function(){"use strict";function e(e,t){var r=e.split("."),n=h;!(r[0]in n)&&n.execScript&&n.execScript("var "+r[0]);for(var i;r.length&&(i=r.shift());)r.length||t===u?n=n[i]?n[i]:n[i]={}:n[i]=t}function t(e,t){if(this.index="number"==typeof t?t:0,this.d=0,this.buffer=e instanceof(l?Uint8Array:Array)?e:new(l?Uint8Array:Array)(32768),2*this.buffer.length<=this.index)throw Error("invalid index");this.buffer.length<=this.index&&r(this)}function r(e){var t,r=e.buffer,n=r.length,i=new(l?Uint8Array:Array)(n<<1);if(l)i.set(r);else for(t=0;t<n;++t)i[t]=r[t];return e.buffer=i}function n(e){this.buffer=new(l?Uint16Array:Array)(2*e),this.length=0}function i(e,t){this.e=w,this.f=0,this.input=l&&e instanceof Array?new Uint8Array(e):e,this.c=0,t&&(t.lazy&&(this.f=t.lazy),"number"==typeof t.compressionType&&(this.e=t.compressionType),t.outputBuffer&&(this.b=l&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.c=t.outputIndex)),this.b||(this.b=new(l?Uint8Array:Array)(32768))}function s(e,t){function r(e,t){var r,n=e.g,i=[],s=0;r=A[e.length],i[s++]=65535&r,i[s++]=r>>16&255,i[s++]=r>>24;var a;switch(f){case 1===n:a=[0,n-1,0];break;case 2===n:a=[1,n-2,0];break;case 3===n:a=[2,n-3,0];break;case 4===n:a=[3,n-4,0];break;case 6>=n:a=[4,n-5,1];break;case 8>=n:a=[5,n-7,1];break;case 12>=n:a=[6,n-9,2];break;case 16>=n:a=[7,n-13,2];break;case 24>=n:a=[8,n-17,3];break;case 32>=n:a=[9,n-25,3];break;case 48>=n:a=[10,n-33,4];break;case 64>=n:a=[11,n-49,4];break;case 96>=n:a=[12,n-65,5];break;case 128>=n:a=[13,n-97,5];break;case 192>=n:a=[14,n-129,6];break;case 256>=n:a=[15,n-193,6];break;case 384>=n:a=[16,n-257,7];break;case 512>=n:a=[17,n-385,7];break;case 768>=n:a=[18,n-513,8];break;case 1024>=n:a=[19,n-769,8];break;case 1536>=n:a=[20,n-1025,9];break;case 2048>=n:a=[21,n-1537,9];break;case 3072>=n:a=[22,n-2049,10];break;case 4096>=n:a=[23,n-3073,10];break;case 6144>=n:a=[24,n-4097,11];break;case 8192>=n:a=[25,n-6145,11];break;case 12288>=n:a=[26,n-8193,12];break;case 16384>=n:a=[27,n-12289,12];break;case 24576>=n:a=[28,n-16385,13];break;case 32768>=n:a=[29,n-24577,13];break;default:throw"invalid distance"}r=a,i[s++]=r[0],i[s++]=r[1],i[s++]=r[2];var o,u;for(o=0,u=i.length;o<u;++o)g[m++]=i[o];w[i[0]]++,b[i[3]]++,v=e.length+t-1,d=null}var n,i,s,a,o,h,c,d,p,y={},g=l?new Uint16Array(2*t.length):[],m=0,v=0,w=new(l?Uint32Array:Array)(286),b=new(l?Uint32Array:Array)(30),k=e.f;if(!l){for(s=0;285>=s;)w[s++]=0;for(s=0;29>=s;)b[s++]=0}for(w[256]=1,n=0,i=t.length;n<i;++n){for(s=o=0,a=3;s<a&&n+s!==i;++s)o=o<<8|t[n+s];if(y[o]===u&&(y[o]=[]),h=y[o],!(0<v--)){for(;0<h.length&&32768<n-h[0];)h.shift();if(n+3>=i){for(d&&r(d,-1),s=0,a=i-n;s<a;++s)p=t[n+s],g[m++]=p,++w[p];break}0<h.length?(c=function(e,t,r){var n,i,s,a,o,u,f=0,h=e.length;a=0,u=r.length;e:for(;a<u;a++){if(n=r[u-a-1],s=3,3<f){for(o=f;3<o;o--)if(e[n+o-1]!==e[t+o-1])continue e;s=f}for(;258>s&&t+s<h&&e[n+s]===e[t+s];)++s;if(s>f&&(i=n,f=s),258===s)break}return new function(e,t){this.length=e,this.g=t}(f,t-i)}(t,n,h),d?d.length<c.length?(p=t[n-1],g[m++]=p,++w[p],r(c,0)):r(d,-1):c.length<k?d=c:r(c,0)):d?r(d,-1):(p=t[n],g[m++]=p,++w[p])}h.push(n)}return g[m++]=256,w[256]++,e.j=w,e.i=b,l?g.subarray(0,m):g}function a(e,t){var r,i,s,a,o,u=e.length,f=new n(572),h=new(l?Uint8Array:Array)(u);if(!l)for(a=0;a<u;a++)h[a]=0;for(a=0;a<u;++a)0<e[a]&&f.push(a,e[a]);if(r=Array(f.length/2),i=new(l?Uint32Array:Array)(f.length/2),1===r.length)return h[f.pop().index]=1,h;for(a=0,o=f.length/2;a<o;++a)r[a]=f.pop(),i[a]=r[a].value;for(s=function(e,t,r){function n(e){var r=p[e][y[e]];r===t?(n(e+1),n(e+1)):--c[r],++y[e]}var i,s,a,o,u,f=new(l?Uint16Array:Array)(r),h=new(l?Uint8Array:Array)(r),c=new(l?Uint8Array:Array)(t),d=Array(r),p=Array(r),y=Array(r),g=(1<<r)-t,m=1<<r-1;for(f[r-1]=t,s=0;s<r;++s)g<m?h[s]=0:(h[s]=1,g-=m),g<<=1,f[r-2-s]=(f[r-1-s]/2|0)+t;for(f[0]=h[0],d[0]=Array(f[0]),p[0]=Array(f[0]),s=1;s<r;++s)f[s]>2*f[s-1]+h[s]&&(f[s]=2*f[s-1]+h[s]),d[s]=Array(f[s]),p[s]=Array(f[s]);for(i=0;i<t;++i)c[i]=r;for(a=0;a<f[r-1];++a)d[r-1][a]=e[a],p[r-1][a]=a;for(i=0;i<r;++i)y[i]=0;for(1===h[r-1]&&(--c[0],++y[r-1]),s=r-2;0<=s;--s){for(o=i=0,u=y[s+1],a=0;a<f[s];a++)(o=d[s+1][u]+d[s+1][u+1])>e[i]?(d[s][a]=o,p[s][a]=t,u+=2):(d[s][a]=e[i],p[s][a]=i,++i);y[s]=0,1===h[s]&&n(s)}return c}(i,i.length,t),a=0,o=r.length;a<o;++a)h[r[a].index]=s[a];return h}function o(e){var t,r,n,i,s=new(l?Uint16Array:Array)(e.length),a=[],o=[],u=0;for(t=0,r=e.length;t<r;t++)a[e[t]]=1+(0|a[e[t]]);for(t=1,r=16;t<=r;t++)o[t]=u,u+=0|a[t],u<<=1;for(t=0,r=e.length;t<r;t++)for(u=o[e[t]],o[e[t]]+=1,n=s[t]=0,i=e[t];n<i;n++)s[t]=s[t]<<1|1&u,u>>>=1;return s}var u=void 0,f=!0,h=this,l="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;t.prototype.a=function(e,t,n){var i,s=this.buffer,a=this.index,o=this.d,u=s[a];if(n&&1<t&&(e=8<t?(m[255&e]<<24|m[e>>>8&255]<<16|m[e>>>16&255]<<8|m[e>>>24&255])>>32-t:m[e]>>8-t),8>t+o)u=u<<t|e,o+=t;else for(i=0;i<t;++i)u=u<<1|e>>t-i-1&1,8==++o&&(o=0,s[a++]=m[u],u=0,a===s.length&&(s=r(this)));s[a]=u,this.buffer=s,this.d=o,this.index=a},t.prototype.finish=function(){var e,t=this.buffer,r=this.index;return 0<this.d&&(t[r]<<=8-this.d,t[r]=m[t[r]],r++),l?e=t.subarray(0,r):(t.length=r,e=t),e};var c,d=new(l?Uint8Array:Array)(256);for(c=0;256>c;++c){for(var p=g=c,y=7,g=g>>>1;g;g>>>=1)p<<=1,p|=1&g,--y;d[c]=(p<<y&255)>>>0}var m=d;n.prototype.getParent=function(e){return 2*((e-2)/4|0)},n.prototype.push=function(e,t){var r,n,i,s=this.buffer;for(r=this.length,s[this.length++]=t,s[this.length++]=e;0<r&&(n=this.getParent(r),s[r]>s[n]);)i=s[r],s[r]=s[n],s[n]=i,i=s[r+1],s[r+1]=s[n+1],s[n+1]=i,r=n;return this.length},n.prototype.pop=function(){var e,t,r,n,i,s=this.buffer;for(t=s[0],e=s[1],this.length-=2,s[0]=s[this.length],s[1]=s[this.length+1],i=0;!((n=2*i+2)>=this.length)&&(n+2<this.length&&s[n+2]>s[n]&&(n+=2),s[n]>s[i]);)r=s[i],s[i]=s[n],s[n]=r,r=s[i+1],s[i+1]=s[n+1],s[n+1]=r,i=n;return{index:e,value:t,length:this.length}};var v,w=2,b=[];for(v=0;288>v;v++)switch(f){case 143>=v:b.push([v+48,8]);break;case 255>=v:b.push([v-144+400,9]);break;case 279>=v:b.push([v-256+0,7]);break;case 287>=v:b.push([v-280+192,8]);break;default:throw"invalid literal: "+v}i.prototype.h=function(){var e,r,n,i,h=this.input;switch(this.e){case 0:for(n=0,i=h.length;n<i;){var c=r=l?h.subarray(n,n+65535):h.slice(n,n+65535),d=(n+=r.length)===i,p=u,y=u,g=u,m=u,v=u,k=this.b,A=this.c;if(l){for(k=new Uint8Array(this.b.buffer);k.length<=A+c.length+5;)k=new Uint8Array(k.length<<1);k.set(this.b)}if(p=d?1:0,k[A++]=0|p,y=c.length,g=65536+~y&65535,k[A++]=255&y,k[A++]=y>>>8&255,k[A++]=255&g,k[A++]=g>>>8&255,l)k.set(c,A),A+=c.length,k=k.subarray(0,A);else{for(m=0,v=c.length;m<v;++m)k[A++]=c[m];k.length=A}this.c=A,this.b=k}break;case 1:var _=new t(l?new Uint8Array(this.b.buffer):this.b,this.c);_.a(1,1,f),_.a(1,2,f);var E,S,U,K=s(this,h);for(E=0,S=K.length;E<S;E++)if(U=K[E],t.prototype.a.apply(_,b[U]),256<U)_.a(K[++E],K[++E],f),_.a(K[++E],5),_.a(K[++E],K[++E],f);else if(256===U)break;this.b=_.finish(),this.c=this.b.length;break;case w:var P,j,x,T,O,C,I,M,B,D,N,L,R,H,F,z=new t(l?new Uint8Array(this.b.buffer):this.b,this.c),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=Array(19);for(P=w,z.a(1,1,f),z.a(P,2,f),j=s(this,h),I=o(C=a(this.j,15)),B=o(M=a(this.i,7)),x=286;257<x&&0===C[x-1];x--);for(T=30;1<T&&0===M[T-1];T--);var V,Z,Y,X,W,$,J=x,Q=T,ee=new(l?Uint32Array:Array)(J+Q),te=new(l?Uint32Array:Array)(316),re=new(l?Uint8Array:Array)(19);for(V=Z=0;V<J;V++)ee[Z++]=C[V];for(V=0;V<Q;V++)ee[Z++]=M[V];if(!l)for(V=0,X=re.length;V<X;++V)re[V]=0;for(V=W=0,X=ee.length;V<X;V+=Z){for(Z=1;V+Z<X&&ee[V+Z]===ee[V];++Z);if(Y=Z,0===ee[V])if(3>Y)for(;0<Y--;)te[W++]=0,re[0]++;else for(;0<Y;)($=138>Y?Y:138)>Y-3&&$<Y&&($=Y-3),10>=$?(te[W++]=17,te[W++]=$-3,re[17]++):(te[W++]=18,te[W++]=$-11,re[18]++),Y-=$;else if(te[W++]=ee[V],re[ee[V]]++,3>--Y)for(;0<Y--;)te[W++]=ee[V],re[ee[V]]++;else for(;0<Y;)($=6>Y?Y:6)>Y-3&&$<Y&&($=Y-3),te[W++]=16,te[W++]=$-3,re[16]++,Y-=$}for(e=l?te.subarray(0,W):te.slice(0,W),D=a(re,7),H=0;19>H;H++)G[H]=D[q[H]];for(O=19;4<O&&0===G[O-1];O--);for(N=o(D),z.a(x-257,5,f),z.a(T-1,5,f),z.a(O-4,4,f),H=0;H<O;H++)z.a(G[H],3,f);for(H=0,F=e.length;H<F;H++)if(L=e[H],z.a(N[L],D[L],f),16<=L){switch(H++,L){case 16:R=2;break;case 17:R=3;break;case 18:R=7;break;default:throw"invalid code: "+L}z.a(e[H],R,f)}var ne,ie,se,ae,oe,ue,fe,he,le=[I,C],ce=[B,M];for(oe=le[0],ue=le[1],fe=ce[0],he=ce[1],ne=0,ie=j.length;ne<ie;++ne)if(se=j[ne],z.a(oe[se],ue[se],f),256<se)z.a(j[++ne],j[++ne],f),ae=j[++ne],z.a(fe[ae],he[ae],f),z.a(j[++ne],j[++ne],f);else if(256===se)break;this.b=z.finish(),this.c=this.b.length;break;default:throw"invalid compression type"}return this.b};var k=function(){function e(e){switch(f){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case 12>=e:return[265,e-11,1];case 14>=e:return[266,e-13,1];case 16>=e:return[267,e-15,1];case 18>=e:return[268,e-17,1];case 22>=e:return[269,e-19,2];case 26>=e:return[270,e-23,2];case 30>=e:return[271,e-27,2];case 34>=e:return[272,e-31,2];case 42>=e:return[273,e-35,3];case 50>=e:return[274,e-43,3];case 58>=e:return[275,e-51,3];case 66>=e:return[276,e-59,3];case 82>=e:return[277,e-67,4];case 98>=e:return[278,e-83,4];case 114>=e:return[279,e-99,4];case 130>=e:return[280,e-115,4];case 162>=e:return[281,e-131,5];case 194>=e:return[282,e-163,5];case 226>=e:return[283,e-195,5];case 257>=e:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}var t,r,n=[];for(t=3;258>=t;t++)r=e(t),n[t]=r[2]<<24|r[1]<<16|r[0];return n}(),A=l?new Uint32Array(k):k;e("Zlib.RawDeflate",i),e("Zlib.RawDeflate.prototype.compress",i.prototype.h);var _,E,S,U,K={NONE:0,FIXED:1,DYNAMIC:w};if(Object.keys)_=Object.keys(K);else for(E in _=[],S=0,K)_[S++]=E;for(S=0,U=_.length;S<U;++S)E=_[S],e("Zlib.RawDeflate.CompressionType."+E,K[E])}).call(this)},{}],7:[function(e,t,r){(function(){"use strict";function e(e,t){var r=e.split("."),n=a;!(r[0]in n)&&n.execScript&&n.execScript("var "+r[0]);for(var i;r.length&&(i=r.shift());)r.length||t===s?n=n[i]?n[i]:n[i]={}:n[i]=t}function t(e){var t,r,n,i,s,a,u,f,h,l,c=e.length,d=0,p=Number.POSITIVE_INFINITY;for(f=0;f<c;++f)e[f]>d&&(d=e[f]),e[f]<p&&(p=e[f]);for(t=1<<d,r=new(o?Uint32Array:Array)(t),n=1,i=0,s=2;n<=d;){for(f=0;f<c;++f)if(e[f]===n){for(a=0,u=i,h=0;h<n;++h)a=a<<1|1&u,u>>=1;for(l=n<<16|f,h=a;h<t;h+=s)r[h]=l;++i}++n,i<<=1,s<<=1}return[r,d,p]}function r(e,t){switch(this.g=[],this.h=32768,this.c=this.f=this.d=this.k=0,this.input=o?new Uint8Array(e):e,this.l=!1,this.i=f,this.p=!1,!t&&(t={})||(t.index&&(this.d=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.p=t.resize)),this.i){case u:this.a=32768,this.b=new(o?Uint8Array:Array)(32768+this.h+258);break;case f:this.a=0,this.b=new(o?Uint8Array:Array)(this.h),this.e=this.u,this.m=this.r,this.j=this.s;break;default:throw Error("invalid inflate mode")}}function n(e,t){for(var r,n=e.f,i=e.c,s=e.input,a=e.d,o=s.length;i<t;){if(a>=o)throw Error("input buffer is broken");n|=s[a++]<<i,i+=8}return r=n&(1<<t)-1,e.f=n>>>t,e.c=i-t,e.d=a,r}function i(e,t){for(var r,n,i=e.f,s=e.c,a=e.input,o=e.d,u=a.length,f=t[0],h=t[1];s<h&&!(o>=u);)i|=a[o++]<<s,s+=8;if(r=f[i&(1<<h)-1],(n=r>>>16)>s)throw Error("invalid code length: "+n);return e.f=i>>n,e.c=s-n,e.d=o,65535&r}var s=void 0,a=this,o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView,u=0,f=1;r.prototype.t=function(){for(;!this.l;){var e=n(this,3);switch(1&e&&(this.l=!0),e>>>=1){case 0:var r=this.input,a=this.d,h=this.b,l=this.a,c=r.length,p=s,y=s,g=h.length,m=s;if(this.c=this.f=0,a+1>=c)throw Error("invalid uncompressed block header: LEN");if(p=r[a++]|r[a++]<<8,a+1>=c)throw Error("invalid uncompressed block header: NLEN");if(y=r[a++]|r[a++]<<8,p===~y)throw Error("invalid uncompressed block header: length verify");if(a+p>r.length)throw Error("input buffer is broken");switch(this.i){case u:for(;l+p>h.length;){if(m=g-l,p-=m,o)h.set(r.subarray(a,a+m),l),l+=m,a+=m;else for(;m--;)h[l++]=r[a++];this.a=l,h=this.e(),l=this.a}break;case f:for(;l+p>h.length;)h=this.e({o:2});break;default:throw Error("invalid inflate mode")}if(o)h.set(r.subarray(a,a+p),l),l+=p,a+=p;else for(;p--;)h[l++]=r[a++];this.d=a,this.a=l,this.b=h;break;case 1:this.j(S,K);break;case 2:for(var v=n(this,5)+257,w=n(this,5)+1,b=n(this,4)+4,k=new(o?Uint8Array:Array)(d.length),A=s,_=s,E=s,U=s,P=s,j=s,x=s,T=s,O=s,T=0;T<b;++T)k[d[T]]=n(this,3);if(!o)for(T=b,b=k.length;T<b;++T)k[d[T]]=0;for(A=t(k),U=new(o?Uint8Array:Array)(v+w),T=0,O=v+w;T<O;)switch(P=i(this,A)){case 16:for(x=3+n(this,2);x--;)U[T++]=j;break;case 17:for(x=3+n(this,3);x--;)U[T++]=0;j=0;break;case 18:for(x=11+n(this,7);x--;)U[T++]=0;j=0;break;default:j=U[T++]=P}_=t(o?U.subarray(0,v):U.slice(0,v)),E=t(o?U.subarray(v):U.slice(v)),this.j(_,E);break;default:throw Error("unknown BTYPE: "+e)}}return this.m()};var h,l,c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=o?new Uint16Array(c):c,p=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],y=o?new Uint16Array(p):p,g=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],m=o?new Uint8Array(g):g,v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],w=o?new Uint16Array(v):v,b=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=o?new Uint8Array(b):b,A=new(o?Uint8Array:Array)(288);for(h=0,l=A.length;h<l;++h)A[h]=143>=h?8:255>=h?9:279>=h?7:8;var _,E,S=t(A),U=new(o?Uint8Array:Array)(30);for(_=0,E=U.length;_<E;++_)U[_]=5;var K=t(U);r.prototype.j=function(e,t){var r=this.b,s=this.a;this.n=e;for(var a,o,u,f,h=r.length-258;256!==(a=i(this,e));)if(256>a)s>=h&&(this.a=s,r=this.e(),s=this.a),r[s++]=a;else for(f=y[o=a-257],0<m[o]&&(f+=n(this,m[o])),a=i(this,t),u=w[a],0<k[a]&&(u+=n(this,k[a])),s>=h&&(this.a=s,r=this.e(),s=this.a);f--;)r[s]=r[s++-u];for(;8<=this.c;)this.c-=8,this.d--;this.a=s},r.prototype.s=function(e,t){var r=this.b,s=this.a;this.n=e;for(var a,o,u,f,h=r.length;256!==(a=i(this,e));)if(256>a)s>=h&&(r=this.e(),h=r.length),r[s++]=a;else for(f=y[o=a-257],0<m[o]&&(f+=n(this,m[o])),a=i(this,t),u=w[a],0<k[a]&&(u+=n(this,k[a])),s+f>h&&(r=this.e(),h=r.length);f--;)r[s]=r[s++-u];for(;8<=this.c;)this.c-=8,this.d--;this.a=s},r.prototype.e=function(){var e,t,r=new(o?Uint8Array:Array)(this.a-32768),n=this.a-32768,i=this.b;if(o)r.set(i.subarray(32768,r.length));else for(e=0,t=r.length;e<t;++e)r[e]=i[e+32768];if(this.g.push(r),this.k+=r.length,o)i.set(i.subarray(n,n+32768));else for(e=0;32768>e;++e)i[e]=i[n+e];return this.a=32768,i},r.prototype.u=function(e){var t,r,n,i,s=this.input.length/this.d+1|0,a=this.input,u=this.b;return e&&("number"==typeof e.o&&(s=e.o),"number"==typeof e.q&&(s+=e.q)),2>s?(r=(a.length-this.d)/this.n[2],i=r/2*258|0,n=i<u.length?u.length+i:u.length<<1):n=u.length*s,o?(t=new Uint8Array(n)).set(u):t=u,this.b=t},r.prototype.m=function(){var e,t,r,n,i,s=0,a=this.b,u=this.g,f=new(o?Uint8Array:Array)(this.k+(this.a-32768));if(0===u.length)return o?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(t=0,r=u.length;t<r;++t)for(n=0,i=(e=u[t]).length;n<i;++n)f[s++]=e[n];for(t=32768,r=this.a;t<r;++t)f[s++]=a[t];return this.g=[],this.buffer=f},r.prototype.r=function(){var e,t=this.a;return o?this.p?(e=new Uint8Array(t)).set(this.b.subarray(0,t)):e=this.b.subarray(0,t):(this.b.length>t&&(this.b.length=t),e=this.b),this.buffer=e},e("Zlib.RawInflate",r),e("Zlib.RawInflate.prototype.decompress",r.prototype.t);var P,j,x,T,O={ADAPTIVE:f,BLOCK:u};if(Object.keys)P=Object.keys(O);else for(j in P=[],x=0,O)P[x++]=j;for(x=0,T=P.length;x<T;++x)j=P[x],e("Zlib.RawInflate.BufferType."+j,O[j])}).call(this)},{}],8:[function(e,t,r){(function(){"use strict";function e(e){throw e}function t(e,t){var r=e.split("."),n=v;!(r[0]in n)&&n.execScript&&n.execScript("var "+r[0]);for(var i;r.length&&(i=r.shift());)r.length||t===g?n=n[i]?n[i]:n[i]={}:n[i]=t}function r(t,r){this.index="number"==typeof r?r:0,this.i=0,this.buffer=t instanceof(w?Uint8Array:Array)?t:new(w?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&e(Error("invalid index")),this.buffer.length<=this.index&&this.f()}function n(e){this.buffer=new(w?Uint16Array:Array)(2*e),this.length=0}function i(e){var t,r,n,i,s,a,o,u,f,h,l=e.length,c=0,d=Number.POSITIVE_INFINITY;for(u=0;u<l;++u)e[u]>c&&(c=e[u]),e[u]<d&&(d=e[u]);for(t=1<<c,r=new(w?Uint32Array:Array)(t),n=1,i=0,s=2;n<=c;){for(u=0;u<l;++u)if(e[u]===n){for(a=0,o=i,f=0;f<n;++f)a=a<<1|1&o,o>>=1;for(h=n<<16|u,f=a;f<t;f+=s)r[f]=h;++i}++n,i<<=1,s<<=1}return[r,c,d]}function s(e,t){this.h=K,this.w=0,this.input=w&&e instanceof Array?new Uint8Array(e):e,this.b=0,t&&(t.lazy&&(this.w=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=w&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.b=t.outputIndex)),this.a||(this.a=new(w?Uint8Array:Array)(32768))}function a(t,r){function n(t,r){var n,i=t.G,s=[],a=0;n=T[t.length],s[a++]=65535&n,s[a++]=n>>16&255,s[a++]=n>>24;var o;switch(m){case 1===i:o=[0,i-1,0];break;case 2===i:o=[1,i-2,0];break;case 3===i:o=[2,i-3,0];break;case 4===i:o=[3,i-4,0];break;case 6>=i:o=[4,i-5,1];break;case 8>=i:o=[5,i-7,1];break;case 12>=i:o=[6,i-9,2];break;case 16>=i:o=[7,i-13,2];break;case 24>=i:o=[8,i-17,3];break;case 32>=i:o=[9,i-25,3];break;case 48>=i:o=[10,i-33,4];break;case 64>=i:o=[11,i-49,4];break;case 96>=i:o=[12,i-65,5];break;case 128>=i:o=[13,i-97,5];break;case 192>=i:o=[14,i-129,6];break;case 256>=i:o=[15,i-193,6];break;case 384>=i:o=[16,i-257,7];break;case 512>=i:o=[17,i-385,7];break;case 768>=i:o=[18,i-513,8];break;case 1024>=i:o=[19,i-769,8];break;case 1536>=i:o=[20,i-1025,9];break;case 2048>=i:o=[21,i-1537,9];break;case 3072>=i:o=[22,i-2049,10];break;case 4096>=i:o=[23,i-3073,10];break;case 6144>=i:o=[24,i-4097,11];break;case 8192>=i:o=[25,i-6145,11];break;case 12288>=i:o=[26,i-8193,12];break;case 16384>=i:o=[27,i-12289,12];break;case 24576>=i:o=[28,i-16385,13];break;case 32768>=i:o=[29,i-24577,13];break;default:e("invalid distance")}n=o,s[a++]=n[0],s[a++]=n[1],s[a++]=n[2];var u,f;for(u=0,f=s.length;u<f;++u)p[y++]=s[u];b[s[0]]++,k[s[3]]++,v=t.length+r-1,l=null}var i,s,a,o,u,f,h,l,c,d={},p=w?new Uint16Array(2*r.length):[],y=0,v=0,b=new(w?Uint32Array:Array)(286),k=new(w?Uint32Array:Array)(30),A=t.w;if(!w){for(a=0;285>=a;)b[a++]=0;for(a=0;29>=a;)k[a++]=0}for(b[256]=1,i=0,s=r.length;i<s;++i){for(a=u=0,o=3;a<o&&i+a!==s;++a)u=u<<8|r[i+a];if(d[u]===g&&(d[u]=[]),f=d[u],!(0<v--)){for(;0<f.length&&32768<i-f[0];)f.shift();if(i+3>=s){for(l&&n(l,-1),a=0,o=s-i;a<o;++a)c=r[i+a],p[y++]=c,++b[c];break}0<f.length?(h=function(e,t,r){var n,i,s,a,o,u,f=0,h=e.length;a=0,u=r.length;e:for(;a<u;a++){if(n=r[u-a-1],s=3,3<f){for(o=f;3<o;o--)if(e[n+o-1]!==e[t+o-1])continue e;s=f}for(;258>s&&t+s<h&&e[n+s]===e[t+s];)++s;if(s>f&&(i=n,f=s),258===s)break}return new function(e,t){this.length=e,this.G=t}(f,t-i)}(r,i,f),l?l.length<h.length?(c=r[i-1],p[y++]=c,++b[c],n(h,0)):n(l,-1):h.length<A?l=h:n(h,0)):l?n(l,-1):(c=r[i],p[y++]=c,++b[c])}f.push(i)}return p[y++]=256,b[256]++,t.L=b,t.K=k,w?p.subarray(0,y):p}function o(e,t){var r,i,s,a,o,u=e.length,f=new n(572),h=new(w?Uint8Array:Array)(u);if(!w)for(a=0;a<u;a++)h[a]=0;for(a=0;a<u;++a)0<e[a]&&f.push(a,e[a]);if(r=Array(f.length/2),i=new(w?Uint32Array:Array)(f.length/2),1===r.length)return h[f.pop().index]=1,h;for(a=0,o=f.length/2;a<o;++a)r[a]=f.pop(),i[a]=r[a].value;for(s=function(e,t,r){function n(e){var r=d[e][p[e]];r===t?(n(e+1),n(e+1)):--l[r],++p[e]}var i,s,a,o,u,f=new(w?Uint16Array:Array)(r),h=new(w?Uint8Array:Array)(r),l=new(w?Uint8Array:Array)(t),c=Array(r),d=Array(r),p=Array(r),y=(1<<r)-t,g=1<<r-1;for(f[r-1]=t,s=0;s<r;++s)y<g?h[s]=0:(h[s]=1,y-=g),y<<=1,f[r-2-s]=(f[r-1-s]/2|0)+t;for(f[0]=h[0],c[0]=Array(f[0]),d[0]=Array(f[0]),s=1;s<r;++s)f[s]>2*f[s-1]+h[s]&&(f[s]=2*f[s-1]+h[s]),c[s]=Array(f[s]),d[s]=Array(f[s]);for(i=0;i<t;++i)l[i]=r;for(a=0;a<f[r-1];++a)c[r-1][a]=e[a],d[r-1][a]=a;for(i=0;i<r;++i)p[i]=0;for(1===h[r-1]&&(--l[0],++p[r-1]),s=r-2;0<=s;--s){for(o=i=0,u=p[s+1],a=0;a<f[s];a++)(o=c[s+1][u]+c[s+1][u+1])>e[i]?(c[s][a]=o,d[s][a]=t,u+=2):(c[s][a]=e[i],d[s][a]=i,++i);p[s]=0,1===h[s]&&n(s)}return l}(i,i.length,t),a=0,o=r.length;a<o;++a)h[r[a].index]=s[a];return h}function u(e){var t,r,n,i,s=new(w?Uint16Array:Array)(e.length),a=[],o=[],u=0;for(t=0,r=e.length;t<r;t++)a[e[t]]=1+(0|a[e[t]]);for(t=1,r=16;t<=r;t++)o[t]=u,u+=0|a[t],u<<=1;for(t=0,r=e.length;t<r;t++)for(u=o[e[t]],o[e[t]]+=1,n=s[t]=0,i=e[t];n<i;n++)s[t]=s[t]<<1|1&u,u>>>=1;return s}function f(t,r){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=w?new Uint8Array(t):t,this.s=!1,this.n=C,this.B=!1,!r&&(r={})||(r.index&&(this.c=r.index),r.bufferSize&&(this.m=r.bufferSize),r.bufferType&&(this.n=r.bufferType),r.resize&&(this.B=r.resize)),this.n){case O:this.b=32768,this.a=new(w?Uint8Array:Array)(32768+this.m+258);break;case C:this.b=0,this.a=new(w?Uint8Array:Array)(this.m),this.f=this.J,this.t=this.H,this.o=this.I;break;default:e(Error("invalid inflate mode"))}}function h(t,r){for(var n,i=t.g,s=t.e,a=t.input,o=t.c,u=a.length;s<r;)o>=u&&e(Error("input buffer is broken")),i|=a[o++]<<s,s+=8;return n=i&(1<<r)-1,t.g=i>>>r,t.e=s-r,t.c=o,n}function l(t,r){for(var n,i,s=t.g,a=t.e,o=t.input,u=t.c,f=o.length,h=r[0],l=r[1];a<l&&!(u>=f);)s|=o[u++]<<a,a+=8;return n=h[s&(1<<l)-1],(i=n>>>16)>a&&e(Error("invalid code length: "+i)),t.g=s>>i,t.e=a-i,t.c=u,65535&n}function c(e){if("string"==typeof e){var t,r,n=e.split("");for(t=0,r=n.length;t<r;t++)n[t]=(255&n[t].charCodeAt(0))>>>0;e=n}for(var i,s=1,a=0,o=e.length,u=0;0<o;){o-=i=1024<o?1024:o;do{s+=e[u++],a+=s}while(--i);s%=65521,a%=65521}return(a<<16|s)>>>0}function d(t,r){var n,i;switch(this.input=t,this.c=0,!r&&(r={})||(r.index&&(this.c=r.index),r.verify&&(this.M=r.verify)),n=t[this.c++],i=t[this.c++],15&n){case Q:this.method=Q;break;default:e(Error("unsupported compression method"))}0!=((n<<8)+i)%31&&e(Error("invalid fcheck flag:"+((n<<8)+i)%31)),32&i&&e(Error("fdict flag is not supported")),this.A=new f(t,{index:this.c,bufferSize:r.bufferSize,bufferType:r.bufferType,resize:r.resize})}function p(e,t){this.input=e,this.a=new(w?Uint8Array:Array)(32768),this.h=ee.k;var r,n={};!t&&(t={})||"number"!=typeof t.compressionType||(this.h=t.compressionType);for(r in t)n[r]=t[r];n.outputBuffer=this.a,this.z=new s(this.input,n)}function y(e,r){var n,i,s,a;if(Object.keys)n=Object.keys(r);else for(i in n=[],s=0,r)n[s++]=i;for(s=0,a=n.length;s<a;++s)i=n[s],t(e+"."+i,r[i])}var g=void 0,m=!0,v=this,w="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;r.prototype.f=function(){var e,t=this.buffer,r=t.length,n=new(w?Uint8Array:Array)(r<<1);if(w)n.set(t);else for(e=0;e<r;++e)n[e]=t[e];return this.buffer=n},r.prototype.d=function(e,t,r){var n,i=this.buffer,s=this.index,a=this.i,o=i[s];if(r&&1<t&&(e=8<t?(S[255&e]<<24|S[e>>>8&255]<<16|S[e>>>16&255]<<8|S[e>>>24&255])>>32-t:S[e]>>8-t),8>t+a)o=o<<t|e,a+=t;else for(n=0;n<t;++n)o=o<<1|e>>t-n-1&1,8==++a&&(a=0,i[s++]=S[o],o=0,s===i.length&&(i=this.f()));i[s]=o,this.buffer=i,this.i=a,this.index=s},r.prototype.finish=function(){var e,t=this.buffer,r=this.index;return 0<this.i&&(t[r]<<=8-this.i,t[r]=S[t[r]],r++),w?e=t.subarray(0,r):(t.length=r,e=t),e};var b,k=new(w?Uint8Array:Array)(256);for(b=0;256>b;++b){for(var A=E=b,_=7,E=E>>>1;E;E>>>=1)A<<=1,A|=1&E,--_;k[b]=(A<<_&255)>>>0}var S=k;n.prototype.getParent=function(e){return 2*((e-2)/4|0)},n.prototype.push=function(e,t){var r,n,i,s=this.buffer;for(r=this.length,s[this.length++]=t,s[this.length++]=e;0<r&&(n=this.getParent(r),s[r]>s[n]);)i=s[r],s[r]=s[n],s[n]=i,i=s[r+1],s[r+1]=s[n+1],s[n+1]=i,r=n;return this.length},n.prototype.pop=function(){var e,t,r,n,i,s=this.buffer;for(t=s[0],e=s[1],this.length-=2,s[0]=s[this.length],s[1]=s[this.length+1],i=0;!((n=2*i+2)>=this.length)&&(n+2<this.length&&s[n+2]>s[n]&&(n+=2),s[n]>s[i]);)r=s[i],s[i]=s[n],s[n]=r,r=s[i+1],s[i+1]=s[n+1],s[n+1]=r,i=n;return{index:e,value:t,length:this.length}};var U,K=2,P={NONE:0,r:1,k:K,N:3},j=[];for(U=0;288>U;U++)switch(m){case 143>=U:j.push([U+48,8]);break;case 255>=U:j.push([U-144+400,9]);break;case 279>=U:j.push([U-256+0,7]);break;case 287>=U:j.push([U-280+192,8]);break;default:e("invalid literal: "+U)}s.prototype.j=function(){var t,n,i,s,f=this.input;switch(this.h){case 0:for(i=0,s=f.length;i<s;){var h=n=w?f.subarray(i,i+65535):f.slice(i,i+65535),l=(i+=n.length)===s,c=g,d=g,p=g,y=g,v=g,b=this.a,k=this.b;if(w){for(b=new Uint8Array(this.a.buffer);b.length<=k+h.length+5;)b=new Uint8Array(b.length<<1);b.set(this.a)}if(c=l?1:0,b[k++]=0|c,d=h.length,p=65536+~d&65535,b[k++]=255&d,b[k++]=d>>>8&255,b[k++]=255&p,b[k++]=p>>>8&255,w)b.set(h,k),k+=h.length,b=b.subarray(0,k);else{for(y=0,v=h.length;y<v;++y)b[k++]=h[y];b.length=k}this.b=k,this.a=b}break;case 1:var A=new r(w?new Uint8Array(this.a.buffer):this.a,this.b);A.d(1,1,m),A.d(1,2,m);var _,E,S,U=a(this,f);for(_=0,E=U.length;_<E;_++)if(S=U[_],r.prototype.d.apply(A,j[S]),256<S)A.d(U[++_],U[++_],m),A.d(U[++_],5),A.d(U[++_],U[++_],m);else if(256===S)break;this.a=A.finish(),this.b=this.a.length;break;case K:var P,x,T,O,C,I,M,B,D,N,L,R,H,F,z,q=new r(w?new Uint8Array(this.a.buffer):this.a,this.b),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=Array(19);for(P=K,q.d(1,1,m),q.d(P,2,m),x=a(this,f),M=u(I=o(this.L,15)),D=u(B=o(this.K,7)),T=286;257<T&&0===I[T-1];T--);for(O=30;1<O&&0===B[O-1];O--);var Z,Y,X,W,$,J,Q=T,ee=O,te=new(w?Uint32Array:Array)(Q+ee),re=new(w?Uint32Array:Array)(316),ne=new(w?Uint8Array:Array)(19);for(Z=Y=0;Z<Q;Z++)te[Y++]=I[Z];for(Z=0;Z<ee;Z++)te[Y++]=B[Z];if(!w)for(Z=0,W=ne.length;Z<W;++Z)ne[Z]=0;for(Z=$=0,W=te.length;Z<W;Z+=Y){for(Y=1;Z+Y<W&&te[Z+Y]===te[Z];++Y);if(X=Y,0===te[Z])if(3>X)for(;0<X--;)re[$++]=0,ne[0]++;else for(;0<X;)(J=138>X?X:138)>X-3&&J<X&&(J=X-3),10>=J?(re[$++]=17,re[$++]=J-3,ne[17]++):(re[$++]=18,re[$++]=J-11,ne[18]++),X-=J;else if(re[$++]=te[Z],ne[te[Z]]++,3>--X)for(;0<X--;)re[$++]=te[Z],ne[te[Z]]++;else for(;0<X;)(J=6>X?X:6)>X-3&&J<X&&(J=X-3),re[$++]=16,re[$++]=J-3,ne[16]++,X-=J}for(t=w?re.subarray(0,$):re.slice(0,$),N=o(ne,7),F=0;19>F;F++)V[F]=N[G[F]];for(C=19;4<C&&0===V[C-1];C--);for(L=u(N),q.d(T-257,5,m),q.d(O-1,5,m),q.d(C-4,4,m),F=0;F<C;F++)q.d(V[F],3,m);for(F=0,z=t.length;F<z;F++)if(R=t[F],q.d(L[R],N[R],m),16<=R){switch(F++,R){case 16:H=2;break;case 17:H=3;break;case 18:H=7;break;default:e("invalid code: "+R)}q.d(t[F],H,m)}var ie,se,ae,oe,ue,fe,he,le,ce=[M,I],de=[D,B];for(ue=ce[0],fe=ce[1],he=de[0],le=de[1],ie=0,se=x.length;ie<se;++ie)if(ae=x[ie],q.d(ue[ae],fe[ae],m),256<ae)q.d(x[++ie],x[++ie],m),oe=x[++ie],q.d(he[oe],le[oe],m),q.d(x[++ie],x[++ie],m);else if(256===ae)break;this.a=q.finish(),this.b=this.a.length;break;default:e("invalid compression type")}return this.a};var x=function(){function t(t){switch(m){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:e("invalid length: "+t)}}var r,n,i=[];for(r=3;258>=r;r++)n=t(r),i[r]=n[2]<<24|n[1]<<16|n[0];return i}(),T=w?new Uint32Array(x):x,O=0,C=1,I={D:O,C:C};f.prototype.p=function(){for(;!this.s;){var t=h(this,3);switch(1&t&&(this.s=m),t>>>=1){case 0:var r=this.input,n=this.c,s=this.a,a=this.b,o=r.length,u=g,f=g,c=s.length,d=g;switch(this.e=this.g=0,n+1>=o&&e(Error("invalid uncompressed block header: LEN")),u=r[n++]|r[n++]<<8,n+1>=o&&e(Error("invalid uncompressed block header: NLEN")),f=r[n++]|r[n++]<<8,u===~f&&e(Error("invalid uncompressed block header: length verify")),n+u>r.length&&e(Error("input buffer is broken")),this.n){case O:for(;a+u>s.length;){if(d=c-a,u-=d,w)s.set(r.subarray(n,n+d),a),a+=d,n+=d;else for(;d--;)s[a++]=r[n++];this.b=a,s=this.f(),a=this.b}break;case C:for(;a+u>s.length;)s=this.f({v:2});break;default:e(Error("invalid inflate mode"))}if(w)s.set(r.subarray(n,n+u),a),a+=u,n+=u;else for(;u--;)s[a++]=r[n++];this.c=n,this.b=a,this.a=s;break;case 1:this.o(W,J);break;case 2:for(var p=h(this,5)+257,y=h(this,5)+1,v=h(this,4)+4,b=new(w?Uint8Array:Array)(N.length),k=g,A=g,_=g,E=g,S=g,U=g,K=g,P=g,j=g,P=0;P<v;++P)b[N[P]]=h(this,3);if(!w)for(P=v,v=b.length;P<v;++P)b[N[P]]=0;for(k=i(b),E=new(w?Uint8Array:Array)(p+y),P=0,j=p+y;P<j;)switch(S=l(this,k)){case 16:for(K=3+h(this,2);K--;)E[P++]=U;break;case 17:for(K=3+h(this,3);K--;)E[P++]=0;U=0;break;case 18:for(K=11+h(this,7);K--;)E[P++]=0;U=0;break;default:U=E[P++]=S}A=i(w?E.subarray(0,p):E.slice(0,p)),_=i(w?E.subarray(p):E.slice(p)),this.o(A,_);break;default:e(Error("unknown BTYPE: "+t))}}return this.t()};var M,B,D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],N=w?new Uint16Array(D):D,L=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],R=w?new Uint16Array(L):L,H=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],F=w?new Uint8Array(H):H,z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],q=w?new Uint16Array(z):z,G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],V=w?new Uint8Array(G):G,Z=new(w?Uint8Array:Array)(288);for(M=0,B=Z.length;M<B;++M)Z[M]=143>=M?8:255>=M?9:279>=M?7:8;var Y,X,W=i(Z),$=new(w?Uint8Array:Array)(30);for(Y=0,X=$.length;Y<X;++Y)$[Y]=5;var J=i($);f.prototype.o=function(e,t){var r=this.a,n=this.b;this.u=e;for(var i,s,a,o,u=r.length-258;256!==(i=l(this,e));)if(256>i)n>=u&&(this.b=n,r=this.f(),n=this.b),r[n++]=i;else for(o=R[s=i-257],0<F[s]&&(o+=h(this,F[s])),i=l(this,t),a=q[i],0<V[i]&&(a+=h(this,V[i])),n>=u&&(this.b=n,r=this.f(),n=this.b);o--;)r[n]=r[n++-a];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},f.prototype.I=function(e,t){var r=this.a,n=this.b;this.u=e;for(var i,s,a,o,u=r.length;256!==(i=l(this,e));)if(256>i)n>=u&&(r=this.f(),u=r.length),r[n++]=i;else for(o=R[s=i-257],0<F[s]&&(o+=h(this,F[s])),i=l(this,t),a=q[i],0<V[i]&&(a+=h(this,V[i])),n+o>u&&(r=this.f(),u=r.length);o--;)r[n]=r[n++-a];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},f.prototype.f=function(){var e,t,r=new(w?Uint8Array:Array)(this.b-32768),n=this.b-32768,i=this.a;if(w)r.set(i.subarray(32768,r.length));else for(e=0,t=r.length;e<t;++e)r[e]=i[e+32768];if(this.l.push(r),this.q+=r.length,w)i.set(i.subarray(n,n+32768));else for(e=0;32768>e;++e)i[e]=i[n+e];return this.b=32768,i},f.prototype.J=function(e){var t,r,n,i,s=this.input.length/this.c+1|0,a=this.input,o=this.a;return e&&("number"==typeof e.v&&(s=e.v),"number"==typeof e.F&&(s+=e.F)),2>s?(r=(a.length-this.c)/this.u[2],i=r/2*258|0,n=i<o.length?o.length+i:o.length<<1):n=o.length*s,w?(t=new Uint8Array(n)).set(o):t=o,this.a=t},f.prototype.t=function(){var e,t,r,n,i,s=0,a=this.a,o=this.l,u=new(w?Uint8Array:Array)(this.q+(this.b-32768));if(0===o.length)return w?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(t=0,r=o.length;t<r;++t)for(n=0,i=(e=o[t]).length;n<i;++n)u[s++]=e[n];for(t=32768,r=this.b;t<r;++t)u[s++]=a[t];return this.l=[],this.buffer=u},f.prototype.H=function(){var e,t=this.b;return w?this.B?(e=new Uint8Array(t)).set(this.a.subarray(0,t)):e=this.a.subarray(0,t):(this.a.length>t&&(this.a.length=t),e=this.a),this.buffer=e},d.prototype.p=function(){var t,r=this.input;return t=this.A.p(),this.c=this.A.c,this.M&&(r[this.c++]<<24|r[this.c++]<<16|r[this.c++]<<8|r[this.c++])>>>0!==c(t)&&e(Error("invalid adler-32 checksum")),t};var Q=8,ee=P;p.prototype.j=function(){var t,r,n,i,s,a,o,u=0;switch(o=this.a,t=Q){case Q:r=Math.LOG2E*Math.log(32768)-8;break;default:e(Error("invalid compression method"))}switch(n=r<<4|t,o[u++]=n,t){case Q:switch(this.h){case ee.NONE:s=0;break;case ee.r:s=1;break;case ee.k:s=2;break;default:e(Error("unsupported compression type"))}break;default:e(Error("invalid compression method"))}return i=s<<6|0,o[u++]=i|31-(256*n+i)%31,a=c(this.input),this.z.b=u,o=this.z.j(),u=o.length,w&&((o=new Uint8Array(o.buffer)).length<=u+4&&(this.a=new Uint8Array(o.length+4),this.a.set(o),o=this.a),o=o.subarray(0,u+4)),o[u++]=a>>24&255,o[u++]=a>>16&255,o[u++]=a>>8&255,o[u++]=255&a,o},t("Zlib.Inflate",d),t("Zlib.Inflate.prototype.decompress",d.prototype.p),y("Zlib.Inflate.BufferType",{ADAPTIVE:I.C,BLOCK:I.D}),t("Zlib.Deflate",p),t("Zlib.Deflate.compress",function(e,t){return new p(e,t).j()}),t("Zlib.Deflate.prototype.compress",p.prototype.j),y("Zlib.Deflate.CompressionType",{NONE:ee.NONE,FIXED:ee.r,DYNAMIC:ee.k})}).call(this)},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../enums.js"));r.default={prefer_hash_algorithm:n.default.hash.sha256,encryption_cipher:n.default.symmetric.aes256,compression:n.default.compression.zip,aead_protect:!1,integrity_protect:!0,ignore_mdc_error:!1,checksum_required:!1,verify_expired_keys:!0,rsa_blinding:!0,use_native:!0,zero_copy:!1,debug:!1,tolerant:!0,show_version:!0,show_comment:!0,versionstring:"OpenPGP.js v2.6.2",commentstring:"https://openpgpjs.org",keyserver:"https://keyserver.ubuntu.com",node_store:"./openpgp.store"}},{"../enums.js":35}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./config.js");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(n).default}})},{"./config.js":9}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./cipher"));r.default={encrypt:function(e,t,r,i,s){var a=(t=new n.default[t](i)).blockSize,o=new Uint8Array(a),u=new Uint8Array(a),f=new Uint8Array(e.length+2);f.set(e),f[e.length]=e[a-2],f[e.length+1]=e[a-1],e=f;var h,l,c,d=new Uint8Array(r.length+2+2*a),p=s?0:2;for(h=0;h<a;h++)o[h]=0;for(u=t.encrypt(o),h=0;h<a;h++)d[h]=u[h]^e[h];for(o.set(d.subarray(0,a)),u=t.encrypt(o),d[a]=u[0]^e[a],d[a+1]=u[1]^e[a+1],s?o.set(d.subarray(2,a+2)):o.set(d.subarray(0,a)),u=t.encrypt(o),h=0;h<a;h++)d[a+2+h]=u[h+p]^r[h];for(l=a;l<r.length+p;l+=a)for(c=l+2-p,o.set(d.subarray(c,c+a)),u=t.encrypt(o),h=0;h<a;h++)d[a+c+h]=u[h]^r[l+h-p];return d=d.subarray(0,r.length+2+a)},mdc:function(e,t,r){var i,s=(e=new n.default[e](t)).blockSize,a=new Uint8Array(s),o=new Uint8Array(s);for(i=0;i<s;i++)a[i]=0;for(a=e.encrypt(a),i=0;i<s;i++)o[i]=r[i],a[i]^=o[i];o=e.encrypt(o);var u=new Uint8Array(a.length+2);return u.set(a),u[a.length]=o[0]^r[s],u[a.length+1]=o[1]^r[s+1],u},decrypt:function(e,t,r,i){var s,a,o,u=(e=new n.default[e](t)).blockSize,f=new Uint8Array(u),h=new Uint8Array(u),l=new Uint8Array(r.length-u);for(s=0;s<u;s++)f[s]=0;for(f=e.encrypt(f),s=0;s<u;s++)h[s]=r[s],f[s]^=h[s];if(h=e.encrypt(h),f[u-2]!==(h[0]^r[u])||f[u-1]!==(h[1]^r[u+1]))throw new Error("CFB decrypt: invalid key");if(a=0,i){for(s=0;s<u;s++)f[s]=r[s+2];for(o=u+2;o<r.length;o+=u)for(h=e.encrypt(f),s=0;s<u&&s+o<r.length;s++)f[s]=r[o+s],a<l.length&&(l[a]=h[s]^f[s],a++)}else{for(s=0;s<u;s++)f[s]=r[s];for(o=u;o<r.length;o+=u)for(h=e.encrypt(f),s=0;s<u&&s+o<r.length;s++)f[s]=r[o+s],a<l.length&&(l[a]=h[s]^f[s],a++)}return o=i?0:2,l=l.subarray(o,r.length-u-2+o)},normalEncrypt:function(e,t,r,i){var s,a=(e=new n.default[e](t)).blockSize,o=new Uint8Array(a),u=new Uint8Array(a),f=0,h=new Uint8Array(r.length),l=0;if(null===i)for(s=0;s<a;s++)u[s]=0;else for(s=0;s<a;s++)u[s]=i[s];for(;r.length>a*f;){var c=e.encrypt(u);for(o=r.subarray(f*a,f*a+a),s=0;s<o.length;s++)u[s]=o[s]^c[s],h[l++]=u[s];f++}return h},normalDecrypt:function(e,t,r,i){var s,a,o=(e=new n.default[e](t)).blockSize,u=0,f=new Uint8Array(r.length),h=0;if(null===i)for(s=new Uint8Array(o),a=0;a<o;a++)s[a]=0;else s=i.subarray(0,o);for(;r.length>o*u;){var l=e.encrypt(s);for(s=r.subarray(u*o+0,u*o+o+0),a=0;a<s.length;a++)f[h++]=s[a]^l[a];u++}return f}}},{"./cipher":16}],12:[function(e,t,r){"use strict";function n(e){return 255&e}function i(e){return e>>8&255}function s(e){return e>>16&255}function a(e){return e>>24&255}function o(e,t,r,n){return i(c[255&e])|i(c[t>>8&255])<<8|i(c[r>>16&255])<<16|i(c[n>>>24])<<24}function u(e,t,r){var u,f,h;for(h=function(e){var t,r,n=e.length,i=new Array(n/4);if(e&&!(n%4)){for(t=0,r=0;r<n;r+=4)i[t++]=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;return i}}(e),f=t.rounds,u=0;u<f-1;u++)r[0]=h[0]^t.rk[u][0],r[1]=h[1]^t.rk[u][1],r[2]=h[2]^t.rk[u][2],r[3]=h[3]^t.rk[u][3],h[0]=c[255&r[0]]^d[r[1]>>8&255]^p[r[2]>>16&255]^y[r[3]>>>24],h[1]=c[255&r[1]]^d[r[2]>>8&255]^p[r[3]>>16&255]^y[r[0]>>>24],h[2]=c[255&r[2]]^d[r[3]>>8&255]^p[r[0]>>16&255]^y[r[1]>>>24],h[3]=c[255&r[3]]^d[r[0]>>8&255]^p[r[1]>>16&255]^y[r[2]>>>24];return u=f-1,r[0]=h[0]^t.rk[u][0],r[1]=h[1]^t.rk[u][1],r[2]=h[2]^t.rk[u][2],r[3]=h[3]^t.rk[u][3],h[0]=o(r[0],r[1],r[2],r[3])^t.rk[f][0],h[1]=o(r[1],r[2],r[3],r[0])^t.rk[f][1],h[2]=o(r[2],r[3],r[0],r[1])^t.rk[f][2],h[3]=o(r[3],r[0],r[1],r[2])^t.rk[f][3],function(e){var t,r=0,o=e.length,u=new Array(4*o);for(t=0;t<o;t++)u[r++]=n(e[t]),u[r++]=i(e[t]),u[r++]=s(e[t]),u[r++]=a(e[t]);return u}(h)}function f(e){var t=function(e){this.key=function(e){var t,r,o,u,f,c,d=new Array(m+1),p=e.length,y=new Array(g),v=new Array(g),w=0;if(16===p)c=10,t=4;else if(24===p)c=12,t=6;else{if(32!==p)throw new Error("Invalid key-length for AES key:"+p);c=14,t=8}for(r=0;r<m+1;r++)d[r]=new Uint32Array(4);for(r=0,o=0;o<p;o++,r+=4)y[o]=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;for(o=t-1;o>=0;o--)v[o]=y[o];for(u=0,f=0,o=0;o<t&&u<c+1;){for(;o<t&&f<4;o++,f++)d[u][f]=v[o];4===f&&(u++,f=0)}for(;u<c+1;){var b=v[t-1];if(v[0]^=l[i(b)]|l[s(b)]<<8|l[a(b)]<<16|l[n(b)]<<24,v[0]^=h[w++],8!==t)for(o=1;o<t;o++)v[o]^=v[o-1];else{for(o=1;o<t/2;o++)v[o]^=v[o-1];for(b=v[t/2-1],v[t/2]^=l[n(b)]|l[i(b)]<<8|l[s(b)]<<16|l[a(b)]<<24,o=t/2+1;o<t;o++)v[o]^=v[o-1]}for(o=0;o<t&&u<c+1;){for(;o<t&&f<4;o++,f++)d[u][f]=v[o];4===f&&(u++,f=0)}}return{rounds:c,rk:d}}(e),this._temp=new Uint32Array(this.blockSize/4),this.encrypt=function(e){return u(e,this.key,this._temp)}};return t.blockSize=t.prototype.blockSize=16,t.keySize=t.prototype.keySize=e/8,t}Object.defineProperty(r,"__esModule",{value:!0});var h=new Uint8Array([1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145]),l=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),c=new Uint32Array([2774754246,2222750968,2574743534,2373680118,234025727,3177933782,2976870366,1422247313,1345335392,50397442,2842126286,2099981142,436141799,1658312629,3870010189,2591454956,1170918031,2642575903,1086966153,2273148410,368769775,3948501426,3376891790,200339707,3970805057,1742001331,4255294047,3937382213,3214711843,4154762323,2524082916,1539358875,3266819957,486407649,2928907069,1780885068,1513502316,1094664062,49805301,1338821763,1546925160,4104496465,887481809,150073849,2473685474,1943591083,1395732834,1058346282,201589768,1388824469,1696801606,1589887901,672667696,2711000631,251987210,3046808111,151455502,907153956,2608889883,1038279391,652995533,1764173646,3451040383,2675275242,453576978,2659418909,1949051992,773462580,756751158,2993581788,3998898868,4221608027,4132590244,1295727478,1641469623,3467883389,2066295122,1055122397,1898917726,2542044179,4115878822,1758581177,0,753790401,1612718144,536673507,3367088505,3982187446,3194645204,1187761037,3653156455,1262041458,3729410708,3561770136,3898103984,1255133061,1808847035,720367557,3853167183,385612781,3309519750,3612167578,1429418854,2491778321,3477423498,284817897,100794884,2172616702,4031795360,1144798328,3131023141,3819481163,4082192802,4272137053,3225436288,2324664069,2912064063,3164445985,1211644016,83228145,3753688163,3249976951,1977277103,1663115586,806359072,452984805,250868733,1842533055,1288555905,336333848,890442534,804056259,3781124030,2727843637,3427026056,957814574,1472513171,4071073621,2189328124,1195195770,2892260552,3881655738,723065138,2507371494,2690670784,2558624025,3511635870,2145180835,1713513028,2116692564,2878378043,2206763019,3393603212,703524551,3552098411,1007948840,2044649127,3797835452,487262998,1994120109,1004593371,1446130276,1312438900,503974420,3679013266,168166924,1814307912,3831258296,1573044895,1859376061,4021070915,2791465668,2828112185,2761266481,937747667,2339994098,854058965,1137232011,1496790894,3077402074,2358086913,1691735473,3528347292,3769215305,3027004632,4199962284,133494003,636152527,2942657994,2390391540,3920539207,403179536,3585784431,2289596656,1864705354,1915629148,605822008,4054230615,3350508659,1371981463,602466507,2094914977,2624877800,555687742,3712699286,3703422305,2257292045,2240449039,2423288032,1111375484,3300242801,2858837708,3628615824,84083462,32962295,302911004,2741068226,1597322602,4183250862,3501832553,2441512471,1489093017,656219450,3114180135,954327513,335083755,3013122091,856756514,3144247762,1893325225,2307821063,2811532339,3063651117,572399164,2458355477,552200649,1238290055,4283782570,2015897680,2061492133,2408352771,4171342169,2156497161,386731290,3669999461,837215959,3326231172,3093850320,3275833730,2962856233,1999449434,286199582,3417354363,4233385128,3602627437,974525996]),d=new Uint32Array([1667483301,2088564868,2004348569,2071721613,4076011277,1802229437,1869602481,3318059348,808476752,16843267,1734856361,724260477,4278118169,3621238114,2880130534,1987505306,3402272581,2189565853,3385428288,2105408135,4210749205,1499050731,1195871945,4042324747,2913812972,3570709351,2728550397,2947499498,2627478463,2762232823,1920132246,3233848155,3082253762,4261273884,2475900334,640044138,909536346,1061125697,4160222466,3435955023,875849820,2779075060,3857043764,4059166984,1903288979,3638078323,825320019,353708607,67373068,3351745874,589514341,3284376926,404238376,2526427041,84216335,2593796021,117902857,303178806,2155879323,3806519101,3958099238,656887401,2998042573,1970662047,151589403,2206408094,741103732,437924910,454768173,1852759218,1515893998,2694863867,1381147894,993752653,3604395873,3014884814,690573947,3823361342,791633521,2223248279,1397991157,3520182632,0,3991781676,538984544,4244431647,2981198280,1532737261,1785386174,3419114822,3200149465,960066123,1246401758,1280088276,1482207464,3486483786,3503340395,4025468202,2863288293,4227591446,1128498885,1296931543,859006549,2240090516,1162185423,4193904912,33686534,2139094657,1347461360,1010595908,2678007226,2829601763,1364304627,2745392638,1077969088,2408514954,2459058093,2644320700,943222856,4126535940,3166462943,3065411521,3671764853,555827811,269492272,4294960410,4092853518,3537026925,3452797260,202119188,320022069,3974939439,1600110305,2543269282,1145342156,387395129,3301217111,2812761586,2122251394,1027439175,1684326572,1566423783,421081643,1936975509,1616953504,2172721560,1330618065,3705447295,572671078,707417214,2425371563,2290617219,1179028682,4008625961,3099093971,336865340,3739133817,1583267042,185275933,3688607094,3772832571,842163286,976909390,168432670,1229558491,101059594,606357612,1549580516,3267534685,3553869166,2896970735,1650640038,2442213800,2509582756,3840201527,2038035083,3890730290,3368586051,926379609,1835915959,2374828428,3587551588,1313774802,2846444e3,1819072692,1448520954,4109693703,3941256997,1701169839,2054878350,2930657257,134746136,3132780501,2021191816,623200879,774790258,471611428,2795919345,3031724999,3334903633,3907570467,3722289532,1953818780,522141217,1263245021,3183305180,2341145990,2324303749,1886445712,1044282434,3048567236,1718013098,1212715224,50529797,4143380225,235805714,1633796771,892693087,1465364217,3115936208,2256934801,3250690392,488454695,2661164985,3789674808,4177062675,2560109491,286335539,1768542907,3654920560,2391672713,2492740519,2610638262,505297954,2273777042,3924412704,3469641545,1431677695,673730680,3755976058,2357986191,2711706104,2307459456,218962455,3216991706,3873888049,1111655622,1751699640,1094812355,2576951728,757946999,252648977,2964356043,1414834428,3149622742,370551866]),p=new Uint32Array([1673962851,2096661628,2012125559,2079755643,4076801522,1809235307,1876865391,3314635973,811618352,16909057,1741597031,727088427,4276558334,3618988759,2874009259,1995217526,3398387146,2183110018,3381215433,2113570685,4209972730,1504897881,1200539975,4042984432,2906778797,3568527316,2724199842,2940594863,2619588508,2756966308,1927583346,3231407040,3077948087,4259388669,2470293139,642542118,913070646,1065238847,4160029431,3431157708,879254580,2773611685,3855693029,4059629809,1910674289,3635114968,828527409,355090197,67636228,3348452039,591815971,3281870531,405809176,2520228246,84545285,2586817946,118360327,304363026,2149292928,3806281186,3956090603,659450151,2994720178,1978310517,152181513,2199756419,743994412,439627290,456535323,1859957358,1521806938,2690382752,1386542674,997608763,3602342358,3011366579,693271337,3822927587,794718511,2215876484,1403450707,3518589137,0,3988860141,541089824,4242743292,2977548465,1538714971,1792327274,3415033547,3194476990,963791673,1251270218,1285084236,1487988824,3481619151,3501943760,4022676207,2857362858,4226619131,1132905795,1301993293,862344499,2232521861,1166724933,4192801017,33818114,2147385727,1352724560,1014514748,2670049951,2823545768,1369633617,2740846243,1082179648,2399505039,2453646738,2636233885,946882616,4126213365,3160661948,3061301686,3668932058,557998881,270544912,4293204735,4093447923,3535760850,3447803085,202904588,321271059,3972214764,1606345055,2536874647,1149815876,388905239,3297990596,2807427751,2130477694,1031423805,1690872932,1572530013,422718233,1944491379,1623236704,2165938305,1335808335,3701702620,574907938,710180394,2419829648,2282455944,1183631942,4006029806,3094074296,338181140,3735517662,1589437022,185998603,3685578459,3772464096,845436466,980700730,169090570,1234361161,101452294,608726052,1555620956,3265224130,3552407251,2890133420,1657054818,2436475025,2503058581,3839047652,2045938553,3889509095,3364570056,929978679,1843050349,2365688973,3585172693,1318900302,2840191145,1826141292,1454176854,4109567988,3939444202,1707781989,2062847610,2923948462,135272456,3127891386,2029029496,625635109,777810478,473441308,2790781350,3027486644,3331805638,3905627112,3718347997,1961401460,524165407,1268178251,3177307325,2332919435,2316273034,1893765232,1048330814,3044132021,1724688998,1217452104,50726147,4143383030,236720654,1640145761,896163637,1471084887,3110719673,2249691526,3248052417,490350365,2653403550,3789109473,4176155640,2553000856,287453969,1775418217,3651760345,2382858638,2486413204,2603464347,507257374,2266337927,3922272489,3464972750,1437269845,676362280,3752164063,2349043596,2707028129,2299101321,219813645,3211123391,3872862694,1115997762,1758509160,1099088705,2569646233,760903469,253628687,2960903088,1420360788,3144537787,371997206]),y=new Uint32Array([3332727651,4169432188,4003034999,4136467323,4279104242,3602738027,3736170351,2438251973,1615867952,33751297,3467208551,1451043627,3877240574,3043153879,1306962859,3969545846,2403715786,530416258,2302724553,4203183485,4011195130,3001768281,2395555655,4211863792,1106029997,3009926356,1610457762,1173008303,599760028,1408738468,3835064946,2606481600,1975695287,3776773629,1034851219,1282024998,1817851446,2118205247,4110612471,2203045068,1750873140,1374987685,3509904869,4178113009,3801313649,2876496088,1649619249,708777237,135005188,2505230279,1181033251,2640233411,807933976,933336726,168756485,800430746,235472647,607523346,463175808,3745374946,3441880043,1315514151,2144187058,3936318837,303761673,496927619,1484008492,875436570,908925723,3702681198,3035519578,1543217312,2767606354,1984772923,3076642518,2110698419,1383803177,3711886307,1584475951,328696964,2801095507,3110654417,0,3240947181,1080041504,3810524412,2043195825,3069008731,3569248874,2370227147,1742323390,1917532473,2497595978,2564049996,2968016984,2236272591,3144405200,3307925487,1340451498,3977706491,2261074755,2597801293,1716859699,294946181,2328839493,3910203897,67502594,4269899647,2700103760,2017737788,632987551,1273211048,2733855057,1576969123,2160083008,92966799,1068339858,566009245,1883781176,4043634165,1675607228,2009183926,2943736538,1113792801,540020752,3843751935,4245615603,3211645650,2169294285,403966988,641012499,3274697964,3202441055,899848087,2295088196,775493399,2472002756,1441965991,4236410494,2051489085,3366741092,3135724893,841685273,3868554099,3231735904,429425025,2664517455,2743065820,1147544098,1417554474,1001099408,193169544,2362066502,3341414126,1809037496,675025940,2809781982,3168951902,371002123,2910247899,3678134496,1683370546,1951283770,337512970,2463844681,201983494,1215046692,3101973596,2673722050,3178157011,1139780780,3299238498,967348625,832869781,3543655652,4069226873,3576883175,2336475336,1851340599,3669454189,25988493,2976175573,2631028302,1239460265,3635702892,2902087254,4077384948,3475368682,3400492389,4102978170,1206496942,270010376,1876277946,4035475576,1248797989,1550986798,941890588,1475454630,1942467764,2538718918,3408128232,2709315037,3902567540,1042358047,2531085131,1641856445,226921355,260409994,3767562352,2084716094,1908716981,3433719398,2430093384,100991747,4144101110,470945294,3265487201,1784624437,2935576407,1775286713,395413126,2572730817,975641885,666476190,3644383713,3943954680,733190296,573772049,3535497577,2842745305,126455438,866620564,766942107,1008868894,361924487,3374377449,2269761230,2868860245,1350051880,2776293343,59739276,1509466529,159418761,437718285,1708834751,3610371814,2227585602,3501746280,2193834305,699439513,1517759789,504434447,2076946608,2835108948,1842789307,742004246]),g=8,m=14;r.default={128:f(128),192:f(192),256:f(256)}},{}],13:[function(e,t,r){"use strict";function n(){}function i(e){this.bf=new n,this.bf.init(e),this.encrypt=function(e){return this.bf.encrypt_block(e)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i,n.prototype.BLOCKSIZE=8,n.prototype.SBOXES=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],n.prototype.PARRAY=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],n.prototype.NN=16,n.prototype._clean=function(e){if(e<0){e=(2147483647&e)+2147483648}return e},n.prototype._F=function(e){var t,r,n,i,s;return i=255&e,e>>>=8,n=255&e,e>>>=8,r=255&e,e>>>=8,t=255&e,s=this.sboxes[0][t]+this.sboxes[1][r],s^=this.sboxes[2][n],s+=this.sboxes[3][i]},n.prototype._encrypt_block=function(e){var t,r=e[0],n=e[1];for(t=0;t<this.NN;++t){var i=r^=this.parray[t];r=n=this._F(r)^n,n=i}r^=this.parray[this.NN+0],n^=this.parray[this.NN+1],e[0]=this._clean(n),e[1]=this._clean(r)},n.prototype.encrypt_block=function(e){var t,r=[0,0],n=this.BLOCKSIZE/2;for(t=0;t<this.BLOCKSIZE/2;++t)r[0]=r[0]<<8|255&e[t+0],r[1]=r[1]<<8|255&e[t+n];this._encrypt_block(r);var i=[];for(t=0;t<this.BLOCKSIZE/2;++t)i[t+0]=r[0]>>>24-8*t&255,i[t+n]=r[1]>>>24-8*t&255;return i},n.prototype._decrypt_block=function(e){var t,r=e[0],n=e[1];for(t=this.NN+1;t>1;--t){var i=r^=this.parray[t];r=n=this._F(r)^n,n=i}r^=this.parray[1],n^=this.parray[0],e[0]=this._clean(n),e[1]=this._clean(r)},n.prototype.init=function(e){var t,r=0;for(this.parray=[],t=0;t<this.NN+2;++t){var n,i=0;for(n=0;n<4;++n)i=i<<8|255&e[r],++r>=e.length&&(r=0);this.parray[t]=this.PARRAY[t]^i}for(this.sboxes=[],t=0;t<4;++t)for(this.sboxes[t]=[],r=0;r<256;++r)this.sboxes[t][r]=this.SBOXES[t][r];var s=[0,0];for(t=0;t<this.NN+2;t+=2)this._encrypt_block(s),this.parray[t+0]=s[0],this.parray[t+1]=s[1];for(t=0;t<4;++t)for(r=0;r<256;r+=2)this._encrypt_block(s),this.sboxes[t][r+0]=s[0],this.sboxes[t][r+1]=s[1]},i.keySize=i.prototype.keySize=16,i.blockSize=i.prototype.blockSize=16},{}],14:[function(e,t,r){"use strict";function n(e){this.cast5=new function(){function e(e,t,r){var n=t+e,i=n<<r|n>>>32-r;return(s[0][i>>>24]^s[1][i>>>16&255])-s[2][i>>>8&255]+s[3][255&i]}function t(e,t,r){var n=t^e,i=n<<r|n>>>32-r;return s[0][i>>>24]-s[1][i>>>16&255]+s[2][i>>>8&255]^s[3][255&i]}function r(e,t,r){var n=t-e,i=n<<r|n>>>32-r;return(s[0][i>>>24]+s[1][i>>>16&255]^s[2][i>>>8&255])-s[3][255&i]}this.BlockSize=8,this.KeySize=16,this.setKey=function(e){if(this.masking=new Array(16),this.rotate=new Array(16),this.reset(),e.length!==this.KeySize)throw new Error("CAST-128: keys must be 16 bytes");return this.keySchedule(e),!0},this.reset=function(){for(var e=0;e<16;e++)this.masking[e]=0,this.rotate[e]=0},this.getBlockSize=function(){return this.BlockSize},this.encrypt=function(n){for(var i=new Array(n.length),s=0;s<n.length;s+=8){var a,o=n[s]<<24|n[s+1]<<16|n[s+2]<<8|n[s+3],u=n[s+4]<<24|n[s+5]<<16|n[s+6]<<8|n[s+7];a=u,u=o^e(u,this.masking[0],this.rotate[0]),o=a,a=u,u=o^t(u,this.masking[1],this.rotate[1]),o=a,a=u,u=o^r(u,this.masking[2],this.rotate[2]),o=a,a=u,u=o^e(u,this.masking[3],this.rotate[3]),o=a,a=u,u=o^t(u,this.masking[4],this.rotate[4]),o=a,a=u,u=o^r(u,this.masking[5],this.rotate[5]),o=a,a=u,u=o^e(u,this.masking[6],this.rotate[6]),o=a,a=u,u=o^t(u,this.masking[7],this.rotate[7]),o=a,a=u,u=o^r(u,this.masking[8],this.rotate[8]),o=a,a=u,u=o^e(u,this.masking[9],this.rotate[9]),o=a,a=u,u=o^t(u,this.masking[10],this.rotate[10]),o=a,a=u,u=o^r(u,this.masking[11],this.rotate[11]),o=a,a=u,u=o^e(u,this.masking[12],this.rotate[12]),o=a,a=u,u=o^t(u,this.masking[13],this.rotate[13]),o=a,a=u,u=o^r(u,this.masking[14],this.rotate[14]),o=a,a=u,u=o^e(u,this.masking[15],this.rotate[15]),o=a,i[s]=u>>>24&255,i[s+1]=u>>>16&255,i[s+2]=u>>>8&255,i[s+3]=255&u,i[s+4]=o>>>24&255,i[s+5]=o>>>16&255,i[s+6]=o>>>8&255,i[s+7]=255&o}return i},this.decrypt=function(n){for(var i=new Array(n.length),s=0;s<n.length;s+=8){var a,o=n[s]<<24|n[s+1]<<16|n[s+2]<<8|n[s+3],u=n[s+4]<<24|n[s+5]<<16|n[s+6]<<8|n[s+7];a=u,u=o^e(u,this.masking[15],this.rotate[15]),o=a,a=u,u=o^r(u,this.masking[14],this.rotate[14]),o=a,a=u,u=o^t(u,this.masking[13],this.rotate[13]),o=a,a=u,u=o^e(u,this.masking[12],this.rotate[12]),o=a,a=u,u=o^r(u,this.masking[11],this.rotate[11]),o=a,a=u,u=o^t(u,this.masking[10],this.rotate[10]),o=a,a=u,u=o^e(u,this.masking[9],this.rotate[9]),o=a,a=u,u=o^r(u,this.masking[8],this.rotate[8]),o=a,a=u,u=o^t(u,this.masking[7],this.rotate[7]),o=a,a=u,u=o^e(u,this.masking[6],this.rotate[6]),o=a,a=u,u=o^r(u,this.masking[5],this.rotate[5]),o=a,a=u,u=o^t(u,this.masking[4],this.rotate[4]),o=a,a=u,u=o^e(u,this.masking[3],this.rotate[3]),o=a,a=u,u=o^r(u,this.masking[2],this.rotate[2]),o=a,a=u,u=o^t(u,this.masking[1],this.rotate[1]),o=a,a=u,u=o^e(u,this.masking[0],this.rotate[0]),o=a,i[s]=u>>>24&255,i[s+1]=u>>>16&255,i[s+2]=u>>>8&255,i[s+3]=255&u,i[s+4]=o>>>24&255,i[s+5]=o>>16&255,i[s+6]=o>>8&255,i[s+7]=255&o}return i};var n=new Array(4);n[0]=new Array(4),n[0][0]=new Array(4,0,13,15,12,14,8),n[0][1]=new Array(5,2,16,18,17,19,10),n[0][2]=new Array(6,3,23,22,21,20,9),n[0][3]=new Array(7,1,26,25,27,24,11),n[1]=new Array(4),n[1][0]=new Array(0,6,21,23,20,22,16),n[1][1]=new Array(1,4,0,2,1,3,18),n[1][2]=new Array(2,5,7,6,5,4,17),n[1][3]=new Array(3,7,10,9,11,8,19),n[2]=new Array(4),n[2][0]=new Array(4,0,13,15,12,14,8),n[2][1]=new Array(5,2,16,18,17,19,10),n[2][2]=new Array(6,3,23,22,21,20,9),n[2][3]=new Array(7,1,26,25,27,24,11),n[3]=new Array(4),n[3][0]=new Array(0,6,21,23,20,22,16),n[3][1]=new Array(1,4,0,2,1,3,18),n[3][2]=new Array(2,5,7,6,5,4,17),n[3][3]=new Array(3,7,10,9,11,8,19);var i=new Array(4);i[0]=new Array(4),i[0][0]=new Array(24,25,23,22,18),i[0][1]=new Array(26,27,21,20,22),i[0][2]=new Array(28,29,19,18,25),i[0][3]=new Array(30,31,17,16,28),i[1]=new Array(4),i[1][0]=new Array(3,2,12,13,8),i[1][1]=new Array(1,0,14,15,13),i[1][2]=new Array(7,6,8,9,3),i[1][3]=new Array(5,4,10,11,7),i[2]=new Array(4),i[2][0]=new Array(19,18,28,29,25),i[2][1]=new Array(17,16,30,31,28),i[2][2]=new Array(23,22,24,25,18),i[2][3]=new Array(21,20,26,27,22),i[3]=new Array(4),i[3][0]=new Array(8,9,7,6,3),i[3][1]=new Array(10,11,5,4,7),i[3][2]=new Array(12,13,3,2,8),i[3][3]=new Array(14,15,1,0,13),this.keySchedule=function(e){var t,r,a=new Array(8),o=new Array(32);for(t=0;t<4;t++)r=4*t,a[t]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3];for(var u,f=[6,7,4,5],h=0,l=0;l<2;l++)for(var c=0;c<4;c++){for(r=0;r<4;r++){var d=n[c][r];u=a[d[1]],u^=s[4][a[d[2]>>>2]>>>24-8*(3&d[2])&255],u^=s[5][a[d[3]>>>2]>>>24-8*(3&d[3])&255],u^=s[6][a[d[4]>>>2]>>>24-8*(3&d[4])&255],u^=s[7][a[d[5]>>>2]>>>24-8*(3&d[5])&255],u^=s[f[r]][a[d[6]>>>2]>>>24-8*(3&d[6])&255],a[d[0]]=u}for(r=0;r<4;r++){var p=i[c][r];u=s[4][a[p[0]>>>2]>>>24-8*(3&p[0])&255],u^=s[5][a[p[1]>>>2]>>>24-8*(3&p[1])&255],u^=s[6][a[p[2]>>>2]>>>24-8*(3&p[2])&255],u^=s[7][a[p[3]>>>2]>>>24-8*(3&p[3])&255],u^=s[4+r][a[p[4]>>>2]>>>24-8*(3&p[4])&255],o[h]=u,h++}}for(t=0;t<16;t++)this.masking[t]=o[t],this.rotate[t]=31&o[16+t]};var s=new Array(8);s[0]=new Array(821772500,2678128395,1810681135,1059425402,505495343,2617265619,1610868032,3483355465,3218386727,2294005173,3791863952,2563806837,1852023008,365126098,3269944861,584384398,677919599,3229601881,4280515016,2002735330,1136869587,3744433750,2289869850,2731719981,2714362070,879511577,1639411079,575934255,717107937,2857637483,576097850,2731753936,1725645e3,2810460463,5111599,767152862,2543075244,1251459544,1383482551,3052681127,3089939183,3612463449,1878520045,1510570527,2189125840,2431448366,582008916,3163445557,1265446783,1354458274,3529918736,3202711853,3073581712,3912963487,3029263377,1275016285,4249207360,2905708351,3304509486,1442611557,3585198765,2712415662,2731849581,3248163920,2283946226,208555832,2766454743,1331405426,1447828783,3315356441,3108627284,2957404670,2981538698,3339933917,1669711173,286233437,1465092821,1782121619,3862771680,710211251,980974943,1651941557,430374111,2051154026,704238805,4128970897,3144820574,2857402727,948965521,3333752299,2227686284,718756367,2269778983,2731643755,718440111,2857816721,3616097120,1113355533,2478022182,410092745,1811985197,1944238868,2696854588,1415722873,1682284203,1060277122,1998114690,1503841958,82706478,2315155686,1068173648,845149890,2167947013,1768146376,1993038550,3566826697,3390574031,940016341,3355073782,2328040721,904371731,1205506512,4094660742,2816623006,825647681,85914773,2857843460,1249926541,1417871568,3287612,3211054559,3126306446,1975924523,1353700161,2814456437,2438597621,1800716203,722146342,2873936343,1151126914,4160483941,2877670899,458611604,2866078500,3483680063,770352098,2652916994,3367839148,3940505011,3585973912,3809620402,718646636,2504206814,2914927912,3631288169,2857486607,2860018678,575749918,2857478043,718488780,2069512688,3548183469,453416197,1106044049,3032691430,52586708,3378514636,3459808877,3211506028,1785789304,218356169,3571399134,3759170522,1194783844,1523787992,3007827094,1975193539,2555452411,1341901877,3045838698,3776907964,3217423946,2802510864,2889438986,1057244207,1636348243,3761863214,1462225785,2632663439,481089165,718503062,24497053,3332243209,3344655856,3655024856,3960371065,1195698900,2971415156,3710176158,2115785917,4027663609,3525578417,2524296189,2745972565,3564906415,1372086093,1452307862,2780501478,1476592880,3389271281,18495466,2378148571,901398090,891748256,3279637769,3157290713,2560960102,1447622437,4284372637,216884176,2086908623,1879786977,3588903153,2242455666,2938092967,3559082096,2810645491,758861177,1121993112,215018983,642190776,4169236812,1196255959,2081185372,3508738393,941322904,4124243163,2877523539,1848581667,2205260958,3180453958,2589345134,3694731276,550028657,2519456284,3789985535,2973870856,2093648313,443148163,46942275,2734146937,1117713533,1115362972,1523183689,3717140224,1551984063),s[1]=new Array(522195092,4010518363,1776537470,960447360,4267822970,4005896314,1435016340,1929119313,2913464185,1310552629,3579470798,3724818106,2579771631,1594623892,417127293,2715217907,2696228731,1508390405,3994398868,3925858569,3695444102,4019471449,3129199795,3770928635,3520741761,990456497,4187484609,2783367035,21106139,3840405339,631373633,3783325702,532942976,396095098,3548038825,4267192484,2564721535,2011709262,2039648873,620404603,3776170075,2898526339,3612357925,4159332703,1645490516,223693667,1567101217,3362177881,1029951347,3470931136,3570957959,1550265121,119497089,972513919,907948164,3840628539,1613718692,3594177948,465323573,2659255085,654439692,2575596212,2699288441,3127702412,277098644,624404830,4100943870,2717858591,546110314,2403699828,3655377447,1321679412,4236791657,1045293279,4010672264,895050893,2319792268,494945126,1914543101,2777056443,3894764339,2219737618,311263384,4275257268,3458730721,669096869,3584475730,3835122877,3319158237,3949359204,2005142349,2713102337,2228954793,3769984788,569394103,3855636576,1425027204,108000370,2736431443,3671869269,3043122623,1750473702,2211081108,762237499,3972989403,2798899386,3061857628,2943854345,867476300,964413654,1591880597,1594774276,2179821409,552026980,3026064248,3726140315,2283577634,3110545105,2152310760,582474363,1582640421,1383256631,2043843868,3322775884,1217180674,463797851,2763038571,480777679,2718707717,2289164131,3118346187,214354409,200212307,3810608407,3025414197,2674075964,3997296425,1847405948,1342460550,510035443,4080271814,815934613,833030224,1620250387,1945732119,2703661145,3966000196,1388869545,3456054182,2687178561,2092620194,562037615,1356438536,3409922145,3261847397,1688467115,2150901366,631725691,3840332284,549916902,3455104640,394546491,837744717,2114462948,751520235,2221554606,2415360136,3999097078,2063029875,803036379,2702586305,821456707,3019566164,360699898,4018502092,3511869016,3677355358,2402471449,812317050,49299192,2570164949,3259169295,2816732080,3331213574,3101303564,2156015656,3705598920,3546263921,143268808,3200304480,1638124008,3165189453,3341807610,578956953,2193977524,3638120073,2333881532,807278310,658237817,2969561766,1641658566,11683945,3086995007,148645947,1138423386,4158756760,1981396783,2401016740,3699783584,380097457,2680394679,2803068651,3334260286,441530178,4016580796,1375954390,761952171,891809099,2183123478,157052462,3683840763,1592404427,341349109,2438483839,1417898363,644327628,2233032776,2353769706,2201510100,220455161,1815641738,182899273,2995019788,3627381533,3702638151,2890684138,1052606899,588164016,1681439879,4038439418,2405343923,4229449282,167996282,1336969661,1688053129,2739224926,1543734051,1046297529,1138201970,2121126012,115334942,1819067631,1902159161,1941945968,2206692869,1159982321),s[2]=new Array(2381300288,637164959,3952098751,3893414151,1197506559,916448331,2350892612,2932787856,3199334847,4009478890,3905886544,1373570990,2450425862,4037870920,3778841987,2456817877,286293407,124026297,3001279700,1028597854,3115296800,4208886496,2691114635,2188540206,1430237888,1218109995,3572471700,308166588,570424558,2187009021,2455094765,307733056,1310360322,3135275007,1384269543,2388071438,863238079,2359263624,2801553128,3380786597,2831162807,1470087780,1728663345,4072488799,1090516929,532123132,2389430977,1132193179,2578464191,3051079243,1670234342,1434557849,2711078940,1241591150,3314043432,3435360113,3091448339,1812415473,2198440252,267246943,796911696,3619716990,38830015,1526438404,2806502096,374413614,2943401790,1489179520,1603809326,1920779204,168801282,260042626,2358705581,1563175598,2397674057,1356499128,2217211040,514611088,2037363785,2186468373,4022173083,2792511869,2913485016,1173701892,4200428547,3896427269,1334932762,2455136706,602925377,2835607854,1613172210,41346230,2499634548,2457437618,2188827595,41386358,4172255629,1313404830,2405527007,3801973774,2217704835,873260488,2528884354,2478092616,4012915883,2555359016,2006953883,2463913485,575479328,2218240648,2099895446,660001756,2341502190,3038761536,3888151779,3848713377,3286851934,1022894237,1620365795,3449594689,1551255054,15374395,3570825345,4249311020,4151111129,3181912732,310226346,1133119310,530038928,136043402,2476768958,3107506709,2544909567,1036173560,2367337196,1681395281,1758231547,3641649032,306774401,1575354324,3716085866,1990386196,3114533736,2455606671,1262092282,3124342505,2768229131,4210529083,1833535011,423410938,660763973,2187129978,1639812e3,3508421329,3467445492,310289298,272797111,2188552562,2456863912,310240523,677093832,1013118031,901835429,3892695601,1116285435,3036471170,1337354835,243122523,520626091,277223598,4244441197,4194248841,1766575121,594173102,316590669,742362309,3536858622,4176435350,3838792410,2501204839,1229605004,3115755532,1552908988,2312334149,979407927,3959474601,1148277331,176638793,3614686272,2083809052,40992502,1340822838,2731552767,3535757508,3560899520,1354035053,122129617,7215240,2732932949,3118912700,2718203926,2539075635,3609230695,3725561661,1928887091,2882293555,1988674909,2063640240,2491088897,1459647954,4189817080,2302804382,1113892351,2237858528,1927010603,4002880361,1856122846,1594404395,2944033133,3855189863,3474975698,1643104450,4054590833,3431086530,1730235576,2984608721,3084664418,2131803598,4178205752,267404349,1617849798,1616132681,1462223176,736725533,2327058232,551665188,2945899023,1749386277,2575514597,1611482493,674206544,2201269090,3642560800,728599968,1680547377,2620414464,1388111496,453204106,4156223445,1094905244,2754698257,2201108165,3757000246,2704524545,3922940700,3996465027),s[3]=new Array(2645754912,532081118,2814278639,3530793624,1246723035,1689095255,2236679235,4194438865,2116582143,3859789411,157234593,2045505824,4245003587,1687664561,4083425123,605965023,672431967,1336064205,3376611392,214114848,4258466608,3232053071,489488601,605322005,3998028058,264917351,1912574028,756637694,436560991,202637054,135989450,85393697,2152923392,3896401662,2895836408,2145855233,3535335007,115294817,3147733898,1922296357,3464822751,4117858305,1037454084,2725193275,2127856640,1417604070,1148013728,1827919605,642362335,2929772533,909348033,1346338451,3547799649,297154785,1917849091,4161712827,2883604526,3968694238,1469521537,3780077382,3375584256,1763717519,136166297,4290970789,1295325189,2134727907,2798151366,1566297257,3672928234,2677174161,2672173615,965822077,2780786062,289653839,1133871874,3491843819,35685304,1068898316,418943774,672553190,642281022,2346158704,1954014401,3037126780,4079815205,2030668546,3840588673,672283427,1776201016,359975446,3750173538,555499703,2769985273,1324923,69110472,152125443,3176785106,3822147285,1340634837,798073664,1434183902,15393959,216384236,1303690150,3881221631,3711134124,3960975413,106373927,2578434224,1455997841,1801814300,1578393881,1854262133,3188178946,3258078583,2302670060,1539295533,3505142565,3078625975,2372746020,549938159,3278284284,2620926080,181285381,2865321098,3970029511,68876850,488006234,1728155692,2608167508,836007927,2435231793,919367643,3339422534,3655756360,1457871481,40520939,1380155135,797931188,234455205,2255801827,3990488299,397000196,739833055,3077865373,2871719860,4022553888,772369276,390177364,3853951029,557662966,740064294,1640166671,1699928825,3535942136,622006121,3625353122,68743880,1742502,219489963,1664179233,1577743084,1236991741,410585305,2366487942,823226535,1050371084,3426619607,3586839478,212779912,4147118561,1819446015,1911218849,530248558,3486241071,3252585495,2886188651,3410272728,2342195030,20547779,2982490058,3032363469,3631753222,312714466,1870521650,1493008054,3491686656,615382978,4103671749,2534517445,1932181,2196105170,278426614,6369430,3274544417,2913018367,697336853,2143000447,2946413531,701099306,1558357093,2805003052,3500818408,2321334417,3567135975,216290473,3591032198,23009561,1996984579,3735042806,2024298078,3739440863,569400510,2339758983,3016033873,3097871343,3639523026,3844324983,3256173865,795471839,2951117563,4101031090,4091603803,3603732598,971261452,534414648,428311343,3389027175,2844869880,694888862,1227866773,2456207019,3043454569,2614353370,3749578031,3676663836,459166190,4132644070,1794958188,51825668,2252611902,3084671440,2036672799,3436641603,1099053433,2469121526,3059204941,1323291266,2061838604,1018778475,2233344254,2553501054,334295216,3556750194,1065731521,183467730),s[4]=new Array(2127105028,745436345,2601412319,2788391185,3093987327,500390133,1155374404,389092991,150729210,3891597772,3523549952,1935325696,716645080,946045387,2901812282,1774124410,3869435775,4039581901,3293136918,3438657920,948246080,363898952,3867875531,1286266623,1598556673,68334250,630723836,1104211938,1312863373,613332731,2377784574,1101634306,441780740,3129959883,1917973735,2510624549,3238456535,2544211978,3308894634,1299840618,4076074851,1756332096,3977027158,297047435,3790297736,2265573040,3621810518,1311375015,1667687725,47300608,3299642885,2474112369,201668394,1468347890,576830978,3594690761,3742605952,1958042578,1747032512,3558991340,1408974056,3366841779,682131401,1033214337,1545599232,4265137049,206503691,103024618,2855227313,1337551222,2428998917,2963842932,4015366655,3852247746,2796956967,3865723491,3747938335,247794022,3755824572,702416469,2434691994,397379957,851939612,2314769512,218229120,1380406772,62274761,214451378,3170103466,2276210409,3845813286,28563499,446592073,1693330814,3453727194,29968656,3093872512,220656637,2470637031,77972100,1667708854,1358280214,4064765667,2395616961,325977563,4277240721,4220025399,3605526484,3355147721,811859167,3069544926,3962126810,652502677,3075892249,4132761541,3498924215,1217549313,3250244479,3858715919,3053989961,1538642152,2279026266,2875879137,574252750,3324769229,2651358713,1758150215,141295887,2719868960,3515574750,4093007735,4194485238,1082055363,3417560400,395511885,2966884026,179534037,3646028556,3738688086,1092926436,2496269142,257381841,3772900718,1636087230,1477059743,2499234752,3811018894,2675660129,3285975680,90732309,1684827095,1150307763,1723134115,3237045386,1769919919,1240018934,815675215,750138730,2239792499,1234303040,1995484674,138143821,675421338,1145607174,1936608440,3238603024,2345230278,2105974004,323969391,779555213,3004902369,2861610098,1017501463,2098600890,2628620304,2940611490,2682542546,1171473753,3656571411,3687208071,4091869518,393037935,159126506,1662887367,1147106178,391545844,3452332695,1891500680,3016609650,1851642611,546529401,1167818917,3194020571,2848076033,3953471836,575554290,475796850,4134673196,450035699,2351251534,844027695,1080539133,86184846,1554234488,3692025454,1972511363,2018339607,1491841390,1141460869,1061690759,4244549243,2008416118,2351104703,2868147542,1598468138,722020353,1027143159,212344630,1387219594,1725294528,3745187956,2500153616,458938280,4129215917,1828119673,544571780,3503225445,2297937496,1241802790,267843827,2694610800,1397140384,1558801448,3782667683,1806446719,929573330,2234912681,400817706,616011623,4121520928,3603768725,1761550015,1968522284,4053731006,4192232858,4005120285,872482584,3140537016,3894607381,2287405443,1963876937,3663887957,1584857e3,2975024454,1833426440,4025083860),s[5]=new Array(4143615901,749497569,1285769319,3795025788,2514159847,23610292,3974978748,844452780,3214870880,3751928557,2213566365,1676510905,448177848,3730751033,4086298418,2307502392,871450977,3222878141,4110862042,3831651966,2735270553,1310974780,2043402188,1218528103,2736035353,4274605013,2702448458,3936360550,2693061421,162023535,2827510090,687910808,23484817,3784910947,3371371616,779677500,3503626546,3473927188,4157212626,3500679282,4248902014,2466621104,3899384794,1958663117,925738300,1283408968,3669349440,1840910019,137959847,2679828185,1239142320,1315376211,1547541505,1690155329,739140458,3128809933,3933172616,3876308834,905091803,1548541325,4040461708,3095483362,144808038,451078856,676114313,2861728291,2469707347,993665471,373509091,2599041286,4025009006,4170239449,2149739950,3275793571,3749616649,2794760199,1534877388,572371878,2590613551,1753320020,3467782511,1405125690,4270405205,633333386,3026356924,3475123903,632057672,2846462855,1404951397,3882875879,3915906424,195638627,2385783745,3902872553,1233155085,3355999740,2380578713,2702246304,2144565621,3663341248,3894384975,2502479241,4248018925,3094885567,1594115437,572884632,3385116731,767645374,1331858858,1475698373,3793881790,3532746431,1321687957,619889600,1121017241,3440213920,2070816767,2833025776,1933951238,4095615791,890643334,3874130214,859025556,360630002,925594799,1764062180,3920222280,4078305929,979562269,2810700344,4087740022,1949714515,546639971,1165388173,3069891591,1495988560,922170659,1291546247,2107952832,1813327274,3406010024,3306028637,4241950635,153207855,2313154747,1608695416,1150242611,1967526857,721801357,1220138373,3691287617,3356069787,2112743302,3281662835,1111556101,1778980689,250857638,2298507990,673216130,2846488510,3207751581,3562756981,3008625920,3417367384,2198807050,529510932,3547516680,3426503187,2364944742,102533054,2294910856,1617093527,1204784762,3066581635,1019391227,1069574518,1317995090,1691889997,3661132003,510022745,3238594800,1362108837,1817929911,2184153760,805817662,1953603311,3699844737,120799444,2118332377,207536705,2282301548,4120041617,145305846,2508124933,3086745533,3261524335,1877257368,2977164480,3160454186,2503252186,4221677074,759945014,254147243,2767453419,3801518371,629083197,2471014217,907280572,3900796746,940896768,2751021123,2625262786,3161476951,3661752313,3260732218,1425318020,2977912069,1496677566,3988592072,2140652971,3126511541,3069632175,977771578,1392695845,1698528874,1411812681,1369733098,1343739227,3620887944,1142123638,67414216,3102056737,3088749194,1626167401,2546293654,3941374235,697522451,33404913,143560186,2595682037,994885535,1247667115,3859094837,2699155541,3547024625,4114935275,2968073508,3199963069,2732024527,1237921620,951448369,1898488916,1211705605,2790989240,2233243581,3598044975),s[6]=new Array(2246066201,858518887,1714274303,3485882003,713916271,2879113490,3730835617,539548191,36158695,1298409750,419087104,1358007170,749914897,2989680476,1261868530,2995193822,2690628854,3443622377,3780124940,3796824509,2976433025,4259637129,1551479e3,512490819,1296650241,951993153,2436689437,2460458047,144139966,3136204276,310820559,3068840729,643875328,1969602020,1680088954,2185813161,3283332454,672358534,198762408,896343282,276269502,3014846926,84060815,197145886,376173866,3943890818,3813173521,3545068822,1316698879,1598252827,2633424951,1233235075,859989710,2358460855,3503838400,3409603720,1203513385,1193654839,2792018475,2060853022,207403770,1144516871,3068631394,1121114134,177607304,3785736302,326409831,1929119770,2983279095,4183308101,3474579288,3200513878,3228482096,119610148,1170376745,3378393471,3163473169,951863017,3337026068,3135789130,2907618374,1183797387,2015970143,4045674555,2182986399,2952138740,3928772205,384012900,2454997643,10178499,2879818989,2596892536,111523738,2995089006,451689641,3196290696,235406569,1441906262,3890558523,3013735005,4158569349,1644036924,376726067,1006849064,3664579700,2041234796,1021632941,1374734338,2566452058,371631263,4007144233,490221539,206551450,3140638584,1053219195,1853335209,3412429660,3562156231,735133835,1623211703,3104214392,2738312436,4096837757,3366392578,3110964274,3956598718,3196820781,2038037254,3877786376,2339753847,300912036,3766732888,2372630639,1516443558,4200396704,1574567987,4069441456,4122592016,2699739776,146372218,2748961456,2043888151,35287437,2596680554,655490400,1132482787,110692520,1031794116,2188192751,1324057718,1217253157,919197030,686247489,3261139658,1028237775,3135486431,3059715558,2460921700,986174950,2661811465,4062904701,2752986992,3709736643,367056889,1353824391,731860949,1650113154,1778481506,784341916,357075625,3608602432,1074092588,2480052770,3811426202,92751289,877911070,3600361838,1231880047,480201094,3756190983,3094495953,434011822,87971354,363687820,1717726236,1901380172,3926403882,2481662265,400339184,1490350766,2661455099,1389319756,2558787174,784598401,1983468483,30828846,3550527752,2716276238,3841122214,1765724805,1955612312,1277890269,1333098070,1564029816,2704417615,1026694237,3287671188,1260819201,3349086767,1016692350,1582273796,1073413053,1995943182,694588404,1025494639,3323872702,3551898420,4146854327,453260480,1316140391,1435673405,3038941953,3486689407,1622062951,403978347,817677117,950059133,4246079218,3278066075,1486738320,1417279718,481875527,2549965225,3933690356,760697757,1452955855,3897451437,1177426808,1702951038,4085348628,2447005172,1084371187,3516436277,3068336338,1073369276,1027665953,3284188590,1230553676,1368340146,2226246512,267243139,2274220762,4070734279,2497715176,2423353163,2504755875),s[7]=new Array(3793104909,3151888380,2817252029,895778965,2005530807,3871412763,237245952,86829237,296341424,3851759377,3974600970,2475086196,709006108,1994621201,2972577594,937287164,3734691505,168608556,3189338153,2225080640,3139713551,3033610191,3025041904,77524477,185966941,1208824168,2344345178,1721625922,3354191921,1066374631,1927223579,1971335949,2483503697,1551748602,2881383779,2856329572,3003241482,48746954,1398218158,2050065058,313056748,4255789917,393167848,1912293076,940740642,3465845460,3091687853,2522601570,2197016661,1727764327,364383054,492521376,1291706479,3264136376,1474851438,1685747964,2575719748,1619776915,1814040067,970743798,1561002147,2925768690,2123093554,1880132620,3151188041,697884420,2550985770,2607674513,2659114323,110200136,1489731079,997519150,1378877361,3527870668,478029773,2766872923,1022481122,431258168,1112503832,897933369,2635587303,669726182,3383752315,918222264,163866573,3246985393,3776823163,114105080,1903216136,761148244,3571337562,1690750982,3166750252,1037045171,1888456500,2010454850,642736655,616092351,365016990,1185228132,4174898510,1043824992,2023083429,2241598885,3863320456,3279669087,3674716684,108438443,2132974366,830746235,606445527,4173263986,2204105912,1844756978,2532684181,4245352700,2969441100,3796921661,1335562986,4061524517,2720232303,2679424040,634407289,885462008,3294724487,3933892248,2094100220,339117932,4048830727,3202280980,1458155303,2689246273,1022871705,2464987878,3714515309,353796843,2822958815,4256850100,4052777845,551748367,618185374,3778635579,4020649912,1904685140,3069366075,2670879810,3407193292,2954511620,4058283405,2219449317,3135758300,1120655984,3447565834,1474845562,3577699062,550456716,3466908712,2043752612,881257467,869518812,2005220179,938474677,3305539448,3850417126,1315485940,3318264702,226533026,965733244,321539988,1136104718,804158748,573969341,3708209826,937399083,3290727049,2901666755,1461057207,4013193437,4066861423,3242773476,2421326174,1581322155,3028952165,786071460,3900391652,3918438532,1485433313,4023619836,3708277595,3678951060,953673138,1467089153,1930354364,1533292819,2492563023,1346121658,1685000834,1965281866,3765933717,4190206607,2052792609,3515332758,690371149,3125873887,2180283551,2903598061,3933952357,436236910,289419410,14314871,1242357089,2904507907,1616633776,2666382180,585885352,3471299210,2699507360,1432659641,277164553,3354103607,770115018,2303809295,3741942315,3177781868,2853364978,2269453327,3774259834,987383833,1290892879,225909803,1741533526,890078084,1496906255,1111072499,916028167,243534141,1252605537,2204162171,531204876,290011180,3916834213,102027703,237315147,209093447,1486785922,220223953,2758195998,4175039106,82940208,3127791296,2569425252,518464269,1353887104,3941492737,2377294467,3935040926)},this.cast5.setKey(e),this.encrypt=function(e){return this.cast5.encrypt(e)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,n.blockSize=n.prototype.blockSize=8,n.keySize=n.prototype.keySize=16},{}],15:[function(e,t,r){"use strict";function n(e,t,r,n,i,s){var a,o,u,f,h,l,c,d,p,y,g,m,v,w,b=new Array(16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756),k=new Array(-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344),A=new Array(520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584),_=new Array(8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928),E=new Array(256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080),S=new Array(536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312),U=new Array(2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154),K=new Array(268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696),P=0,j=t.length,x=32===e.length?3:9;d=3===x?r?new Array(0,32,2):new Array(30,-2,-2):r?new Array(0,32,2,62,30,-2,64,96,2):new Array(94,62,-2,32,64,2,30,-2,-2),r&&(j=(t=function(e,t){var r,n=8-e.length%8;if(2===t&&n<8)r=" ".charCodeAt(0);else if(1===t)r=n;else{if(t||!(n<8)){if(8===n)return e;throw new Error("des: invalid padding")}r=0}for(var i=new Uint8Array(e.length+n),s=0;s<e.length;s++)i[s]=e[s];for(var a=0;a<n;a++)i[e.length+a]=r;return i}(t,s)).length);var T=new Uint8Array(j),O=0;for(1===n&&(p=i[P++]<<24|i[P++]<<16|i[P++]<<8|i[P++],g=i[P++]<<24|i[P++]<<16|i[P++]<<8|i[P++],P=0);P<j;){for(l=t[P++]<<24|t[P++]<<16|t[P++]<<8|t[P++],c=t[P++]<<24|t[P++]<<16|t[P++]<<8|t[P++],1===n&&(r?(l^=p,c^=g):(y=p,m=g,p=l,g=c)),l^=(u=252645135&(l>>>4^c))<<4,l^=(u=65535&(l>>>16^(c^=u)))<<16,l^=u=858993459&((c^=u)>>>2^l),l^=u=16711935&((c^=u<<2)>>>8^l),l=(l^=(u=1431655765&(l>>>1^(c^=u<<8)))<<1)<<1|l>>>31,c=(c^=u)<<1|c>>>31,o=0;o<x;o+=3){for(v=d[o+1],w=d[o+2],a=d[o];a!==v;a+=w)f=c^e[a],h=(c>>>4|c<<28)^e[a+1],u=l,l=c,c=u^(k[f>>>24&63]|_[f>>>16&63]|S[f>>>8&63]|K[63&f]|b[h>>>24&63]|A[h>>>16&63]|E[h>>>8&63]|U[63&h]);u=l,l=c,c=u}c=c>>>1|c<<31,c^=u=1431655765&((l=l>>>1|l<<31)>>>1^c),c^=(u=16711935&(c>>>8^(l^=u<<1)))<<8,c^=(u=858993459&(c>>>2^(l^=u)))<<2,c^=u=65535&((l^=u)>>>16^c),c^=u=252645135&((l^=u<<16)>>>4^c),l^=u<<4,1===n&&(r?(p=l,g=c):(l^=y,c^=m)),T[O++]=l>>>24,T[O++]=l>>>16&255,T[O++]=l>>>8&255,T[O++]=255&l,T[O++]=c>>>24,T[O++]=c>>>16&255,T[O++]=c>>>8&255,T[O++]=255&c}return r||(T=function(e,t){var r,n=null;if(2===t)r=" ".charCodeAt(0);else if(1===t)n=e[e.length-1];else{if(t)throw new Error("des: invalid padding");r=0}if(!n){for(n=1;e[e.length-n]===r;)n++;n--}return e.subarray(0,e.length-n)}(T,s)),T}function i(e){for(var t,r,n,i=new Array(0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964),s=new Array(0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697),a=new Array(0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272),o=new Array(0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144),u=new Array(0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256),f=new Array(0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488),h=new Array(0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746),l=new Array(0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568),c=new Array(0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578),d=new Array(0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488),p=new Array(0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800),y=new Array(0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744),g=new Array(0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128),m=new Array(0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261),v=e.length>8?3:1,w=new Array(32*v),b=new Array(0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0),k=0,A=0,_=0;_<v;_++){var E=e[k++]<<24|e[k++]<<16|e[k++]<<8|e[k++],S=e[k++]<<24|e[k++]<<16|e[k++]<<8|e[k++];E^=(n=252645135&(E>>>4^S))<<4,E^=n=65535&((S^=n)>>>-16^E),E^=(n=858993459&(E>>>2^(S^=n<<-16)))<<2,E^=n=65535&((S^=n)>>>-16^E),E^=(n=1431655765&(E>>>1^(S^=n<<-16)))<<1,E^=n=16711935&((S^=n)>>>8^E),n=(E^=(n=1431655765&(E>>>1^(S^=n<<8)))<<1)<<8|(S^=n)>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=n;for(var U=0;U<b.length;U++)b[U]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),S&=-15,t=i[(E&=-15)>>>28]|s[E>>>24&15]|a[E>>>20&15]|o[E>>>16&15]|u[E>>>12&15]|f[E>>>8&15]|h[E>>>4&15],n=65535&((r=l[S>>>28]|c[S>>>24&15]|d[S>>>20&15]|p[S>>>16&15]|y[S>>>12&15]|g[S>>>8&15]|m[S>>>4&15])>>>16^t),w[A++]=t^n,w[A++]=r^n<<16}return w}function s(e){this.key=[];for(var t=0;t<3;t++)this.key.push(new Uint8Array(e.subarray(8*t,8*t+8)));this.encrypt=function(e){return n(i(this.key[2]),n(i(this.key[1]),n(i(this.key[0]),e,!0,0,null,null),!1,0,null,null),!0,0,null,null)}}Object.defineProperty(r,"__esModule",{value:!0}),s.keySize=s.prototype.keySize=24,s.blockSize=s.prototype.blockSize=8,r.default={des:s,originalDes:function(e){this.key=e,this.encrypt=function(e,t){return n(i(this.key),e,!0,0,null,t)},this.decrypt=function(e,t){return n(i(this.key),e,!1,0,null,t)}}}},{}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./aes.js")),s=n(e("./des.js")),a=n(e("./cast5.js")),o=n(e("./twofish.js")),u=n(e("./blowfish.js"));r.default={aes128:i.default[128],aes192:i.default[192],aes256:i.default[256],des:s.default.originalDes,tripledes:s.default.des,cast5:a.default,twofish:o.default,blowfish:u.default,idea:function(){throw new Error("IDEA symmetric-key algorithm not implemented")}}},{"./aes.js":12,"./blowfish.js":13,"./cast5.js":14,"./des.js":15,"./twofish.js":17}],17:[function(e,t,r){"use strict";function n(e,t){return(e<<t|e>>>32-t)&f}function i(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}function s(e,t,r){e.splice(t,4,255&r,r>>>8&255,r>>>16&255,r>>>24&255)}function a(e,t){return e>>>8*t&255}function o(e){this.tf=function(){function e(e){return d[0][a(e,0)]^d[1][a(e,1)]^d[2][a(e,2)]^d[3][a(e,3)]}function t(e){return d[0][a(e,3)]^d[1][a(e,0)]^d[2][a(e,1)]^d[3][a(e,2)]}function r(r,i){var s=e(i[0]),a=t(i[1]);i[2]=n(i[2]^s+a+c[4*r+8]&f,31),i[3]=n(i[3],1)^s+2*a+c[4*r+9]&f,s=e(i[2]),a=t(i[3]),i[0]=n(i[0]^s+a+c[4*r+10]&f,31),i[1]=n(i[1],1)^s+2*a+c[4*r+11]&f}function o(r,i){var s=e(i[0]),a=t(i[1]);i[2]=n(i[2],1)^s+a+c[4*r+10]&f,i[3]=n(i[3]^s+2*a+c[4*r+11]&f,31),s=e(i[2]),a=t(i[3]),i[0]=n(i[0],1)^s+a+c[4*r+8]&f,i[1]=n(i[1]^s+2*a+c[4*r+9]&f,31)}var u=null,h=null,l=-1,c=[],d=[[],[],[],[]];return{name:"twofish",blocksize:16,open:function(e){function t(e){return e^e>>2^[0,90,180,238][3&e]}function r(e){return e^e>>1^e>>2^[0,238,180,90][3&e]}function s(e,t){var r,n,i;for(r=0;r<8;r++)n=t>>>24,t=t<<8&f|e>>>24,e=e<<8&f,i=n<<1,128&n&&(i^=333),t^=n^i<<16,i^=n>>>1,1&n&&(i^=166),t^=i<<24|i<<8;return t}function o(e,t){var r,n,i,s;return r=t>>4,n=15&t,i=U[e][r^n],s=K[e][x[n]^T[r]],j[e][x[s]^T[i]]<<4|P[e][i^s]}function h(e,t){var r=a(e,0),n=a(e,1),i=a(e,2),s=a(e,3);switch(v){case 4:r=O[1][r]^a(t[3],0),n=O[0][n]^a(t[3],1),i=O[0][i]^a(t[3],2),s=O[1][s]^a(t[3],3);case 3:r=O[1][r]^a(t[2],0),n=O[1][n]^a(t[2],1),i=O[0][i]^a(t[2],2),s=O[0][s]^a(t[2],3);case 2:r=O[0][O[0][r]^a(t[1],0)]^a(t[0],0),n=O[0][O[1][n]^a(t[1],1)]^a(t[0],1),i=O[1][O[0][i]^a(t[1],2)]^a(t[0],2),s=O[1][O[1][s]^a(t[1],3)]^a(t[0],3)}return C[0][r]^C[1][n]^C[2][i]^C[3][s]}var l,p,y,g,m,v,w,b,k,A=[],_=[],E=[],S=[],U=[[8,1,7,13,6,15,3,2,0,11,5,9,14,12,10,4],[2,8,11,13,15,7,6,14,3,1,9,4,0,10,12,5]],K=[[14,12,11,8,1,2,3,5,15,4,10,6,7,0,9,13],[1,14,2,11,4,12,3,7,6,13,10,5,15,9,0,8]],P=[[11,10,5,14,6,13,9,0,12,8,15,3,2,4,7,1],[4,12,7,5,1,6,9,10,0,14,13,8,2,11,3,15]],j=[[13,7,15,4,1,2,6,14,9,11,3,0,8,5,12,10],[11,9,5,1,12,3,13,14,6,4,7,15,2,0,8,10]],x=[0,8,1,9,2,10,3,11,4,12,5,13,6,14,7,15],T=[0,9,2,11,4,13,6,15,8,1,10,3,12,5,14,7],O=[[],[]],C=[[],[],[],[]];for(l=(u=(u=e).slice(0,32)).length;16!==l&&24!==l&&32!==l;)u[l++]=0;for(l=0;l<u.length;l+=4)E[l>>2]=i(u,l);for(l=0;l<256;l++)O[0][l]=o(0,l),O[1][l]=o(1,l);for(l=0;l<256;l++)b=t(w=O[1][l]),k=r(w),C[0][l]=w+(b<<8)+(k<<16)+(k<<24),C[2][l]=b+(k<<8)+(w<<16)+(k<<24),b=t(w=O[0][l]),k=r(w),C[1][l]=k+(k<<8)+(b<<16)+(w<<24),C[3][l]=b+(w<<8)+(k<<16)+(b<<24);for(v=E.length/2,l=0;l<v;l++)p=E[l+l],A[l]=p,y=E[l+l+1],_[l]=y,S[v-l-1]=s(p,y);for(l=0;l<40;l+=2)y=16843009+(p=16843009*l),p=h(p,A),y=n(h(y,_),8),c[l]=p+y&f,c[l+1]=n(p+2*y,9);for(l=0;l<256;l++)switch(p=y=g=m=l,v){case 4:p=O[1][p]^a(S[3],0),y=O[0][y]^a(S[3],1),g=O[0][g]^a(S[3],2),m=O[1][m]^a(S[3],3);case 3:p=O[1][p]^a(S[2],0),y=O[1][y]^a(S[2],1),g=O[0][g]^a(S[2],2),m=O[0][m]^a(S[2],3);case 2:d[0][l]=C[0][O[0][O[0][p]^a(S[1],0)]^a(S[0],0)],d[1][l]=C[1][O[0][O[1][y]^a(S[1],1)]^a(S[0],1)],d[2][l]=C[2][O[1][O[0][g]^a(S[1],2)]^a(S[0],2)],d[3][l]=C[3][O[1][O[1][m]^a(S[1],3)]^a(S[0],3)]}},close:function(){c=[],d=[[],[],[],[]]},encrypt:function(e,t){for(var n=[i(h=e,l=t)^c[0],i(h,l+4)^c[1],i(h,l+8)^c[2],i(h,l+12)^c[3]],a=0;a<8;a++)r(a,n);return s(h,l,n[2]^c[4]),s(h,l+4,n[3]^c[5]),s(h,l+8,n[0]^c[6]),s(h,l+12,n[1]^c[7]),l+=16,h},decrypt:function(e,t){for(var r=[i(h=e,l=t)^c[4],i(h,l+4)^c[5],i(h,l+8)^c[6],i(h,l+12)^c[7]],n=7;n>=0;n--)o(n,r);s(h,l,r[2]^c[0]),s(h,l+4,r[3]^c[1]),s(h,l+8,r[0]^c[2]),s(h,l+12,r[1]^c[3]),l+=16},finalize:function(){return h}}}(),this.tf.open(u(e),0),this.encrypt=function(e){return this.tf.encrypt(u(e),0)}}function u(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var f=4294967295;o.keySize=o.prototype.keySize=32,o.blockSize=o.prototype.blockSize=16},{}],18:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./random.js")),s=n(e("./cipher")),a=n(e("./public_key")),o=n(e("../type/mpi.js"));r.default={publicKeyEncrypt:function(e,t,r){return function(){var n;switch(e){case"rsa_encrypt":case"rsa_encrypt_sign":var i=new a.default.rsa,s=t[0].toBigInteger(),o=t[1].toBigInteger();return n=r.toBigInteger(),[i.encrypt(n,o,s)];case"elgamal":var u=new a.default.elgamal,f=t[0].toBigInteger(),h=t[1].toBigInteger(),l=t[2].toBigInteger();return n=r.toBigInteger(),u.encrypt(n,h,f,l);default:return[]}}().map(function(e){var t=new o.default;return t.fromBigInteger(e),t})},publicKeyDecrypt:function(e,t,r){var n,i=function(){switch(e){case"rsa_encrypt_sign":case"rsa_encrypt":var i=new a.default.rsa,s=t[0].toBigInteger(),o=t[1].toBigInteger(),u=t[2].toBigInteger();n=t[3].toBigInteger();var f=t[4].toBigInteger(),h=t[5].toBigInteger(),l=r[0].toBigInteger();return i.decrypt(l,s,o,u,n,f,h);case"elgamal":var c=new a.default.elgamal,d=t[3].toBigInteger(),p=r[0].toBigInteger(),y=r[1].toBigInteger();return n=t[0].toBigInteger(),c.decrypt(p,y,n,d);default:return null}}(),s=new o.default;return s.fromBigInteger(i),s},getPrivateMpiCount:function(e){switch(e){case"rsa_encrypt":case"rsa_encrypt_sign":case"rsa_sign":return 4;case"elgamal":case"dsa":return 1;default:throw new Error("Unknown algorithm")}},getPublicMpiCount:function(e){switch(e){case"rsa_encrypt":case"rsa_encrypt_sign":case"rsa_sign":return 2;case"elgamal":return 3;case"dsa":return 4;default:throw new Error("Unknown algorithm.")}},generateMpi:function(e,t){switch(e){case"rsa_encrypt":case"rsa_encrypt_sign":case"rsa_sign":return(new a.default.rsa).generate(t,"10001").then(function(e){var t=[];return t.push(e.n),t.push(e.ee),t.push(e.d),t.push(e.p),t.push(e.q),t.push(e.u),function(e){return e.map(function(e){var t=new o.default;return t.fromBigInteger(e),t})}(t)});default:throw new Error("Unsupported algorithm for key generation.")}},getPrefixRandom:function(e){return i.default.getRandomBytes(s.default[e].blockSize)},generateSessionKey:function(e){return i.default.getRandomBytes(s.default[e].keySize)}}},{"../type/mpi.js":68,"./cipher":16,"./public_key":28,"./random.js":31}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ivLength=void 0,r.encrypt=function(e,t,r,n){return"aes"!==e.substr(0,3)?Promise.reject(new Error("GCM mode supports only AES cipher")):o&&s.default.use_native&&24!==r.length?function(e,t,r){return o.importKey("raw",t,{name:l},!1,["encrypt"]).then(function(t){return o.encrypt({name:l,iv:r},t,e)}).then(function(e){return new Uint8Array(e)})}(t,r,n):u&&s.default.use_native?function(e,t,r){e=new f(e),t=new f(t),r=new f(r);var n=new u.createCipheriv("aes-"+8*t.length+"-gcm",t,r),i=f.concat([n.update(e),n.final(),n.getAuthTag()]);return Promise.resolve(new Uint8Array(i))}(t,r,n):Promise.resolve(a.default.AES_GCM.encrypt(t,r,n))},r.decrypt=function(e,t,r,n){return"aes"!==e.substr(0,3)?Promise.reject(new Error("GCM mode supports only AES cipher")):o&&s.default.use_native&&24!==r.length?function(e,t,r){return o.importKey("raw",t,{name:l},!1,["decrypt"]).then(function(t){return o.decrypt({name:l,iv:r},t,e)}).then(function(e){return new Uint8Array(e)})}(t,r,n):u&&s.default.use_native?function(e,t,r){e=new f(e),t=new f(t),r=new f(r);var n=new u.createDecipheriv("aes-"+8*t.length+"-gcm",t,r);n.setAuthTag(e.slice(e.length-h,e.length));var i=f.concat([n.update(e.slice(0,e.length-h)),n.final()]);return Promise.resolve(new Uint8Array(i))}(t,r,n):Promise.resolve(a.default.AES_GCM.decrypt(t,r,n))};var i=n(e("../util.js")),s=n(e("../config")),a=n(e("asmcrypto-lite")),o=i.default.getWebCrypto(),u=i.default.getNodeCrypto(),f=i.default.getNodeBuffer(),h=(r.ivLength=12,16),l="AES-GCM"},{"../config":10,"../util.js":70,"asmcrypto-lite":1}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(t){var r=d.createHash(e);return r.update(new p(t)),new Uint8Array(r.digest())}}Object.defineProperty(r,"__esModule",{value:!0});var s,a=n(e("./sha.js")),o=n(e("asmcrypto-lite")),u=n(e("rusha")),f=n(e("./md5.js")),h=n(e("./ripe-md.js")),l=n(e("../../util.js")),c=new u.default,d=l.default.getNodeCrypto(),p=l.default.getNodeBuffer();s=d?{md5:i("md5"),sha1:i("sha1"),sha224:i("sha224"),sha256:i("sha256"),sha384:i("sha384"),sha512:i("sha512"),ripemd:i("ripemd160")}:{md5:f.default,sha1:function(e){return l.default.str2Uint8Array(l.default.hex2bin(c.digest(e)))},sha224:a.default.sha224,sha256:o.default.SHA256.bytes,sha384:a.default.sha384,sha512:a.default.sha512,ripemd:h.default},r.default={md5:s.md5,sha1:s.sha1,sha224:s.sha224,sha256:s.sha256,sha384:s.sha384,sha512:s.sha512,ripemd:s.ripemd,digest:function(e,t){switch(e){case 1:return this.md5(t);case 2:return this.sha1(t);case 3:return this.ripemd(t);case 8:return this.sha256(t);case 9:return this.sha384(t);case 10:return this.sha512(t);case 11:return this.sha224(t);default:throw new Error("Invalid hash function.")}},getHashByteLength:function(e){switch(e){case 1:return 16;case 2:case 3:return 20;case 8:return 32;case 9:return 48;case 10:return 64;case 11:return 28;default:throw new Error("Invalid hash algorithm.")}}}},{"../../util.js":70,"./md5.js":21,"./ripe-md.js":22,"./sha.js":23,"asmcrypto-lite":1,rusha:4}],21:[function(e,t,r){"use strict";function n(e,t){var r=e[0],n=e[1],i=e[2],f=e[3];n=u(n=u(n=u(n=u(n=o(n=o(n=o(n=o(n=a(n=a(n=a(n=a(n=s(n=s(n=s(n=s(n,i=s(i,f=s(f,r=s(r,n,i,f,t[0],7,-680876936),n,i,t[1],12,-389564586),r,n,t[2],17,606105819),f,r,t[3],22,-1044525330),i=s(i,f=s(f,r=s(r,n,i,f,t[4],7,-176418897),n,i,t[5],12,1200080426),r,n,t[6],17,-1473231341),f,r,t[7],22,-45705983),i=s(i,f=s(f,r=s(r,n,i,f,t[8],7,1770035416),n,i,t[9],12,-1958414417),r,n,t[10],17,-42063),f,r,t[11],22,-1990404162),i=s(i,f=s(f,r=s(r,n,i,f,t[12],7,1804603682),n,i,t[13],12,-40341101),r,n,t[14],17,-1502002290),f,r,t[15],22,1236535329),i=a(i,f=a(f,r=a(r,n,i,f,t[1],5,-165796510),n,i,t[6],9,-1069501632),r,n,t[11],14,643717713),f,r,t[0],20,-373897302),i=a(i,f=a(f,r=a(r,n,i,f,t[5],5,-701558691),n,i,t[10],9,38016083),r,n,t[15],14,-660478335),f,r,t[4],20,-405537848),i=a(i,f=a(f,r=a(r,n,i,f,t[9],5,568446438),n,i,t[14],9,-1019803690),r,n,t[3],14,-187363961),f,r,t[8],20,1163531501),i=a(i,f=a(f,r=a(r,n,i,f,t[13],5,-1444681467),n,i,t[2],9,-51403784),r,n,t[7],14,1735328473),f,r,t[12],20,-1926607734),i=o(i,f=o(f,r=o(r,n,i,f,t[5],4,-378558),n,i,t[8],11,-2022574463),r,n,t[11],16,1839030562),f,r,t[14],23,-35309556),i=o(i,f=o(f,r=o(r,n,i,f,t[1],4,-1530992060),n,i,t[4],11,1272893353),r,n,t[7],16,-155497632),f,r,t[10],23,-1094730640),i=o(i,f=o(f,r=o(r,n,i,f,t[13],4,681279174),n,i,t[0],11,-358537222),r,n,t[3],16,-722521979),f,r,t[6],23,76029189),i=o(i,f=o(f,r=o(r,n,i,f,t[9],4,-640364487),n,i,t[12],11,-421815835),r,n,t[15],16,530742520),f,r,t[2],23,-995338651),i=u(i,f=u(f,r=u(r,n,i,f,t[0],6,-198630844),n,i,t[7],10,1126891415),r,n,t[14],15,-1416354905),f,r,t[5],21,-57434055),i=u(i,f=u(f,r=u(r,n,i,f,t[12],6,1700485571),n,i,t[3],10,-1894986606),r,n,t[10],15,-1051523),f,r,t[1],21,-2054922799),i=u(i,f=u(f,r=u(r,n,i,f,t[8],6,1873313359),n,i,t[15],10,-30611744),r,n,t[6],15,-1560198380),f,r,t[13],21,1309151649),i=u(i,f=u(f,r=u(r,n,i,f,t[4],6,-145523070),n,i,t[11],10,-1120210379),r,n,t[2],15,718787259),f,r,t[9],21,-343485551),e[0]=l(r,e[0]),e[1]=l(n,e[1]),e[2]=l(i,e[2]),e[3]=l(f,e[3])}function i(e,t,r,n,i,s){return t=l(l(t,e),l(n,s)),l(t<<i|t>>>32-i,r)}function s(e,t,r,n,s,a,o){return i(t&r|~t&n,e,t,s,a,o)}function a(e,t,r,n,s,a,o){return i(t&n|r&~n,e,t,s,a,o)}function o(e,t,r,n,s,a,o){return i(t^r^n,e,t,s,a,o)}function u(e,t,r,n,s,a,o){return i(r^(t|~n),e,t,s,a,o)}function f(e){for(var t="",r=0;r<4;r++)t+=d[e>>8*r+4&15]+d[e>>8*r&15];return t}function h(e){return function(e){for(var t=0;t<e.length;t++)e[t]=f(e[t]);return e.join("")}(function(e){var t,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)n(i,function(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(n(i,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,n(i,s),i}(e))}function l(e,t){return e+t&4294967295}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=h(c.default.Uint8Array2str(e));return c.default.str2Uint8Array(c.default.hex2bin(t))};var c=function(e){return e&&e.__esModule?e:{default:e}}(e("../../util.js")),d="0123456789abcdef".split("")},{"../../util.js":70}],22:[function(e,t,r){"use strict";function n(e,t){return new Number(e<<t|e>>>32-t)}function i(e,t,r){return new Number(e^t^r)}function s(e,t,r){return new Number(e&t|~e&r)}function a(e,t,r){return new Number((e|~t)^r)}function o(e,t,r){return new Number(e&r|t&~r)}function u(e,t,r){return new Number(e^(t|~r))}function f(e,t,r,f,h,l,c,d){switch(d){case 0:e+=i(t,r,f)+l+0;break;case 1:e+=s(t,r,f)+l+1518500249;break;case 2:e+=a(t,r,f)+l+1859775393;break;case 3:e+=o(t,r,f)+l+2400959708;break;case 4:e+=u(t,r,f)+l+2840853838;break;case 5:e+=u(t,r,f)+l+1352829926;break;case 6:e+=o(t,r,f)+l+1548603684;break;case 7:e+=a(t,r,f)+l+1836072691;break;case 8:e+=s(t,r,f)+l+2053994217;break;case 9:e+=i(t,r,f)+l+0;break;default:throw new Error("Bogus round number")}e=n(e,c)+h,r=n(r,10),e&=4294967295,t&=4294967295,r&=4294967295,f&=4294967295,h&=4294967295;var p=[];return p[0]=e,p[1]=t,p[2]=r,p[3]=f,p[4]=h,p[5]=l,p[6]=c,p}function h(e,t){var r,n,i,s=[],a=[];for(n=0;n<5;n++)s[n]=new Number(e[n]),a[n]=new Number(e[n]);var o=0;for(i=0;i<5;i++)for(n=0;n<16;n++)r=f(s[(o+0)%5],s[(o+1)%5],s[(o+2)%5],s[(o+3)%5],s[(o+4)%5],t[m[i][n]],g[i][n],i),s[(o+0)%5]=r[0],s[(o+1)%5]=r[1],s[(o+2)%5]=r[2],s[(o+3)%5]=r[3],s[(o+4)%5]=r[4],o+=4;for(o=0,i=5;i<10;i++)for(n=0;n<16;n++)r=f(a[(o+0)%5],a[(o+1)%5],a[(o+2)%5],a[(o+3)%5],a[(o+4)%5],t[m[i][n]],g[i][n],i),a[(o+0)%5]=r[0],a[(o+1)%5]=r[1],a[(o+2)%5]=r[2],a[(o+3)%5]=r[3],a[(o+4)%5]=r[4],o+=4;a[3]+=s[2]+e[1],e[1]=e[2]+s[3]+a[4],e[2]=e[3]+s[4]+a[0],e[3]=e[4]+s[0]+a[1],e[4]=e[0]+s[1]+a[2],e[0]=a[3]}function l(e){for(var t=0;t<16;t++)e[t]=0}function c(e){var t=(255&e.charCodeAt(3))<<24;return t|=(255&e.charCodeAt(2))<<16,t|=(255&e.charCodeAt(1))<<8,t|=255&e.charCodeAt(0)}function d(e){var t,r,n=new Array(y/32),i=new Array(y/8);!function(e){e[0]=1732584193,e[1]=4023233417,e[2]=2562383102,e[3]=271733878,e[4]=3285377520}(n),t=e.length;var s=new Array(16);l(s);var a,o=0;for(r=t;r>63;r-=64){for(a=0;a<16;a++)s[a]=c(e.substr(o,4)),o+=4;h(n,s)}for(function(e,t,r,n){var i=new Array(16);l(i);for(var s=0,a=0;a<(63&r);a++)i[a>>>2]^=(255&t.charCodeAt(s++))<<8*(3&a);i[r>>>2&15]^=1<<8*(3&r)+7,(63&r)>55&&(h(e,i),l(i=new Array(16))),i[14]=r<<3,i[15]=r>>>29|n<<3,h(e,i)}(n,e.substr(o),t,0),a=0;a<y/8;a+=4)i[a]=255&n[a>>>2],i[a+1]=n[a>>>2]>>>8&255,i[a+2]=n[a>>>2]>>>16&255,i[a+3]=n[a>>>2]>>>24&255;return i}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){for(var t=d(p.default.Uint8Array2str(e)),r="",n=0;n<y/8;n++)r+=String.fromCharCode(t[n]);return p.default.str2Uint8Array(r)};var p=function(e){return e&&e.__esModule?e:{default:e}}(e("../../util.js")),y=160,g=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12],[11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5],[11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12],[9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6],[9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11],[9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5],[15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8],[8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]],m=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8],[3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12],[1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2],[4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12],[6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2],[15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13],[8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14],[12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]]},{"../../util.js":70}],23:[function(e,t,r){"use strict";function n(e,t){this.highOrder=e,this.lowOrder=t}function i(e,t){var r,n,i,s,a=[],o=[],u=0;if("UTF8"===t)for(n=0;n<e.length;n+=1)for(o=[],128>(r=e.charCodeAt(n))?o.push(r):2048>r?(o.push(192|r>>>6),o.push(128|63&r)):55296>r||57344<=r?o.push(224|r>>>12,128|r>>>6&63,128|63&r):(n+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),o.push(240|r>>>18,128|r>>>12&63,128|r>>>6&63,128|63&r)),i=0;i<o.length;i+=1){for(s=u>>>2;a.length<=s;)a.push(0);a[s]|=o[i]<<24-u%4*8,u+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(n=0;n<e.length;n+=1){for(r=e.charCodeAt(n),"UTF16LE"===t&&(r=(i=255&r)<<8|r>>8),s=u>>>2;a.length<=s;)a.push(0);a[s]|=r<<16-u%4*8,u+=2}return{value:a,binLen:8*u}}function s(e){var t,r,n,i=[],s=e.length;if(0!=s%2)throw"String of HEX type must be in byte increments";for(t=0;t<s;t+=2){if(r=parseInt(e.substr(t,2),16),isNaN(r))throw"String of HEX type contains invalid characters";for(n=t>>>3;i.length<=n;)i.push(0);i[t>>>3]|=r<<24-t%8*4}return{value:i,binLen:4*s}}function a(e){var t,r,n,i=[];for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n=r>>>2,i.length<=n&&i.push(0),i[n]|=t<<24-r%4*8;return{value:i,binLen:8*e.length}}function o(e){var t,r,n,i,s,a,o=[],u=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";if(s=e.indexOf("="),e=e.replace(/\=/g,""),-1!==s&&s<e.length)throw"Invalid '=' found in base-64 string";for(t=0;t<e.length;t+=4){for(i=e.substr(t,4),n=0,r=0;r<i.length;r+=1)n|="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(i[r])<<18-6*r;for(r=0;r<i.length-1;r+=1){for(a=u>>>2;o.length<=a;)o.push(0);o[a]|=(n>>>16-8*r&255)<<24-u%4*8,u+=1}}return{value:o,binLen:8*u}}function u(e,t){var r,n,i="0123456789abcdef",s="",a=4*e.length;for(r=0;r<a;r+=1)n=e[r>>>2]>>>8*(3-r%4),s+=i.charAt(n>>>4&15)+i.charAt(15&n);return t.outputUpper?s.toUpperCase():s}function f(e,t){var r,n,i,s,a,o,u="",f=4*e.length;for(r=0;r<f;r+=3)for(s=r+1>>>2,a=e.length<=s?0:e[s],s=r+2>>>2,o=e.length<=s?0:e[s],i=(e[r>>>2]>>>8*(3-r%4)&255)<<16|(a>>>8*(3-(r+1)%4)&255)<<8|o>>>8*(3-(r+2)%4)&255,n=0;n<4;n+=1)8*r+6*n<=32*e.length?u+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-n)&63):u+=t.b64Pad;return u}function h(e,t){var r,n,i="",s=4*e.length;for(r=0;r<s;r+=1)n=e[r>>>2]>>>8*(3-r%4)&255,i+=String.fromCharCode(n);return i}function l(e,t){var r,n=4*e.length,i=new Uint8Array(n);for(r=0;r<n;r+=1)i[r]=e[r>>>2]>>>8*(3-r%4)&255;return i}function c(e){var t={outputUpper:!1,b64Pad:"="};try{e.hasOwnProperty("outputUpper")&&(t.outputUpper=e.outputUpper),e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad)}catch(e){}if("boolean"!=typeof t.outputUpper)throw"Invalid outputUpper formatting option";if("string"!=typeof t.b64Pad)throw"Invalid b64Pad formatting option";return t}function d(e,t){return e<<t|e>>>32-t}function p(e,t){return e>>>t|e<<32-t}function y(e,t){var r=new n(e.highOrder,e.lowOrder);return 32>=t?new n(r.highOrder>>>t|r.lowOrder<<32-t&4294967295,r.lowOrder>>>t|r.highOrder<<32-t&4294967295):new n(r.lowOrder>>>t-32|r.highOrder<<64-t&4294967295,r.highOrder>>>t-32|r.lowOrder<<64-t&4294967295)}function g(e,t){return e>>>t}function m(e,t){return 32>=t?new n(e.highOrder>>>t,e.lowOrder>>>t|e.highOrder<<32-t&4294967295):new n(0,e.highOrder>>>t-32)}function v(e,t,r){return e^t^r}function w(e,t,r){return e&t^~e&r}function b(e,t,r){return new n(e.highOrder&t.highOrder^~e.highOrder&r.highOrder,e.lowOrder&t.lowOrder^~e.lowOrder&r.lowOrder)}function k(e,t,r){return e&t^e&r^t&r}function A(e,t,r){return new n(e.highOrder&t.highOrder^e.highOrder&r.highOrder^t.highOrder&r.highOrder,e.lowOrder&t.lowOrder^e.lowOrder&r.lowOrder^t.lowOrder&r.lowOrder)}function _(e){return p(e,2)^p(e,13)^p(e,22)}function E(e){var t=y(e,28),r=y(e,34),i=y(e,39);return new n(t.highOrder^r.highOrder^i.highOrder,t.lowOrder^r.lowOrder^i.lowOrder)}function S(e){return p(e,6)^p(e,11)^p(e,25)}function U(e){var t=y(e,14),r=y(e,18),i=y(e,41);return new n(t.highOrder^r.highOrder^i.highOrder,t.lowOrder^r.lowOrder^i.lowOrder)}function K(e){return p(e,7)^p(e,18)^g(e,3)}function P(e){var t=y(e,1),r=y(e,8),i=m(e,7);return new n(t.highOrder^r.highOrder^i.highOrder,t.lowOrder^r.lowOrder^i.lowOrder)}function j(e){return p(e,17)^p(e,19)^g(e,10)}function x(e){var t=y(e,19),r=y(e,61),i=m(e,6);return new n(t.highOrder^r.highOrder^i.highOrder,t.lowOrder^r.lowOrder^i.lowOrder)}function T(e,t){var r=(65535&e)+(65535&t);return(65535&(e>>>16)+(t>>>16)+(r>>>16))<<16|65535&r}function O(e,t,r,n){var i=(65535&e)+(65535&t)+(65535&r)+(65535&n);return(65535&(e>>>16)+(t>>>16)+(r>>>16)+(n>>>16)+(i>>>16))<<16|65535&i}function C(e,t,r,n,i){var s=(65535&e)+(65535&t)+(65535&r)+(65535&n)+(65535&i);return(65535&(e>>>16)+(t>>>16)+(r>>>16)+(n>>>16)+(i>>>16)+(s>>>16))<<16|65535&s}function I(e,t){var r,i,s,a;return r=(65535&e.lowOrder)+(65535&t.lowOrder),i=(e.lowOrder>>>16)+(t.lowOrder>>>16)+(r>>>16),s=(65535&i)<<16|65535&r,r=(65535&e.highOrder)+(65535&t.highOrder)+(i>>>16),i=(e.highOrder>>>16)+(t.highOrder>>>16)+(r>>>16),a=(65535&i)<<16|65535&r,new n(a,s)}function M(e,t,r,i){var s,a,o,u;return s=(65535&e.lowOrder)+(65535&t.lowOrder)+(65535&r.lowOrder)+(65535&i.lowOrder),a=(e.lowOrder>>>16)+(t.lowOrder>>>16)+(r.lowOrder>>>16)+(i.lowOrder>>>16)+(s>>>16),o=(65535&a)<<16|65535&s,s=(65535&e.highOrder)+(65535&t.highOrder)+(65535&r.highOrder)+(65535&i.highOrder)+(a>>>16),a=(e.highOrder>>>16)+(t.highOrder>>>16)+(r.highOrder>>>16)+(i.highOrder>>>16)+(s>>>16),u=(65535&a)<<16|65535&s,new n(u,o)}function B(e,t,r,i,s){var a,o,u,f;return a=(65535&e.lowOrder)+(65535&t.lowOrder)+(65535&r.lowOrder)+(65535&i.lowOrder)+(65535&s.lowOrder),o=(e.lowOrder>>>16)+(t.lowOrder>>>16)+(r.lowOrder>>>16)+(i.lowOrder>>>16)+(s.lowOrder>>>16)+(a>>>16),u=(65535&o)<<16|65535&a,a=(65535&e.highOrder)+(65535&t.highOrder)+(65535&r.highOrder)+(65535&i.highOrder)+(65535&s.highOrder)+(o>>>16),o=(e.highOrder>>>16)+(t.highOrder>>>16)+(r.highOrder>>>16)+(i.highOrder>>>16)+(s.highOrder>>>16)+(a>>>16),f=(65535&o)<<16|65535&a,new n(f,u)}function D(e,t){var r,n,i,s,a,o,u,f,h,l,c=[],p=w,y=v,g=k,m=d,b=T,A=C,_=[1732584193,4023233417,2562383102,271733878,3285377520];for(l=15+(t+65>>>9<<4);e.length<=l;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[l]=t,h=e.length,u=0;u<h;u+=16){for(r=_[0],n=_[1],i=_[2],s=_[3],a=_[4],f=0;f<80;f+=1)c[f]=f<16?e[f+u]:m(c[f-3]^c[f-8]^c[f-14]^c[f-16],1),o=f<20?A(m(r,5),p(n,i,s),a,1518500249,c[f]):f<40?A(m(r,5),y(n,i,s),a,1859775393,c[f]):f<60?A(m(r,5),g(n,i,s),a,2400959708,c[f]):A(m(r,5),y(n,i,s),a,3395469782,c[f]),a=s,s=i,i=m(n,30),n=r,r=o;_[0]=b(r,_[0]),_[1]=b(n,_[1]),_[2]=b(i,_[2]),_[3]=b(s,_[3]),_[4]=b(a,_[4])}return _}function N(e,t,r){var i,s,a,o,u,f,h,l,c,d,p,y,g,m,v,D,N,R,H,F,z,q,G,V,Z,Y,X,W,$,J,Q,ee,te=[],re=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ne=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],ie=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];if(("SHA-224"===r||"SHA-256"===r)&&2&L)y=64,g=15+(t+65>>>9<<4),D=16,N=1,X=Number,R=T,H=O,F=C,z=K,q=j,G=_,V=S,Y=k,Z=w,p="SHA-224"===r?ne:ie;else{if("SHA-384"!==r&&"SHA-512"!==r||!(4&L))throw"Unexpected error in SHA-2 implementation";y=80,g=31+(t+128>>>10<<5),D=32,N=2,R=I,H=M,F=B,z=P,q=x,G=E,V=U,Y=A,Z=b,re=[new(X=n)(re[0],3609767458),new X(re[1],602891725),new X(re[2],3964484399),new X(re[3],2173295548),new X(re[4],4081628472),new X(re[5],3053834265),new X(re[6],2937671579),new X(re[7],3664609560),new X(re[8],2734883394),new X(re[9],1164996542),new X(re[10],1323610764),new X(re[11],3590304994),new X(re[12],4068182383),new X(re[13],991336113),new X(re[14],633803317),new X(re[15],3479774868),new X(re[16],2666613458),new X(re[17],944711139),new X(re[18],2341262773),new X(re[19],2007800933),new X(re[20],1495990901),new X(re[21],1856431235),new X(re[22],3175218132),new X(re[23],2198950837),new X(re[24],3999719339),new X(re[25],766784016),new X(re[26],2566594879),new X(re[27],3203337956),new X(re[28],1034457026),new X(re[29],2466948901),new X(re[30],3758326383),new X(re[31],168717936),new X(re[32],1188179964),new X(re[33],1546045734),new X(re[34],1522805485),new X(re[35],2643833823),new X(re[36],2343527390),new X(re[37],1014477480),new X(re[38],1206759142),new X(re[39],344077627),new X(re[40],1290863460),new X(re[41],3158454273),new X(re[42],3505952657),new X(re[43],106217008),new X(re[44],3606008344),new X(re[45],1432725776),new X(re[46],1467031594),new X(re[47],851169720),new X(re[48],3100823752),new X(re[49],1363258195),new X(re[50],3750685593),new X(re[51],3785050280),new X(re[52],3318307427),new X(re[53],3812723403),new X(re[54],2003034995),new X(re[55],3602036899),new X(re[56],1575990012),new X(re[57],1125592928),new X(re[58],2716904306),new X(re[59],442776044),new X(re[60],593698344),new X(re[61],3733110249),new X(re[62],2999351573),new X(re[63],3815920427),new X(3391569614,3928383900),new X(3515267271,566280711),new X(3940187606,3454069534),new X(4118630271,4000239992),new X(116418474,1914138554),new X(174292421,2731055270),new X(289380356,3203993006),new X(460393269,320620315),new X(685471733,587496836),new X(852142971,1086792851),new X(1017036298,365543100),new X(1126000580,2618297676),new X(1288033470,3409855158),new X(1501505948,4234509866),new X(1607167915,987167468),new X(1816402316,1246189591)],p="SHA-384"===r?[new X(3418070365,ne[0]),new X(1654270250,ne[1]),new X(2438529370,ne[2]),new X(355462360,ne[3]),new X(1731405415,ne[4]),new X(41048885895,ne[5]),new X(3675008525,ne[6]),new X(1203062813,ne[7])]:[new X(ie[0],4089235720),new X(ie[1],2227873595),new X(ie[2],4271175723),new X(ie[3],1595750129),new X(ie[4],2917565137),new X(ie[5],725511199),new X(ie[6],4215389547),new X(ie[7],327033209)]}for(;e.length<=g;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[g]=t,Q=e.length,m=0;m<Q;m+=D){for(i=p[0],s=p[1],a=p[2],o=p[3],u=p[4],f=p[5],h=p[6],l=p[7],v=0;v<y;v+=1)v<16?(J=v*N+m,W=e.length<=J?0:e[J],$=e.length<=J+1?0:e[J+1],te[v]=new X(W,$)):te[v]=H(q(te[v-2]),te[v-7],z(te[v-15]),te[v-16]),c=F(l,V(u),Z(u,f,h),re[v],te[v]),d=R(G(i),Y(i,s,a)),l=h,h=f,f=u,u=R(o,c),o=a,a=s,s=i,i=R(c,d);p[0]=R(i,p[0]),p[1]=R(s,p[1]),p[2]=R(a,p[2]),p[3]=R(o,p[3]),p[4]=R(u,p[4]),p[5]=R(f,p[5]),p[6]=R(h,p[6]),p[7]=R(l,p[7])}if("SHA-224"===r&&2&L)ee=[p[0],p[1],p[2],p[3],p[4],p[5],p[6]];else if("SHA-256"===r&&2&L)ee=p;else if("SHA-384"===r&&4&L)ee=[p[0].highOrder,p[0].lowOrder,p[1].highOrder,p[1].lowOrder,p[2].highOrder,p[2].lowOrder,p[3].highOrder,p[3].lowOrder,p[4].highOrder,p[4].lowOrder,p[5].highOrder,p[5].lowOrder];else{if(!("SHA-512"===r&&4&L))throw"Unexpected error in SHA-2 implementation";ee=[p[0].highOrder,p[0].lowOrder,p[1].highOrder,p[1].lowOrder,p[2].highOrder,p[2].lowOrder,p[3].highOrder,p[3].lowOrder,p[4].highOrder,p[4].lowOrder,p[5].highOrder,p[5].lowOrder,p[6].highOrder,p[6].lowOrder,p[7].highOrder,p[7].lowOrder]}return ee}Object.defineProperty(r,"__esModule",{value:!0});var L=7,R=function(e,t,r){var n=0,d=[0],p="",y=null;if("UTF8"!==(p=r||"UTF8")&&"UTF16BE"!==p&&"UTF16LE"!==p)throw"encoding must be UTF8, UTF16BE, or UTF16LE";if("HEX"===t){if(0!=e.length%2)throw"srcString of HEX type must be in byte increments";y=s(e),n=y.binLen,d=y.value}else if("TEXT"===t||"ASCII"===t)y=i(e,p),n=y.binLen,d=y.value;else if("B64"===t)y=o(e),n=y.binLen,d=y.value;else if("BYTES"===t)y=a(e),n=y.binLen,d=y.value;else{if("TYPED"!==t)throw"inputFormat must be HEX, TEXT, ASCII, B64, BYTES, or TYPED";y=function(e){var t,r,n,i=[];for(r=0;r<e.length;r+=1)t=e[r],n=r>>>2,i.length<=n&&i.push(0),i[n]|=t<<24-r%4*8;return{value:i,binLen:8*e.length}}(e),n=y.binLen,d=y.value}this.getHash=function(e,t,r,i){var s,a=null,o=d.slice(),p=n;if(3===arguments.length?"number"!=typeof r&&(i=r,r=1):2===arguments.length&&(r=1),r!==parseInt(r,10)||1>r)throw"numRounds must a integer >= 1";switch(t){case"HEX":a=u;break;case"B64":a=f;break;case"BYTES":a=h;break;case"TYPED":a=l;break;default:throw"format must be HEX, B64, or BYTES"}if("SHA-1"===e&&1&L)for(s=0;s<r;s+=1)o=D(o,p),p=160;else if("SHA-224"===e&&2&L)for(s=0;s<r;s+=1)o=N(o,p,e),p=224;else if("SHA-256"===e&&2&L)for(s=0;s<r;s+=1)o=N(o,p,e),p=256;else if("SHA-384"===e&&4&L)for(s=0;s<r;s+=1)o=N(o,p,e),p=384;else{if(!("SHA-512"===e&&4&L))throw"Chosen SHA variant is not supported";for(s=0;s<r;s+=1)o=N(o,p,e),p=512}return a(o,c(i))},this.getHMAC=function(e,t,r,l,y){var g,m,v,w,b,k,A,_,E,S=[],U=[],K=null;switch(l){case"HEX":g=u;break;case"B64":g=f;break;case"BYTES":g=h;break;default:throw"outputFormat must be HEX, B64, or BYTES"}if("SHA-1"===r&&1&L)v=64,E=160;else if("SHA-224"===r&&2&L)v=64,E=224;else if("SHA-256"===r&&2&L)v=64,E=256;else if("SHA-384"===r&&4&L)v=128,E=384;else{if(!("SHA-512"===r&&4&L))throw"Chosen SHA variant is not supported";v=128,E=512}if("HEX"===t)_=(K=s(e)).binLen,m=K.value;else if("TEXT"===t||"ASCII"===t)_=(K=i(e,p)).binLen,m=K.value;else if("B64"===t)_=(K=o(e)).binLen,m=K.value;else{if("BYTES"!==t)throw"inputFormat must be HEX, TEXT, ASCII, B64, or BYTES";_=(K=a(e)).binLen,m=K.value}if(w=8*v,A=v/4-1,v<_/8){if("SHA-1"===r&&1&L)m=D(m,_);else{if(!(6&L))throw"Unexpected error in HMAC implementation";m=N(m,_,r)}for(;m.length<=A;)m.push(0);m[A]&=4294967040}else if(v>_/8){for(;m.length<=A;)m.push(0);m[A]&=4294967040}for(b=0;b<=A;b+=1)S[b]=909522486^m[b],U[b]=1549556828^m[b];if("SHA-1"===r&&1&L)k=D(U.concat(D(S.concat(d),w+n)),w+E);else{if(!(6&L))throw"Unexpected error in HMAC implementation";k=N(U.concat(N(S.concat(d),w+n,r)),w+E,r)}return g(k,c(y))}};r.default={sha1:function(e){return new R(e,"TYPED","UTF8").getHash("SHA-1","TYPED")},sha224:function(e){return new R(e,"TYPED","UTF8").getHash("SHA-224","TYPED")},sha256:function(e){return new R(e,"TYPED","UTF8").getHash("SHA-256","TYPED")},sha384:function(e){return new R(e,"TYPED","UTF8").getHash("SHA-384","TYPED")},sha512:function(e){return new R(e,"TYPED","UTF8").getHash("SHA-512","TYPED")}}},{}],24:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./cipher")),s=n(e("./hash")),a=n(e("./cfb")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./gcm")),u=n(e("./public_key")),f=n(e("./signature")),h=n(e("./random")),l=n(e("./pkcs1")),c=n(e("./crypto.js")),d={cipher:i.default,hash:s.default,cfb:a.default,gcm:o,publicKey:u.default,signature:f.default,random:h.default,pkcs1:l.default};for(var p in c.default)d[p]=c.default[p];r.default=d},{"./cfb":11,"./cipher":16,"./crypto.js":18,"./gcm":19,"./hash":20,"./pkcs1":25,"./public_key":28,"./random":31,"./signature":32}],25:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./random.js")),s=n(e("../util.js")),a=n(e("./public_key/jsbn.js")),o=n(e("./hash")),u=[];u[1]=[48,32,48,12,6,8,42,134,72,134,247,13,2,5,5,0,4,16],u[2]=[48,33,48,9,6,5,43,14,3,2,26,5,0,4,20],u[3]=[48,33,48,9,6,5,43,36,3,2,1,5,0,4,20],u[8]=[48,49,48,13,6,9,96,134,72,1,101,3,4,2,1,5,0,4,32],u[9]=[48,65,48,13,6,9,96,134,72,1,101,3,4,2,2,5,0,4,48],u[10]=[48,81,48,13,6,9,96,134,72,1,101,3,4,2,3,5,0,4,64],u[11]=[48,45,48,13,6,9,96,134,72,1,101,3,4,2,4,5,0,4,28],r.default={eme:{encode:function(e,t){var r=e.length;if(r>t-11)throw new Error("Message too long");var n=function(e){for(var t,r="";r.length<e;)0!==(t=i.default.getSecureRandomOctet())&&(r+=String.fromCharCode(t));return r}(t-r-3);return String.fromCharCode(0)+String.fromCharCode(2)+n+String.fromCharCode(0)+e},decode:function(e){0!==e.charCodeAt(0)&&(e=String.fromCharCode(0)+e);for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=2;0!==e.charCodeAt(n)&&n<e.length;)n++;var i=n-2,s=e.charCodeAt(n++);if(0===t&&2===r&&i>=8&&0===s)return e.substr(n);throw new Error("Decryption error")}},emsa:{encode:function(e,t,r){var n,i=s.default.Uint8Array2str(o.default.digest(e,s.default.str2Uint8Array(t)));if(i.length!==o.default.getHashByteLength(e))throw new Error("Invalid hash length");var f="";for(n=0;n<u[e].length;n++)f+=String.fromCharCode(u[e][n]);var h=(f+=i).length;if(r<h+11)throw new Error("Intended encoded message length too short");var l="";for(n=0;n<r-h-3;n++)l+=String.fromCharCode(255);var c=String.fromCharCode(0)+String.fromCharCode(1)+l+String.fromCharCode(0)+f;return new a.default(s.default.hexstrdump(c),16)}}}},{"../util.js":70,"./hash":20,"./public_key/jsbn.js":29,"./random.js":31}],26:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){this.select_hash_algorithm=function(e){var t=u.default.prefer_hash_algorithm;switch(Math.round(e.bitLength()/8)){case 20:return 2!==t&&t>11&&10!==t&&t<8?2:t;case 28:return t>11&&t<8?11:t;case 32:return t>10&&t<8?8:t;default:return o.default.print_debug("DSA select hash algorithm: returning null for an unknown length of q"),null}},this.sign=function(e,t,r,n,u,f){for(var h,l,c,d=o.default.getLeftNBits(o.default.Uint8Array2str(a.default.digest(e,o.default.str2Uint8Array(t))),u.bitLength()),p=new i.default(o.default.hexstrdump(d),16);h=s.default.getRandomBigIntegerInRange(i.default.ONE,u.subtract(i.default.ONE)),l=r.modPow(h,n).mod(u),c=h.modInverse(u).multiply(p.add(f.multiply(l))).mod(u),0===l||0===c;);var y=[];return y[0]=l.toMPI(),y[1]=c.toMPI(),y},this.verify=function(e,t,r,n,s,u,f,h){var l=o.default.getLeftNBits(o.default.Uint8Array2str(a.default.digest(e,o.default.str2Uint8Array(n))),u.bitLength()),c=new i.default(o.default.hexstrdump(l),16);if(i.default.ZERO.compareTo(t)>=0||t.compareTo(u)>=0||i.default.ZERO.compareTo(r)>=0||r.compareTo(u)>=0)return o.default.print_debug("invalid DSA Signature"),null;var d=r.modInverse(u);if(0===i.default.ZERO.compareTo(d))return o.default.print_debug("invalid DSA Signature"),null;var p=c.multiply(d).mod(u),y=t.multiply(d).mod(u);return f.modPow(p,s).multiply(h.modPow(y,s)).mod(s).mod(u)}};var i=n(e("./jsbn.js")),s=n(e("../random.js")),a=n(e("../hash")),o=n(e("../../util.js")),u=n(e("../../config"))},{"../../config":10,"../../util.js":70,"../hash":20,"../random.js":31,"./jsbn.js":29}],27:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){this.encrypt=function(e,t,r,n){var a=r.subtract(i.default.TWO),o=s.default.getRandomBigIntegerInRange(i.default.ONE,a);o=o.mod(a).add(i.default.ONE);var u=[];return u[0]=t.modPow(o,r),u[1]=n.modPow(o,r).multiply(e).mod(r),u},this.decrypt=function(e,t,r,n){return a.default.print_debug("Elgamal Decrypt:\nc1:"+a.default.hexstrdump(e.toMPI())+"\nc2:"+a.default.hexstrdump(t.toMPI())+"\np:"+a.default.hexstrdump(r.toMPI())+"\nx:"+a.default.hexstrdump(n.toMPI())),e.modPow(n,r).modInverse(r).multiply(t).mod(r)}};var i=n(e("./jsbn.js")),s=n(e("../random.js")),a=n(e("../../util.js"))},{"../../util.js":70,"../random.js":31,"./jsbn.js":29}],28:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./rsa.js")),s=n(e("./elgamal.js")),a=n(e("./dsa.js"));r.default={rsa:i.default,elgamal:s.default,dsa:a.default}},{"./dsa.js":26,"./elgamal.js":27,"./rsa.js":30}],29:[function(e,t,r){"use strict";function n(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function i(){return new n(null)}function s(e){return _.charAt(e)}function a(e,t){var r=E[e.charCodeAt(t)];return null==r?-1:r}function o(e){var t=i();return t.fromInt(e),t}function u(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function f(e){this.m=e}function h(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function l(e,t){return e&t}function c(e,t){return e|t}function d(e,t){return e^t}function p(e,t){return e&~t}function y(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function g(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function m(){}function v(e){return e}function w(e){this.r2=i(),this.q3=i(),n.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function u(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var b=function(e){return e&&e.__esModule?e:{default:e}}(e("../../util.js"));n.prototype.am=function(e,t,r,n,i,s){for(;--s>=0;){var a=t*this[e++]+r[n]+i;i=Math.floor(a/67108864),r[n++]=67108863&a}return i},n.prototype.DB=26,n.prototype.DM=67108863,n.prototype.DV=1<<26;n.prototype.FV=Math.pow(2,52),n.prototype.F1=26,n.prototype.F2=0;var k,A,_="0123456789abcdefghijklmnopqrstuvwxyz",E=new Array;for(k="0".charCodeAt(0),A=0;A<=9;++A)E[k++]=A;for(k="a".charCodeAt(0),A=10;A<36;++A)E[k++]=A;for(k="A".charCodeAt(0),A=10;A<36;++A)E[k++]=A;f.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},f.prototype.revert=function(e){return e},f.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},f.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},f.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},h.prototype.convert=function(e){var t=i();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(n.ZERO)>0&&this.m.subTo(t,t),t},h.prototype.revert=function(e){var t=i();return e.copyTo(t),this.reduce(t),t},h.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},h.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},n.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},n.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},n.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var i=e.length,s=!1,o=0;--i>=0;){var u=8==r?255&e[i]:a(e,i);u<0?"-"==e.charAt(i)&&(s=!0):(s=!1,0==o?this[this.t++]=u:o+r>this.DB?(this[this.t-1]|=(u&(1<<this.DB-o)-1)<<o,this[this.t++]=u>>this.DB-o):this[this.t-1]|=u<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&n.ZERO.subTo(this,this)},n.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},n.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},n.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},n.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,a=Math.floor(e/this.DB),o=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+a+1]=this[r]>>i|o,o=(this[r]&s)<<n;for(r=a-1;r>=0;--r)t[r]=0;t[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()},n.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t[0]=this[r]>>n;for(var a=r+1;a<this.t;++a)t[a-r-1]|=(this[a]&s)<<i,t[a-r]=this[a]>>n;n>0&&(t[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}},n.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},n.prototype.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),s=r.t;for(t.t=s+i.t;--s>=0;)t[s]=0;for(s=0;s<i.t;++s)t[s+r.t]=r.am(0,i[s],t,s,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&n.ZERO.subTo(t,t)},n.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},n.prototype.divRemTo=function(e,t,r){var s=e.abs();if(!(s.t<=0)){var a=this.abs();if(a.t<s.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=i());var o=i(),f=this.s,h=e.s,l=this.DB-u(s[s.t-1]);l>0?(s.lShiftTo(l,o),a.lShiftTo(l,r)):(s.copyTo(o),a.copyTo(r));var c=o.t,d=o[c-1];if(0!=d){var p=d*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),y=this.FV/p,g=(1<<this.F1)/p,m=1<<this.F2,v=r.t,w=v-c,b=null==t?i():t;for(o.dlShiftTo(w,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),n.ONE.dlShiftTo(c,b),b.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--w>=0;){var k=r[--v]==d?this.DM:Math.floor(r[v]*y+(r[v-1]+m)*g);if((r[v]+=o.am(0,k,r,w,0,c))<k)for(o.dlShiftTo(w,b),r.subTo(b,r);r[v]<--k;)r.subTo(b,r)}null!=t&&(r.drShiftTo(c,t),f!=h&&n.ZERO.subTo(t,t)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),f<0&&n.ZERO.subTo(r,r)}}},n.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,(t=t*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},n.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},n.prototype.exp=function(e,t){if(e>4294967295||e<1)return n.ONE;var r=i(),s=i(),a=t.convert(this),o=u(e)-1;for(a.copyTo(r);--o>=0;)if(t.sqrTo(r,s),(e&1<<o)>0)t.mulTo(s,a,r);else{var f=r;r=s,s=f}return t.revert(r)},n.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,a="",o=this.t,u=this.DB-o*this.DB%t;if(o-- >0)for(u<this.DB&&(r=this[o]>>u)>0&&(i=!0,a=s(r));o>=0;)u<t?(r=(this[o]&(1<<u)-1)<<t-u,r|=this[--o]>>(u+=this.DB-t)):(r=this[o]>>(u-=t)&n,u<=0&&(u+=this.DB,--o)),r>0&&(i=!0),i&&(a+=s(r));return i?a:"0"},n.prototype.negate=function(){var e=i();return n.ZERO.subTo(this,e),e},n.prototype.abs=function(){return this.s<0?this.negate():this},n.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},n.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},n.prototype.mod=function(e){var t=i();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(n.ZERO)>0&&e.subTo(t,t),t},n.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new f(t):new h(t),this.exp(e,r)},n.ZERO=o(0),n.ONE=o(1),n.TWO=o(2),m.prototype.convert=v,m.prototype.revert=v,m.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},m.prototype.sqrTo=function(e,t){e.squareTo(t)},w.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=i();return e.copyTo(t),this.reduce(t),t},w.prototype.revert=function(e){return e},w.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},w.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},w.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var S=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],U=(1<<26)/S[S.length-1];n.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},n.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=o(r),s=i(),a=i(),u="";for(this.divRemTo(n,s,a);s.signum()>0;)u=(r+a.intValue()).toString(e).substr(1)+u,s.divRemTo(n,s,a);return a.intValue().toString(e)+u},n.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),s=!1,o=0,u=0,f=0;f<e.length;++f){var h=a(e,f);h<0?"-"==e.charAt(f)&&0==this.signum()&&(s=!0):(u=t*u+h,++o>=r&&(this.dMultiply(i),this.dAddOffset(u,0),o=0,u=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(u,0)),s&&n.ZERO.subTo(this,this)},n.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(n.ONE.shiftLeft(e-1),c,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(n.ONE.shiftLeft(e-1),this);else{var i=new Array,s=7&e;i.length=1+(e>>3),t.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}},n.prototype.bitwiseTo=function(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},n.prototype.changeBit=function(e,t){var r=n.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},n.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},n.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},n.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},n.prototype.multiplyLowerTo=function(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},n.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},n.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},n.prototype.millerRabin=function(e){var t=this.subtract(n.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var s=t.shiftRight(r);(e=e+1>>1)>S.length&&(e=S.length);for(var a=i(),o=[],u=0;u<e;++u){for(;h=S[Math.floor(Math.random()*S.length)],-1!=o.indexOf(h););o.push(h),a.fromInt(h);var f=a.modPow(s,this);if(0!=f.compareTo(n.ONE)&&0!=f.compareTo(t)){for(var h=1;h++<r&&0!=f.compareTo(t);)if(0==(f=f.modPowInt(2,this)).compareTo(n.ONE))return!1;if(0!=f.compareTo(t))return!1}}return!0},n.prototype.clone=function(){var e=i();return this.copyTo(e),e},n.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},n.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},n.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},n.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},n.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),(i>0||r!=this.s)&&(t[i++]=r);return t},n.prototype.equals=function(e){return 0==this.compareTo(e)},n.prototype.min=function(e){return this.compareTo(e)<0?this:e},n.prototype.max=function(e){return this.compareTo(e)>0?this:e},n.prototype.and=function(e){var t=i();return this.bitwiseTo(e,l,t),t},n.prototype.or=function(e){var t=i();return this.bitwiseTo(e,c,t),t},n.prototype.xor=function(e){var t=i();return this.bitwiseTo(e,d,t),t},n.prototype.andNot=function(e){var t=i();return this.bitwiseTo(e,p,t),t},n.prototype.not=function(){for(var e=i(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},n.prototype.shiftLeft=function(e){var t=i();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},n.prototype.shiftRight=function(e){var t=i();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},n.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+y(this[e]);return this.s<0?this.t*this.DB:-1},n.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=g(this[r]^t);return e},n.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},n.prototype.setBit=function(e){return this.changeBit(e,c)},n.prototype.clearBit=function(e){return this.changeBit(e,p)},n.prototype.flipBit=function(e){return this.changeBit(e,d)},n.prototype.add=function(e){var t=i();return this.addTo(e,t),t},n.prototype.subtract=function(e){var t=i();return this.subTo(e,t),t},n.prototype.multiply=function(e){var t=i();return this.multiplyTo(e,t),t},n.prototype.divide=function(e){var t=i();return this.divRemTo(e,t,null),t},n.prototype.remainder=function(e){var t=i();return this.divRemTo(e,null,t),t},n.prototype.divideAndRemainder=function(e){var t=i(),r=i();return this.divRemTo(e,t,r),new Array(t,r)},n.prototype.modPow=function(e,t){var r,n,s=e.bitLength(),a=o(1);if(s<=0)return a;r=s<18?1:s<48?3:s<144?4:s<768?5:6,n=s<8?new f(t):t.isEven()?new w(t):new h(t);var l=new Array,c=3,d=r-1,p=(1<<r)-1;if(l[1]=n.convert(this),r>1){var y=i();for(n.sqrTo(l[1],y);c<=p;)l[c]=i(),n.mulTo(y,l[c-2],l[c]),c+=2}var g,m,v=e.t-1,b=!0,k=i();for(s=u(e[v])-1;v>=0;){for(s>=d?g=e[v]>>s-d&p:(g=(e[v]&(1<<s+1)-1)<<d-s,v>0&&(g|=e[v-1]>>this.DB+s-d)),c=r;0==(1&g);)g>>=1,--c;if((s-=c)<0&&(s+=this.DB,--v),b)l[g].copyTo(a),b=!1;else{for(;c>1;)n.sqrTo(a,k),n.sqrTo(k,a),c-=2;c>0?n.sqrTo(a,k):(m=a,a=k,k=m),n.mulTo(k,l[g],a)}for(;v>=0&&0==(e[v]&1<<s);)n.sqrTo(a,k),m=a,a=k,k=m,--s<0&&(s=this.DB-1,--v)}return n.revert(a)},n.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return n.ZERO;for(var r=e.clone(),i=this.clone(),s=o(1),a=o(0),u=o(0),f=o(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),t?(u.isEven()&&f.isEven()||(u.addTo(this,u),f.subTo(e,f)),u.rShiftTo(1,u)):f.isEven()||f.subTo(e,f),f.rShiftTo(1,f);r.compareTo(i)>=0?(r.subTo(i,r),t&&s.subTo(u,s),a.subTo(f,a)):(i.subTo(r,i),t&&u.subTo(s,u),f.subTo(a,f))}return 0!=i.compareTo(n.ONE)?n.ZERO:f.compareTo(e)>=0?f.subtract(e):f.signum()<0?(f.addTo(e,f),f.signum()<0?f.add(e):f):f},n.prototype.pow=function(e){return this.exp(e,new m)},n.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},n.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=S[S.length-1]){for(t=0;t<S.length;++t)if(r[0]==S[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<S.length;){for(var n=S[t],i=t+1;i<S.length&&n<U;)n*=S[i++];for(n=r.modInt(n);t<i;)if(n%S[t++]==0)return!1}return r.millerRabin(e)},n.prototype.toMPI=function(){var e=this.toByteArray(),t=8*(e.length-1)+u(e[0]),r="";return r+=String.fromCharCode((65280&t)>>8),r+=String.fromCharCode(255&t),r+=b.default.bin2str(e)},n.prototype.square=function(){var e=i();return this.squareTo(e),e}},{"../../util.js":70}],30:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function e(){this.n=null,this.e=0,this.ee=null,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.u=null}this.encrypt=function(e,t,r){return e.modPowInt(t,r)},this.decrypt=function(e,t,r,n,h,l,c){o.default.rsa_blinding&&(e=function(e,t,r){return f=f.bitLength()===t.bitLength()?f.square().mod(t):a.default.getRandomBigIntegerInRange(i.default.TWO,t),u=f.modInverse(t).modPow(r,t),e.multiply(u).mod(t)}(e,t,r));var d=e.mod(h).modPow(n.mod(h.subtract(i.default.ONE)),h),p=e.mod(l).modPow(n.mod(l.subtract(i.default.ONE)),l);s.default.print_debug("rsa.js decrypt\nxpn:"+s.default.hexstrdump(d.toMPI())+"\nxqn:"+s.default.hexstrdump(p.toMPI()));var y=p.subtract(d);return 0===y[0]?(y=(y=d.subtract(p)).multiply(c).mod(l),y=l.subtract(y)):y=y.multiply(c).mod(l),y=y.multiply(h).add(d),o.default.rsa_blinding&&(y=function(e,t){return y.multiply(f).mod(t)}(0,t)),y},this.verify=function(e,t,r){return e.modPowInt(t,r)},this.sign=function(e,t,r){return e.modPow(t,r)},this.generate=function(t,r){function n(t){function n(e){var t=e.replace(/\-/g,"+").replace(/_/g,"/"),r=s.default.hexstrdump(atob(t));return new i.default(r,16)}var a=new e;return a.n=n(t.n),a.ee=new i.default(r,16),a.d=n(t.d),a.p=n(t.p),a.q=n(t.q),a.u=a.p.modInverse(a.q),a}var o=s.default.getWebCryptoAll();if(o){var u,f,h=new Uint32Array([parseInt(r,16)]),l=new Uint8Array(h.buffer);return window.crypto&&window.crypto.webkitSubtle?(u={name:"RSA-OAEP",modulusLength:t,publicExponent:l.subarray(0,3),hash:{name:"SHA-1"}},f=o.generateKey(u,!0,["encrypt","decrypt"])):(u={name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:l.subarray(0,3),hash:{name:"SHA-1"}},"function"!=typeof(f=o.generateKey(u,!0,["sign","verify"])).then&&(f=s.default.promisifyIE11Op(f,"Error generating RSA key pair."))),f.then(function(e){var t=o.exportKey("jwk",e.privateKey);return"function"!=typeof t.then&&(t=s.default.promisifyIE11Op(t,"Error exporting RSA key pair.")),t}).then(function(e){return n(e instanceof ArrayBuffer?JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))):e)})}return new Promise(function(n){var s=new e,o=new function(){this.nextBytes=function(e){for(var t=0;t<e.length;t++)e[t]=a.default.getSecureRandomOctet()}},u=t>>1;for(s.e=parseInt(r,16),s.ee=new i.default(r,16);;){for(;s.p=new i.default(t-u,1,o),0!==s.p.subtract(i.default.ONE).gcd(s.ee).compareTo(i.default.ONE)||!s.p.isProbablePrime(10););for(;s.q=new i.default(u,1,o),0!==s.q.subtract(i.default.ONE).gcd(s.ee).compareTo(i.default.ONE)||!s.q.isProbablePrime(10););if(s.p.compareTo(s.q)<=0){var f=s.p;s.p=s.q,s.q=f}var h=s.p.subtract(i.default.ONE),l=s.q.subtract(i.default.ONE),c=h.multiply(l);if(0===c.gcd(s.ee).compareTo(i.default.ONE)){s.n=s.p.multiply(s.q),s.d=s.ee.modInverse(c),s.dmp1=s.d.mod(h),s.dmq1=s.d.mod(l),s.u=s.p.modInverse(s.q);break}}n(s)})},this.keyObject=e};var i=n(e("./jsbn.js")),s=n(e("../../util.js")),a=n(e("../random.js")),o=n(e("../../config")),u=i.default.ZERO,f=i.default.ZERO},{"../../config":10,"../../util.js":70,"../random.js":31,"./jsbn.js":29}],31:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.buffer=null,this.size=null}Object.defineProperty(r,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(e("../type/mpi.js")),o=n(e("../util.js")),u=o.default.detectNode()&&e("crypto");r.default={getRandomBytes:function(e){for(var t=new Uint8Array(e),r=0;r<e;r++)t[r]=this.getSecureRandomOctet();return t},getSecureRandom:function(e,t){for(var r=this.getSecureRandomUint(),n=(t-e).toString(2).length;(r&Math.pow(2,n)-1)>t-e;)r=this.getSecureRandomUint();return e+Math.abs(r&Math.pow(2,n)-1)},getSecureRandomOctet:function(){var e=new Uint8Array(1);return this.getRandomValues(e),e[0]},getSecureRandomUint:function(){var e=new Uint8Array(4),t=new DataView(e.buffer);return this.getRandomValues(e),t.getUint32(0)},getRandomValues:function(e){if(!(e instanceof Uint8Array))throw new Error("Invalid type: buf not an Uint8Array");if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(e);else if("undefined"!=typeof window&&"object"===s(window.msCrypto)&&"function"==typeof window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(e);else if(u){var t=u.randomBytes(e.length);e.set(t)}else{if(!this.randomBuffer.buffer)throw new Error("No secure random number generator available.");this.randomBuffer.get(e)}return e},getRandomBigInteger:function(e){if(e<1)throw new Error("Illegal parameter value: bits < 1");var t=Math.floor((e+7)/8),r=o.default.Uint8Array2str(this.getRandomBytes(t));e%8>0&&(r=String.fromCharCode(Math.pow(2,e%8)-1&r.charCodeAt(0))+r.substring(1));var n=new a.default;return n.fromBytes(r),n.toBigInteger()},getRandomBigIntegerInRange:function(e,t){if(t.compareTo(e)<=0)throw new Error("Illegal parameter value: max <= min");for(var r=t.subtract(e),n=this.getRandomBigInteger(r.bitLength());n.compareTo(r)>0;)n=this.getRandomBigInteger(r.bitLength());return e.add(n)},randomBuffer:new i},i.prototype.init=function(e){this.buffer=new Uint8Array(e),this.size=0},i.prototype.set=function(e){if(!this.buffer)throw new Error("RandomBuffer is not initialized");if(!(e instanceof Uint8Array))throw new Error("Invalid type: buf not an Uint8Array");var t=this.buffer.length-this.size;e.length>t&&(e=e.subarray(0,t)),this.buffer.set(e,this.size),this.size+=e.length},i.prototype.get=function(e){if(!this.buffer)throw new Error("RandomBuffer is not initialized");if(!(e instanceof Uint8Array))throw new Error("Invalid type: buf not an Uint8Array");if(this.size<e.length)throw new Error("Random number buffer depleted");for(var t=0;t<e.length;t++)e[t]=this.buffer[--this.size],this.buffer[this.size]=0}},{"../type/mpi.js":68,"../util.js":70,crypto:"crypto"}],32:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("../util")),s=n(e("./public_key")),a=n(e("./pkcs1.js"));r.default={verify:function(e,t,r,n,o){var u;switch(o=i.default.Uint8Array2str(o),e){case 1:case 2:case 3:var f=new s.default.rsa,h=n[0].toBigInteger(),l=n[0].byteLength(),c=n[1].toBigInteger();u=r[0].toBigInteger();var d=f.verify(u,c,h),p=a.default.emsa.encode(t,o,l);return 0===d.compareTo(p);case 16:throw new Error("signing with Elgamal is not defined in the OpenPGP standard.");case 17:var y=new s.default.dsa,g=r[0].toBigInteger(),m=r[1].toBigInteger(),v=n[0].toBigInteger(),w=n[1].toBigInteger(),b=n[2].toBigInteger(),k=n[3].toBigInteger();u=o;return 0===y.verify(t,g,m,u,v,w,b,k).compareTo(g);default:throw new Error("Invalid signature algorithm.")}},sign:function(e,t,r,n){n=i.default.Uint8Array2str(n);var o;switch(t){case 1:case 2:case 3:var u=new s.default.rsa,f=r[2].toBigInteger(),h=r[0].toBigInteger();return o=a.default.emsa.encode(e,n,r[0].byteLength()),i.default.str2Uint8Array(u.sign(o,f,h).toMPI());case 17:var l=new s.default.dsa,c=r[0].toBigInteger(),d=r[1].toBigInteger(),p=r[2].toBigInteger(),y=r[4].toBigInteger();o=n;var g=l.sign(e,o,p,c,d,y);return i.default.str2Uint8Array(g[0].toString()+g[1].toString());case 16:throw new Error("Signing with Elgamal is not defined in the OpenPGP standard.");default:throw new Error("Invalid signature algorithm.")}}}},{"../util":70,"./pkcs1.js":25,"./public_key":28}],33:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e="";return l.default.show_version&&(e+="Version: "+l.default.versionstring+"\r\n"),l.default.show_comment&&(e+="Comment: "+l.default.commentstring+"\r\n"),e+="\r\n"}function s(e){var t=function(e){for(var t=11994318,r=0;r<e.length;r++)t=t<<8^c[255&(t>>16^e[r])];return 16777215&t}(e),r=new Uint8Array([t>>16,t>>8&255,255&t]);return f.default.encode(r)}function a(e){var t="",r=e,n=/^[ \f\r\t\u00a0\u2000-\u200a\u202f\u205f\u3000]*\n/m.exec(e);if(null===n)throw new Error("Mandatory blank line missing between armor headers and armor data");return t=e.slice(0,n.index),r=e.slice(n.index+n[0].length),(t=t.split("\n")).pop(),{headers:t,body:r}}function o(e){for(var t=0;t<e.length;t++){if(!/^([^\s:]|[^\s:][^:]*[^\s:]): .+$/.test(e[t]))throw new Error("Improperly formatted armor header: "+e[t]);l.default.debug&&!/^(Version|Comment|MessageID|Hash|Charset): .+$/.test(e[t])&&console.log("Unknown header: "+e[t])}}function u(e){var t=e=e.trim(),r="",n=e.lastIndexOf("=");return n>=0&&n!==e.length-1&&(t=e.slice(0,n),r=e.slice(n+1).substr(0,4)),{body:t,checksum:r}}Object.defineProperty(r,"__esModule",{value:!0});var f=n(e("./base64.js")),h=n(e("../enums.js")),l=n(e("../config")),c=[0,8801531,25875725,17603062,60024545,51751450,35206124,44007191,128024889,120049090,103502900,112007375,70412248,78916387,95990485,88014382,264588937,256049778,240098180,248108927,207005800,215016595,232553829,224014750,140824496,149062475,166599357,157832774,200747345,191980970,176028764,184266919,520933865,529177874,512099556,503334943,480196360,471432179,487973381,496217854,414011600,405478443,422020573,430033190,457094705,465107658,448029500,439496647,281648992,273666971,289622637,298124950,324696449,333198714,315665548,307683447,392699481,401494690,383961940,375687087,352057528,343782467,359738805,368533838,1041867730,1050668841,1066628831,1058355748,1032471859,1024199112,1006669886,1015471301,968368875,960392720,942864358,951368477,975946762,984451313,1000411399,992435708,836562267,828023200,810956886,818967725,844041146,852051777,868605623,860066380,914189410,922427545,938981743,930215316,904825475,896059e3,878993294,887231349,555053627,563297984,547333942,538569677,579245274,570480673,588005847,596249900,649392898,640860153,658384399,666397428,623318499,631331096,615366894,606833685,785398962,777416777,794487231,802989380,759421523,767923880,751374174,743392165,695319947,704115056,687564934,679289981,719477610,711202705,728272487,737067676,2083735460,2092239711,2109313705,2101337682,2141233477,2133257662,2116711496,2125215923,2073216669,2064943718,2048398224,2057199467,2013339772,2022141063,2039215473,2030942602,1945504045,1936737750,1920785440,1929023707,1885728716,1893966647,1911503553,1902736954,1951893524,1959904495,1977441561,1968902626,2009362165,2000822798,1984871416,1992881923,1665111629,1673124534,1656046400,1647513531,1621913772,1613380695,1629922721,1637935450,1688082292,1679317903,1695859321,1704103554,1728967061,1737211246,1720132760,1711368291,1828378820,1820103743,1836060105,1844855090,1869168165,1877963486,1860430632,1852155859,1801148925,1809650950,1792118e3,1784135691,1757986588,1750004711,1765960209,1774462698,1110107254,1118611597,1134571899,1126595968,1102643863,1094667884,1077139354,1085643617,1166763343,1158490548,1140961346,1149762745,1176011694,1184812885,1200772771,1192499800,1307552511,1298785796,1281720306,1289958153,1316768798,1325007077,1341561107,1332794856,1246636998,1254647613,1271201483,1262662192,1239272743,1230733788,1213667370,1221678289,1562785183,1570797924,1554833554,1546300521,1588974462,1580441477,1597965939,1605978760,1518843046,1510078557,1527603627,1535847760,1494504007,1502748348,1486784330,1478020017,1390639894,1382365165,1399434779,1408230112,1366334967,1375129868,1358579962,1350304769,1430452783,1438955220,1422405410,1414423513,1456544974,1448562741,1465633219,1474135352];r.default={encode:function(e,t,r,n){var a=[];switch(e){case h.default.armor.multipart_section:a.push("-----BEGIN PGP MESSAGE, PART "+r+"/"+n+"-----\r\n"),a.push(i()),a.push(f.default.encode(t)),a.push("\r\n="+s(t)+"\r\n"),a.push("-----END PGP MESSAGE, PART "+r+"/"+n+"-----\r\n");break;case h.default.armor.multipart_last:a.push("-----BEGIN PGP MESSAGE, PART "+r+"-----\r\n"),a.push(i()),a.push(f.default.encode(t)),a.push("\r\n="+s(t)+"\r\n"),a.push("-----END PGP MESSAGE, PART "+r+"-----\r\n");break;case h.default.armor.signed:a.push("\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\n"),a.push("Hash: "+t.hash+"\r\n\r\n"),a.push(t.text.replace(/\n-/g,"\n- -")),a.push("\r\n-----BEGIN PGP SIGNATURE-----\r\n"),a.push(i()),a.push(f.default.encode(t.data)),a.push("\r\n="+s(t.data)+"\r\n"),a.push("-----END PGP SIGNATURE-----\r\n");break;case h.default.armor.message:a.push("-----BEGIN PGP MESSAGE-----\r\n"),a.push(i()),a.push(f.default.encode(t)),a.push("\r\n="+s(t)+"\r\n"),a.push("-----END PGP MESSAGE-----\r\n");break;case h.default.armor.public_key:a.push("-----BEGIN PGP PUBLIC KEY BLOCK-----\r\n"),a.push(i()),a.push(f.default.encode(t)),a.push("\r\n="+s(t)+"\r\n"),a.push("-----END PGP PUBLIC KEY BLOCK-----\r\n\r\n");break;case h.default.armor.private_key:a.push("-----BEGIN PGP PRIVATE KEY BLOCK-----\r\n"),a.push(i()),a.push(f.default.encode(t)),a.push("\r\n="+s(t)+"\r\n"),a.push("-----END PGP PRIVATE KEY BLOCK-----\r\n");break;case h.default.armor.signature:a.push("-----BEGIN PGP SIGNATURE-----\r\n"),a.push(i()),a.push(f.default.encode(t)),a.push("\r\n="+s(t)+"\r\n"),a.push("-----END PGP SIGNATURE-----\r\n")}return a.join("")},decode:function(e){var t,r,n,i=/^-----[^-]+-----$\n/m,c=function(t){var r=(e=e.replace(/[\t\r ]+\n/g,"\n")).match(/^-----BEGIN PGP (MESSAGE, PART \d+\/\d+|MESSAGE, PART \d+|SIGNED MESSAGE|MESSAGE|PUBLIC KEY BLOCK|PRIVATE KEY BLOCK|SIGNATURE)-----$\n/m);if(!r)throw new Error("Unknown ASCII armor type");return/MESSAGE, PART \d+\/\d+/.test(r[1])?h.default.armor.multipart_section:/MESSAGE, PART \d+/.test(r[1])?h.default.armor.multipart_last:/SIGNED MESSAGE/.test(r[1])?h.default.armor.signed:/MESSAGE/.test(r[1])?h.default.armor.message:/PUBLIC KEY BLOCK/.test(r[1])?h.default.armor.public_key:/PRIVATE KEY BLOCK/.test(r[1])?h.default.armor.private_key:/SIGNATURE/.test(r[1])?h.default.armor.signature:void 0}(),d=(e=e.trim()+"\n").split(i),p=1;if(e.search(i)!==d[0].length&&(p=0),2!==c){var y=u((n=a(d[p])).body);t={data:f.default.decode(y.body),headers:n.headers,type:c},r=y.checksum}else{n=a(d[p].replace(/^- /gm,""));var g=a(d[p+1].replace(/^- /gm,""));o(g.headers);var m=u(g.body);t={text:n.body.replace(/\n$/,"").replace(/\n/g,"\r\n"),data:f.default.decode(m.body),headers:n.headers,type:c},r=m.checksum}if(!function(e,t){var r=s(e),n=t;return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]}(t.data,r)&&(r||l.default.checksum_required))throw new Error("Ascii armor integrity check on message failed: '"+r+"' should be '"+s(t.data)+"'");return o(t.headers),t}}},{"../config":10,"../enums.js":35,"./base64.js":34}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";r.default={encode:function(e,t){var r,i,s,a=t||[],o=0,u=0,f=e.length;for(s=0;s<f;s++)i=e[s],0===u?(a.push(n.charAt(i>>2&63)),r=(3&i)<<4):1===u?(a.push(n.charAt(r|i>>4&15)),r=(15&i)<<2):2===u&&(a.push(n.charAt(r|i>>6&3)),(o+=1)%60==0&&a.push("\n"),a.push(n.charAt(63&i))),(o+=1)%60==0&&a.push("\n"),3===(u+=1)&&(u=0);if(u>0&&(a.push(n.charAt(r)),(o+=1)%60==0&&a.push("\n"),a.push("="),o+=1),1===u&&(o%60==0&&a.push("\n"),a.push("=")),!t)return a.join("")},decode:function(e){var t,r,i=[],s=0,a=0,o=e.length;for(r=0;r<o;r++)(t=n.indexOf(e.charAt(r)))>=0&&(s&&i.push(a|t>>6-s&255),a=t<<(s=s+2&7)&255);return new Uint8Array(i)}}},{}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={s2k:{simple:0,salted:1,iterated:3,gnu:101},publicKey:{rsa_encrypt_sign:1,rsa_encrypt:2,rsa_sign:3,elgamal:16,dsa:17},symmetric:{plaintext:0,idea:1,tripledes:2,cast5:3,blowfish:4,aes128:7,aes192:8,aes256:9,twofish:10},compression:{uncompressed:0,zip:1,zlib:2,bzip2:3},hash:{md5:1,sha1:2,ripemd:3,sha256:8,sha384:9,sha512:10,sha224:11},packet:{publicKeyEncryptedSessionKey:1,signature:2,symEncryptedSessionKey:3,onePassSignature:4,secretKey:5,publicKey:6,secretSubkey:7,compressed:8,symmetricallyEncrypted:9,marker:10,literal:11,trust:12,userid:13,publicSubkey:14,userAttribute:17,symEncryptedIntegrityProtected:18,modificationDetectionCode:19,symEncryptedAEADProtected:20},literal:{binary:"b".charCodeAt(),text:"t".charCodeAt(),utf8:"u".charCodeAt()},signature:{binary:0,text:1,standalone:2,cert_generic:16,cert_persona:17,cert_casual:18,cert_positive:19,cert_revocation:48,subkey_binding:24,key_binding:25,key:31,key_revocation:32,subkey_revocation:40,timestamp:64,third_party:80},signatureSubpacket:{signature_creation_time:2,signature_expiration_time:3,exportable_certification:4,trust_signature:5,regular_expression:6,revocable:7,key_expiration_time:9,placeholder_backwards_compatibility:10,preferred_symmetric_algorithms:11,revocation_key:12,issuer:16,notation_data:20,preferred_hash_algorithms:21,preferred_compression_algorithms:22,key_server_preferences:23,preferred_key_server:24,primary_user_id:25,policy_uri:26,key_flags:27,signers_user_id:28,reason_for_revocation:29,features:30,signature_target:31,embedded_signature:32},keyFlags:{certify_keys:1,sign_data:2,encrypt_communication:4,encrypt_storage:8,split_private_key:16,authentication:32,shared_private_key:128},keyStatus:{invalid:0,expired:1,revoked:2,valid:3,no_self_cert:4},armor:{multipart_section:0,multipart_last:1,signed:2,message:3,public_key:4,private_key:5,signature:6},write:function(e,t){if("number"==typeof t&&(t=this.read(e,t)),void 0!==e[t])return e[t];throw new Error("Invalid enum value.")},read:function(e,t){for(var r in e)if(e[r]===parseInt(t))return r;throw new Error("Invalid enum value.")}}},{}],36:[function(e,t,r){"use strict";function n(t){this._baseUrl=t||i.default.keyserver,this._fetch="undefined"!=typeof window?window.fetch:e("node-fetch")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("./config"));n.prototype.lookup=function(e){var t=this._baseUrl+"/pks/lookup?op=get&options=mr&search=",r=this._fetch;if(e.keyId)t+="0x"+encodeURIComponent(e.keyId);else{if(!e.query)throw new Error("You must provide a query parameter!");t+=encodeURIComponent(e.query)}return r(t).then(function(e){if(200===e.status)return e.text()}).then(function(e){if(e&&!(e.indexOf("-----END PGP PUBLIC KEY BLOCK-----")<0))return e.trim()})},n.prototype.upload=function(e){var t=this._baseUrl+"/pks/add";return(0,this._fetch)(t,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"keytext="+encodeURIComponent(e)})}},{"./config":10,"node-fetch":"node-fetch"}],37:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.HKP=r.AsyncProxy=r.Keyring=r.crypto=r.config=r.enums=r.armor=r.Keyid=r.S2K=r.MPI=r.packet=r.util=r.cleartext=r.message=r.signature=r.key=void 0;var s=e("./openpgp");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})});var a=e("./util");Object.defineProperty(r,"util",{enumerable:!0,get:function(){return i(a).default}});var o=e("./packet");Object.defineProperty(r,"packet",{enumerable:!0,get:function(){return i(o).default}});var u=e("./type/mpi");Object.defineProperty(r,"MPI",{enumerable:!0,get:function(){return i(u).default}});var f=e("./type/s2k");Object.defineProperty(r,"S2K",{enumerable:!0,get:function(){return i(f).default}});var h=e("./type/keyid");Object.defineProperty(r,"Keyid",{enumerable:!0,get:function(){return i(h).default}});var l=e("./encoding/armor");Object.defineProperty(r,"armor",{enumerable:!0,get:function(){return i(l).default}});var c=e("./enums");Object.defineProperty(r,"enums",{enumerable:!0,get:function(){return i(c).default}});var d=e("./config/config");Object.defineProperty(r,"config",{enumerable:!0,get:function(){return i(d).default}});var p=e("./crypto");Object.defineProperty(r,"crypto",{enumerable:!0,get:function(){return i(p).default}});var y=e("./keyring");Object.defineProperty(r,"Keyring",{enumerable:!0,get:function(){return i(y).default}});var g=e("./worker/async_proxy");Object.defineProperty(r,"AsyncProxy",{enumerable:!0,get:function(){return i(g).default}});var m=e("./hkp");Object.defineProperty(r,"HKP",{enumerable:!0,get:function(){return i(m).default}});var v=n(s),w=n(e("./key")),b=n(e("./signature")),k=n(e("./message")),A=n(e("./cleartext"));r.default=v;r.key=w,r.signature=b,r.message=k,r.cleartext=A},{"./cleartext":5,"./config/config":9,"./crypto":24,"./encoding/armor":33,"./enums":35,"./hkp":36,"./key":38,"./keyring":39,"./message":42,"./openpgp":43,"./packet":47,"./signature":66,"./type/keyid":67,"./type/mpi":68,"./type/s2k":69,"./util":70,"./worker/async_proxy":71}],38:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!(this instanceof i))return new i(e);if(this.primaryKey=null,this.revocationSignature=null,this.directSignatures=null,this.users=null,this.subKeys=null,this.packetlist2structure(e),!this.primaryKey||!this.users)throw new Error("Invalid key: need at least key and user ID packet")}function s(e,t){return e.algorithm!==p.default.read(p.default.publicKey,p.default.publicKey.dsa)&&e.algorithm!==p.default.read(p.default.publicKey,p.default.publicKey.rsa_sign)&&(!t.keyFlags||0!=(t.keyFlags[0]&p.default.keyFlags.encrypt_communication)||0!=(t.keyFlags[0]&p.default.keyFlags.encrypt_storage))}function a(e,t){return!(e.algorithm!==p.default.read(p.default.publicKey,p.default.publicKey.dsa)&&e.algorithm!==p.default.read(p.default.publicKey,p.default.publicKey.rsa_sign)&&e.algorithm!==p.default.read(p.default.publicKey,p.default.publicKey.rsa_encrypt_sign)||t.keyFlags&&0==(t.keyFlags[0]&p.default.keyFlags.sign_data))}function o(e,t){return 3===e.version&&0!==e.expirationTimeV3?new Date(e.created.getTime()+24*e.expirationTimeV3*3600*1e3):4===e.version&&!1===t.keyNeverExpires?new Date(e.created.getTime()+1e3*t.keyExpirationTime):null}function u(e,t,r,n){(e=e[r])&&(t[r]?e.forEach(function(e){e.isExpired()||n&&!n(e)||t[r].some(function(t){return m.default.equalsUint8Array(t.signature,e.signature)})||t[r].push(e)}):t[r]=e)}function f(e){if(!(this instanceof f))return new f(e);this.userId=e.tag===p.default.packet.userid?e:null,this.userAttribute=e.tag===p.default.packet.userAttribute?e:null,this.selfCertifications=null,this.otherCertifications=null,this.revocationCertifications=null}function h(e){if(!(this instanceof h))return new h(e);this.subKey=e,this.bindingSignatures=[],this.revocationSignature=null}function l(e){var t={};t.keys=[];try{var r=new d.default.List;r.read(e);var n=r.indexOfTag(p.default.packet.publicKey,p.default.packet.secretKey);if(0===n.length)throw new Error("No key packet found");for(var s=0;s<n.length;s++){var a=r.slice(n[s],n[s+1]);try{var o=new i(a);t.keys.push(o)}catch(e){t.err=t.err||[],t.err.push(e)}}}catch(e){t.err=t.err||[],t.err.push(e)}return t}function c(e,t,r){r.passphrase&&(e.encrypt(r.passphrase),t.encrypt(r.passphrase));var n=new d.default.List;n.push(e),r.userIds.forEach(function(t,i){var s=new d.default.Userid;s.read(m.default.str2Uint8Array(t));var a={};a.userid=s,a.key=e;var o=new d.default.Signature;o.signatureType=p.default.signature.cert_generic,o.publicKeyAlgorithm=r.keyType,o.hashAlgorithm=g.default.prefer_hash_algorithm,o.keyFlags=[p.default.keyFlags.certify_keys|p.default.keyFlags.sign_data],o.preferredSymmetricAlgorithms=[],o.preferredSymmetricAlgorithms.push(p.default.symmetric.aes256),o.preferredSymmetricAlgorithms.push(p.default.symmetric.aes128),o.preferredSymmetricAlgorithms.push(p.default.symmetric.aes192),o.preferredSymmetricAlgorithms.push(p.default.symmetric.cast5),o.preferredSymmetricAlgorithms.push(p.default.symmetric.tripledes),o.preferredHashAlgorithms=[],o.preferredHashAlgorithms.push(p.default.hash.sha256),o.preferredHashAlgorithms.push(p.default.hash.sha512),o.preferredHashAlgorithms.push(p.default.hash.sha1),o.preferredCompressionAlgorithms=[],o.preferredCompressionAlgorithms.push(p.default.compression.zlib),o.preferredCompressionAlgorithms.push(p.default.compression.zip),0===i&&(o.isPrimaryUserID=!0),g.default.integrity_protect&&(o.features=[],o.features.push(1)),r.keyExpirationTime>0&&(o.keyExpirationTime=r.keyExpirationTime,o.keyNeverExpires=!1),o.sign(e,a),n.push(s),n.push(o)});var s={};s.key=e,s.bind=t;var a=new d.default.Signature;return a.signatureType=p.default.signature.subkey_binding,a.publicKeyAlgorithm=r.keyType,a.hashAlgorithm=g.default.prefer_hash_algorithm,a.keyFlags=[p.default.keyFlags.encrypt_communication|p.default.keyFlags.encrypt_storage],r.keyExpirationTime>0&&(a.keyExpirationTime=r.keyExpirationTime,a.keyNeverExpires=!1),a.sign(e,s),n.push(t),n.push(a),r.unlocked||(e.clearPrivateMPIs(),t.clearPrivateMPIs()),new i(n)}Object.defineProperty(r,"__esModule",{value:!0}),r.Key=i,r.read=l,r.readArmored=function(e){try{var t=y.default.decode(e);if(t.type!==p.default.armor.public_key&&t.type!==p.default.armor.private_key)throw new Error("Armored text not of type key");return l(t.data)}catch(e){var r={keys:[],err:[]};return r.err.push(e),r}},r.generate=function(e){var t,r;return Promise.resolve().then(function(){if(e.keyType=e.keyType||p.default.publicKey.rsa_encrypt_sign,e.keyType!==p.default.publicKey.rsa_encrypt_sign)throw new Error("Only RSA Encrypt or Sign supported");return e.passphrase||(e.unlocked=!0),(String.prototype.isPrototypeOf(e.userIds)||"string"==typeof e.userIds)&&(e.userIds=[e.userIds]),Promise.all([(t=new d.default.SecretKey,t.algorithm=p.default.read(p.default.publicKey,e.keyType),t.generate(e.numBits)),(r=new d.default.SecretSubkey,r.algorithm=p.default.read(p.default.publicKey,e.keyType),r.generate(e.numBits))]).then(function(){return c(t,r,e)})})},r.reformat=function(e){var t,r;return Promise.resolve().then(function(){if(e.keyType=e.keyType||p.default.publicKey.rsa_encrypt_sign,e.keyType!==p.default.publicKey.rsa_encrypt_sign)throw new Error("Only RSA Encrypt or Sign supported");if(!e.privateKey.decrypt())throw new Error("Key not decrypted");e.passphrase||(e.unlocked=!0),(String.prototype.isPrototypeOf(e.userIds)||"string"==typeof e.userIds)&&(e.userIds=[e.userIds]);for(var n=e.privateKey.toPacketlist(),i=0;i<n.length;i++)n[i].tag===p.default.packet.secretKey?t=n[i]:n[i].tag===p.default.packet.secretSubkey&&(r=n[i]);return c(t,r,e)})},r.getPreferredSymAlgo=function(e){var t={};e.forEach(function(e){var r=e.getPrimaryUser();if(!r||!r.selfCertificate.preferredSymmetricAlgorithms)return g.default.encryption_cipher;r.selfCertificate.preferredSymmetricAlgorithms.forEach(function(e,r){var n=t[e]||(t[e]={prio:0,count:0,algo:e});n.prio+=64>>r,n.count++})});var r={prio:0,algo:g.default.encryption_cipher};for(var n in t)try{n!==p.default.symmetric.plaintext&&n!==p.default.symmetric.idea&&p.default.read(p.default.symmetric,n)&&t[n].count===e.length&&t[n].prio>r.prio&&(r=t[n])}catch(e){}return r.algo};var d=n(e("./packet")),p=n(e("./enums.js")),y=n(e("./encoding/armor.js")),g=n(e("./config")),m=n(e("./util"));i.prototype.packetlist2structure=function(e){for(var t,r,n,i=0;i<e.length;i++)switch(e[i].tag){case p.default.packet.publicKey:case p.default.packet.secretKey:this.primaryKey=e[i],r=this.primaryKey.getKeyId();break;case p.default.packet.userid:case p.default.packet.userAttribute:t=new f(e[i]),this.users||(this.users=[]),this.users.push(t);break;case p.default.packet.publicSubkey:case p.default.packet.secretSubkey:t=null,this.subKeys||(this.subKeys=[]),n=new h(e[i]),this.subKeys.push(n);break;case p.default.packet.signature:switch(e[i].signatureType){case p.default.signature.cert_generic:case p.default.signature.cert_persona:case p.default.signature.cert_casual:case p.default.signature.cert_positive:if(!t){m.default.print_debug("Dropping certification signatures without preceding user packet");continue}e[i].issuerKeyId.equals(r)?(t.selfCertifications||(t.selfCertifications=[]),t.selfCertifications.push(e[i])):(t.otherCertifications||(t.otherCertifications=[]),t.otherCertifications.push(e[i]));break;case p.default.signature.cert_revocation:t?(t.revocationCertifications||(t.revocationCertifications=[]),t.revocationCertifications.push(e[i])):(this.directSignatures||(this.directSignatures=[]),this.directSignatures.push(e[i]));break;case p.default.signature.key:this.directSignatures||(this.directSignatures=[]),this.directSignatures.push(e[i]);break;case p.default.signature.subkey_binding:if(!n){m.default.print_debug("Dropping subkey binding signature without preceding subkey packet");continue}n.bindingSignatures.push(e[i]);break;case p.default.signature.key_revocation:this.revocationSignature=e[i];break;case p.default.signature.subkey_revocation:if(!n){m.default.print_debug("Dropping subkey revocation signature without preceding subkey packet");continue}n.revocationSignature=e[i]}}},i.prototype.toPacketlist=function(){var e=new d.default.List;e.push(this.primaryKey),e.push(this.revocationSignature),e.concat(this.directSignatures);var t;for(t=0;t<this.users.length;t++)e.concat(this.users[t].toPacketlist());if(this.subKeys)for(t=0;t<this.subKeys.length;t++)e.concat(this.subKeys[t].toPacketlist());return e},i.prototype.getSubkeyPackets=function(){var e=[];if(this.subKeys)for(var t=0;t<this.subKeys.length;t++)e.push(this.subKeys[t].subKey);return e},i.prototype.getAllKeyPackets=function(){return[this.primaryKey].concat(this.getSubkeyPackets())},i.prototype.getKeyIds=function(){for(var e=[],t=this.getAllKeyPackets(),r=0;r<t.length;r++)e.push(t[r].getKeyId());return e},i.prototype.getKeyPacket=function(e){for(var t=this.getAllKeyPackets(),r=0;r<t.length;r++)for(var n=t[r].getKeyId(),i=0;i<e.length;i++)if(n.equals(e[i]))return t[r];return null},i.prototype.getUserIds=function(){for(var e=[],t=0;t<this.users.length;t++)this.users[t].userId&&e.push(m.default.Uint8Array2str(this.users[t].userId.write()));return e},i.prototype.isPublic=function(){return this.primaryKey.tag===p.default.packet.publicKey},i.prototype.isPrivate=function(){return this.primaryKey.tag===p.default.packet.secretKey},i.prototype.toPublic=function(){for(var e,t=new d.default.List,r=this.toPacketlist(),n=0;n<r.length;n++)switch(r[n].tag){case p.default.packet.secretKey:e=r[n].writePublicKey();var s=new d.default.PublicKey;s.read(e),t.push(s);break;case p.default.packet.secretSubkey:e=r[n].writePublicKey();var a=new d.default.PublicSubkey;a.read(e),t.push(a);break;default:t.push(r[n])}return new i(t)},i.prototype.armor=function(){var e=this.isPublic()?p.default.armor.public_key:p.default.armor.private_key;return y.default.encode(e,this.toPacketlist().write())},i.prototype.getSigningKeyPacket=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getPrimaryUser(t);if(r&&a(this.primaryKey,r.selfCertificate)&&(!e||this.primaryKey.getKeyId().equals(e))&&this.verifyPrimaryKey(t)===p.default.keyStatus.valid)return this.primaryKey;if(this.subKeys)for(var n=0;n<this.subKeys.length;n++)if(this.subKeys[n].isValidSigningKey(this.primaryKey,t)&&(!e||this.subKeys[n].subKey.getKeyId().equals(e)))return this.subKeys[n].subKey;return null},i.prototype.getPreferredHashAlgorithm=function(){var e=this.getPrimaryUser();return e&&e.selfCertificate.preferredHashAlgorithms?e.selfCertificate.preferredHashAlgorithms[0]:g.default.prefer_hash_algorithm},i.prototype.getEncryptionKeyPacket=function(){if(this.subKeys)for(var e=0;e<this.subKeys.length;e++)if(this.subKeys[e].isValidEncryptionKey(this.primaryKey))return this.subKeys[e].subKey;var t=this.getPrimaryUser();return t&&t.selfCertificate&&!t.selfCertificate.isExpired()&&s(this.primaryKey,t.selfCertificate)?this.primaryKey:null},i.prototype.encrypt=function(e){if(!this.isPrivate())throw new Error("Nothing to encrypt in a public key");for(var t=this.getAllKeyPackets(),r=0;r<t.length;r++)t[r].encrypt(e),t[r].clearPrivateMPIs()},i.prototype.decrypt=function(e){if(!this.isPrivate())throw new Error("Nothing to decrypt in a public key");for(var t=this.getAllKeyPackets(),r=0;r<t.length;r++){if(!t[r].decrypt(e))return!1}return!0},i.prototype.decryptKeyPacket=function(e,t){if(!this.isPrivate())throw new Error("Nothing to decrypt in a public key");for(var r=this.getAllKeyPackets(),n=0;n<r.length;n++)for(var i=r[n].getKeyId(),s=0;s<e.length;s++)if(i.equals(e[s])){if(!r[n].decrypt(t))return!1}return!0},i.prototype.verifyPrimaryKey=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.revocationSignature&&!this.revocationSignature.isExpired()&&(this.revocationSignature.verified||this.revocationSignature.verify(this.primaryKey,{key:this.primaryKey})))return p.default.keyStatus.revoked;if(!e&&3===this.primaryKey.version&&0!==this.primaryKey.expirationTimeV3&&Date.now()>this.primaryKey.created.getTime()+24*this.primaryKey.expirationTimeV3*3600*1e3)return p.default.keyStatus.expired;for(var t=!1,r=0;r<this.users.length;r++)this.users[r].userId&&this.users[r].selfCertifications&&(t=!0);if(!t)return p.default.keyStatus.no_self_cert;var n=this.getPrimaryUser();return n?!e&&4===this.primaryKey.version&&!1===n.selfCertificate.keyNeverExpires&&Date.now()>this.primaryKey.created.getTime()+1e3*n.selfCertificate.keyExpirationTime?p.default.keyStatus.expired:p.default.keyStatus.valid:p.default.keyStatus.invalid},i.prototype.getExpirationTime=function(){if(3===this.primaryKey.version)return o(this.primaryKey);if(4===this.primaryKey.version){var e=this.getPrimaryUser();return e?o(this.primaryKey,e.selfCertificate):null}},i.prototype.getPrimaryUser=function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],r=0;r<this.users.length;r++)if(this.users[r].userId&&this.users[r].selfCertifications)for(var n=0;n<this.users[r].selfCertifications.length;n++)t.push({index:r,user:this.users[r],selfCertificate:this.users[r].selfCertifications[n]});t=t.sort(function(e,t){return e.selfCertificate.isPrimaryUserID>t.selfCertificate.isPrimaryUserID?-1:e.selfCertificate.isPrimaryUserID<t.selfCertificate.isPrimaryUserID?1:e.selfCertificate.created>t.selfCertificate.created?-1:e.selfCertificate.created<t.selfCertificate.created?1:0});for(var i=0;i<t.length;i++)if(t[i].user.isValidSelfCertificate(this.primaryKey,t[i].selfCertificate,e))return t[i];return null},i.prototype.update=function(e){var t=this;if(e.verifyPrimaryKey()!==p.default.keyStatus.invalid){if(this.primaryKey.getFingerprint()!==e.primaryKey.getFingerprint())throw new Error("Key update method: fingerprints of keys not equal");if(this.isPublic()&&e.isPrivate()){if(!((this.subKeys&&this.subKeys.length)===(e.subKeys&&e.subKeys.length)&&(!this.subKeys||this.subKeys.every(function(t){return e.subKeys.some(function(e){return t.subKey.getFingerprint()===e.subKey.getFingerprint()})}))))throw new Error("Cannot update public key with private key if subkey mismatch");this.primaryKey=e.primaryKey}this.revocationSignature||!e.revocationSignature||e.revocationSignature.isExpired()||!e.revocationSignature.verified&&!e.revocationSignature.verify(e.primaryKey,{key:e.primaryKey})||(this.revocationSignature=e.revocationSignature),u(e,this,"directSignatures"),e.users.forEach(function(e){for(var r=!1,n=0;n<t.users.length;n++)if(e.userId&&e.userId.userid===t.users[n].userId.userid||e.userAttribute&&e.userAttribute.equals(t.users[n].userAttribute)){t.users[n].update(e,t.primaryKey),r=!0;break}r||t.users.push(e)}),e.subKeys&&e.subKeys.forEach(function(e){for(var r=!1,n=0;n<t.subKeys.length;n++)if(e.subKey.getFingerprint()===t.subKeys[n].subKey.getFingerprint()){t.subKeys[n].update(e,t.primaryKey),r=!0;break}r||t.subKeys.push(e)})}},i.prototype.revoke=function(){},i.prototype.signPrimaryUser=function(e){var t=this.getPrimaryUser()||{},r=t.index,n=t.user;if(!n)throw new Error("Could not find primary user");n=n.sign(this.primaryKey,e);var s=new i(this.toPacketlist());return s.users[r]=n,s},i.prototype.signAllUsers=function(e){var t=this,r=this.users.map(function(r){return r.sign(t.primaryKey,e)}),n=new i(this.toPacketlist());return n.users=r,n},i.prototype.verifyPrimaryUser=function(e){var t=(this.getPrimaryUser()||{}).user;if(!t)throw new Error("Could not find primary user");return t.verifyAllSignatures(this.primaryKey,e)},i.prototype.verifyAllUsers=function(e){var t=this;return this.users.reduce(function(r,n){return r.concat(n.verifyAllSignatures(t.primaryKey,e).map(function(e){return{userid:n.userId.userid,keyid:e.keyid,valid:e.valid}}))},[])},f.prototype.toPacketlist=function(){var e=new d.default.List;return e.push(this.userId||this.userAttribute),e.concat(this.revocationCertifications),e.concat(this.selfCertifications),e.concat(this.otherCertifications),e},f.prototype.isRevoked=function(e,t){if(this.revocationCertifications){var r=this;return this.revocationCertifications.some(function(n){return n.issuerKeyId.equals(e.issuerKeyId)&&!n.isExpired()&&(n.verified||n.verify(t,{userid:r.userId||r.userAttribute,key:t}))})}return!1},f.prototype.isValidSelfCertificate=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!this.isRevoked(t,e)&&!(t.isExpired()&&!r||!t.verified&&!t.verify(e,{userid:this.userId||this.userAttribute,key:e}))},f.prototype.sign=function(e,t){var r,n,i,s;return n={},n.key=e,n.userid=this.userId||this.userAttribute,r=new f(this.userId||this.userAttribute),r.otherCertifications=[],t.forEach(function(t){if(t.isPublic())throw new Error("Need private key for signing");if(t.primaryKey.getFingerprint()===e.getFingerprint())throw new Error("Not implemented for self signing");if(!(i=t.getSigningKeyPacket()))throw new Error("Could not find valid signing key packet");if(!i.isDecrypted)throw new Error("Private key is not decrypted.");(s=new d.default.Signature).signatureType=p.default.write(p.default.signature,p.default.signature.cert_generic),s.keyFlags=[p.default.keyFlags.certify_keys|p.default.keyFlags.sign_data],s.hashAlgorithm=t.getPreferredHashAlgorithm(),s.publicKeyAlgorithm=i.algorithm,s.signingKeyId=i.getKeyId(),s.sign(i,n),r.otherCertifications.push(s)}),r.update(this,e),r},f.prototype.verifyAllSignatures=function(e,t){var r={userid:this.userId||this.userAttribute,key:e};return this.selfCertifications.concat(this.otherCertifications||[]).map(function(e){var n=t.filter(function(t){return t.getSigningKeyPacket(e.issuerKeyId)}),i=null;return n.length>0&&(i=n.some(function(t){return e.verify(t.primaryKey,r)})),{keyid:e.issuerKeyId,valid:i}})},f.prototype.verify=function(e){if(!this.selfCertifications)return p.default.keyStatus.no_self_cert;for(var t,r=0;r<this.selfCertifications.length;r++)if(this.isRevoked(this.selfCertifications[r],e))t=p.default.keyStatus.revoked;else if(this.selfCertifications[r].verified||this.selfCertifications[r].verify(e,{userid:this.userId||this.userAttribute,key:e})){if(!this.selfCertifications[r].isExpired()){t=p.default.keyStatus.valid;break}t=p.default.keyStatus.expired}else t=p.default.keyStatus.invalid;return t},f.prototype.update=function(e,t){var r=this;u(e,this,"selfCertifications",function(e){return e.verified||e.verify(t,{userid:r.userId||r.userAttribute,key:t})}),u(e,this,"otherCertifications"),u(e,this,"revocationCertifications")},h.prototype.toPacketlist=function(){var e=new d.default.List;e.push(this.subKey),e.push(this.revocationSignature);for(var t=0;t<this.bindingSignatures.length;t++)e.push(this.bindingSignatures[t]);return e},h.prototype.isValidEncryptionKey=function(e){if(this.verify(e)!==p.default.keyStatus.valid)return!1;for(var t=0;t<this.bindingSignatures.length;t++)if(s(this.subKey,this.bindingSignatures[t]))return!0;return!1},h.prototype.isValidSigningKey=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.verify(e,t)!==p.default.keyStatus.valid)return!1;for(var r=0;r<this.bindingSignatures.length;r++)if(a(this.subKey,this.bindingSignatures[r]))return!0;return!1},h.prototype.verify=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.revocationSignature&&!this.revocationSignature.isExpired()&&(this.revocationSignature.verified||this.revocationSignature.verify(e,{key:e,bind:this.subKey})))return p.default.keyStatus.revoked;if(!t&&3===this.subKey.version&&0!==this.subKey.expirationTimeV3&&Date.now()>this.subKey.created.getTime()+24*this.subKey.expirationTimeV3*3600*1e3)return p.default.keyStatus.expired;for(var r=0;r<this.bindingSignatures.length;r++){var n=r===this.bindingSignatures.length-1,i=this.bindingSignatures[r];if(t||!i.isExpired()){if(i.verified||i.verify(e,{key:e,bind:this.subKey})){if(4!==this.subKey.version||t||!1!==i.keyNeverExpires||!(Date.now()>this.subKey.created.getTime()+1e3*i.keyExpirationTime))return p.default.keyStatus.valid;if(n)return p.default.keyStatus.expired}else if(n)return p.default.keyStatus.invalid}else if(n)return p.default.keyStatus.expired}return p.default.keyStatus.invalid},h.prototype.getExpirationTime=function(){for(var e,t=0;t<this.bindingSignatures.length;t++){var r=o(this.subKey,this.bindingSignatures[t]);if(null===r)return null;(!e||r>e)&&(e=r)}return e},h.prototype.update=function(e,t){if(e.verify(t)!==p.default.keyStatus.invalid){if(this.subKey.getFingerprint()!==e.subKey.getFingerprint())throw new Error("SubKey update method: fingerprints of subkeys not equal");if(this.subKey.tag===p.default.packet.publicSubkey&&e.subKey.tag===p.default.packet.secretSubkey&&(this.subKey=e.subKey),this.bindingSignatures.length<e.bindingSignatures.length)for(var r=this.bindingSignatures.length;r<e.bindingSignatures.length;r++){var n=e.bindingSignatures[r];(n.verified||n.verify(t,{key:t,bind:this.subKey}))&&this.bindingSignatures.push(n)}this.revocationSignature||!e.revocationSignature||e.revocationSignature.isExpired()||!e.revocationSignature.verified&&!e.revocationSignature.verify(t,{key:t,bind:this.subKey})||(this.revocationSignature=e.revocationSignature)}}},{"./config":10,"./encoding/armor.js":33,"./enums.js":35,"./packet":47,"./util":70}],39:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./keyring.js")),s=n(e("./localstore.js"));i.default.localstore=s.default,r.default=i.default},{"./keyring.js":40,"./localstore.js":41}],40:[function(e,t,r){"use strict";function n(e){this.storeHandler=e||new o.default,this.publicKeys=new i(this.storeHandler.loadPublic()),this.privateKeys=new i(this.storeHandler.loadPrivate())}function i(e){this.keys=e}function s(e,t){return 16===e.length?e===t.getKeyId().toHex():e===t.getFingerprint()}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../key.js")),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./localstore.js"));n.prototype.store=function(){this.storeHandler.storePublic(this.publicKeys.keys),this.storeHandler.storePrivate(this.privateKeys.keys)},n.prototype.clear=function(){this.publicKeys.keys=[],this.privateKeys.keys=[]},n.prototype.getKeysForId=function(e,t){var r=[];return r=r.concat(this.publicKeys.getForId(e,t)||[]),(r=r.concat(this.privateKeys.getForId(e,t)||[])).length?r:null},n.prototype.removeKeysForId=function(e){var t=[];return t=t.concat(this.publicKeys.removeForId(e)||[]),(t=t.concat(this.privateKeys.removeForId(e)||[])).length?t:null},n.prototype.getAllKeys=function(){return this.publicKeys.keys.concat(this.privateKeys.keys)},i.prototype.getForAddress=function(e){for(var t=[],r=0;r<this.keys.length;r++)(function(e,t){for(var r=(e=e.toLowerCase()).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp("<"+r+">"),i=t.getUserIds(),s=0;s<i.length;s++){var a=i[s].toLowerCase();if(e===a||n.test(a))return!0}return!1})(e,this.keys[r])&&t.push(this.keys[r]);return t},i.prototype.getForId=function(e,t){for(var r=0;r<this.keys.length;r++){if(s(e,this.keys[r].primaryKey))return this.keys[r];if(t&&this.keys[r].subKeys)for(var n=0;n<this.keys[r].subKeys.length;n++)if(s(e,this.keys[r].subKeys[n].subKey))return this.keys[r]}return null},i.prototype.importKey=function(e){var t=a.readArmored(e),r=this;return t.keys.forEach(function(e){var t=e.primaryKey.getKeyId().toHex(),n=r.getForId(t);n?n.update(e):r.push(e)}),t.err?t.err:null},i.prototype.push=function(e){return this.keys.push(e)},i.prototype.removeForId=function(e){for(var t=0;t<this.keys.length;t++)if(s(e,this.keys[t].primaryKey))return this.keys.splice(t,1)[0];return null}},{"../key.js":38,"./localstore.js":41}],41:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(t){t=t||"openpgp-",this.publicKeysItem=t+this.publicKeysItem,this.privateKeysItem=t+this.privateKeysItem,"undefined"!=typeof window&&window.localStorage?this.storage=window.localStorage:this.storage=new(e("node-localstorage").LocalStorage)(o.default.node_store)}function s(e,t){var r=JSON.parse(e.getItem(t)),n=[];if(null!==r&&0!==r.length)for(var i,s=0;s<r.length;s++)(i=u.readArmored(r[s])).err?f.default.print_debug("Error reading armored key from keyring index: "+s):n.push(i.keys[0]);return n}function a(e,t,r){var n=[];if(r.length){for(var i=0;i<r.length;i++)n.push(r[i].armor());e.setItem(t,JSON.stringify(n))}else e.removeItem(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=n(e("../config")),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../key.js")),f=n(e("../util.js"));i.prototype.publicKeysItem="public-keys",i.prototype.privateKeysItem="private-keys",i.prototype.loadPublic=function(){return s(this.storage,this.publicKeysItem)},i.prototype.loadPrivate=function(){return s(this.storage,this.privateKeysItem)},i.prototype.storePublic=function(e){a(this.storage,this.publicKeysItem,e)},i.prototype.storePrivate=function(e){a(this.storage,this.privateKeysItem,e)}},{"../config":10,"../key.js":38,"../util.js":70,"node-localstorage":"node-localstorage"}],42:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(!(this instanceof s))return new s(e);this.packets=e||new h.default.List}function a(e,t,r,n){var i=new h.default.List;return r&&r.forEach(function(r){var n=r.getEncryptionKeyPacket();if(!n)throw new Error("Could not find valid key packet for encryption in key "+r.primaryKey.getKeyId().toHex());var s=new h.default.PublicKeyEncryptedSessionKey;s.publicKeyId=n.getKeyId(),s.publicKeyAlgorithm=n.algorithm,s.sessionKey=e,s.sessionKeyAlgorithm=t,s.encrypt(n),delete s.sessionKey,i.push(s)}),n&&n.forEach(function(r){var n=new h.default.SymEncryptedSessionKey;n.sessionKey=e,n.sessionKeyAlgorithm=t,n.encrypt(r),delete n.sessionKey,i.push(n)}),new s(i)}function o(e,t,r){for(var n=[],i=0;i<e.length;i++){for(var s=null,a=0;a<r.length&&!(s=r[a].getSigningKeyPacket(e[i].issuerKeyId,d.default.verify_expired_keys));a++);var o={};s?(o.keyid=e[i].issuerKeyId,o.valid=e[i].verify(s,t[0])):(o.keyid=e[i].issuerKeyId,o.valid=null);var u=new h.default.List;u.push(e[i]),o.signature=new y.Signature(u),n.push(o)}return n}function u(e){var t=new h.default.List;return t.read(e),new s(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.Message=s,r.encryptSessionKey=a,r.readArmored=function(e){return u(c.default.decode(e).data)},r.read=u,r.readSignedContent=function(e,t){var r=new h.default.Literal;r.setBytes(f.default.str2Uint8Array(e),l.default.read(l.default.literal,l.default.literal.binary));var n=new h.default.List;n.push(r);var i=c.default.decode(t).data;return n.read(i),new s(n)},r.fromText=function(e,t){var r=new h.default.Literal;r.setText(e),void 0!==t&&r.setFilename(t);var n=new h.default.List;return n.push(r),new s(n)},r.fromBinary=function(e,t){if(!f.default.isUint8Array(e))throw new Error("Data must be in the form of a Uint8Array");var r=new h.default.Literal;t&&r.setFilename(t),r.setBytes(e,l.default.read(l.default.literal,l.default.literal.binary)),void 0!==t&&r.setFilename(t);var n=new h.default.List;return n.push(r),new s(n)};var f=i(e("./util.js")),h=i(e("./packet")),l=i(e("./enums.js")),c=i(e("./encoding/armor.js")),d=i(e("./config")),p=i(e("./crypto")),y=n(e("./signature.js")),g=n(e("./key.js"));s.prototype.getEncryptionKeyIds=function(){var e=[];return this.packets.filterByTag(l.default.packet.publicKeyEncryptedSessionKey).forEach(function(t){e.push(t.publicKeyId)}),e},s.prototype.getSigningKeyIds=function(){var e=[],t=this.unwrapCompressed();if(t.packets.filterByTag(l.default.packet.onePassSignature).forEach(function(t){e.push(t.signingKeyId)}),!e.length){t.packets.filterByTag(l.default.packet.signature).forEach(function(t){e.push(t.issuerKeyId)})}return e},s.prototype.decrypt=function(e,t,r){var n=this;return Promise.resolve().then(function(){var i=t||n.decryptSessionKey(e,r);if(!i||!f.default.isUint8Array(i.data)||!f.default.isString(i.algorithm))throw new Error("Invalid session key for decryption.");var a=n.packets.filterByTag(l.default.packet.symmetricallyEncrypted,l.default.packet.symEncryptedIntegrityProtected,l.default.packet.symEncryptedAEADProtected);if(0!==a.length){var o=a[0];return o.decrypt(i.algorithm,i.data).then(function(){var e=new s(o.packets);return o.packets=new h.default.List,e})}})},s.prototype.decryptSessionKey=function(e,t){var r;if(t){for(var n=this.packets.filterByTag(l.default.packet.symEncryptedSessionKey),i=n.length,s=0;s<i;s++){r=n[s];try{r.decrypt(t);break}catch(e){if(s===i-1)throw e}}if(!r)throw new Error("No symmetrically encrypted session key packet found.")}else{if(!e)throw new Error("No key or password specified.");var a=this.getEncryptionKeyIds();if(!a.length)return;var o=e.getKeyPacket(a);if(!o.isDecrypted)throw new Error("Private key is not decrypted.");for(var u=this.packets.filterByTag(l.default.packet.publicKeyEncryptedSessionKey),f=0;f<u.length;f++)if(u[f].publicKeyId.equals(o.getKeyId())){(r=u[f]).decrypt(o);break}}if(r)return{data:r.sessionKey,algorithm:r.sessionKeyAlgorithm}},s.prototype.getLiteralData=function(){var e=this.packets.findPacket(l.default.packet.literal);return e&&e.data||null},s.prototype.getFilename=function(){var e=this.packets.findPacket(l.default.packet.literal);return e&&e.getFilename()||null},s.prototype.getText=function(){var e=this.packets.findPacket(l.default.packet.literal);return e?e.getText():null},s.prototype.encrypt=function(e,t,r){var n=this,i=void 0,s=void 0,o=void 0;return Promise.resolve().then(function(){if(r){if(!f.default.isUint8Array(r.data)||!f.default.isString(r.algorithm))throw new Error("Invalid session key for encryption.");i=r.algorithm,r=r.data}else if(e&&e.length)i=l.default.read(l.default.symmetric,g.getPreferredSymAlgo(e));else{if(!t||!t.length)throw new Error("No keys, passwords, or session key provided.");i=l.default.read(l.default.symmetric,d.default.encryption_cipher)}return r||(r=p.default.generateSessionKey(i)),s=a(r,i,e,t),o=d.default.aead_protect?new h.default.SymEncryptedAEADProtected:d.default.integrity_protect?new h.default.SymEncryptedIntegrityProtected:new h.default.SymmetricallyEncrypted,o.packets=n.packets,o.encrypt(i,r)}).then(function(){return s.packets.push(o),o.packets=new h.default.List,{message:s,sessionKey:{data:r,algorithm:i}}})},s.prototype.sign=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=new h.default.List,n=this.packets.findPacket(l.default.packet.literal);if(!n)throw new Error("No literal data packet to sign.");var i,a,o,u,f=l.default.write(l.default.literal,n.format)===l.default.literal.binary?l.default.signature.binary:l.default.signature.text;if(t&&(o=t.packets.filterByTag(l.default.packet.signature)).length)for(i=o.length-1;i>=0;i--){var c=o[i];(u=new h.default.OnePassSignature).type=f,u.hashAlgorithm=d.default.prefer_hash_algorithm,u.publicKeyAlgorithm=c.publicKeyAlgorithm,u.signingKeyId=c.issuerKeyId,e.length||0!==i||(u.flags=1),r.push(u)}for(i=0;i<e.length;i++){if(e[i].isPublic())throw new Error("Need private key for signing");if(u=new h.default.OnePassSignature,u.type=f,u.hashAlgorithm=d.default.prefer_hash_algorithm,!(a=e[i].getSigningKeyPacket()))throw new Error("Could not find valid key packet for signing in key "+e[i].primaryKey.getKeyId().toHex());u.publicKeyAlgorithm=a.algorithm,u.signingKeyId=a.getKeyId(),i===e.length-1&&(u.flags=1),r.push(u)}for(r.push(n),i=e.length-1;i>=0;i--){var p=new h.default.Signature;if(p.signatureType=f,p.hashAlgorithm=d.default.prefer_hash_algorithm,p.publicKeyAlgorithm=a.algorithm,!a.isDecrypted)throw new Error("Private key is not decrypted.");p.sign(a,n),r.push(p)}return t&&r.concat(o),new s(r)},s.prototype.signDetached=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=new h.default.List,n=this.packets.findPacket(l.default.packet.literal);if(!n)throw new Error("No literal data packet to sign.");for(var i=l.default.write(l.default.literal,n.format)===l.default.literal.binary?l.default.signature.binary:l.default.signature.text,s=0;s<e.length;s++){var a=e[s].getSigningKeyPacket(),o=new h.default.Signature;if(o.signatureType=i,o.hashAlgorithm=d.default.prefer_hash_algorithm,o.publicKeyAlgorithm=a.algorithm,!a.isDecrypted)throw new Error("Private key is not decrypted.");o.sign(a,n),r.push(o)}if(t){var u=t.packets.filterByTag(l.default.packet.signature);r.concat(u)}return new y.Signature(r)},s.prototype.verify=function(e){var t=this.unwrapCompressed(),r=t.packets.filterByTag(l.default.packet.literal);if(1!==r.length)throw new Error("Can only verify message with one literal data packet.");return o(t.packets.filterByTag(l.default.packet.signature),r,e)},s.prototype.verifyDetached=function(e,t){var r=this.unwrapCompressed().packets.filterByTag(l.default.packet.literal);if(1!==r.length)throw new Error("Can only verify message with one literal data packet.");return o(e.packets,r,t)},s.prototype.unwrapCompressed=function(){var e=this.packets.filterByTag(l.default.packet.compressed);return e.length?new s(e[0].packets):this},s.prototype.armor=function(){return c.default.encode(l.default.armor.message,this.packets.write())}},{"./config":10,"./crypto":24,"./encoding/armor.js":33,"./enums.js":35,"./key.js":38,"./packet":47,"./signature.js":66,"./util.js":70}],43:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function s(e,t){if(!g.default.isUint8Array(e)&&!g.default.isString(e))throw new Error("Parameter ["+(t||"data")+"] must be of type String or Uint8Array")}function a(e){if(!c.Message.prototype.isPrototypeOf(e))throw new Error("Parameter [message] needs to be of type Message")}function o(e){return e.userIds?(e.userIds=u(e.userIds),e.userIds=e.userIds.map(function(e){if(g.default.isString(e)&&!g.default.isUserId(e))throw new Error("Invalid user id format");if(g.default.isUserId(e))return e;if(e.name=e.name||"",e.email=e.email||"",!g.default.isString(e.name)||e.email&&!g.default.isEmailAddress(e.email))throw new Error("Invalid user id format");return e.name=e.name.trim(),e.name.length>0&&(e.name+=" "),e.name+"<"+e.email+">"}),e):e}function u(e){return e&&!g.default.isArray(e)&&(e=[e]),e}function f(e,t){return new Promise(function(t){return t(e())}).catch(h.bind(null,t))}function h(e,t){throw y.default.debug&&console.error(t.stack),t.message=e+": "+t.message,t}function l(){return g.default.getWebCrypto()&&y.default.aead_protect}Object.defineProperty(r,"__esModule",{value:!0}),r.initWorker=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,r=void 0===t?"openpgp.worker.min.js":t,n=e.worker;if(n||"undefined"!=typeof window&&window.Worker)return v=new m.default({path:r,worker:n,config:y.default}),!0},r.getWorker=function(){return v},r.destroyWorker=function(){v=void 0},r.generateKey=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userIds,r=void 0===t?[]:t,n=e.passphrase,i=e.numBits,s=void 0===i?2048:i,a=e.unlocked,u=void 0!==a&&a,f=e.keyExpirationTime,l=o({userIds:r,passphrase:n,numBits:s,unlocked:u,keyExpirationTime:void 0===f?0:f});return!g.default.getWebCryptoAll()&&v?v.delegate("generateKey",l):p.generate(l).then(function(e){return{key:e,privateKeyArmored:e.armor(),publicKeyArmored:e.toPublic().armor()}}).catch(h.bind(null,"Error generating keypair"))},r.reformatKey=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.privateKey,r=e.userIds,n=void 0===r?[]:r,i=e.passphrase,s=void 0===i?"":i,a=e.unlocked,u=void 0!==a&&a,f=e.keyExpirationTime,l=o({privateKey:t,userIds:n,passphrase:s,unlocked:u,keyExpirationTime:void 0===f?0:f});return v?v.delegate("reformatKey",l):p.reformat(l).then(function(e){return{key:e,privateKeyArmored:e.armor(),publicKeyArmored:e.toPublic().armor()}}).catch(h.bind(null,"Error reformatting keypair"))},r.decryptKey=function(e){var t=e.privateKey,r=e.passphrase;return v?v.delegate("decryptKey",{privateKey:t,passphrase:r}):f(function(){if(!t.decrypt(r))throw new Error("Invalid passphrase");return{key:t}},"Error decrypting private key")},r.encrypt=function(e){var t=e.data,r=e.publicKeys,n=e.privateKeys,i=e.passwords,a=e.sessionKey,o=e.filename,f=e.armor,d=void 0===f||f,p=e.detached,y=void 0!==p&&p,m=e.signature,w=void 0===m?null:m,b=e.returnSessionKey,k=void 0!==b&&b;if(s(t),r=u(r),n=u(n),i=u(i),!l()&&v)return v.delegate("encrypt",{data:t,publicKeys:r,privateKeys:n,passwords:i,sessionKey:a,filename:o,armor:d,detached:y,signature:w,returnSessionKey:k});var A={};return Promise.resolve().then(function(){var e=function(e,t){var r=void 0;if(g.default.isUint8Array(e))r=c.fromBinary(e,t);else{if(!g.default.isString(e))throw new Error("Data must be of type String or Uint8Array");r=c.fromText(e,t)}return r}(t,o);if(n||(n=[]),n.length||w)if(y){var s=e.signDetached(n,w);A.signature=d?s.armor():s}else e=e.sign(n,w);return e.encrypt(r,i,a)}).then(function(e){return d?A.data=e.message.armor():A.message=e.message,k&&(A.sessionKey=e.sessionKey),A}).catch(h.bind(null,"Error encrypting message"))},r.decrypt=function(e){var t=e.message,r=e.privateKey,n=e.publicKeys,i=e.sessionKey,s=e.password,o=e.format,f=void 0===o?"utf8":o,c=e.signature,d=void 0===c?null:c;return a(t),n=u(n),!l()&&v?v.delegate("decrypt",{message:t,privateKey:r,publicKeys:n,sessionKey:i,password:s,format:f,signature:d}):t.decrypt(r,i,s).then(function(e){var t=function(e,t){if("binary"===t)return{data:e.getLiteralData(),filename:e.getFilename()};if("utf8"===t)return{data:e.getText(),filename:e.getFilename()};throw new Error("Invalid format")}(e,f);return n||(n=[]),t.signatures=d?e.verifyDetached(d,n):e.verify(n),t}).catch(h.bind(null,"Error decrypting message"))},r.sign=function(e){var t=e.data,r=e.privateKeys,n=e.armor,i=void 0===n||n,a=e.detached,o=void 0!==a&&a;if(s(t),r=u(r),v)return v.delegate("sign",{data:t,privateKeys:r,armor:i,detached:o});var h={};return f(function(){var e;if(e=g.default.isString(t)?new d.CleartextMessage(t):c.fromBinary(t),o){var n=e.signDetached(r);h.signature=i?n.armor():n}else e=e.sign(r),i?h.data=e.armor():h.message=e;return h},"Error signing cleartext message")},r.verify=function(e){var t=e.message,r=e.publicKeys,n=e.signature,i=void 0===n?null:n;if(function(e){if(!d.CleartextMessage.prototype.isPrototypeOf(e)&&!c.Message.prototype.isPrototypeOf(e))throw new Error("Parameter [message] needs to be of type Message or CleartextMessage")}(t),r=u(r),v)return v.delegate("verify",{message:t,publicKeys:r,signature:i});var s={};return f(function(){return d.CleartextMessage.prototype.isPrototypeOf(t)?s.data=t.getText():s.data=t.getLiteralData(),s.signatures=i?t.verifyDetached(i,r):t.verify(r),s},"Error verifying cleartext signed message")},r.encryptSessionKey=function(e){var t=e.data,r=e.algorithm,n=e.publicKeys,i=e.passwords;return function(e,t){if(!g.default.isUint8Array(e))throw new Error("Parameter ["+(t||"data")+"] must be of type Uint8Array")}(t),function(e,t){if(!g.default.isString(e))throw new Error("Parameter ["+(t||"data")+"] must be of type String")}(r,"algorithm"),n=u(n),i=u(i),v?v.delegate("encryptSessionKey",{data:t,algorithm:r,publicKeys:n,passwords:i}):f(function(){return{message:c.encryptSessionKey(t,r,n,i)}},"Error encrypting session key")},r.decryptSessionKey=function(e){var t=e.message,r=e.privateKey,n=e.password;return a(t),v?v.delegate("decryptSessionKey",{message:t,privateKey:r,password:n}):f(function(){return t.decryptSessionKey(r,n)},"Error decrypting session key")};var c=i(e("./message.js")),d=i(e("./cleartext.js")),p=i(e("./key.js")),y=n(e("./config/config.js")),g=n(e("./util")),m=n(e("./worker/async_proxy.js"));n(e("es6-promise")).default.polyfill();var v=void 0},{"./cleartext.js":5,"./config/config.js":9,"./key.js":38,"./message.js":42,"./util":70,"./worker/async_proxy.js":71,"es6-promise":2}],44:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return new(_[function(e){return e.substr(0,1).toUpperCase()+e.substr(1)}(e)])}Object.defineProperty(r,"__esModule",{value:!0}),r.Trust=r.Signature=r.SecretSubkey=r.Userid=r.SecretKey=r.OnePassSignature=r.UserAttribute=r.PublicSubkey=r.Marker=r.SymmetricallyEncrypted=r.PublicKey=r.Literal=r.SymEncryptedSessionKey=r.PublicKeyEncryptedSessionKey=r.SymEncryptedAEADProtected=r.SymEncryptedIntegrityProtected=r.Compressed=void 0;var s=e("./compressed.js");Object.defineProperty(r,"Compressed",{enumerable:!0,get:function(){return n(s).default}});var a=e("./sym_encrypted_integrity_protected.js");Object.defineProperty(r,"SymEncryptedIntegrityProtected",{enumerable:!0,get:function(){return n(a).default}});var o=e("./sym_encrypted_aead_protected.js");Object.defineProperty(r,"SymEncryptedAEADProtected",{enumerable:!0,get:function(){return n(o).default}});var u=e("./public_key_encrypted_session_key.js");Object.defineProperty(r,"PublicKeyEncryptedSessionKey",{enumerable:!0,get:function(){return n(u).default}});var f=e("./sym_encrypted_session_key.js");Object.defineProperty(r,"SymEncryptedSessionKey",{enumerable:!0,get:function(){return n(f).default}});var h=e("./literal.js");Object.defineProperty(r,"Literal",{enumerable:!0,get:function(){return n(h).default}});var l=e("./public_key.js");Object.defineProperty(r,"PublicKey",{enumerable:!0,get:function(){return n(l).default}});var c=e("./symmetrically_encrypted.js");Object.defineProperty(r,"SymmetricallyEncrypted",{enumerable:!0,get:function(){return n(c).default}});var d=e("./marker.js");Object.defineProperty(r,"Marker",{enumerable:!0,get:function(){return n(d).default}});var p=e("./public_subkey.js");Object.defineProperty(r,"PublicSubkey",{enumerable:!0,get:function(){return n(p).default}});var y=e("./user_attribute.js");Object.defineProperty(r,"UserAttribute",{enumerable:!0,get:function(){return n(y).default}});var g=e("./one_pass_signature.js");Object.defineProperty(r,"OnePassSignature",{enumerable:!0,get:function(){return n(g).default}});var m=e("./secret_key.js");Object.defineProperty(r,"SecretKey",{enumerable:!0,get:function(){return n(m).default}});var v=e("./userid.js");Object.defineProperty(r,"Userid",{enumerable:!0,get:function(){return n(v).default}});var w=e("./secret_subkey.js");Object.defineProperty(r,"SecretSubkey",{enumerable:!0,get:function(){return n(w).default}});var b=e("./signature.js");Object.defineProperty(r,"Signature",{enumerable:!0,get:function(){return n(b).default}});var k=e("./trust.js");Object.defineProperty(r,"Trust",{enumerable:!0,get:function(){return n(k).default}}),r.newPacketFromTag=i,r.fromStructuredClone=function(e){var t=i(A.default.read(A.default.packet,e.tag));for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.postCloneTypeFix&&t.postCloneTypeFix(),t};var A=n(e("../enums.js")),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./all_packets.js"))},{"../enums.js":35,"./all_packets.js":44,"./compressed.js":46,"./literal.js":48,"./marker.js":49,"./one_pass_signature.js":50,"./public_key.js":53,"./public_key_encrypted_session_key.js":54,"./public_subkey.js":55,"./secret_key.js":56,"./secret_subkey.js":57,"./signature.js":58,"./sym_encrypted_aead_protected.js":59,"./sym_encrypted_integrity_protected.js":60,"./sym_encrypted_session_key.js":61,"./symmetrically_encrypted.js":62,"./trust.js":63,"./user_attribute.js":64,"./userid.js":65}],45:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function s(e){var t=l.default.fromStructuredClone(e);return new o.Key(t)}function a(e){return e.keyid=c.default.fromClone(e.keyid),e.signature=new h.Signature(e.signature),e}Object.defineProperty(r,"__esModule",{value:!0}),r.clonePackets=function(e){return e.publicKeys&&(e.publicKeys=e.publicKeys.map(function(e){return e.toPacketlist()})),e.privateKeys&&(e.privateKeys=e.privateKeys.map(function(e){return e.toPacketlist()})),e.privateKey&&(e.privateKey=e.privateKey.toPacketlist()),e.key&&(e.key=e.key.toPacketlist()),e.message&&(e.message instanceof u.Message?e.message=e.message.packets:e.message instanceof f.CleartextMessage&&(e.message.signature=e.message.signature.packets)),e.signature&&e.signature instanceof h.Signature&&(e.signature=e.signature.packets),e.signatures&&(e.signatures=e.signatures.map(function(e){return function(e){return e.signature=e.signature.packets,e}(e)})),e},r.parseClonedPackets=function(e,t){return e.publicKeys&&(e.publicKeys=e.publicKeys.map(s)),e.privateKeys&&(e.privateKeys=e.privateKeys.map(s)),e.privateKey&&(e.privateKey=s(e.privateKey)),e.key&&(e.key=s(e.key)),e.message&&e.message.signature?e.message=function(e){var t=l.default.fromStructuredClone(e.signature);return new f.CleartextMessage(e.text,new h.Signature(t))}(e.message):e.message&&(e.message=function(e){var t=l.default.fromStructuredClone(e);return new u.Message(t)}(e.message)),e.signatures&&(e.signatures=e.signatures.map(a)),e.signature&&(e.signature=function(e){if("string"==typeof e)return e;var t=l.default.fromStructuredClone(e);return new h.Signature(t)}(e.signature)),e};var o=i(e("../key.js")),u=i(e("../message.js")),f=i(e("../cleartext.js")),h=i(e("../signature.js")),l=n(e("./packetlist.js")),c=n(e("../type/keyid.js"))},{"../cleartext.js":5,"../key.js":38,"../message.js":42,"../signature.js":66,"../type/keyid.js":67,"./packetlist.js":52}],46:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=s.default.packet.compressed,this.packets=null,this.algorithm="zip",this.compressed=null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../enums.js")),a=n(e("../util.js")),o=n(e("../compression/zlib.min.js")),u=n(e("../compression/rawinflate.min.js")),f=n(e("../compression/rawdeflate.min.js"));i.prototype.read=function(e){this.algorithm=s.default.read(s.default.compression,e[0]),this.compressed=e.subarray(1,e.length),this.decompress()},i.prototype.write=function(){return null===this.compressed&&this.compress(),a.default.concatUint8Array(new Uint8Array([s.default.write(s.default.compression,this.algorithm)]),this.compressed)},i.prototype.decompress=function(){var e;switch(this.algorithm){case"uncompressed":e=this.compressed;break;case"zip":e=new u.default.Zlib.RawInflate(this.compressed).decompress();break;case"zlib":e=new o.default.Zlib.Inflate(this.compressed).decompress();break;case"bzip2":throw new Error("Compression algorithm BZip2 [BZ2] is not implemented.");default:throw new Error("Compression algorithm unknown :"+this.algorithm)}this.packets.read(e)},i.prototype.compress=function(){var e,t;switch(e=this.packets.write(),this.algorithm){case"uncompressed":this.compressed=e;break;case"zip":t=new f.default.Zlib.RawDeflate(e),this.compressed=t.compress();break;case"zlib":t=new o.default.Zlib.Deflate(e),this.compressed=t.compress();break;case"bzip2":throw new Error("Compression algorithm BZip2 [BZ2] is not implemented.");default:throw new Error("Compression algorithm unknown :"+this.type)}}},{"../compression/rawdeflate.min.js":6,"../compression/rawinflate.min.js":7,"../compression/zlib.min.js":8,"../enums.js":35,"../util.js":70}],47:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./all_packets.js")),s=n(e("./clone.js")),a={List:function(e){return e&&e.__esModule?e:{default:e}}(e("./packetlist.js")).default,clone:s};for(var o in i)a[o]=i[o];r.default=a},{"./all_packets.js":44,"./clone.js":45,"./packetlist.js":52}],48:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=a.default.packet.literal,this.format="utf8",this.date=new Date,this.data=new Uint8Array(0),this.filename="msg.txt"}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../util.js")),a=n(e("../enums.js"));i.prototype.setText=function(e){e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/\n/g,"\r\n"),this.data="utf8"===this.format?s.default.str2Uint8Array(s.default.encode_utf8(e)):s.default.str2Uint8Array(e)},i.prototype.getText=function(){return s.default.decode_utf8(s.default.Uint8Array2str(this.data)).replace(/\r\n/g,"\n")},i.prototype.setBytes=function(e,t){this.format=t,this.data=e},i.prototype.getBytes=function(){return this.data},i.prototype.setFilename=function(e){this.filename=e},i.prototype.getFilename=function(){return this.filename},i.prototype.read=function(e){var t=a.default.read(a.default.literal,e[0]),r=e[1];this.filename=s.default.decode_utf8(s.default.Uint8Array2str(e.subarray(2,2+r))),this.date=s.default.readDate(e.subarray(2+r,2+r+4));var n=e.subarray(6+r,e.length);this.setBytes(n,t)},i.prototype.write=function(){var e=s.default.str2Uint8Array(s.default.encode_utf8(this.filename)),t=new Uint8Array([e.length]),r=new Uint8Array([a.default.write(a.default.literal,this.format)]),n=s.default.writeDate(this.date),i=this.getBytes();return s.default.concatUint8Array([r,t,e,n,i])}},{"../enums.js":35,"../util.js":70}],49:[function(e,t,r){"use strict";function n(){this.tag=i.default.packet.marker}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../enums.js"));n.prototype.read=function(e){return 80===e[0]&&71===e[1]&&80===e[2]}},{"../enums.js":35}],50:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=a.default.packet.onePassSignature,this.version=null,this.type=null,this.hashAlgorithm=null,this.publicKeyAlgorithm=null,this.signingKeyId=null,this.flags=null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../util.js")),a=n(e("../enums.js")),o=n(e("../type/keyid.js"));i.prototype.read=function(e){var t=0;return this.version=e[t++],this.type=a.default.read(a.default.signature,e[t++]),this.hashAlgorithm=a.default.read(a.default.hash,e[t++]),this.publicKeyAlgorithm=a.default.read(a.default.publicKey,e[t++]),this.signingKeyId=new o.default,this.signingKeyId.read(e.subarray(t,t+8)),t+=8,this.flags=e[t++],this},i.prototype.write=function(){var e=new Uint8Array([3,a.default.write(a.default.signature,this.type),a.default.write(a.default.hash,this.hashAlgorithm),a.default.write(a.default.publicKey,this.publicKeyAlgorithm)]),t=new Uint8Array([this.flags]);return s.default.concatUint8Array([e,this.signingKeyId.write(),t])},i.prototype.postCloneTypeFix=function(){this.signingKeyId=o.default.fromClone(this.signingKeyId)}},{"../enums.js":35,"../type/keyid.js":67,"../util.js":70}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../util.js"));r.default={readSimpleLength:function(e){var t,r=0,i=e[0];return i<192?(r=e[0],t=1):i<255?(r=(e[0]-192<<8)+e[1]+192,t=2):255===i&&(r=n.default.readNumber(e.subarray(1,5)),t=5),{len:r,offset:t}},writeSimpleLength:function(e){return e<192?new Uint8Array([e]):e>191&&e<8384?new Uint8Array([192+(e-192>>8),e-192&255]):n.default.concatUint8Array([new Uint8Array([255]),n.default.writeNumber(e,4)])},writeHeader:function(e,t){return n.default.concatUint8Array([new Uint8Array([192|e]),this.writeSimpleLength(t)])},writeOldHeader:function(e,t){return t<256?new Uint8Array([128|e<<2,t]):t<65536?n.default.concatUint8Array([new Uint8Array([129|e<<2]),n.default.writeNumber(t,2)]):n.default.concatUint8Array([new Uint8Array([130|e<<2]),n.default.writeNumber(t,4)])},read:function(e,t,r){if(null===e||e.length<=t||e.subarray(t,e.length).length<2||0==(128&e[t]))throw new Error("Error during parsing. This message / key probably does not conform to a valid OpenPGP format.");var i,s=t,a=-1,o=-1;o=0,0!=(64&e[s])&&(o=1);var u;o?a=63&e[s]:(a=(63&e[s])>>2,u=3&e[s]),s++;var f=null,h=-1;if(o)if(e[s]<192)i=e[s++],n.default.print_debug("1 byte length:"+i);else if(e[s]>=192&&e[s]<224)i=(e[s++]-192<<8)+e[s++]+192,n.default.print_debug("2 byte length:"+i);else if(e[s]>223&&e[s]<255){i=1<<(31&e[s++]),n.default.print_debug("4 byte length:"+i);var l=s+i;f=[e.subarray(s,s+i)];for(var c;;){if(e[l]<192){i+=c=e[l++],f.push(e.subarray(l,l+c)),l+=c;break}if(e[l]>=192&&e[l]<224){i+=c=(e[l++]-192<<8)+e[l++]+192,f.push(e.subarray(l,l+c)),l+=c;break}if(!(e[l]>223&&e[l]<255)){l++,c=e[l++]<<24|e[l++]<<16|e[l++]<<8|e[l++],f.push(e.subarray(l,l+c)),i+=c,l+=c;break}i+=c=1<<(31&e[l++]),f.push(e.subarray(l,l+c)),l+=c}h=l-s}else s++,i=e[s++]<<24|e[s++]<<16|e[s++]<<8|e[s++];else switch(u){case 0:i=e[s++];break;case 1:i=e[s++]<<8|e[s++];break;case 2:i=e[s++]<<24|e[s++]<<16|e[s++]<<8|e[s++];break;default:i=r}return-1===h&&(h=i),null===f?f=e.subarray(s,s+h):f instanceof Array&&(f=n.default.concatUint8Array(f)),{tag:a,packet:f,offset:s+h}}}},{"../util.js":70}],52:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../util")),a=n(e("./packet.js")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./all_packets.js")),u=n(e("../enums.js")),f=n(e("../config"));i.prototype.read=function(e){for(var t=0;t<e.length;){var r=a.default.read(e,t,e.length-t);t=r.offset;var n=!1;try{var i=u.default.read(u.default.packet,r.tag),s=o.newPacketFromTag(i);this.push(s),n=!0,s.read(r.packet)}catch(e){if(!f.default.tolerant||r.tag==u.default.packet.symmetricallyEncrypted||r.tag==u.default.packet.literal||r.tag==u.default.packet.compressed)throw e;n&&this.pop()}}},i.prototype.write=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t].write();e.push(a.default.writeHeader(this[t].tag,r.length)),e.push(r)}return s.default.concatUint8Array(e)},i.prototype.push=function(e){e&&(e.packets=e.packets||new i,this[this.length]=e,this.length++)},i.prototype.pop=function(){if(0!==this.length){var e=this[this.length-1];return delete this[this.length-1],this.length--,e}},i.prototype.filter=function(e){for(var t=new i,r=0;r<this.length;r++)e(this[r],r,this)&&t.push(this[r]);return t},i.prototype.filterByTag=function(){function e(e){return n[s].tag===e}for(var t=Array.prototype.slice.call(arguments),r=new i,n=this,s=0;s<this.length;s++)t.some(e)&&r.push(this[s]);return r},i.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t])},i.prototype.findPacket=function(e){var t=this.filterByTag(e);if(t.length)return t[0];for(var r=null,n=0;n<this.length;n++)if(this[n].packets.length&&(r=this[n].packets.findPacket(e)))return r;return null},i.prototype.indexOfTag=function(){function e(e){return n[i].tag===e}for(var t=Array.prototype.slice.call(arguments),r=[],n=this,i=0;i<this.length;i++)t.some(e)&&r.push(i);return r},i.prototype.slice=function(e,t){t||(t=this.length);for(var r=new i,n=e;n<t;n++)r.push(this[n]);return r},i.prototype.concat=function(e){if(e)for(var t=0;t<e.length;t++)this.push(e[t])},i.fromStructuredClone=function(e){for(var t=new i,r=0;r<e.length;r++)t.push(o.fromStructuredClone(e[r])),0!==t[r].packets.length?t[r].packets=this.fromStructuredClone(t[r].packets):t[r].packets=new i;return t}},{"../config":10,"../enums.js":35,"../util":70,"./all_packets.js":44,"./packet.js":51}],53:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=u.default.packet.publicKey,this.version=4,this.created=new Date,this.mpi=[],this.algorithm="rsa_sign",this.expirationTimeV3=0,this.fingerprint=null,this.keyid=null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../util.js")),a=n(e("../type/mpi.js")),o=n(e("../type/keyid.js")),u=n(e("../enums.js")),f=n(e("../crypto"));i.prototype.read=function(e){var t=0;if(this.version=e[t++],3===this.version||4===this.version){this.created=s.default.readDate(e.subarray(t,t+4)),t+=4,3===this.version&&(this.expirationTimeV3=s.default.readNumber(e.subarray(t,t+2)),t+=2),this.algorithm=u.default.read(u.default.publicKey,e[t++]);var r=f.default.getPublicMpiCount(this.algorithm);this.mpi=[];for(var n=e.subarray(t,e.length),i=0,o=0;o<r&&i<n.length;o++)if(this.mpi[o]=new a.default,(i+=this.mpi[o].read(n.subarray(i,n.length)))>n.length)throw new Error("Error reading MPI @:"+i);return i+6}throw new Error("Version "+this.version+" of the key packet is unsupported.")},i.prototype.readPublicKey=i.prototype.read,i.prototype.write=function(){var e=[];e.push(new Uint8Array([this.version])),e.push(s.default.writeDate(this.created)),3===this.version&&e.push(s.default.writeNumber(this.expirationTimeV3,2)),e.push(new Uint8Array([u.default.write(u.default.publicKey,this.algorithm)]));for(var t=f.default.getPublicMpiCount(this.algorithm),r=0;r<t;r++)e.push(this.mpi[r].write());return s.default.concatUint8Array(e)},i.prototype.writePublicKey=i.prototype.write,i.prototype.writeOld=function(){var e=this.writePublicKey();return s.default.concatUint8Array([new Uint8Array([153]),s.default.writeNumber(e.length,2),e])},i.prototype.getKeyId=function(){if(this.keyid)return this.keyid;if(this.keyid=new o.default,4===this.version)this.keyid.read(s.default.str2Uint8Array(s.default.hex2bin(this.getFingerprint()).substr(12,8)));else if(3===this.version){var e=this.mpi[0].write();this.keyid.read(e.subarray(e.length-8,e.length))}return this.keyid},i.prototype.getFingerprint=function(){if(this.fingerprint)return this.fingerprint;var e="";if(4===this.version)e=this.writeOld(),this.fingerprint=s.default.Uint8Array2str(f.default.hash.sha1(e));else if(3===this.version){for(var t=f.default.getPublicMpiCount(this.algorithm),r=0;r<t;r++)e+=this.mpi[r].toBytes();this.fingerprint=s.default.Uint8Array2str(f.default.hash.md5(s.default.str2Uint8Array(e)))}return this.fingerprint=s.default.hexstrdump(this.fingerprint),this.fingerprint},i.prototype.getBitSize=function(){return 8*this.mpi[0].byteLength()},i.prototype.postCloneTypeFix=function(){for(var e=0;e<this.mpi.length;e++)this.mpi[e]=a.default.fromClone(this.mpi[e]);this.keyid&&(this.keyid=o.default.fromClone(this.keyid))}},{"../crypto":24,"../enums.js":35,"../type/keyid.js":67,"../type/mpi.js":68,"../util.js":70}],54:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=u.default.packet.publicKeyEncryptedSessionKey,this.version=3,this.publicKeyId=new s.default,this.publicKeyAlgorithm="rsa_encrypt",this.sessionKey=null,this.sessionKeyAlgorithm="aes256",this.encrypted=[]}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../type/keyid.js")),a=n(e("../util.js")),o=n(e("../type/mpi.js")),u=n(e("../enums.js")),f=n(e("../crypto"));i.prototype.read=function(e){this.version=e[0],this.publicKeyId.read(e.subarray(1,e.length)),this.publicKeyAlgorithm=u.default.read(u.default.publicKey,e[9]);var t=10,r=function(e){switch(e){case"rsa_encrypt":case"rsa_encrypt_sign":return 1;case"elgamal":return 2;default:throw new Error("Invalid algorithm.")}}(this.publicKeyAlgorithm);this.encrypted=[];for(var n=0;n<r;n++){var i=new o.default;t+=i.read(e.subarray(t,e.length)),this.encrypted.push(i)}},i.prototype.write=function(){for(var e=[new Uint8Array([this.version]),this.publicKeyId.write(),new Uint8Array([u.default.write(u.default.publicKey,this.publicKeyAlgorithm)])],t=0;t<this.encrypted.length;t++)e.push(this.encrypted[t].write());return a.default.concatUint8Array(e)},i.prototype.encrypt=function(e){var t=String.fromCharCode(u.default.write(u.default.symmetric,this.sessionKeyAlgorithm));t+=a.default.Uint8Array2str(this.sessionKey);var r=a.default.calc_checksum(this.sessionKey);t+=a.default.Uint8Array2str(a.default.writeNumber(r,2));var n=new o.default;n.fromBytes(f.default.pkcs1.eme.encode(t,e.mpi[0].byteLength())),this.encrypted=f.default.publicKeyEncrypt(this.publicKeyAlgorithm,e.mpi,n)},i.prototype.decrypt=function(e){var t=f.default.publicKeyDecrypt(this.publicKeyAlgorithm,e.mpi,this.encrypted).toBytes(),r=a.default.readNumber(a.default.str2Uint8Array(t.substr(t.length-2))),n=f.default.pkcs1.eme.decode(t);if(e=a.default.str2Uint8Array(n.substring(1,n.length-2)),r!==a.default.calc_checksum(e))throw new Error("Checksum mismatch");this.sessionKey=e,this.sessionKeyAlgorithm=u.default.read(u.default.symmetric,n.charCodeAt(0))},i.prototype.postCloneTypeFix=function(){this.publicKeyId=s.default.fromClone(this.publicKeyId);for(var e=0;e<this.encrypted.length;e++)this.encrypted[e]=o.default.fromClone(this.encrypted[e])}},{"../crypto":24,"../enums.js":35,"../type/keyid.js":67,"../type/mpi.js":68,"../util.js":70}],55:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){s.default.call(this),this.tag=a.default.packet.publicSubkey}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("./public_key.js")),a=n(e("../enums.js"));(i.prototype=new s.default).constructor=i},{"../enums.js":35,"./public_key.js":53}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){f.default.call(this),this.tag=h.default.packet.secretKey,this.encrypted=null,this.isDecrypted=!1}function s(e){return"sha1"===e?c.default.hash.sha1:function(e){return l.default.writeNumber(l.default.calc_checksum(e),2)}}function a(e,t,r){var n=function(e){return"sha1"===e?20:2}(e),i=s(e),a=l.default.Uint8Array2str(t.subarray(t.length-n,t.length));t=t.subarray(0,t.length-n);if(l.default.Uint8Array2str(i(t))!==a)return new Error("Hash mismatch.");for(var o=c.default.getPrivateMpiCount(r),u=0,f=[],h=0;h<o&&u<t.length;h++)f[h]=new d.default,u+=f[h].read(t.subarray(u,t.length));return f}function o(e,t,r){for(var n=[],i=c.default.getPublicMpiCount(t);i<r.length;i++)n.push(r[i].write());var a=l.default.concatUint8Array(n),o=s(e)(a);return l.default.concatUint8Array([a,o])}function u(e,t,r){return e.produce_key(t,c.default.cipher[r].keySize)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var f=n(e("./public_key.js")),h=n(e("../enums.js")),l=n(e("../util.js")),c=n(e("../crypto")),d=n(e("../type/mpi.js")),p=n(e("../type/s2k.js"));(i.prototype=new f.default).constructor=i,i.prototype.read=function(e){var t=this.readPublicKey(e);if((e=e.subarray(t,e.length))[0])this.encrypted=e;else{var r=a("mod",e.subarray(1,e.length),this.algorithm);if(r instanceof Error)throw r;this.mpi=this.mpi.concat(r),this.isDecrypted=!0}},i.prototype.write=function(){var e=[this.writePublicKey()];return this.encrypted?e.push(this.encrypted):(e.push(new Uint8Array([0])),e.push(o("mod",this.algorithm,this.mpi))),l.default.concatUint8Array(e)},i.prototype.encrypt=function(e){if(!this.isDecrypted||e){if(!e)throw new Error("The key must be decrypted before removing passphrase protection.");var t=new p.default,r=o("sha1",this.algorithm,this.mpi),n=u(t,e,"aes256"),i=c.default.cipher.aes256.blockSize,s=c.default.random.getRandomBytes(i),a=[new Uint8Array([254,h.default.write(h.default.symmetric,"aes256")])];a.push(t.write()),a.push(s),a.push(c.default.cfb.normalEncrypt("aes256",n,r,s)),this.encrypted=l.default.concatUint8Array(a)}else this.encrypted=null},i.prototype.decrypt=function(e){if(this.isDecrypted)return!0;var t,r,n=0,i=this.encrypted[n++];if(255===i||254===i){t=this.encrypted[n++],t=h.default.read(h.default.symmetric,t);var s=new p.default;n+=s.read(this.encrypted.subarray(n,this.encrypted.length)),r=u(s,e,t)}else t=i,t=h.default.read(h.default.symmetric,t),r=c.default.hash.md5(e);var o=this.encrypted.subarray(n,n+c.default.cipher[t].blockSize);n+=o.length;var f,l=this.encrypted.subarray(n,this.encrypted.length);f=c.default.cfb.normalDecrypt(t,r,l,o);var d=a(254===i?"sha1":"mod",f,this.algorithm);return!(d instanceof Error)&&(this.mpi=this.mpi.concat(d),this.isDecrypted=!0,this.encrypted=null,!0)},i.prototype.generate=function(e){var t=this;return c.default.generateMpi(t.algorithm,e).then(function(e){t.mpi=e,t.isDecrypted=!0})},i.prototype.clearPrivateMPIs=function(){if(!this.encrypted)throw new Error("If secret key is not encrypted, clearing private MPIs is irreversible.");this.mpi=this.mpi.slice(0,c.default.getPublicMpiCount(this.algorithm)),this.isDecrypted=!1}},{"../crypto":24,"../enums.js":35,"../type/mpi.js":68,"../type/s2k.js":69,"../util.js":70,"./public_key.js":53}],57:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){s.default.call(this),this.tag=a.default.packet.secretSubkey}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("./secret_key.js")),a=n(e("../enums.js"));(i.prototype=new s.default).constructor=i},{"../enums.js":35,"./secret_key.js":56}],58:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=u.default.packet.signature,this.version=4,this.signatureType=null,this.hashAlgorithm=null,this.publicKeyAlgorithm=null,this.signatureData=null,this.unhashedSubpackets=null,this.signedHashValue=null,this.created=new Date,this.signatureExpirationTime=null,this.signatureNeverExpires=!0,this.exportable=null,this.trustLevel=null,this.trustAmount=null,this.regularExpression=null,this.revocable=null,this.keyExpirationTime=null,this.keyNeverExpires=null,this.preferredSymmetricAlgorithms=null,this.revocationKeyClass=null,this.revocationKeyAlgorithm=null,this.revocationKeyFingerprint=null,this.issuerKeyId=new l.default,this.notation=null,this.preferredHashAlgorithms=null,this.preferredCompressionAlgorithms=null,this.keyServerPreferences=null,this.preferredKeyServer=null,this.isPrimaryUserID=null,this.policyURI=null,this.keyFlags=null,this.signersUserId=null,this.reasonForRevocationFlag=null,this.reasonForRevocationString=null,this.features=null,this.signatureTargetPublicKeyAlgorithm=null,this.signatureTargetHashAlgorithm=null,this.signatureTargetHash=null,this.embeddedSignature=null,this.verified=!1}function s(e,t){var r=[];return r.push(o.default.writeSimpleLength(t.length+1)),r.push(new Uint8Array([e])),r.push(t),a.default.concatUint8Array(r)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var a=n(e("../util.js")),o=n(e("./packet.js")),u=n(e("../enums.js")),f=n(e("../crypto")),h=n(e("../type/mpi.js")),l=n(e("../type/keyid.js"));i.prototype.read=function(e){var t=0;switch(this.version=e[t++],this.version){case 3:5!==e[t++]&&a.default.print_debug("packet/signature.js\ninvalid One-octet length of following hashed material.MUST be 5. @:"+(t-1));var r=t;this.signatureType=e[t++],this.created=a.default.readDate(e.subarray(t,t+4)),t+=4,this.signatureData=e.subarray(r,t),this.issuerKeyId.read(e.subarray(t,t+8)),t+=8,this.publicKeyAlgorithm=e[t++],this.hashAlgorithm=e[t++];break;case 4:this.signatureType=e[t++],this.publicKeyAlgorithm=e[t++],this.hashAlgorithm=e[t++];var n=function(e){for(var t=a.default.readNumber(e.subarray(0,2)),r=2;r<2+t;){var n=o.default.readSimpleLength(e.subarray(r,e.length));r+=n.offset,this.read_sub_packet(e.subarray(r,r+n.len)),r+=n.len}return r};t+=n.call(this,e.subarray(t,e.length),!0),this.signatureData=e.subarray(0,t);var i=t;t+=n.call(this,e.subarray(t,e.length),!1),this.unhashedSubpackets=e.subarray(i,t);break;default:throw new Error("Version "+this.version+" of the signature is unsupported.")}this.signedHashValue=e.subarray(t,t+2),t+=2,this.signature=e.subarray(t,e.length)},i.prototype.write=function(){var e=[];switch(this.version){case 3:e.push(new Uint8Array([3,5])),e.push(new Uint8Array([this.signatureType])),e.push(a.default.writeDate(this.created)),e.push(this.issuerKeyId.write()),e.push(new Uint8Array([u.default.write(u.default.publicKey,this.publicKeyAlgorithm),u.default.write(u.default.hash,this.hashAlgorithm)]));break;case 4:e.push(this.signatureData),e.push(this.unhashedSubpackets?this.unhashedSubpackets:a.default.writeNumber(0,2))}return e.push(this.signedHashValue),e.push(this.signature),a.default.concatUint8Array(e)},i.prototype.sign=function(e,t){var r=u.default.write(u.default.signature,this.signatureType),n=u.default.write(u.default.publicKey,this.publicKeyAlgorithm),i=u.default.write(u.default.hash,this.hashAlgorithm),s=[new Uint8Array([4,r,n,i])];this.issuerKeyId=e.getKeyId(),s.push(this.write_all_sub_packets()),this.signatureData=a.default.concatUint8Array(s);var o=this.calculateTrailer(),h=null;switch(this.version){case 3:h=a.default.concatUint8Array([this.toSign(r,t),new Uint8Array([r]),a.default.writeDate(this.created)]);break;case 4:h=a.default.concatUint8Array([this.toSign(r,t),this.signatureData,o]);break;default:throw new Error("Version "+this.version+" of the signature is unsupported.")}var l=f.default.hash.digest(i,h);this.signedHashValue=l.subarray(0,2),this.signature=f.default.signature.sign(i,n,e.mpi,h)},i.prototype.write_all_sub_packets=function(){var e,t=u.default.signatureSubpacket,r=[];if(null!==this.created&&r.push(s(t.signature_creation_time,a.default.writeDate(this.created))),null!==this.signatureExpirationTime&&r.push(s(t.signature_expiration_time,a.default.writeNumber(this.signatureExpirationTime,4))),null!==this.exportable&&r.push(s(t.exportable_certification,new Uint8Array([this.exportable?1:0]))),null!==this.trustLevel&&(e=new Uint8Array([this.trustLevel,this.trustAmount]),r.push(s(t.trust_signature,e))),null!==this.regularExpression&&r.push(s(t.regular_expression,this.regularExpression)),null!==this.revocable&&r.push(s(t.revocable,new Uint8Array([this.revocable?1:0]))),null!==this.keyExpirationTime&&r.push(s(t.key_expiration_time,a.default.writeNumber(this.keyExpirationTime,4))),null!==this.preferredSymmetricAlgorithms&&(e=a.default.str2Uint8Array(a.default.bin2str(this.preferredSymmetricAlgorithms)),r.push(s(t.preferred_symmetric_algorithms,e))),null!==this.revocationKeyClass&&(e=new Uint8Array([this.revocationKeyClass,this.revocationKeyAlgorithm]),e=a.default.concatUint8Array([e,this.revocationKeyFingerprint]),r.push(s(t.revocation_key,e))),this.issuerKeyId.isNull()||r.push(s(t.issuer,this.issuerKeyId.write())),null!==this.notation)for(var n in this.notation)if(this.notation.hasOwnProperty(n)){var i=this.notation[n];(e=[new Uint8Array([128,0,0,0])]).push(a.default.writeNumber(n.length,2)),e.push(a.default.writeNumber(i.length,2)),e.push(a.default.str2Uint8Array(n+i)),e=a.default.concatUint8Array(e),r.push(s(t.notation_data,e))}null!==this.preferredHashAlgorithms&&(e=a.default.str2Uint8Array(a.default.bin2str(this.preferredHashAlgorithms)),r.push(s(t.preferred_hash_algorithms,e))),null!==this.preferredCompressionAlgorithms&&(e=a.default.str2Uint8Array(a.default.bin2str(this.preferredCompressionAlgorithms)),r.push(s(t.preferred_compression_algorithms,e))),null!==this.keyServerPreferences&&(e=a.default.str2Uint8Array(a.default.bin2str(this.keyServerPreferences)),r.push(s(t.key_server_preferences,e))),null!==this.preferredKeyServer&&r.push(s(t.preferred_key_server,a.default.str2Uint8Array(this.preferredKeyServer))),null!==this.isPrimaryUserID&&r.push(s(t.primary_user_id,new Uint8Array([this.isPrimaryUserID?1:0]))),null!==this.policyURI&&r.push(s(t.policy_uri,a.default.str2Uint8Array(this.policyURI))),null!==this.keyFlags&&(e=a.default.str2Uint8Array(a.default.bin2str(this.keyFlags)),r.push(s(t.key_flags,e))),null!==this.signersUserId&&r.push(s(t.signers_user_id,a.default.str2Uint8Array(this.signersUserId))),null!==this.reasonForRevocationFlag&&(e=a.default.str2Uint8Array(String.fromCharCode(this.reasonForRevocationFlag)+this.reasonForRevocationString),r.push(s(t.reason_for_revocation,e))),null!==this.features&&(e=a.default.str2Uint8Array(a.default.bin2str(this.features)),r.push(s(t.features,e))),null!==this.signatureTargetPublicKeyAlgorithm&&((e=[new Uint8Array([this.signatureTargetPublicKeyAlgorithm,this.signatureTargetHashAlgorithm])]).push(a.default.str2Uint8Array(this.signatureTargetHash)),e=a.default.concatUint8Array(e),r.push(s(t.signature_target,e))),null!==this.embeddedSignature&&r.push(s(t.embedded_signature,this.embeddedSignature.write()));var o=a.default.concatUint8Array(r),f=a.default.writeNumber(o.length,2);return a.default.concatUint8Array([f,o])},i.prototype.read_sub_packet=function(e){function t(e,t){this[e]=[];for(var r=0;r<t.length;r++)this[e].push(t[r])}var r,n=0,s=127&e[n++];switch(s){case 2:this.created=a.default.readDate(e.subarray(n,e.length));break;case 3:r=a.default.readNumber(e.subarray(n,e.length)),this.signatureNeverExpires=0===r,this.signatureExpirationTime=r;break;case 4:this.exportable=1===e[n++];break;case 5:this.trustLevel=e[n++],this.trustAmount=e[n++];break;case 6:this.regularExpression=e[n];break;case 7:this.revocable=1===e[n++];break;case 9:r=a.default.readNumber(e.subarray(n,e.length)),this.keyExpirationTime=r,this.keyNeverExpires=0===r;break;case 11:t.call(this,"preferredSymmetricAlgorithms",e.subarray(n,e.length));break;case 12:this.revocationKeyClass=e[n++],this.revocationKeyAlgorithm=e[n++],this.revocationKeyFingerprint=e.subarray(n,20);break;case 16:this.issuerKeyId.read(e.subarray(n,e.length));break;case 20:if(128===e[n]){n+=4;var o=a.default.readNumber(e.subarray(n,n+2));n+=2;var u=a.default.readNumber(e.subarray(n,n+2));n+=2;var h=a.default.Uint8Array2str(e.subarray(n,n+o)),l=a.default.Uint8Array2str(e.subarray(n+o,n+o+u));this.notation=this.notation||{},this.notation[h]=l}else a.default.print_debug("Unsupported notation flag "+e[n]);break;case 21:t.call(this,"preferredHashAlgorithms",e.subarray(n,e.length));break;case 22:t.call(this,"preferredCompressionAlgorithms",e.subarray(n,e.length));break;case 23:t.call(this,"keyServerPreferencess",e.subarray(n,e.length));break;case 24:this.preferredKeyServer=a.default.Uint8Array2str(e.subarray(n,e.length));break;case 25:this.isPrimaryUserID=0!==e[n++];break;case 26:this.policyURI=a.default.Uint8Array2str(e.subarray(n,e.length));break;case 27:t.call(this,"keyFlags",e.subarray(n,e.length));break;case 28:this.signersUserId+=a.default.Uint8Array2str(e.subarray(n,e.length));break;case 29:this.reasonForRevocationFlag=e[n++],this.reasonForRevocationString=a.default.Uint8Array2str(e.subarray(n,e.length));break;case 30:t.call(this,"features",e.subarray(n,e.length));break;case 31:this.signatureTargetPublicKeyAlgorithm=e[n++],this.signatureTargetHashAlgorithm=e[n++];var c=f.default.getHashByteLength(this.signatureTargetHashAlgorithm);this.signatureTargetHash=a.default.Uint8Array2str(e.subarray(n,n+c));break;case 32:this.embeddedSignature=new i,this.embeddedSignature.read(e.subarray(n,e.length));break;default:a.default.print_debug("Unknown signature subpacket type "+s+" @:"+n)}},i.prototype.toSign=function(e,t){var r=u.default.signature;switch(e){case r.binary:case r.text:return t.getBytes();case r.standalone:return new Uint8Array(0);case r.cert_generic:case r.cert_persona:case r.cert_casual:case r.cert_positive:case r.cert_revocation:var n,i;if(void 0!==t.userid)i=180,n=t.userid;else{if(void 0===t.userattribute)throw new Error("Either a userid or userattribute packet needs to be supplied for certification.");i=209,n=t.userattribute}var s=n.write();if(4===this.version)return a.default.concatUint8Array([this.toSign(r.key,t),new Uint8Array([i]),a.default.writeNumber(s.length,4),s]);if(3===this.version)return a.default.concatUint8Array([this.toSign(r.key,t),s]);break;case r.subkey_binding:case r.subkey_revocation:case r.key_binding:return a.default.concatUint8Array([this.toSign(r.key,t),this.toSign(r.key,{key:t.bind})]);case r.key:if(void 0===t.key)throw new Error("Key packet is required for this signature.");return t.key.writeOld();case r.key_revocation:return this.toSign(r.key,t);case r.timestamp:return new Uint8Array(0);case r.third_party:throw new Error("Not implemented");default:throw new Error("Unknown signature type.")}},i.prototype.calculateTrailer=function(){if(3===this.version)return new Uint8Array(0);var e=new Uint8Array([4,255]);return a.default.concatUint8Array([e,a.default.writeNumber(this.signatureData.length,4)])},i.prototype.verify=function(e,t){var r=u.default.write(u.default.signature,this.signatureType),n=u.default.write(u.default.publicKey,this.publicKeyAlgorithm),i=u.default.write(u.default.hash,this.hashAlgorithm),s=this.toSign(r,t),o=this.calculateTrailer(),l=0;n>0&&n<4?l=1:17===n&&(l=2);for(var c=[],d=0,p=0;p<l;p++)c[p]=new h.default,d+=c[p].read(this.signature.subarray(d,this.signature.length));return this.verified=f.default.signature.verify(n,i,c,e.mpi,a.default.concatUint8Array([s,this.signatureData,o])),this.verified},i.prototype.isExpired=function(){return!this.signatureNeverExpires&&Date.now()>this.created.getTime()+1e3*this.signatureExpirationTime},i.prototype.postCloneTypeFix=function(){this.issuerKeyId=l.default.fromClone(this.issuerKeyId)}},{"../crypto":24,"../enums.js":35,"../type/keyid.js":67,"../type/mpi.js":68,"../util.js":70,"./packet.js":51}],59:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=o.default.packet.symEncryptedAEADProtected,this.version=u,this.iv=null,this.encrypted=null,this.packets=null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../util.js")),a=n(e("../crypto")),o=n(e("../enums.js")),u=1,f=a.default.gcm.ivLength;i.prototype.read=function(e){var t=0;if(e[t]!==u)throw new Error("Invalid packet version.");t++,this.iv=e.subarray(t,f+t),t+=f,this.encrypted=e.subarray(t,e.length)},i.prototype.write=function(){return s.default.concatUint8Array([new Uint8Array([this.version]),this.iv,this.encrypted])},i.prototype.decrypt=function(e,t){var r=this;return a.default.gcm.decrypt(e,this.encrypted,t,this.iv).then(function(e){r.packets.read(e)})},i.prototype.encrypt=function(e,t){var r=this;return this.iv=a.default.random.getRandomValues(new Uint8Array(f)),a.default.gcm.encrypt(e,this.packets.write(),t,this.iv).then(function(e){r.encrypted=e})}},{"../crypto":24,"../enums.js":35,"../util.js":70}],60:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=f.default.packet.symEncryptedIntegrityProtected,this.version=d,this.encrypted=null,this.modification=!1,this.packets=null}function s(e,t,r,n){return l?function(e,t,r,n){n=new c(n);var i=new c(new Uint8Array(u.default.cipher[e].blockSize)),s=new l.createCipheriv("aes-"+e.substr(3,3)+"-cfb",n,i).update(new c(o.default.concatUint8Array([t,r])));return new Uint8Array(s)}(e,t,r,n):h.default.AES_CFB.encrypt(o.default.concatUint8Array([t,r]),n)}function a(e,t,r){var n=void 0;return(n=l?function(e,t,r){t=new c(t),r=new c(r);var n=new c(new Uint8Array(u.default.cipher[e].blockSize)),i=new l.createDecipheriv("aes-"+e.substr(3,3)+"-cfb",r,n).update(t);return new Uint8Array(i)}(e,t,r):h.default.AES_CFB.decrypt(t,r)).subarray(u.default.cipher[e].blockSize+2,n.length)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=n(e("../util.js")),u=n(e("../crypto")),f=n(e("../enums.js")),h=n(e("asmcrypto-lite")),l=o.default.getNodeCrypto(),c=o.default.getNodeBuffer(),d=1;i.prototype.read=function(e){if(e[0]!==d)throw new Error("Invalid packet version.");this.encrypted=e.subarray(1,e.length)},i.prototype.write=function(){return o.default.concatUint8Array([new Uint8Array([d]),this.encrypted])},i.prototype.encrypt=function(e,t){var r=this.packets.write(),n=u.default.getPrefixRandom(e),i=new Uint8Array([n[n.length-2],n[n.length-1]]),a=o.default.concatUint8Array([n,i]),f=new Uint8Array([211,20]),h=o.default.concatUint8Array([r,f]),l=u.default.hash.sha1(o.default.concatUint8Array([a,h]));return h=o.default.concatUint8Array([h,l]),"aes"===e.substr(0,3)?this.encrypted=s(e,a,h,t):(this.encrypted=u.default.cfb.encrypt(n,e,h,t,!1),this.encrypted=this.encrypted.subarray(0,a.length+h.length)),Promise.resolve()},i.prototype.decrypt=function(e,t){var r=void 0;r="aes"===e.substr(0,3)?a(e,this.encrypted,t):u.default.cfb.decrypt(e,t,this.encrypted,!1);var n=u.default.cfb.mdc(e,t,this.encrypted),i=r.subarray(0,r.length-20),s=o.default.concatUint8Array([n,i]);this.hash=o.default.Uint8Array2str(u.default.hash.sha1(s));var f=o.default.Uint8Array2str(r.subarray(r.length-20,r.length));if(this.hash!==f)throw new Error("Modification detected.");return this.packets.read(r.subarray(0,r.length-22)),Promise.resolve()}},{"../crypto":24,"../enums.js":35,"../util.js":70,"asmcrypto-lite":1}],61:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=o.default.packet.symEncryptedSessionKey,this.version=4,this.sessionKey=null,this.sessionKeyEncryptionAlgorithm=null,this.sessionKeyAlgorithm="aes256",this.encrypted=null,this.s2k=new a.default}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../util.js")),a=n(e("../type/s2k.js")),o=n(e("../enums.js")),u=n(e("../crypto"));i.prototype.read=function(e){this.version=e[0];var t=o.default.read(o.default.symmetric,e[1]),r=this.s2k.read(e.subarray(2,e.length))+2;r<e.length?(this.encrypted=e.subarray(r,e.length),this.sessionKeyEncryptionAlgorithm=t):this.sessionKeyAlgorithm=t},i.prototype.write=function(){var e=null===this.encrypted?this.sessionKeyAlgorithm:this.sessionKeyEncryptionAlgorithm,t=s.default.concatUint8Array([new Uint8Array([this.version,o.default.write(o.default.symmetric,e)]),this.s2k.write()]);return null!==this.encrypted&&(t=s.default.concatUint8Array([t,this.encrypted])),t},i.prototype.decrypt=function(e){var t=null!==this.sessionKeyEncryptionAlgorithm?this.sessionKeyEncryptionAlgorithm:this.sessionKeyAlgorithm,r=u.default.cipher[t].keySize,n=this.s2k.produce_key(e,r);if(null===this.encrypted)this.sessionKey=n;else{var i=u.default.cfb.normalDecrypt(t,n,this.encrypted,null);this.sessionKeyAlgorithm=o.default.read(o.default.symmetric,i[0]),this.sessionKey=i.subarray(1,i.length)}},i.prototype.encrypt=function(e){var t=null!==this.sessionKeyEncryptionAlgorithm?this.sessionKeyEncryptionAlgorithm:this.sessionKeyAlgorithm;this.sessionKeyEncryptionAlgorithm=t;var r,n=u.default.cipher[t].keySize,i=this.s2k.produce_key(e,n),a=new Uint8Array([o.default.write(o.default.symmetric,this.sessionKeyAlgorithm)]);null===this.sessionKey&&(this.sessionKey=u.default.getRandomBytes(u.default.cipher[this.sessionKeyAlgorithm].keySize)),r=s.default.concatUint8Array([a,this.sessionKey]),this.encrypted=u.default.cfb.normalEncrypt(t,i,r,null)},i.prototype.postCloneTypeFix=function(){this.s2k=a.default.fromClone(this.s2k)}},{"../crypto":24,"../enums.js":35,"../type/s2k.js":69,"../util.js":70}],62:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=a.default.packet.symmetricallyEncrypted,this.encrypted=null,this.packets=null,this.ignore_mdc_error=o.default.ignore_mdc_error}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../crypto")),a=n(e("../enums.js")),o=n(e("../config"));i.prototype.read=function(e){this.encrypted=e},i.prototype.write=function(){return this.encrypted},i.prototype.decrypt=function(e,t){var r=s.default.cfb.decrypt(e,t,this.encrypted,!0);if(!this.ignore_mdc_error&&("aes128"===e||"aes192"===e||"aes256"===e))throw new Error("Decryption failed due to missing MDC in combination with modern cipher.");return this.packets.read(r),Promise.resolve()},i.prototype.encrypt=function(e,t){var r=this.packets.write();return this.encrypted=s.default.cfb.encrypt(s.default.getPrefixRandom(e),e,r,t,!0),Promise.resolve()}},{"../config":10,"../crypto":24,"../enums.js":35}],63:[function(e,t,r){"use strict";function n(){this.tag=i.default.packet.trust}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../enums.js"));n.prototype.read=function(){}},{"../enums.js":35}],64:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=o.default.packet.userAttribute,this.attributes=[]}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../util.js")),a=n(e("./packet.js")),o=n(e("../enums.js"));i.prototype.read=function(e){for(var t=0;t<e.length;){var r=a.default.readSimpleLength(e.subarray(t,e.length));t+=r.offset,this.attributes.push(s.default.Uint8Array2str(e.subarray(t,t+r.len))),t+=r.len}},i.prototype.write=function(){for(var e=[],t=0;t<this.attributes.length;t++)e.push(a.default.writeSimpleLength(this.attributes[t].length)),e.push(s.default.str2Uint8Array(this.attributes[t]));return s.default.concatUint8Array(e)},i.prototype.equals=function(e){return!!(e&&e instanceof i)&&this.attributes.every(function(t,r){return t===e.attributes[r]})}},{"../enums.js":35,"../util.js":70,"./packet.js":51}],65:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.tag=a.default.packet.userid,this.userid=""}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../util.js")),a=n(e("../enums.js"));i.prototype.read=function(e){this.userid=s.default.decode_utf8(s.default.Uint8Array2str(e))},i.prototype.write=function(){return s.default.str2Uint8Array(s.default.encode_utf8(this.userid))}},{"../enums.js":35,"../util.js":70}],66:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!(this instanceof i))return new i(e);this.packets=e||new a.default.List}function s(e){var t=new a.default.List;return t.read(e),new i(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.Signature=i,r.readArmored=function(e){return s(u.default.decode(e).data)},r.read=s;var a=n(e("./packet")),o=n(e("./enums.js")),u=n(e("./encoding/armor.js"));i.prototype.armor=function(){return u.default.encode(o.default.armor.signature,this.packets.write())}},{"./encoding/armor.js":33,"./enums.js":35,"./packet":47}],67:[function(e,t,r){"use strict";function n(){this.bytes=""}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../util.js"));n.prototype.read=function(e){this.bytes=i.default.Uint8Array2str(e.subarray(0,8))},n.prototype.write=function(){return i.default.str2Uint8Array(this.bytes)},n.prototype.toHex=function(){return i.default.hexstrdump(this.bytes)},n.prototype.equals=function(e){return this.bytes===e.bytes},n.prototype.isNull=function(){return""===this.bytes},n.mapToHex=function(e){return e.toHex()},n.fromClone=function(e){var t=new n;return t.bytes=e.bytes,t},n.fromId=function(e){var t=new n;return t.read(i.default.str2Uint8Array(i.default.hex2bin(e))),t}},{"../util.js":70}],68:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.data=null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../crypto/public_key/jsbn.js")),a=n(e("../util.js"));i.prototype.read=function(e){("string"==typeof e||String.prototype.isPrototypeOf(e))&&(e=a.default.str2Uint8Array(e));var t=e[0]<<8|e[1],r=Math.ceil(t/8),n=a.default.Uint8Array2str(e.subarray(2,2+r));return this.fromBytes(n),2+r},i.prototype.fromBytes=function(e){this.data=new s.default(a.default.hexstrdump(e),16)},i.prototype.toBytes=function(){return a.default.Uint8Array2str(this.write()).substr(2)},i.prototype.byteLength=function(){return this.toBytes().length},i.prototype.write=function(){return a.default.str2Uint8Array(this.data.toMPI())},i.prototype.toBigInteger=function(){return this.data.clone()},i.prototype.fromBigInteger=function(e){this.data=e.clone()},i.fromClone=function(e){e.data.copyTo=s.default.prototype.copyTo;var t=new s.default;e.data.copyTo(t);var r=new i;return r.data=t,r}},{"../crypto/public_key/jsbn.js":29,"../util.js":70}],69:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.algorithm="sha256",this.type="iterated",this.c=96,this.salt=o.default.random.getRandomBytes(8)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../enums.js")),a=n(e("../util.js")),o=n(e("../crypto"));i.prototype.get_count=function(){return 16+(15&this.c)<<6+(this.c>>4)},i.prototype.read=function(e){var t=0;switch(this.type=s.default.read(s.default.s2k,e[t++]),this.algorithm=s.default.read(s.default.hash,e[t++]),this.type){case"simple":break;case"salted":this.salt=e.subarray(t,t+8),t+=8;break;case"iterated":this.salt=e.subarray(t,t+8),t+=8,this.c=e[t++];break;case"gnu":if("GNU"!==a.default.Uint8Array2str(e.subarray(t,3)))throw new Error("Unknown s2k type.");t+=3;var r=1e3+e[t++];if(1001!==r)throw new Error("Unknown s2k gnu protection mode.");this.type=r;break;default:throw new Error("Unknown s2k type.")}return t},i.prototype.write=function(){var e=[new Uint8Array([s.default.write(s.default.s2k,this.type),s.default.write(s.default.hash,this.algorithm)])];switch(this.type){case"simple":break;case"salted":e.push(this.salt);break;case"iterated":e.push(this.salt),e.push(new Uint8Array([this.c]));break;case"gnu":throw new Error("GNU s2k type not supported.");default:throw new Error("Unknown s2k type.")}return a.default.concatUint8Array(e)},i.prototype.produce_key=function(e,t){function r(t,r){var n=s.default.write(s.default.hash,r.algorithm);switch(r.type){case"simple":return o.default.hash.digest(n,a.default.concatUint8Array([t,e]));case"salted":return o.default.hash.digest(n,a.default.concatUint8Array([t,r.salt,e]));case"iterated":for(var i=[],u=r.get_count(),f=a.default.concatUint8Array([r.salt,e]);i.length*f.length<u;)i.push(f);return(i=a.default.concatUint8Array(i)).length>u&&(i=i.subarray(0,u)),o.default.hash.digest(n,a.default.concatUint8Array([t,i]));case"gnu":throw new Error("GNU s2k type not supported.");default:throw new Error("Unknown s2k type.")}}e=a.default.str2Uint8Array(a.default.encode_utf8(e));for(var n=[],i=0,u=new Uint8Array(t),f=0;f<t;f++)u[f]=0;for(f=0;i<t;){var h=r(u.subarray(0,f),this);n.push(h),i+=h.length,f++}return a.default.concatUint8Array(n).subarray(0,t)},i.fromClone=function(e){var t=new i;return t.algorithm=e.algorithm,t.type=e.type,t.c=e.c,t.salt=e.salt,t}},{"../crypto":24,"../enums.js":35,"../util.js":70}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./config"));r.default={isString:function(e){return"string"==typeof e||String.prototype.isPrototypeOf(e)},isArray:function(e){return Array.prototype.isPrototypeOf(e)},isUint8Array:function(e){return Uint8Array.prototype.isPrototypeOf(e)},isEmailAddress:function(e){if(!this.isString(e))return!1;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},isUserId:function(e){return!!this.isString(e)&&(/</.test(e)&&/>$/.test(e))},getTransferables:function(e){if(n.default.zero_copy&&Object.prototype.isPrototypeOf(e)){var t=[];return this.collectBuffers(e,t),t.length?t:void 0}},collectBuffers:function(e,t){if(e)if(this.isUint8Array(e)&&-1===t.indexOf(e.buffer))t.push(e.buffer);else if(Object.prototype.isPrototypeOf(e))for(var r in e)this.collectBuffers(e[r],t)},readNumber:function(e){for(var t=0,r=0;r<e.length;r++)t+=Math.pow(256,r)*e[e.length-1-r];return t},writeNumber:function(e,t){for(var r=new Uint8Array(t),n=0;n<t;n++)r[n]=e>>8*(t-n-1)&255;return r},readDate:function(e){var t=this.readNumber(e),r=new Date;return r.setTime(1e3*t),r},writeDate:function(e){var t=Math.round(e.getTime()/1e3);return this.writeNumber(t,4)},hexdump:function(e){for(var t,r=[],n=e.length,i=0,s=0;i<n;){for(t=e.charCodeAt(i++).toString(16);t.length<2;)t="0"+t;r.push(" "+t),++s%32==0&&r.push("\n           ")}return r.join("")},hexstrdump:function(e){if(null===e)return"";for(var t,r=[],n=e.length,i=0;i<n;){for(t=e.charCodeAt(i++).toString(16);t.length<2;)t="0"+t;r.push(""+t)}return r.join("")},hex2bin:function(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},hexidump:function(e){for(var t,r=[],n=e.length,i=0;i<n;){for(t=e[i++].toString(16);t.length<2;)t="0"+t;r.push(""+t)}return r.join("")},encode_utf8:function(e){return unescape(encodeURIComponent(e))},decode_utf8:function(e){if("string"!=typeof e)throw new Error('Parameter "utf8" is not of type string');try{return decodeURIComponent(escape(e))}catch(t){return e}},bin2str:function(e){for(var t=[],r=0;r<e.length;r++)t[r]=String.fromCharCode(e[r]);return t.join("")},str2bin:function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},str2Uint8Array:function(e){if("string"!=typeof e&&!String.prototype.isPrototypeOf(e))throw new Error("str2Uint8Array: Data must be in the form of a string");for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},Uint8Array2str:function(e){if(!Uint8Array.prototype.isPrototypeOf(e))throw new Error("Uint8Array2str: Data must be in the form of a Uint8Array");for(var t=[],r=e.length,n=0;n<r;n+=16384)t.push(String.fromCharCode.apply(String,e.subarray(n,n+16384<r?n+16384:r)));return t.join("")},concatUint8Array:function(e){var t=0;e.forEach(function(e){if(!Uint8Array.prototype.isPrototypeOf(e))throw new Error("concatUint8Array: Data must be in the form of a Uint8Array");t+=e.length});var r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(e,n),n+=e.length}),r},copyUint8Array:function(e){if(!Uint8Array.prototype.isPrototypeOf(e))throw new Error("Data must be in the form of a Uint8Array");var t=new Uint8Array(e.length);return t.set(e),t},equalsUint8Array:function(e,t){if(!Uint8Array.prototype.isPrototypeOf(e)||!Uint8Array.prototype.isPrototypeOf(t))throw new Error("Data must be in the form of a Uint8Array");if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},calc_checksum:function(e){for(var t={s:0,add:function(e){this.s=(this.s+e)%65536}},r=0;r<e.length;r++)t.add(e[r]);return t.s},print_debug:function(e){n.default.debug&&console.log(e)},print_debug_hexstr_dump:function(e,t){n.default.debug&&(e+=this.hexstrdump(t),console.log(e))},getLeftNBits:function(e,t){var r=t%8;if(0===r)return e.substring(0,t/8);var n=(t-r)/8+1,i=e.substring(0,n);return this.shiftRight(i,8-r)},shiftRight:function(e,t){var r=this.str2bin(e);if(t%8==0)return e;for(var n=r.length-1;n>=0;n--)r[n]>>=t%8,n>0&&(r[n]|=r[n-1]<<8-t%8&255);return this.bin2str(r)},get_hashAlgorithmString:function(e){switch(e){case 1:return"MD5";case 2:return"SHA1";case 3:return"RIPEMD160";case 8:return"SHA256";case 9:return"SHA384";case 10:return"SHA512";case 11:return"SHA224"}return"unknown"},getWebCrypto:function(){if(n.default.use_native)return"undefined"!=typeof window&&window.crypto&&window.crypto.subtle},getWebCryptoAll:function(){if(n.default.use_native&&"undefined"!=typeof window){if(window.crypto)return window.crypto.subtle||window.crypto.webkitSubtle;if(window.msCrypto)return window.msCrypto.subtle}},promisify:function(e){return function(){var t=arguments;return new Promise(function(r){r(e.apply(null,t))})}},promisifyIE11Op:function(e,t){return new Promise(function(r,n){e.onerror=function(){n(new Error(t))},e.oncomplete=function(e){r(e.target.result)}})},detectNode:function(){return"undefined"==typeof window},getNodeCrypto:function(){if(this.detectNode()&&n.default.use_native)return e("crypto")},getNodeBuffer:function(){if(this.detectNode())return e("buffer").Buffer}}},{"./config":10,buffer:"buffer",crypto:"crypto"}],71:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,r=void 0===t?"openpgp.worker.min.js":t,n=e.worker,i=e.config;this.worker=n||new Worker(r),this.worker.onmessage=this.onMessage.bind(this),this.worker.onerror=function(e){throw new Error("Unhandled error in openpgp worker: "+e.message+" ("+e.filename+":"+e.lineno+")")},this.seedRandom(u),i&&this.worker.postMessage({event:"configure",config:i}),this.tasks={},this.currentID=0}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var s=n(e("../util.js")),a=n(e("../crypto")),o=n(e("../packet")),u=5e4;i.prototype.getID=function(){return this.currentID++},i.prototype.onMessage=function(e){var t=e.data;switch(t.event){case"method-return":if(t.err){var r=new Error(t.err);r.workerStack=t.stack,this.tasks[t.id].reject(r)}else this.tasks[t.id].resolve(t.data);delete this.tasks[t.id];break;case"request-seed":this.seedRandom(2e4);break;default:throw new Error("Unknown Worker Event.")}},i.prototype.seedRandom=function(e){var t=this.getRandomBuffer(e);this.worker.postMessage({event:"seed-random",buf:t},s.default.getTransferables.call(s.default,t))},i.prototype.getRandomBuffer=function(e){if(!e)return null;var t=new Uint8Array(e);return a.default.random.getRandomValues(t),t},i.prototype.terminate=function(){this.worker.terminate()},i.prototype.delegate=function(e,t){var r=this,n=this.getID();return new Promise(function(i,a){r.worker.postMessage({id:n,event:e,options:o.default.clone.clonePackets(t)},s.default.getTransferables.call(s.default,t)),r.tasks[n]={resolve:function(t){return i(o.default.clone.parseClonedPackets(t,e))},reject:a}})}},{"../crypto":24,"../packet":47,"../util.js":70}]},{},[37])(37)});
/*! jQuery v2.2.1 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!k.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=R.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c}catch(e){}O.set(a,b,c);
}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.rnamespace||a.rnamespace.test(g.namespace))&&(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(b,c,e){var f=!0,g="width"===c?b.offsetWidth:b.offsetHeight,h=Ca(b),i="border-box"===n.css(b,"boxSizing",!1,h);if(d.msFullscreenElement&&a.top!==a&&b.getClientRects().length&&(g=Math.round(100*b.getBoundingClientRect()[c])),0>=g||null==g){if(g=Fa(b,c,h),(0>g||null==g)&&(g=b.style[c]),Ba.test(g))return g;f=i&&(l.boxSizingReliable()||g===b.style[c]),g=parseFloat(g)||0}return g+Oa(b,c,e||(i?"border":"content"),f,h)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,
e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(void 0===a||"boolean"===c)&&(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){return n.trim(a.value)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var hb=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!hb.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,hb.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var ib=a.location,jb=n.now(),kb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return(!c||c.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+b),c};var lb=/#.*$/,mb=/([?&])_=[^&]*/,nb=/^(.*?):[ \t]*([^\r\n]*)$/gm,ob=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pb=/^(?:GET|HEAD)$/,qb=/^\/\//,rb={},sb={},tb="*/".concat("*"),ub=d.createElement("a");ub.href=ib.href;function vb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function wb(a,b,c,d){var e={},f=a===sb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function xb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function yb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function zb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ib.href,type:"GET",isLocal:ob.test(ib.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?xb(xb(a,n.ajaxSettings),b):xb(n.ajaxSettings,a)},ajaxPrefilter:vb(rb),ajaxTransport:vb(sb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=nb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||ib.href)+"").replace(lb,"").replace(qb,ib.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=ub.protocol+"//"+ub.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),wb(rb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!pb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(kb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=mb.test(f)?f.replace(mb,"$1_="+jb++):f+(kb.test(f)?"&":"?")+"_="+jb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+tb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=wb(sb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=yb(m,x,d)),u=zb(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,(b||!y)&&(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Ab=/%20/g,Bb=/\[\]$/,Cb=/\r?\n/g,Db=/^(?:submit|button|image|reset|file)$/i,Eb=/^(?:input|select|textarea|keygen)/i;function Fb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Bb.test(a)?d(a,e):Fb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Fb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Fb(c,a[c],b,e);return d.join("&").replace(Ab,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Eb.test(this.nodeName)&&!Db.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Cb,"\r\n")}}):{name:b.name,value:c.replace(Cb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Gb={0:200,1223:204},Hb=n.ajaxSettings.xhr();l.cors=!!Hb&&"withCredentials"in Hb,l.ajax=Hb=!!Hb,n.ajaxTransport(function(b){var c,d;return l.cors||Hb&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Gb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Ib=[],Jb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ib.pop()||n.expando+"_"+jb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Jb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Jb,"$1"+e):b.jsonp!==!1&&(b.url+=(kb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Ib.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),l.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||(l.createHTMLDocument?d.implementation.createHTMLDocument(""):d);var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Kb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Kb)return Kb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(g,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Lb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Lb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Lb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Mb=a.jQuery,Nb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Nb),b&&a.jQuery===n&&(a.jQuery=Mb),n},b||(a.jQuery=a.$=n),n});

/*
 AngularJS v1.6.10
 (c) 2010-2018 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(y){'use strict';function qe(a){if(G(a))u(a.objectMaxDepth)&&(Oc.objectMaxDepth=Wb(a.objectMaxDepth)?a.objectMaxDepth:NaN);else return Oc}function Wb(a){return Y(a)&&0<a}function M(a,b){b=b||Error;return function(){var d=arguments[0],c;c="["+(a?a+":":"")+d+"] http://errors.angularjs.org/1.6.10/"+(a?a+"/":"")+d;for(d=1;d<arguments.length;d++){c=c+(1==d?"?":"&")+"p"+(d-1)+"=";var e=encodeURIComponent,f;f=arguments[d];f="function"==typeof f?f.toString().replace(/ \{[\s\S]*$/,""):"undefined"==
typeof f?"undefined":"string"!=typeof f?JSON.stringify(f):f;c+=e(f)}return new b(c)}}function ja(a){if(null==a||Za(a))return!1;if(I(a)||F(a)||z&&a instanceof z)return!0;var b="length"in Object(a)&&a.length;return Y(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"===typeof a.item)}function q(a,b,d){var c,e;if(a)if(C(a))for(c in a)"prototype"!==c&&"length"!==c&&"name"!==c&&a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else if(I(a)||ja(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in
a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==q)a.forEach(b,d,a);else if(Pc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)ra.call(a,c)&&b.call(d,a[c],c,a);return a}function Qc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function Xb(a){return function(b,d){a(d,b)}}function re(){return++qb}function Yb(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=
b[e];if(G(g)||C(g))for(var k=Object.keys(g),h=0,l=k.length;h<l;h++){var m=k[h],p=g[m];d&&G(p)?da(p)?a[m]=new Date(p.valueOf()):$a(p)?a[m]=new RegExp(p):p.nodeName?a[m]=p.cloneNode(!0):Zb(p)?a[m]=p.clone():(G(a[m])||(a[m]=I(p)?[]:{}),Yb(a[m],[p],!0)):a[m]=p}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function P(a){return Yb(a,xa.call(arguments,1),!1)}function se(a){return Yb(a,xa.call(arguments,1),!0)}function Z(a){return parseInt(a,10)}function $b(a,b){return P(Object.create(a),b)}function D(){}
function ab(a){return a}function ka(a){return function(){return a}}function ac(a){return C(a.toString)&&a.toString!==ha}function x(a){return"undefined"===typeof a}function u(a){return"undefined"!==typeof a}function G(a){return null!==a&&"object"===typeof a}function Pc(a){return null!==a&&"object"===typeof a&&!Rc(a)}function F(a){return"string"===typeof a}function Y(a){return"number"===typeof a}function da(a){return"[object Date]"===ha.call(a)}function bc(a){switch(ha.call(a)){case "[object Error]":return!0;
case "[object Exception]":return!0;case "[object DOMException]":return!0;default:return a instanceof Error}}function C(a){return"function"===typeof a}function $a(a){return"[object RegExp]"===ha.call(a)}function Za(a){return a&&a.window===a}function bb(a){return a&&a.$evalAsync&&a.$watch}function La(a){return"boolean"===typeof a}function te(a){return a&&Y(a.length)&&ue.test(ha.call(a))}function Zb(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function ve(a){var b={};a=a.split(",");var d;for(d=
0;d<a.length;d++)b[a[d]]=!0;return b}function ya(a){return N(a.nodeName||a[0]&&a[0].nodeName)}function cb(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function na(a,b,d){function c(a,b,c){c--;if(0>c)return"...";var d=b.$$hashKey,g;if(I(a)){g=0;for(var f=a.length;g<f;g++)b.push(e(a[g],c))}else if(Pc(a))for(g in a)b[g]=e(a[g],c);else if(a&&"function"===typeof a.hasOwnProperty)for(g in a)a.hasOwnProperty(g)&&(b[g]=e(a[g],c));else for(g in a)ra.call(a,g)&&(b[g]=e(a[g],c));d?b.$$hashKey=d:delete b.$$hashKey;
return b}function e(a,b){if(!G(a))return a;var d=g.indexOf(a);if(-1!==d)return k[d];if(Za(a)||bb(a))throw oa("cpws");var d=!1,e=f(a);void 0===e&&(e=I(a)?[]:Object.create(Rc(a)),d=!0);g.push(a);k.push(e);return d?c(a,e,b):e}function f(a){switch(ha.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(e(a.buffer),
a.byteOffset,a.length);case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(C(a.cloneNode))return a.cloneNode(!0)}
var g=[],k=[];d=Wb(d)?d:NaN;if(b){if(te(b)||"[object ArrayBuffer]"===ha.call(b))throw oa("cpta");if(a===b)throw oa("cpi");I(b)?b.length=0:q(b,function(a,c){"$$hashKey"!==c&&delete b[c]});g.push(a);k.push(b);return c(a,b,d)}return e(a,d)}function cc(a,b){return a===b||a!==a&&b!==b}function sa(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d===typeof b&&"object"===d)if(I(a)){if(!I(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!sa(a[c],
b[c]))return!1;return!0}}else{if(da(a))return da(b)?cc(a.getTime(),b.getTime()):!1;if($a(a))return $a(b)?a.toString()===b.toString():!1;if(bb(a)||bb(b)||Za(a)||Za(b)||I(b)||da(b)||$a(b))return!1;d=R();for(c in a)if("$"!==c.charAt(0)&&!C(a[c])){if(!sa(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&u(b[c])&&!C(b[c]))return!1;return!0}return!1}function db(a,b,d){return a.concat(xa.call(b,d))}function Ta(a,b){var d=2<arguments.length?xa.call(arguments,2):[];return!C(b)||b instanceof
RegExp?b:d.length?function(){return arguments.length?b.apply(a,db(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Sc(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:Za(b)?d="$WINDOW":b&&y.document===b?d="$DOCUMENT":bb(b)&&(d="$SCOPE");return d}function eb(a,b){if(!x(a))return Y(b)||(b=b?2:null),JSON.stringify(a,Sc,b)}function Tc(a){return F(a)?JSON.parse(a):a}function dc(a,b){a=a.replace(we,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+
a)/6E4;return X(d)?b:d}function Uc(a,b){a=new Date(a.getTime());a.setMinutes(a.getMinutes()+b);return a}function ec(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=dc(b,c);return Uc(a,d*(b-c))}function za(a){a=z(a).clone().empty();var b=z("<div></div>").append(a).html();try{return a[0].nodeType===Ma?N(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+N(b)})}catch(d){return N(b)}}function Vc(a){try{return decodeURIComponent(a)}catch(b){}}function fc(a){var b={};q((a||"").split("&"),
function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=Vc(e),u(e)&&(f=u(f)?Vc(f):!0,ra.call(b,e)?I(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function gc(a){var b=[];q(a,function(a,c){I(a)?q(a,function(a){b.push(ia(c,!0)+(!0===a?"":"="+ia(a,!0)))}):b.push(ia(c,!0)+(!0===a?"":"="+ia(a,!0)))});return b.length?b.join("&"):""}function fb(a){return ia(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ia(a,
b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function xe(a,b){var d,c,e=Ga.length;for(c=0;c<e;++c)if(d=Ga[c]+b,F(d=a.getAttribute(d)))return d;return null}function ye(a,b){var d,c,e={};q(Ga,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});q(Ga,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))});
d&&(ze?(e.strictDi=null!==xe(d,"strict-di"),b(d,c?[c]:[],e)):y.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function Wc(a,b,d){G(d)||(d={});d=P({strictDi:!1},d);var c=function(){a=z(a);if(a.injector()){var c=a[0]===y.document?"document":za(a);throw oa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",
function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=gb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;y&&e.test(y.name)&&(d.debugInfoEnabled=!0,y.name=y.name.replace(e,""));if(y&&!f.test(y.name))return c();y.name=y.name.replace(f,"");ea.resumeBootstrap=function(a){q(a,function(a){b.push(a)});return c()};C(ea.resumeDeferredBootstrap)&&
ea.resumeDeferredBootstrap()}function Ae(){y.name="NG_ENABLE_DEBUG_INFO!"+y.name;y.location.reload()}function Be(a){a=ea.element(a).injector();if(!a)throw oa("test");return a.get("$$testability")}function Xc(a,b){b=b||"_";return a.replace(Ce,function(a,c){return(c?b:"")+a.toLowerCase()})}function De(){var a;if(!Yc){var b=rb();(ta=x(b)?y.jQuery:b?y[b]:void 0)&&ta.fn.on?(z=ta,P(ta.fn,{scope:Ua.scope,isolateScope:Ua.isolateScope,controller:Ua.controller,injector:Ua.injector,inheritedData:Ua.inheritedData}),
a=ta.cleanData,ta.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=ta._data(f,"events"))&&c.$destroy&&ta(f).triggerHandler("$destroy");a(b)}):z=S;ea.element=z;Yc=!0}}function hb(a,b,d){if(!a)throw oa("areq",b||"?",d||"required");return a}function sb(a,b,d){d&&I(a)&&(a=a[a.length-1]);hb(C(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ha(a,b){if("hasOwnProperty"===a)throw oa("badname",b);}function Zc(a,b,d){if(!b)return a;b=
b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&C(a)?Ta(e,a):a}function tb(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==b)c||(c=z(xa.call(a,0,e))),c.push(b);return c||a}function R(){return Object.create(null)}function hc(a){if(null==a)return"";switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=!ac(a)||I(a)||da(a)?eb(a):a.toString()}return a}function Ee(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=
M("$injector"),c=M("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||M;return b(a,"module",function(){var a={};return function(f,g,k){var h={};if("hasOwnProperty"===f)throw c("badname","module");g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,c,d,g){g||(g=e);return function(){g[d||"push"]([b,c,arguments]);return E}}function b(a,c,d){d||(d=e);return function(b,e){e&&C(e)&&(e.$$moduleName=f);d.push([a,c,arguments]);return E}}if(!g)throw d("nomod",f);var e=[],n=[],B=[],v=
a("$injector","invoke","push",n),E={_invokeQueue:e,_configBlocks:n,_runBlocks:B,info:function(a){if(u(a)){if(!G(a))throw c("aobj","value");h=a;return this}return h},requires:g,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator",n),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider",
"register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:v,run:function(a){B.push(a);return this}};k&&v(k);return E})}})}function pa(a,b){if(I(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(G(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function Fe(a,b){var d=[];Wb(b)&&(a=ea.copy(a,null,b));return JSON.stringify(a,function(a,b){b=Sc(a,b);if(G(b)){if(0<=d.indexOf(b))return"...";d.push(b)}return b})}
function Ge(a){P(a,{errorHandlingConfig:qe,bootstrap:Wc,copy:na,extend:P,merge:se,equals:sa,element:z,forEach:q,injector:gb,noop:D,bind:Ta,toJson:eb,fromJson:Tc,identity:ab,isUndefined:x,isDefined:u,isString:F,isFunction:C,isObject:G,isNumber:Y,isElement:Zb,isArray:I,version:He,isDate:da,lowercase:N,uppercase:ub,callbacks:{$$counter:0},getTestability:Be,reloadWithDebugInfo:Ae,$$minErr:M,$$csp:Ia,$$encodeUriSegment:fb,$$encodeUriQuery:ia,$$stringify:hc});jc=Ee(y);jc("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Ie});
a.provider("$compile",$c).directive({a:Je,input:ad,textarea:ad,form:Ke,script:Le,select:Me,option:Ne,ngBind:Oe,ngBindHtml:Pe,ngBindTemplate:Qe,ngClass:Re,ngClassEven:Se,ngClassOdd:Te,ngCloak:Ue,ngController:Ve,ngForm:We,ngHide:Xe,ngIf:Ye,ngInclude:Ze,ngInit:$e,ngNonBindable:af,ngPluralize:bf,ngRepeat:cf,ngShow:df,ngStyle:ef,ngSwitch:ff,ngSwitchWhen:gf,ngSwitchDefault:hf,ngOptions:jf,ngTransclude:kf,ngModel:lf,ngList:mf,ngChange:nf,pattern:bd,ngPattern:bd,required:cd,ngRequired:cd,minlength:dd,ngMinlength:dd,
maxlength:ed,ngMaxlength:ed,ngValue:of,ngModelOptions:pf}).directive({ngInclude:qf}).directive(vb).directive(fd);a.provider({$anchorScroll:rf,$animate:sf,$animateCss:tf,$$animateJs:uf,$$animateQueue:vf,$$AnimateRunner:wf,$$animateAsyncRun:xf,$browser:yf,$cacheFactory:zf,$controller:Af,$document:Bf,$$isDocumentHidden:Cf,$exceptionHandler:Df,$filter:gd,$$forceReflow:Ef,$interpolate:Ff,$interval:Gf,$http:Hf,$httpParamSerializer:If,$httpParamSerializerJQLike:Jf,$httpBackend:Kf,$xhrFactory:Lf,$jsonpCallbacks:Mf,
$location:Nf,$log:Of,$parse:Pf,$rootScope:Qf,$q:Rf,$$q:Sf,$sce:Tf,$sceDelegate:Uf,$sniffer:Vf,$templateCache:Wf,$templateRequest:Xf,$$testability:Yf,$timeout:Zf,$window:$f,$$rAF:ag,$$jqLite:bg,$$Map:cg,$$cookieReader:dg})}]).info({angularVersion:"1.6.10"})}function wb(a,b){return b.toUpperCase()}function xb(a){return a.replace(eg,wb)}function kc(a){a=a.nodeType;return 1===a||!a||9===a}function hd(a,b){var d,c,e=b.createDocumentFragment(),f=[];if(lc.test(a)){d=e.appendChild(b.createElement("div"));
c=(fg.exec(a)||["",""])[1].toLowerCase();c=$[c]||$._default;d.innerHTML=c[1]+a.replace(gg,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;f=db(f,d.childNodes);d=e.firstChild;d.textContent=""}else f.push(b.createTextNode(a));e.textContent="";e.innerHTML="";q(f,function(a){e.appendChild(a)});return e}function S(a){if(a instanceof S)return a;var b;F(a)&&(a=Q(a),b=!0);if(!(this instanceof S)){if(b&&"<"!==a.charAt(0))throw mc("nosel");return new S(a)}if(b){b=y.document;var d;a=(d=hg.exec(a))?[b.createElement(d[1])]:
(d=hd(a,b))?d.childNodes:[];nc(this,a)}else C(a)?id(a):nc(this,a)}function oc(a){return a.cloneNode(!0)}function yb(a,b){!b&&kc(a)&&z.cleanData([a]);a.querySelectorAll&&z.cleanData(a.querySelectorAll("*"))}function jd(a,b,d,c){if(u(c))throw mc("offargs");var e=(c=zb(a))&&c.events,f=c&&c.handle;if(f)if(b){var g=function(b){var c=e[b];u(d)&&cb(c||[],d);u(d)&&c&&0<c.length||(a.removeEventListener(b,f),delete e[b])};q(b.split(" "),function(a){g(a);Ab[a]&&g(Ab[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,
f),delete e[b]}function pc(a,b){var d=a.ng339,c=d&&ib[d];c&&(b?delete c.data[b]:(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),jd(a)),delete ib[d],a.ng339=void 0))}function zb(a,b){var d=a.ng339,d=d&&ib[d];b&&!d&&(a.ng339=d=++ig,d=ib[d]={events:{},data:{},handle:void 0});return d}function qc(a,b,d){if(kc(a)){var c,e=u(d),f=!e&&b&&!G(b),g=!b;a=(a=zb(a,!f))&&a.data;if(e)a[xb(b)]=d;else{if(g)return a;if(f)return a&&a[xb(b)];for(c in b)a[xb(c)]=b[c]}}}function Bb(a,b){return a.getAttribute?-1<
(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Cb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;q(b.split(" "),function(a){a=Q(a);c=c.replace(" "+a+" "," ")});c!==d&&a.setAttribute("class",Q(c))}}function Db(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;q(b.split(" "),function(a){a=Q(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});c!==d&&a.setAttribute("class",
Q(c))}}function nc(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function kd(a,b){return Eb(a,"$"+(b||"ngController")+"Controller")}function Eb(a,b,d){9===a.nodeType&&(a=a.documentElement);for(b=I(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(u(d=z.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function ld(a){for(yb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}
function Fb(a,b){b||yb(a);var d=a.parentNode;d&&d.removeChild(a)}function jg(a,b){b=b||y;if("complete"===b.document.readyState)b.setTimeout(a);else z(b).on("load",a)}function id(a){function b(){y.document.removeEventListener("DOMContentLoaded",b);y.removeEventListener("load",b);a()}"complete"===y.document.readyState?y.setTimeout(a):(y.document.addEventListener("DOMContentLoaded",b),y.addEventListener("load",b))}function md(a,b){var d=Gb[b.toLowerCase()];return d&&nd[ya(a)]&&d}function kg(a,b){var d=
function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(x(c.immediatePropagationStopped)){var k=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();k&&k.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var h=f.specialHandlerWrapper||lg;1<g&&(f=pa(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||h(a,c,
f[l])}};d.elem=a;return d}function lg(a,b,d){d.call(a,b)}function mg(a,b,d){var c=b.relatedTarget;c&&(c===a||ng.call(a,c))||d.call(a,b)}function bg(){this.$get=function(){return P(S,{hasClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return Db(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Cb(a,b)}})}}function Na(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"===d||"object"===d&&null!==
a?a.$$hashKey=d+":"+(b||re)():d+":"+a}function od(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}function pd(a){a=Function.prototype.toString.call(a).replace(og,"");return a.match(pg)||a.match(qg)}function rg(a){return(a=pd(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function gb(a,b){function d(a){return function(b,c){if(G(b))q(b,Xb(a));else return a(b,c)}}function c(a,b){Ha(a,"service");if(C(b)||I(b))b=n.instantiate(b);if(!b.$get)throw Aa("pget",a);return p[a+
"Provider"]=b}function e(a,b){return function(){var c=E.invoke(b,this);if(x(c))throw Aa("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){hb(x(a)||I(a),"modulesToLoad","not an array");var b=[],c;q(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],g=n.get(e[0]);g[e[1]].apply(g,e[2])}}if(!m.get(a)){m.set(a,!0);try{F(a)?(c=jc(a),E.modules[a]=c,b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):C(a)?b.push(n.invoke(a)):
I(a)?b.push(n.invoke(a)):sb(a,"module")}catch(e){throw I(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Aa("modulerr",a,e.stack||e.message||e);}}});return b}function k(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===h)throw Aa("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=h,a[b]=c(b,e),a[b]}catch(g){throw a[b]===h&&delete a[b],g;}finally{l.shift()}}function e(a,c,g){var f=[];a=gb.$$annotate(a,b,g);for(var h=0,
k=a.length;h<k;h++){var l=a[h];if("string"!==typeof l)throw Aa("itkn",l);f.push(c&&c.hasOwnProperty(l)?c[l]:d(l,g))}return f}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);I(a)&&(a=a[a.length-1]);d=a;if(Ba||"function"!==typeof d)d=!1;else{var g=d.$$ngIsClass;La(g)||(g=d.$$ngIsClass=/^(?:class\b|constructor\()/.test(Function.prototype.toString.call(d)));d=g}return d?(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=
I(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:gb.$$annotate,has:function(b){return p.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var h={},l=[],m=new Hb,p={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,ka(b),!1)}),constant:d(function(a,b){Ha(a,"constant");p[a]=b;B[a]=b}),decorator:function(a,b){var c=n.get(a+
"Provider"),d=c.$get;c.$get=function(){var a=E.invoke(d,c);return E.invoke(b,null,{$delegate:a})}}}},n=p.$injector=k(p,function(a,b){ea.isString(b)&&l.push(b);throw Aa("unpr",l.join(" <- "));}),B={},v=k(B,function(a,b){var c=n.get(a+"Provider",b);return E.invoke(c.$get,c,void 0,a)}),E=v;p.$injectorProvider={$get:ka(v)};E.modules=n.modules=R();var A=g(a),E=v.get("$injector");E.strictDi=b;q(A,function(a){a&&E.invoke(a)});E.loadNewModules=function(a){q(g(a),function(a){a&&E.invoke(a)})};return E}function rf(){var a=
!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===ya(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;C(c)?c=c():Zb(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):Y(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=F(a)?a:Y(a)?a.toString():
d.hash();var b;a?(b=k.getElementById(a))?f(b):(b=e(k.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var k=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||jg(function(){c.$evalAsync(g)})});return g}]}function jb(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;I(a)&&(a=a.join(" "));I(b)&&(b=b.join(" "));return a+" "+b}function sg(a){F(a)&&(a=a.split(" "));var b=R();q(a,function(a){a.length&&(b[a]=!0)});return b}function Ja(a){return G(a)?a:{}}function tg(a,
b,d,c){function e(a){try{a.apply(null,xa.call(arguments,1))}finally{if(v--,0===v)for(;E.length;)try{E.pop()()}catch(b){d.error(b)}}}function f(){w=null;k()}function g(){A=H();A=x(A)?null:A;sa(A,t)&&(A=t);s=t=A}function k(){var a=s;g();if(J!==h.url()||a!==A)J=h.url(),s=A,q(K,function(a){a(h.url(),A)})}var h=this,l=a.location,m=a.history,p=a.setTimeout,n=a.clearTimeout,B={};h.isMock=!1;var v=0,E=[];h.$$completeOutstandingRequest=e;h.$$incOutstandingRequestCount=function(){v++};h.notifyWhenNoOutstandingRequests=
function(a){0===v?a():E.push(a)};var A,s,J=l.href,ic=b.find("base"),w=null,H=c.history?function(){try{return m.state}catch(a){}}:D;g();h.url=function(b,d,e){x(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=s===e;if(J===b&&(!c.history||f))return h;var k=J&&Ka(J)===Ka(b);J=b;s=e;!c.history||k&&f?(k||(w=b),d?l.replace(b):k?(d=l,e=b.indexOf("#"),e=-1===e?"":b.substr(e),d.hash=e):l.href=b,l.href!==b&&(w=b)):(m[d?"replaceState":"pushState"](e,"",b),g());w&&(w=b);return h}return w||
l.href.replace(/%27/g,"'")};h.state=function(){return A};var K=[],T=!1,t=null;h.onUrlChange=function(b){if(!T){if(c.history)z(a).on("popstate",f);z(a).on("hashchange",f);T=!0}K.push(b);return b};h.$$applicationDestroyed=function(){z(a).off("hashchange popstate",f)};h.$$checkUrlChange=k;h.baseHref=function(){var a=ic.attr("href");return a?a.replace(/^(https?:)?\/\/[^/]*/,""):""};h.defer=function(a,b){var c;v++;c=p(function(){delete B[c];e(a)},b||0);B[c]=!0;return c};h.defer.cancel=function(a){return B[a]?
(delete B[a],n(a),e(D),!0):!1}}function yf(){this.$get=["$window","$log","$sniffer","$document",function(a,b,d,c){return new tg(a,c,b,d)}]}function zf(){this.$get=function(){function a(a,c){function e(a){a!==p&&(n?n===a&&(n=a.n):n=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw M("$cacheFactory")("iid",a);var g=0,k=P({},c,{id:a}),h=R(),l=c&&c.capacity||Number.MAX_VALUE,m=R(),p=null,n=null;return b[a]={put:function(a,b){if(!x(b)){if(l<Number.MAX_VALUE){var c=
m[a]||(m[a]={key:a});e(c)}a in h||g++;h[a]=b;g>l&&this.remove(n.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return h[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b===p&&(p=b.p);b===n&&(n=b.n);f(b.n,b.p);delete m[a]}a in h&&(delete h[a],g--)},removeAll:function(){h=R();g=0;m=R();p=n=null},destroy:function(){m=k=h=null;delete b[a]},info:function(){return P({},k,{size:g})}}}var b={};a.info=function(){var a={};q(b,function(b,e){a[e]=b.info()});
return a};a.get=function(a){return b[a]};return a}}function Wf(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function $c(a,b){function d(a,b,c){var d=/^([@&<]|=(\*?))(\??)\s*([\w$]*)$/,e=R();q(a,function(a,g){a=a.trim();if(a in p)e[g]=p[a];else{var f=a.match(d);if(!f)throw aa("iscp",b,g,a,c?"controller bindings definition":"isolate scope definition");e[g]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||g};f[4]&&(p[a]=e[g])}});return e}function c(a){var b=
a.charAt(0);if(!b||b!==N(b))throw aa("baddir",a);if(a!==a.trim())throw aa("baddir",a);}function e(a){var b=a.require||a.controller&&a.name;!I(b)&&G(b)&&q(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var f={},g=/^\s*directive:\s*([\w-]+)\s+(.*)$/,k=/(([\w-]+)(?::([^;]+))?;?)/,h=ve("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,m=/^(on[a-z]+|formaction)$/,p=R();this.directive=function ic(b,d){hb(b,"name");Ha(b,"directive");F(b)?(c(b),hb(d,"directiveFactory"),
f.hasOwnProperty(b)||(f[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];q(f[b],function(g,f){try{var h=a.invoke(g);C(h)?h={compile:ka(h)}:!h.compile&&h.link&&(h.compile=ka(h.link));h.priority=h.priority||0;h.index=f;h.name=h.name||b;h.require=e(h);var k=h,l=h.restrict;if(l&&(!F(l)||!/[EACM]/.test(l)))throw aa("badrestrict",l,b);k.restrict=l||"EA";h.$$moduleName=g.$$moduleName;d.push(h)}catch(m){c(m)}});return d}])),f[b].push(d)):q(b,Xb(ic));return this};this.component=
function w(a,b){function c(a){function e(b){return C(b)||I(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var g=b.template||b.templateUrl?b.template:"",f={controller:d,controllerAs:ug(b.controller)||b.controllerAs||"$ctrl",template:e(g),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};q(b,function(a,b){"$"===b.charAt(0)&&(f[b]=a)});return f}if(!F(a))return q(a,Xb(Ta(this,w))),this;var d=b.controller||function(){};
q(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,C(d)&&(d[b]=a))});c.$inject=["$injector"];return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return u(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var n=!0;this.debugInfoEnabled=function(a){return u(a)?(n=a,this):n};var B=!1;this.preAssignBindingsEnabled=function(a){return u(a)?
(B=a,this):B};var v=!1;this.strictComponentBindingsEnabled=function(a){return u(a)?(v=a,this):v};var E=10;this.onChangesTtl=function(a){return arguments.length?(E=a,this):E};var A=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(A=a,this):A};var s=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(s=a,this):s};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(a,
b,c,e,p,V,O,qa,L,r){function la(){try{if(!--Ea)throw ga=void 0,aa("infchng",E);O.$apply(function(){for(var a=0,b=ga.length;a<b;++a)try{ga[a]()}catch(d){c(d)}ga=void 0})}finally{Ea++}}function rc(a,b){if(b){var c=Object.keys(b),d,e,g;d=0;for(e=c.length;d<e;d++)g=c[d],this[g]=b[g]}else this.$attr={};this.$$element=a}function Oa(a,b,c){Aa.innerHTML="<span "+b+">";b=Aa.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function Pa(a,b){try{a.addClass(b)}catch(c){}}
function ba(a,b,c,d,e){a instanceof z||(a=z(a));var g=Sa(a,b,a,c,d,e);ba.$$addScopeClass(a);var f=null;return function(b,c,d){if(!a)throw aa("multilink");hb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;d=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude);f||(f=(d=d&&d[0])?"foreignobject"!==ya(d)&&ha.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==f?z(fa(f,z("<div></div>").append(a).html())):c?Ua.clone.call(a):
a;if(k)for(var l in k)d.data("$"+l+"Controller",k[l].instance);ba.$$addScopeInfo(d,b);c&&c(d,b);g&&g(b,d,d,h);c||(a=g=null);return d}}function Sa(a,b,c,d,e,g){function f(a,c,d,e){var g,k,l,m,p,n,H;if(K)for(H=Array(c.length),m=0;m<h.length;m+=3)g=h[m],H[g]=c[g];else H=c;m=0;for(p=h.length;m<p;)k=H[h[m++]],c=h[m++],g=h[m++],c?(c.scope?(l=a.$new(),ba.$$addScopeInfo(z(k),l)):l=a,n=c.transcludeOnThisElement?Qa(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?Qa(a,b):null,c(g,l,k,d,n)):g&&g(a,k.childNodes,
void 0,e)}for(var h=[],k=I(a)||a instanceof z,l,m,p,n,K,H=0;H<a.length;H++){l=new rc;11===Ba&&Ca(a,H,k);m=sc(a[H],[],l,0===H?d:void 0,e);(g=m.length?Y(m,a[H],l,b,c,null,[],[],g):null)&&g.scope&&ba.$$addScopeClass(l.$$element);l=g&&g.terminal||!(p=a[H].childNodes)||!p.length?null:Sa(p,g?(g.transcludeOnThisElement||!g.templateOnThisElement)&&g.transclude:b);if(g||l)h.push(H,g,l),n=!0,K=K||g;g=null}return n?f:null}function Ca(a,b,c){var d=a[b],e=d.parentNode,g;if(d.nodeType===Ma)for(;;){g=e?d.nextSibling:
a[b+1];if(!g||g.nodeType!==Ma)break;d.nodeValue+=g.nodeValue;g.parentNode&&g.parentNode.removeChild(g);c&&g===a[b+1]&&a.splice(b+1,1)}}function Qa(a,b,c){function d(e,g,f,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,g,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:h})}var e=d.$$slots=R(),g;for(g in b.$$slots)e[g]=b.$$slots[g]?Qa(a,b.$$slots[g],c):null;return d}function sc(a,b,c,d,e){var g=c.$attr,f;switch(a.nodeType){case 1:f=ya(a);X(b,Da(f),"E",d,e);for(var h,l,
m,p,n=a.attributes,K=0,H=n&&n.length;K<H;K++){var B=!1,w=!1;h=n[K];l=h.name;m=h.value;h=Da(l);(p=Na.test(h))&&(l=l.replace(qd,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));(h=h.match(Ra))&&ea(h[1])&&(B=l,w=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6));h=Da(l.toLowerCase());g[h]=l;if(p||!c.hasOwnProperty(h))c[h]=m,md(a,h)&&(c[h]=!0);va(a,b,m,h,p);X(b,h,"A",d,e,B,w)}"input"===f&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off");if(!Ka)break;g=a.className;
G(g)&&(g=g.animVal);if(F(g)&&""!==g)for(;a=k.exec(g);)h=Da(a[2]),X(b,h,"C",d,e)&&(c[h]=Q(a[3])),g=g.substr(a.index+a[0].length);break;case Ma:ma(b,a.nodeValue);break;case 8:if(!Ja)break;M(a,b,c,d,e)}b.sort(ka);return b}function M(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=Da(f[1]);X(b,h,"M",d,e)&&(c[h]=Q(f[2]))}}catch(k){}}function rd(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw aa("uterdir",b,c);1===a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);
d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return z(d)}function S(a,b,c){return function(d,e,g,f,h){e=rd(e[0],b,c);return a(d,e,g,f,h)}}function U(a,b,c,d,e,g){var f;return a?ba(b,c,d,e,g):function(){f||(f=ba(b,c,d,e,g),b=c=g=null);return f.apply(this,arguments)}}function Y(a,b,d,e,g,f,h,k,l){function m(a,b,c,d){if(a){c&&(a=S(a,c,d));a.require=t.require;a.directiveName=L;if(O===t||t.$$isolateScope)a=ta(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=S(b,c,d));b.require=t.require;b.directiveName=
L;if(O===t||t.$$isolateScope)b=ta(b,{isolateScope:!0});k.push(b)}}function p(a,e,g,f,l){function m(a,b,c,d){var e;bb(a)||(d=c,c=b,b=a,a=void 0);qa&&(e=E);c||(c=qa?L.parent():L);if(d){var g=l.$$slots[d];if(g)return g(a,b,e,c,ua);if(x(g))throw aa("noslot",d,za(L));}else return l(a,b,e,c,ua)}var n,t,v,s,T,E,V,L;b===g?(f=d,L=d.$$element):(L=z(g),f=new rc(L,d));T=e;O?s=e.$new(!0):H&&(T=e.$parent);l&&(V=m,V.$$boundTransclude=l,V.isSlotFilled=function(a){return!!l.$$slots[a]});w&&(E=ca(L,f,V,w,s,e,O));O&&
(ba.$$addScopeInfo(L,s,!0,!(A&&(A===O||A===O.$$originalDirective))),ba.$$addScopeClass(L,!0),s.$$isolateBindings=O.$$isolateBindings,t=oa(e,f,s,s.$$isolateBindings,O),t.removeWatches&&s.$on("$destroy",t.removeWatches));for(n in E){t=w[n];v=E[n];var Ib=t.$$bindings.bindToController;if(B){v.bindingInfo=Ib?oa(T,f,v.instance,Ib,t):{};var r=v();r!==v.instance&&(v.instance=r,L.data("$"+t.name+"Controller",r),v.bindingInfo.removeWatches&&v.bindingInfo.removeWatches(),v.bindingInfo=oa(T,f,v.instance,Ib,t))}else v.instance=
v(),L.data("$"+t.name+"Controller",v.instance),v.bindingInfo=oa(T,f,v.instance,Ib,t)}q(w,function(a,b){var c=a.require;a.bindToController&&!I(c)&&G(c)&&P(E[b].instance,W(b,c,L,E))});q(E,function(a){var b=a.instance;if(C(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(C(b.$onInit))try{b.$onInit()}catch(e){c(e)}C(b.$doCheck)&&(T.$watch(function(){b.$doCheck()}),b.$doCheck());C(b.$onDestroy)&&T.$on("$destroy",function(){b.$onDestroy()})});n=0;for(t=h.length;n<t;n++)v=h[n],
wa(v,v.isolateScope?s:e,L,f,v.require&&W(v.directiveName,v.require,L,E),V);var ua=e;O&&(O.template||null===O.templateUrl)&&(ua=s);a&&a(ua,g.childNodes,void 0,l);for(n=k.length-1;0<=n;n--)v=k[n],wa(v,v.isolateScope?s:e,L,f,v.require&&W(v.directiveName,v.require,L,E),V);q(E,function(a){a=a.instance;C(a.$postLink)&&a.$postLink()})}l=l||{};for(var n=-Number.MAX_VALUE,H=l.newScopeDirective,w=l.controllerDirectives,O=l.newIsolateScopeDirective,A=l.templateDirective,s=l.nonTlbTranscludeDirective,T=!1,E=
!1,qa=l.hasElementTranscludeDirective,v=d.$$element=z(b),t,L,V,r=e,ua,la=!1,u=!1,y,Ca=0,Oa=a.length;Ca<Oa;Ca++){t=a[Ca];var Pa=t.$$start,D=t.$$end;Pa&&(v=rd(b,Pa,D));V=void 0;if(n>t.priority)break;if(y=t.scope)t.templateUrl||(G(y)?($("new/isolated scope",O||H,t,v),O=t):$("new/isolated scope",O,t,v)),H=H||t;L=t.name;if(!la&&(t.replace&&(t.templateUrl||t.template)||t.transclude&&!t.$$tlb)){for(y=Ca+1;la=a[y++];)if(la.transclude&&!la.$$tlb||la.replace&&(la.templateUrl||la.template)){u=!0;break}la=!0}!t.templateUrl&&
t.controller&&(w=w||R(),$("'"+L+"' controller",w[L],t,v),w[L]=t);if(y=t.transclude)if(T=!0,t.$$tlb||($("transclusion",s,t,v),s=t),"element"===y)qa=!0,n=t.priority,V=v,v=d.$$element=z(ba.$$createComment(L,d[L])),b=v[0],ja(g,xa.call(V,0),b),V[0].$$parentNode=V[0].parentNode,r=U(u,V,e,n,f&&f.name,{nonTlbTranscludeDirective:s});else{var F=R();if(G(y)){V=[];var Qa=R(),M=R();q(y,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Qa[a]=b;F[b]=null;M[b]=c});q(v.contents(),function(a){var b=Qa[Da(ya(a))];
b?(M[b]=!0,F[b]=F[b]||[],F[b].push(a)):V.push(a)});q(M,function(a,b){if(!a)throw aa("reqslot",b);});for(var Sa in F)F[Sa]&&(F[Sa]=U(u,F[Sa],e))}else V=z(oc(b)).contents();v.empty();r=U(u,V,e,void 0,void 0,{needsNewScope:t.$$isolateScope||t.$$newScope});r.$$slots=F}if(t.template)if(E=!0,$("template",A,t,v),A=t,y=C(t.template)?t.template(v,d):t.template,y=Ha(y),t.replace){f=t;V=lc.test(y)?sd(fa(t.templateNamespace,Q(y))):[];b=V[0];if(1!==V.length||1!==b.nodeType)throw aa("tplrt",L,"");ja(g,v,b);Oa=
{$attr:{}};y=sc(b,[],Oa);var N=a.splice(Ca+1,a.length-(Ca+1));(O||H)&&Z(y,O,H);a=a.concat(y).concat(N);da(d,Oa);Oa=a.length}else v.html(y);if(t.templateUrl)E=!0,$("template",A,t,v),A=t,t.replace&&(f=t),p=ia(a.splice(Ca,a.length-Ca),v,d,g,T&&r,h,k,{controllerDirectives:w,newScopeDirective:H!==t&&H,newIsolateScopeDirective:O,templateDirective:A,nonTlbTranscludeDirective:s}),Oa=a.length;else if(t.compile)try{ua=t.compile(v,d,r);var tc=t.$$originalDirective||t;C(ua)?m(null,Ta(tc,ua),Pa,D):ua&&m(Ta(tc,
ua.pre),Ta(tc,ua.post),Pa,D)}catch(X){c(X,za(v))}t.terminal&&(p.terminal=!0,n=Math.max(n,t.priority))}p.scope=H&&!0===H.scope;p.transcludeOnThisElement=T;p.templateOnThisElement=E;p.transclude=r;l.hasElementTranscludeDirective=qa;return p}function W(a,b,c,d){var e;if(F(b)){var g=b.match(l);b=b.substring(g[0].length);var f=g[1]||g[3],g="?"===g[2];"^^"===f?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h="$"+b+"Controller";e=f?c.inheritedData(h):c.data(h)}if(!e&&!g)throw aa("ctreq",b,a);}else if(I(b))for(e=
[],f=0,g=b.length;f<g;f++)e[f]=W(a,b[f],c,d);else G(b)&&(e={},q(b,function(b,g){e[g]=W(a,b,c,d)}));return e||null}function ca(a,b,c,d,e,g,f){var h=R(),k;for(k in d){var l=d[k],m={$scope:l===f||l.$$isolateScope?e:g,$element:a,$attrs:b,$transclude:c},p=l.controller;"@"===p&&(p=b[l.name]);m=V(p,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}function Z(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=$b(a[d],{$$isolateScope:b,$$newScope:c})}function X(b,c,e,g,h,k,l){if(c===
h)return null;var m=null;if(f.hasOwnProperty(c)){h=a.get(c+"Directive");for(var p=0,n=h.length;p<n;p++)if(c=h[p],(x(g)||g>c.priority)&&-1!==c.restrict.indexOf(e)){k&&(c=$b(c,{$$start:k,$$end:l}));if(!c.$$bindings){var H=m=c,K=c.name,t={isolateScope:null,bindToController:null};G(H.scope)&&(!0===H.bindToController?(t.bindToController=d(H.scope,K,!0),t.isolateScope={}):t.isolateScope=d(H.scope,K,!1));G(H.bindToController)&&(t.bindToController=d(H.bindToController,K,!0));if(t.bindToController&&!H.controller)throw aa("noctrl",
K);m=m.$$bindings=t;G(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}b.push(c);m=c}}return m}function ea(b){if(f.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function da(a,b){var c=b.$attr,d=a.$attr;q(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+(("style"===e?";":" ")+b[e]):b[e]),a.$set(e,d,!0,c[e]))});q(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}
function ia(a,b,d,g,f,h,k,l){var m=[],p,n,H=b[0],t=a.shift(),B=$b(t,{templateUrl:null,transclude:null,replace:null,$$originalDirective:t}),v=C(t.templateUrl)?t.templateUrl(b,d):t.templateUrl,O=t.templateNamespace;b.empty();e(v).then(function(c){var e,K;c=Ha(c);if(t.replace){c=lc.test(c)?sd(fa(O,Q(c))):[];e=c[0];if(1!==c.length||1!==e.nodeType)throw aa("tplrt",t.name,v);c={$attr:{}};ja(g,b,e);var w=sc(e,[],c);G(t.scope)&&Z(w,!0);a=w.concat(a);da(d,c)}else e=H,b.html(c);a.unshift(B);p=Y(a,e,d,f,b,t,
h,k,l);q(g,function(a,c){a===e&&(g[c]=b[0])});for(n=Sa(b[0].childNodes,f);m.length;){c=m.shift();K=m.shift();var s=m.shift(),A=m.shift(),w=b[0];if(!c.$$destroyed){if(K!==H){var T=K.className;l.hasElementTranscludeDirective&&t.replace||(w=oc(e));ja(s,z(K),w);Pa(z(w),T)}K=p.transcludeOnThisElement?Qa(c,p.transclude,A):A;p(n,c,w,g,K)}}m=null}).catch(function(a){bc(a)&&c(a)});return function(a,b,c,d,e){a=e;b.$$destroyed||(m?m.push(b,c,d,a):(p.transcludeOnThisElement&&(a=Qa(b,p.transclude,e)),p(n,b,c,
d,a)))}}function ka(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function $(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw aa("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,za(d));}function ma(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&ba.$$addBindingClass(a);return function(a,c){var e=c.parent();b||ba.$$addBindingClass(e);ba.$$addBindingInfo(e,d.expressions);
a.$watch(d,function(a){c[0].nodeValue=a})}}})}function fa(a,b){a=N(a||"html");switch(a){case "svg":case "math":var c=y.document.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function pa(a,b){if("srcdoc"===b)return qa.HTML;var c=ya(a);if("src"===b||"ngSrc"===b){if(-1===["img","video","audio","source","track"].indexOf(c))return qa.RESOURCE_URL}else if("xlinkHref"===b||"form"===c&&"action"===b||"link"===c&&"href"===b)return qa.RESOURCE_URL}
function va(a,c,d,e,g){var f=pa(a,e),k=h[e]||g,l=b(d,!g,f,k);if(l){if("multiple"===e&&"select"===ya(a))throw aa("selmulti",za(a));if(m.test(e))throw aa("nodomevents");c.push({priority:100,compile:function(){return{pre:function(a,c,g){c=g.$$observers||(g.$$observers=R());var h=g[e];h!==d&&(l=h&&b(h,!0,f,k),d=h);l&&(g[e]=l(a),(c[e]||(c[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||a).$watch(l,function(a,b){"class"===e&&a!==b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function ja(a,b,c){var d=
b[0],e=b.length,g=d.parentNode,f,h;if(a)for(f=0,h=a.length;f<h;f++)if(a[f]===d){a[f++]=c;h=f+e-1;for(var k=a.length;f<k;f++,h++)h<k?a[f]=a[h]:delete a[f];a.length-=e-1;a.context===d&&(a.context=c);break}g&&g.replaceChild(c,d);a=y.document.createDocumentFragment();for(f=0;f<e;f++)a.appendChild(b[f]);z.hasData(d)&&(z.data(c,z.data(d)),z(d).off("$destroy"));z.cleanData(a.querySelectorAll("*"));for(f=1;f<e;f++)delete b[f];b[0]=c;b.length=1}function ta(a,b){return P(function(){return a.apply(null,arguments)},
a,b)}function wa(a,b,d,e,g,f){try{a(b,d,e,g,f)}catch(h){c(h,za(d))}}function na(a,b){if(v)throw aa("missingattr",a,b);}function oa(a,c,d,e,g){function f(b,c,e){C(d.$onChanges)&&!cc(c,e)&&(ga||(a.$$postDigest(la),ga=[]),m||(m={},ga.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Jb(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],l={},m;q(e,function(e,h){var m=e.attrName,n=e.optional,K,B,w,v;switch(e.mode){case "@":n||ra.call(c,m)||(na(m,g.name),d[h]=c[m]=void 0);n=c.$observe(m,function(a){if(F(a)||
La(a))f(h,a,d[h]),d[h]=a});c.$$observers[m].$$scope=a;K=c[m];F(K)?d[h]=b(K)(a):La(K)&&(d[h]=K);l[h]=new Jb(uc,d[h]);k.push(n);break;case "=":if(!ra.call(c,m)){if(n)break;na(m,g.name);c[m]=void 0}if(n&&!c[m])break;B=p(c[m]);v=B.literal?sa:cc;w=B.assign||function(){K=d[h]=B(a);throw aa("nonassign",c[m],m,g.name);};K=d[h]=B(a);n=function(b){v(b,d[h])||(v(b,K)?w(a,b=d[h]):d[h]=b);return K=b};n.$stateful=!0;n=e.collection?a.$watchCollection(c[m],n):a.$watch(p(c[m],n),null,B.literal);k.push(n);break;case "<":if(!ra.call(c,
m)){if(n)break;na(m,g.name);c[m]=void 0}if(n&&!c[m])break;B=p(c[m]);var O=B.literal,s=d[h]=B(a);l[h]=new Jb(uc,d[h]);n=a.$watch(B,function(a,b){if(b===a){if(b===s||O&&sa(b,s))return;b=s}f(h,a,b);d[h]=a},O);k.push(n);break;case "&":n||ra.call(c,m)||na(m,g.name);B=c.hasOwnProperty(m)?p(c[m]):D;if(B===D&&n)break;d[h]=function(b){return B(a,b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var Ia=/^\w/,Aa=y.document.createElement("div"),Ja=A,Ka=
s,Ea=E,ga;rc.prototype={$normalize:Da,$addClass:function(a){a&&0<a.length&&L.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&L.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=td(a,b);c&&c.length&&L.addClass(this.$$element,c);(c=td(b,a))&&c.length&&L.removeClass(this.$$element,c)},$set:function(a,b,d,e){var g=md(this.$$element[0],a),f=ud[a],h=a;g?(this.$$element.prop(a,b),e=g):f&&(this[f]=b,h=f);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Xc(a,
"-"));g=ya(this.$$element);if("a"===g&&("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=b=null==b?b:r(b,"src"===a);else if("img"===g&&"srcset"===a&&u(b)){for(var g="",f=Q(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(f)?k:/(,)/,f=f.split(k),k=Math.floor(f.length/2),l=0;l<k;l++)var m=2*l,g=g+r(Q(f[m]),!0),g=g+(" "+Q(f[m+1]));f=Q(f[2*l]).split(/\s/);g+=r(Q(f[0]),!0);2===f.length&&(g+=" "+Q(f[1]));this[a]=b=g}!1!==d&&(null==b?this.$$element.removeAttr(e):Ia.test(e)?this.$$element.attr(e,
b):Oa(this.$$element[0],e,b));(a=this.$$observers)&&q(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=R()),e=d[a]||(d[a]=[]);e.push(b);O.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||x(c[a])||b(c[a])});return function(){cb(e,b)}}};var Fa=b.startSymbol(),Ga=b.endSymbol(),Ha="{{"===Fa&&"}}"===Ga?ab:function(a){return a.replace(/\{\{/g,Fa).replace(/}}/g,Ga)},Na=/^ngAttr[A-Z]/,Ra=/^(.+)Start$/;ba.$$addBindingInfo=n?function(a,b){var c=
a.data("$binding")||[];I(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:D;ba.$$addBindingClass=n?function(a){Pa(a,"ng-binding")}:D;ba.$$addScopeInfo=n?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:D;ba.$$addScopeClass=n?function(a,b){Pa(a,b?"ng-isolate-scope":"ng-scope")}:D;ba.$$createComment=function(a,b){var c="";n&&(c=" "+(a||"")+": ",b&&(c+=b+" "));return y.document.createComment(c)};return ba}]}function Jb(a,b){this.previousValue=a;this.currentValue=b}
function Da(a){return a.replace(qd,"").replace(vg,function(a,d,c){return c?d.toUpperCase():d})}function td(a,b){var d="",c=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],k=0;k<e.length;k++)if(g===e[k])continue a;d+=(0<d.length?" ":"")+g}return d}function sd(a){a=z(a);var b=a.length;if(1>=b)return a;for(;b--;){var d=a[b];(8===d.nodeType||d.nodeType===Ma&&""===d.nodeValue.trim())&&wg.call(a,b,1)}return a}function ug(a,b){if(b&&F(b))return b;if(F(a)){var d=vd.exec(a);if(d)return d[3]}}
function Af(){var a={},b=!1;this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,c){Ha(b,"controller");G(b)?P(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector","$window",function(d,c){function e(a,b,c,d){if(!a||!G(a.$scope))throw M("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,g,k,h){var l,m,p;k=!0===k;h&&F(h)&&(p=h);if(F(f)){h=f.match(vd);if(!h)throw wd("ctrlfmt",f);m=h[1];p=p||h[3];f=a.hasOwnProperty(m)?a[m]:Zc(g.$scope,m,!0)||(b?Zc(c,m,!0):
void 0);if(!f)throw wd("ctrlreg",m);sb(f,m,!0)}if(k)return k=(I(f)?f[f.length-1]:f).prototype,l=Object.create(k||null),p&&e(g,p,l,m||f.name),P(function(){var a=d.invoke(f,l,g,m);a!==l&&(G(a)||C(a))&&(l=a,p&&e(g,p,l,m||f.name));return l},{instance:l,identifier:p});l=d.instantiate(f,g,m);p&&e(g,p,l,m||f.name);return l}}]}function Bf(){this.$get=["$window",function(a){return z(a.document)}]}function Cf(){this.$get=["$document","$rootScope",function(a,b){function d(){e=c.hidden}var c=a[0],e=c&&c.hidden;
a.on("visibilitychange",d);b.$on("$destroy",function(){a.off("visibilitychange",d)});return function(){return e}}]}function Df(){this.$get=["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function vc(a){return G(a)?da(a)?a.toISOString():eb(a):a}function If(){this.$get=function(){return function(a){if(!a)return"";var b=[];Qc(a,function(a,c){null===a||x(a)||C(a)||(I(a)?q(a,function(a){b.push(ia(c)+"="+ia(vc(a)))}):b.push(ia(c)+"="+ia(vc(a))))});return b.join("&")}}}function Jf(){this.$get=
function(){return function(a){function b(a,e,f){null===a||x(a)||(I(a)?q(a,function(a,c){b(a,e+"["+(G(a)?c:"")+"]")}):G(a)&&!da(a)?Qc(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):d.push(ia(e)+"="+ia(vc(a))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function wc(a,b){if(F(a)){var d=a.replace(xg,"").trim();if(d){var c=b("Content-Type"),c=c&&0===c.indexOf(xd),e;(e=c)||(e=(e=d.match(yg))&&zg[e[0]].test(d));if(e)try{a=Tc(d)}catch(f){if(!c)return a;throw Kb("baddata",a,f);}}}return a}function yd(a){var b=
R(),d;F(a)?q(a.split("\n"),function(a){d=a.indexOf(":");var e=N(Q(a.substr(0,d)));a=Q(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):G(a)&&q(a,function(a,d){var f=N(d),g=Q(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function zd(a){var b;return function(d){b||(b=yd(a));return d?(d=b[N(d)],void 0===d&&(d=null),d):b}}function Ad(a,b,d,c){if(C(c))return c(a,b,d);q(c,function(c){a=c(a,b,d)});return a}function Hf(){var a=this.defaults={transformResponse:[wc],transformRequest:[function(a){return G(a)&&"[object File]"!==
ha.call(a)&&"[object Blob]"!==ha.call(a)&&"[object FormData]"!==ha.call(a)?eb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:pa(xc),put:pa(xc),patch:pa(xc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},b=!1;this.useApplyAsync=function(a){return u(a)?(b=!!a,this):b};var d=this.interceptors=[],c=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory",
"$rootScope","$q","$injector","$sce",function(e,f,g,k,h,l,m,p){function n(b){function c(a,b){for(var d=0,e=b.length;d<e;){var g=b[d++],f=b[d++];a=a.then(g,f)}b.length=0;return a}function d(a,b){var c,e={};q(a,function(a,d){C(a)?(c=a(b),null!=c&&(e[d]=c)):e[d]=a});return e}function g(a){var b=P({},a);b.data=Ad(a.data,a.headers,a.status,f.transformResponse);a=a.status;return 200<=a&&300>a?b:l.reject(b)}if(!G(b))throw M("$http")("badreq",b);if(!F(p.valueOf(b.url)))throw M("$http")("badreq",b.url);var f=
P({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},b);f.headers=function(b){var c=a.headers,e=P({},b.headers),g,f,h,c=P({},c.common,c[N(b.method)]);a:for(g in c){f=N(g);for(h in e)if(N(h)===f)continue a;e[g]=c[g]}return d(e,pa(b))}(b);f.method=ub(f.method);f.paramSerializer=F(f.paramSerializer)?m.get(f.paramSerializer):f.paramSerializer;e.$$incOutstandingRequestCount();var h=[],k=[];b=
l.resolve(f);q(s,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError);(a.response||a.responseError)&&k.push(a.response,a.responseError)});b=c(b,h);b=b.then(function(b){var c=b.headers,d=Ad(b.data,zd(c),void 0,b.transformRequest);x(d)&&q(c,function(a,b){"content-type"===N(b)&&delete c[b]});x(b.withCredentials)&&!x(a.withCredentials)&&(b.withCredentials=a.withCredentials);return B(b,d).then(g,g)});b=c(b,k);return b=b.finally(function(){e.$$completeOutstandingRequest(D)})}function B(c,
d){function e(a){if(a){var c={};q(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}});return c}}function k(a,c,d,e,g){function f(){m(c,a,d,e,g)}L&&(200<=a&&300>a?L.put(z,[a,c,yd(d),e,g]):L.remove(z));b?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function m(a,b,d,e,g){b=-1<=b?b:0;(200<=b&&300>b?s.resolve:s.reject)({data:a,status:b,headers:zd(d),config:c,statusText:e,xhrStatus:g})}function t(a){m(a.data,a.status,pa(a.headers()),a.statusText,a.xhrStatus)}
function B(){var a=n.pendingRequests.indexOf(c);-1!==a&&n.pendingRequests.splice(a,1)}var s=l.defer(),qa=s.promise,L,r,la=c.headers,y="jsonp"===N(c.method),z=c.url;y?z=p.getTrustedResourceUrl(z):F(z)||(z=p.valueOf(z));z=v(z,c.paramSerializer(c.params));y&&(z=E(z,c.jsonpCallbackParam));n.pendingRequests.push(c);qa.then(B,B);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(L=G(c.cache)?c.cache:G(a.cache)?a.cache:A);L&&(r=L.get(z),u(r)?r&&C(r.then)?r.then(t,t):I(r)?m(r[1],r[0],
pa(r[2]),r[3],r[4]):m(r,200,{},"OK","complete"):L.put(z,qa));x(r)&&((r=J(c.url)?g()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(la[c.xsrfHeaderName||a.xsrfHeaderName]=r),f(c.method,z,d,k,la,c.timeout,c.withCredentials,c.responseType,e(c.eventHandlers),e(c.uploadEventHandlers)));return qa}function v(a,b){0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}function E(a,b){var c=a.split("?");if(2<c.length)throw Kb("badjsonp",a);c=fc(c[1]);q(c,function(c,d){if("JSON_CALLBACK"===c)throw Kb("badjsonp",
a);if(d===b)throw Kb("badjsonp",b,a);});return a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var A=k("$http");a.paramSerializer=F(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var s=[];q(d,function(a){s.unshift(F(a)?m.get(a):m.invoke(a))});var J=Ag(c);n.pendingRequests=[];(function(a){q(arguments,function(a){n[a]=function(b,c){return n(P({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){q(arguments,function(a){n[a]=function(b,c,d){return n(P({},d||
{},{method:a,url:b,data:c}))}})})("post","put","patch");n.defaults=a;return n}]}function Lf(){this.$get=function(){return function(){return new y.XMLHttpRequest}}}function Kf(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,d,c){return Bg(a,c,a.defer,b,d[0])}]}function Bg(a,b,d,c,e){function f(a,b,d){a=a.replace("JSON_CALLBACK",b);var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m);f.removeEventListener("error",
m);e.body.removeChild(f);f=null;var g=-1,B="unknown";a&&("load"!==a.type||c.wasCalled(b)||(a={type:"error"}),B=a.type,g="error"===a.type?404:200);d&&d(g,B)};f.addEventListener("load",m);f.addEventListener("error",m);e.body.appendChild(f);return m}return function(e,k,h,l,m,p,n,B,v,E){function A(a){H="timeout"===a;r&&r();w&&w.abort()}function s(a,b,c,e,g,f){u(T)&&d.cancel(T);r=w=null;a(b,c,e,g,f)}k=k||a.url();if("jsonp"===N(e))var J=c.createCallback(k),r=f(k,J,function(a,b){var d=200===a&&c.getResponse(J);
s(l,a,d,"",b,"complete");c.removeCallback(J)});else{var w=b(e,k),H=!1;w.open(e,k,!0);q(m,function(a,b){u(a)&&w.setRequestHeader(b,a)});w.onload=function(){var a=w.statusText||"",b="response"in w?w.response:w.responseText,c=1223===w.status?204:w.status;0===c&&(c=b?200:"file"===ma(k).protocol?404:0);s(l,c,b,w.getAllResponseHeaders(),a,"complete")};w.onerror=function(){s(l,-1,null,null,"","error")};w.ontimeout=function(){s(l,-1,null,null,"","timeout")};w.onabort=function(){s(l,-1,null,null,"",H?"timeout":
"abort")};q(v,function(a,b){w.addEventListener(b,a)});q(E,function(a,b){w.upload.addEventListener(b,a)});n&&(w.withCredentials=!0);if(B)try{w.responseType=B}catch(K){if("json"!==B)throw K;}w.send(x(h)?null:h)}if(0<p)var T=d(function(){A("timeout")},p);else p&&C(p.then)&&p.then(function(){A(u(p.$$timeoutId)?"timeout":"abort")})}}function Ff(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler",
"$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(p,a).replace(n,b)}function k(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function h(f,h,p,n){function s(a){try{var b=a;a=p?e.getTrusted(p,b):e.valueOf(b);return n&&!u(a)?a:hc(a)}catch(d){c(Ea.interr(f,d))}}if(!f.length||-1===f.indexOf(a)){var J;h||(h=g(f),J=ka(h),J.exp=f,J.expressions=[],J.$$watchDelegate=k);return J}n=!!n;var q,w,H=0,K=[],T=[];J=f.length;for(var t=[],r=[];H<J;)if(-1!==(q=f.indexOf(a,
H))&&-1!==(w=f.indexOf(b,q+l)))H!==q&&t.push(g(f.substring(H,q))),H=f.substring(q+l,w),K.push(H),T.push(d(H,s)),H=w+m,r.push(t.length),t.push("");else{H!==J&&t.push(g(f.substring(H)));break}p&&1<t.length&&Ea.throwNoconcat(f);if(!h||K.length){var O=function(a){for(var b=0,c=K.length;b<c;b++){if(n&&x(a[b]))return;t[r[b]]=a[b]}return t.join("")};return P(function(a){var b=0,d=K.length,e=Array(d);try{for(;b<d;b++)e[b]=T[b](a);return O(e)}catch(g){c(Ea.interr(f,g))}},{exp:f,expressions:K,$$watchDelegate:function(a,
b){var c;return a.$watchGroup(T,function(d,e){var g=O(d);b.call(this,g,d!==e?c:g,a);c=g})}})}}var l=a.length,m=b.length,p=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");h.startSymbol=function(){return a};h.endSymbol=function(){return b};return h}]}function Gf(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,d,c,e){function f(f,h,l,m){function p(){n?f.apply(null,B):f(A)}var n=4<arguments.length,B=n?xa.call(arguments,4):[],v=b.setInterval,E=b.clearInterval,
A=0,s=u(m)&&!m,J=(s?c:d).defer(),q=J.promise;l=u(l)?l:0;q.$$intervalId=v(function(){s?e.defer(p):a.$evalAsync(p);J.notify(A++);0<l&&A>=l&&(J.resolve(A),E(q.$$intervalId),delete g[q.$$intervalId]);s||a.$apply()},h);g[q.$$intervalId]=J;return q}var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].promise.$$state.pur=!0,g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return f}]}function yc(a){a=a.split("/");for(var b=a.length;b--;)a[b]=
fb(a[b].replace(/%2F/g,"/"));return a.join("/")}function Bd(a,b){var d=ma(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=Z(d.port)||Cg[d.protocol]||null}function Cd(a,b,d){if(Dg.test(a))throw kb("badpath",a);var c="/"!==a.charAt(0);c&&(a="/"+a);a=ma(a);for(var c=(c&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname).split("/"),e=c.length;e--;)c[e]=decodeURIComponent(c[e]),d&&(c[e]=c[e].replace(/\//g,"%2F"));d=c.join("/");b.$$path=d;b.$$search=fc(a.search);b.$$hash=decodeURIComponent(a.hash);
b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function zc(a,b){return a.slice(0,b.length)===b}function va(a,b){if(zc(b,a))return b.substr(a.length)}function Ka(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function lb(a){return a.replace(/(#.+)|#$/,"$1")}function Ac(a,b,d){this.$$html5=!0;d=d||"";Bd(a,this);this.$$parse=function(a){var d=va(b,a);if(!F(d))throw kb("ipthprfx",a,b);Cd(d,this,!0);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=gc(this.$$search),
d=this.$$hash?"#"+fb(this.$$hash):"";this.$$url=yc(this.$$path)+(a?"?"+a:"")+d;this.$$absUrl=b+this.$$url.substr(1);this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;u(f=va(a,c))?(g=f,g=d&&u(f=va(d,f))?b+(va("/",f)||f):a+g):u(f=va(b,c))?g=b+f:b===c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function Bc(a,b,d){Bd(a,this);this.$$parse=function(c){var e=va(a,c)||va(b,c),f;x(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",x(e)&&(a=c,
this.replace())):(f=va(d,e),x(f)&&(f=e));Cd(f,this,!1);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;zc(f,e)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};this.$$compose=function(){var b=gc(this.$$search),e=this.$$hash?"#"+fb(this.$$hash):"";this.$$url=yc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+(this.$$url?d+this.$$url:"");this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(b,d){return Ka(a)===Ka(b)?(this.$$parse(b),!0):!1}}function Dd(a,b,d){this.$$html5=
!0;Bc.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a===Ka(c)?f=c:(g=va(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=gc(this.$$search),e=this.$$hash?"#"+fb(this.$$hash):"";this.$$url=yc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+d+this.$$url;this.$$urlUpdatedByLocation=!0}}function Lb(a){return function(){return this[a]}}function Ed(a,b){return function(d){if(x(d))return this[a];this[a]=
b(d);this.$$compose();return this}}function Nf(){var a="!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return u(b)?(a=b,this):a};this.html5Mode=function(a){if(La(a))return b.enabled=a,this;if(G(a)){La(a.enabled)&&(b.enabled=a.enabled);La(a.requireBase)&&(b.requireBase=a.requireBase);if(La(a.rewriteLinks)||F(a.rewriteLinks))b.rewriteLinks=a.rewriteLinks;return this}return b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,e,f,g){function k(a,
b,d){var e=l.url(),g=l.$$state;try{c.url(a,b,d),l.$$state=c.state()}catch(f){throw l.url(e),l.$$state=g,f;}}function h(a,b){d.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,m;m=c.baseHref();var p=c.url(),n;if(b.enabled){if(!m&&b.requireBase)throw kb("nobase");n=p.substring(0,p.indexOf("/",p.indexOf("//")+2))+(m||"/");m=e.history?Ac:Dd}else n=Ka(p),m=Bc;var B=n.substr(0,Ka(n).lastIndexOf("/")+1);l=new m(n,B,"#"+a);l.$$parseLinkUrl(p,p);l.$$state=c.state();var v=/^\s*(javascript|mailto):/i;
f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var h=z(a.target);"a"!==ya(h[0]);)if(h[0]===f[0]||!(h=h.parent())[0])return;if(!F(e)||!x(h.attr(e))){var e=h.prop("href"),k=h.attr("href")||h.attr("xlink:href");G(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=ma(e.animVal).href);v.test(e)||!e||h.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(e,k)||(a.preventDefault(),l.absUrl()!==c.url()&&(d.$apply(),g.angular["ff-684208-preventDefault"]=
!0))}}});lb(l.absUrl())!==lb(p)&&c.url(l.absUrl(),!0);var q=!0;c.onUrlChange(function(a,b){zc(a,B)?(d.$evalAsync(function(){var c=l.absUrl(),e=l.$$state,g;a=lb(a);l.$$parse(a);l.$$state=b;g=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;l.absUrl()===a&&(g?(l.$$parse(c),l.$$state=e,k(c,!1,e)):(q=!1,h(c,e)))}),d.$$phase||d.$digest()):g.location.href=a});d.$watch(function(){if(q||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var a=lb(c.url()),b=lb(l.absUrl()),g=c.state(),f=l.$$replace,
m=a!==b||l.$$html5&&e.history&&g!==l.$$state;if(q||m)q=!1,d.$evalAsync(function(){var b=l.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,l.$$state,g).defaultPrevented;l.absUrl()===b&&(c?(l.$$parse(a),l.$$state=g):(m&&k(b,f,g===l.$$state?null:l.$$state),h(a,g)))})}l.$$replace=!1});return l}]}function Of(){var a=!0,b=this;this.debugEnabled=function(b){return u(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){bc(a)&&(a.stack&&f?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+
a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||D;return function(){var a=[];q(arguments,function(b){a.push(c(b))});return Function.prototype.apply.call(e,b,a)}}var f=Ba||/\bEdge\//.test(d.navigator&&d.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Eg(a){return a+""}function Fg(a,
b){return"undefined"!==typeof a?a:b}function Fd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function Gg(a,b){switch(a.type){case r.MemberExpression:if(a.computed)return!1;break;case r.UnaryExpression:return 1;case r.BinaryExpression:return"+"!==a.operator?1:!1;case r.CallExpression:return!1}return void 0===b?Gd:b}function U(a,b,d){var c,e,f=a.isPure=Gg(a,d);switch(a.type){case r.Program:c=!0;q(a.body,function(a){U(a.expression,b,f);c=c&&a.expression.constant});a.constant=c;break;
case r.Literal:a.constant=!0;a.toWatch=[];break;case r.UnaryExpression:U(a.argument,b,f);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case r.BinaryExpression:U(a.left,b,f);U(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case r.LogicalExpression:U(a.left,b,f);U(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case r.ConditionalExpression:U(a.test,b,f);U(a.alternate,b,f);
U(a.consequent,b,f);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case r.Identifier:a.constant=!1;a.toWatch=[a];break;case r.MemberExpression:U(a.object,b,f);a.computed&&U(a.property,b,f);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=a.constant?[]:[a];break;case r.CallExpression:c=d=a.filter?!b(a.callee.name).$stateful:!1;e=[];q(a.arguments,function(a){U(a,b,f);c=c&&a.constant;e.push.apply(e,a.toWatch)});a.constant=
c;a.toWatch=d?e:[a];break;case r.AssignmentExpression:U(a.left,b,f);U(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case r.ArrayExpression:c=!0;e=[];q(a.elements,function(a){U(a,b,f);c=c&&a.constant;e.push.apply(e,a.toWatch)});a.constant=c;a.toWatch=e;break;case r.ObjectExpression:c=!0;e=[];q(a.properties,function(a){U(a.value,b,f);c=c&&a.value.constant;e.push.apply(e,a.value.toWatch);a.computed&&(U(a.key,b,!1),c=c&&a.key.constant,e.push.apply(e,a.key.toWatch))});a.constant=
c;a.toWatch=e;break;case r.ThisExpression:a.constant=!1;a.toWatch=[];break;case r.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Hd(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Id(a){return a.type===r.Identifier||a.type===r.MemberExpression}function Jd(a){if(1===a.body.length&&Id(a.body[0].expression))return{type:r.AssignmentExpression,left:a.body[0].expression,right:{type:r.NGValueParameter},operator:"="}}function Kd(a){this.$filter=
a}function Ld(a){this.$filter=a}function Mb(a,b,d){this.ast=new r(a,d);this.astCompiler=d.csp?new Ld(b):new Kd(b)}function Cc(a){return C(a.valueOf)?a.valueOf():Hg.call(a)}function Pf(){var a=R(),b={"true":!0,"false":!1,"null":null,undefined:void 0},d,c;this.addLiteral=function(a,c){b[a]=c};this.setIdentifierFns=function(a,b){d=a;c=b;return this};this.$get=["$filter",function(e){function f(b,c){var d,g;switch(typeof b){case "string":return g=b=b.trim(),d=a[g],d||(d=new Nb(n),d=(new Mb(d,e,n)).parse(b),
d.constant?d.$$watchDelegate=m:d.oneTime?d.$$watchDelegate=d.literal?l:h:d.inputs&&(d.$$watchDelegate=k),a[g]=d),p(d,c);case "function":return p(b,c);default:return p(D,c)}}function g(a,b,c){return null==a||null==b?a===b:"object"!==typeof a||(a=Cc(a),"object"!==typeof a||c)?a===b||a!==a&&b!==b:!1}function k(a,b,c,d,e){var f=d.inputs,h;if(1===f.length){var k=g,f=f[0];return a.$watch(function(a){var b=f(a);g(b,k,f.isPure)||(h=d(a,void 0,void 0,[b]),k=b&&Cc(b));return h},b,c,e)}for(var l=[],m=[],p=0,
n=f.length;p<n;p++)l[p]=g,m[p]=null;return a.$watch(function(a){for(var b=!1,c=0,e=f.length;c<e;c++){var k=f[c](a);if(b||(b=!g(k,l[c],f[c].isPure)))m[c]=k,l[c]=k&&Cc(k)}b&&(h=d(a,void 0,void 0,m));return h},b,c,e)}function h(a,b,c,d,e){function g(a){return d(a)}function f(a,c,d){l=a;C(b)&&b(a,c,d);u(a)&&d.$$postDigest(function(){u(l)&&h()})}var h,l;return h=d.inputs?k(a,f,c,d,e):a.$watch(g,f,c)}function l(a,b,c,d){function e(a){var b=!0;q(a,function(a){u(a)||(b=!1)});return b}var g,f;return g=a.$watch(function(a){return d(a)},
function(a,c,d){f=a;C(b)&&b(a,c,d);e(a)&&d.$$postDigest(function(){e(f)&&g()})},c)}function m(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function p(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,e=c!==l&&c!==h?function(c,e,g,f){g=d&&f?f[0]:a(c,e,g,f);return b(g,c,e)}:function(c,d,e,g){e=a(c,d,e,g);c=b(e,c,d);return u(e)?c:e},d=!a.inputs;c&&c!==k?(e.$$watchDelegate=c,e.inputs=a.inputs):b.$stateful||(e.$$watchDelegate=k,e.inputs=a.inputs?a.inputs:[a]);e.inputs&&(e.inputs=e.inputs.map(function(a){return a.isPure===
Gd?function(b){return a(b)}:a}));return e}var n={csp:Ia().noUnsafeEval,literals:na(b),isIdentifierStart:C(d)&&d,isIdentifierContinue:C(c)&&c};f.$$getAst=function(a){var b=new Nb(n);return(new Mb(b,e,n)).getAst(a).ast};return f}]}function Rf(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,d){return Md(function(a){b.$evalAsync(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function Sf(){var a=!0;this.$get=["$browser","$exceptionHandler",function(b,
d){return Md(function(a){b.defer(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function Md(a,b,d){function c(){return new e}function e(){var a=this.promise=new f;this.resolve=function(b){h(a,b)};this.reject=function(b){m(a,b)};this.notify=function(b){n(a,b)}}function f(){this.$$state={status:0}}function g(){for(;!J&&u.length;){var a=u.shift();if(!a.pur){a.pur=!0;var c=a.value,c="Possibly unhandled rejection: "+("function"===typeof c?c.toString().replace(/ \{[\s\S]*$/,
""):x(c)?"undefined":"string"!==typeof c?Fe(c,void 0):c);bc(a.value)?b(a.value,c):b(c)}}}function k(c){!d||c.pending||2!==c.status||c.pur||(0===J&&0===u.length&&a(g),u.push(c));!c.processScheduled&&c.pending&&(c.processScheduled=!0,++J,a(function(){var e,f,k;k=c.pending;c.processScheduled=!1;c.pending=void 0;try{for(var l=0,p=k.length;l<p;++l){c.pur=!0;f=k[l][0];e=k[l][c.status];try{C(e)?h(f,e(c.value)):1===c.status?h(f,c.value):m(f,c.value)}catch(n){m(f,n),n&&!0===n.$$passToExceptionHandler&&b(n)}}}finally{--J,
d&&0===J&&a(g)}}))}function h(a,b){a.$$state.status||(b===a?p(a,s("qcycle",b)):l(a,b))}function l(a,b){function c(b){g||(g=!0,l(a,b))}function d(b){g||(g=!0,p(a,b))}function e(b){n(a,b)}var f,g=!1;try{if(G(b)||C(b))f=b.then;C(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,k(a.$$state))}catch(h){d(h)}}function m(a,b){a.$$state.status||p(a,b)}function p(a,b){a.$$state.value=b;a.$$state.status=2;k(a.$$state)}function n(c,d){var e=c.$$state.pending;0>=c.$$state.status&&
e&&e.length&&a(function(){for(var a,c,f=0,g=e.length;f<g;f++){c=e[f][0];a=e[f][3];try{n(c,C(a)?a(d):d)}catch(h){b(h)}}})}function B(a){var b=new f;m(b,a);return b}function v(a,b,c){var d=null;try{C(c)&&(d=c())}catch(e){return B(e)}return d&&C(d.then)?d.then(function(){return b(a)},B):b(a)}function r(a,b,c,d){var e=new f;h(e,a);return e.then(b,c,d)}function A(a){if(!C(a))throw s("norslvr",a);var b=new f;a(function(a){h(b,a)},function(a){m(b,a)});return b}var s=M("$q",TypeError),J=0,u=[];P(f.prototype,
{then:function(a,b,c){if(x(a)&&x(b)&&x(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&k(this.$$state);return d},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return v(b,w,a)},function(b){return v(b,B,a)},b)}});var w=r;A.prototype=f.prototype;A.defer=c;A.reject=B;A.when=r;A.resolve=w;A.all=function(a){var b=new f,c=0,d=I(a)?[]:{};q(a,function(a,e){c++;r(a).then(function(a){d[e]=
a;--c||h(b,d)},function(a){m(b,a)})});0===c&&h(b,d);return b};A.race=function(a){var b=c();q(a,function(a){r(a).then(b.resolve,b.reject)});return b.promise};return A}function ag(){this.$get=["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};
f.supported=e;return f}]}function Qf(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++qb;this.$$ChildScope=null;this.$$suspended=!1}b.prototype=a;return b}var b=10,d=M("$rootScope"),c=null,e=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(f,g,k){function h(a){a.currentScope.$$destroyed=!0}function l(a){9===
Ba&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++qb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$suspended=this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function p(a){if(s.$$phase)throw d("inprog",
s.$$phase);s.$$phase=a}function n(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function B(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function v(){}function r(){for(;w.length;)try{w.shift()()}catch(a){f(a)}e=null}function A(){null===e&&(e=k.defer(function(){s.$apply(r)}))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);
d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!==this)&&d.$on("$destroy",h);return d},$watch:function(a,b,d,e){var f=g(a);b=C(b)?b:D;if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l={fn:b,last:v,get:f,exp:e||a,eq:!!d};c=null;k||(k=h.$$watchers=[],k.$$digestWatchIndex=-1);k.unshift(l);k.$$digestWatchIndex++;n(this,1);return function(){var a=cb(k,l);0<=a&&(n(h,-1),a<k.$$digestWatchIndex&&
k.$$digestWatchIndex--);c=null}},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});q(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,
b){function c(a){e=a;var b,d,g,h;if(!x(e)){if(G(e))if(ja(e))for(f!==p&&(f=p,q=f.length=0,l++),a=e.length,q!==a&&(l++,f.length=q=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==n&&(f=n={},q=0,l++);a=0;for(b in e)ra.call(e,b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(q++,f[b]=g,l++));if(q>a)for(b in l++,f)ra.call(e,b)||(q--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,m=g(a,c),p=[],n={},B=!0,q=0;return this.$watch(m,
function(){B?(B=!1,b(e,e,d)):b(e,h,d);if(k)if(G(e))if(ja(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ra.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,h,l,m,n,q,B=b,w,A=[],z,y;p("$digest");k.$$checkUrlChange();this===s&&null!==e&&(k.defer.cancel(e),r());c=null;do{q=!1;w=this;for(n=0;n<J.length;n++){try{y=J[n],l=y.fn,l(y.scope,y.locals)}catch(x){f(x)}c=null}J.length=0;a:do{if(n=!w.$$suspended&&w.$$watchers)for(n.$$digestWatchIndex=n.length;n.$$digestWatchIndex--;)try{if(a=
n[n.$$digestWatchIndex])if(m=a.get,(g=m(w))!==(h=a.last)&&!(a.eq?sa(g,h):X(g)&&X(h)))q=!0,c=a,a.last=a.eq?na(g,null):g,l=a.fn,l(g,h===v?g:h,w),5>B&&(z=4-B,A[z]||(A[z]=[]),A[z].push({msg:C(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:h}));else if(a===c){q=!1;break a}}catch(F){f(F)}if(!(n=!w.$$suspended&&w.$$watchersCount&&w.$$childHead||w!==this&&w.$$nextSibling))for(;w!==this&&!(n=w.$$nextSibling);)w=w.$parent}while(w=n);if((q||J.length)&&!B--)throw s.$$phase=null,d("infdig",
b,A);}while(q||J.length);for(s.$$phase=null;H<u.length;)try{u[H++]()}catch(D){f(D)}u.length=H=0;k.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===s&&k.$$applicationDestroyed();n(this,-this.$$watchersCount);for(var b in this.$$listenerCount)B(this,this.$$listenerCount[b],b);a&&a.$$childHead===
this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=D;this.$on=this.$watch=this.$watchGroup=function(){return D};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){s.$$phase||
J.length||k.defer(function(){J.length&&s.$digest()});J.push({scope:this,fn:g(a),locals:b})},$$postDigest:function(a){u.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{s.$$phase=null}}catch(b){f(b)}finally{try{s.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&w.push(b);a=g(a);A()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=
0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(delete c[d],B(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=db([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){f(n)}else d.splice(l,1),l--,m--;if(g)break;e=e.$parent}while(e);h.currentScope=
null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=db([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=
null;return e}};var s=new m,J=s.$$asyncQueue=[],u=s.$$postDigestQueue=[],w=s.$$applyAsyncQueue=[],H=0;return s}]}function Ie(){var a=/^\s*(https?|s?ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return u(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:a,f;f=ma(d&&d.trim()).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function Ig(a){if("self"===
a)return a;if(F(a)){if(-1<a.indexOf("***"))throw wa("iwcard",a);a=Nd(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+a+"$")}if($a(a))return new RegExp("^"+a.source+"$");throw wa("imatcher");}function Od(a){var b=[];u(a)&&q(a,function(a){b.push(Ig(a))});return b}function Uf(){this.SCE_CONTEXTS=fa;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=Od(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=Od(a));return b};
this.$get=["$injector",function(d){function c(a,b){return"self"===a?Pd(b,Qd):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw wa("unsafe");};d.has("$sanitize")&&(f=d.get("$sanitize"));var g=e(),k={};k[fa.HTML]=e(g);k[fa.CSS]=e(g);k[fa.URL]=e(g);k[fa.JS]=
e(g);k[fa.RESOURCE_URL]=e(k[fa.URL]);return{trustAs:function(a,b){var c=k.hasOwnProperty(a)?k[a]:null;if(!c)throw wa("icontext",a,b);if(null===b||x(b)||""===b)return b;if("string"!==typeof b)throw wa("itype",a);return new c(b)},getTrusted:function(d,e){if(null===e||x(e)||""===e)return e;var g=k.hasOwnProperty(d)?k[d]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(d===fa.RESOURCE_URL){var g=ma(e.toString()),p,n,q=!1;p=0;for(n=a.length;p<n;p++)if(c(a[p],g)){q=!0;break}if(q)for(p=0,n=b.length;p<
n;p++)if(c(b[p],g)){q=!1;break}if(q)return e;throw wa("insecurl",e.toString());}if(d===fa.HTML)return f(e);throw wa("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function Tf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>Ba)throw wa("iequirks");var c=pa(fa);c.isEnabled=function(){return a};c.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=
function(a,b){return b},c.valueOf=ab);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,f=c.getTrusted,g=c.trustAs;q(fa,function(a,b){var d=N(b);c[("parse_as_"+d).replace(Dc,wb)]=function(b){return e(a,b)};c[("get_trusted_"+d).replace(Dc,wb)]=function(b){return f(a,b)};c[("trust_as_"+d).replace(Dc,wb)]=function(b){return g(a,b)}});return c}]}function Vf(){this.$get=["$window","$document",function(a,b){var d={},c=!((!a.nw||
!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=Z((/android (\d+)/.exec(N((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},k=g.body&&g.body.style,h=!1,l=!1;k&&(h=!!("transition"in k||"webkitTransition"in k),l=!!("animation"in k||"webkitAnimation"in k));return{history:!(!c||4>e||f),hasEvent:function(a){if("input"===a&&Ba)return!1;if(x(d[a])){var b=g.createElement("div");
d[a]="on"+a in b}return d[a]},csp:Ia(),transitions:h,animations:l,android:e}}]}function Xf(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(b,d,c,e,f){function g(k,h){g.totalPendingRequests++;if(!F(k)||x(d.get(k)))k=f.getTrustedResourceUrl(k);var l=c.defaults&&c.defaults.transformResponse;I(l)?l=l.filter(function(a){return a!==wc}):l===wc&&(l=null);return c.get(k,P({cache:d,transformResponse:l},a)).finally(function(){g.totalPendingRequests--}).then(function(a){d.put(k,
a.data);return a.data},function(a){h||(a=Jg("tpload",k,a.status,a.statusText),b(a));return e.reject(a)})}g.totalPendingRequests=0;return g}]}function Yf(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];q(a,function(a){var c=ea.element(a).data("$binding");c&&q(c,function(c){d?(new RegExp("(^|\\s)"+Nd(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!==c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,
b,d){for(var g=["ng-","data-ng-","ng\\:"],k=0;k<g.length;++k){var h=a.querySelectorAll("["+g[k]+"model"+(d?"=":"*=")+'"'+b+'"]');if(h.length)return h}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function Zf(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,h,l){C(f)||(l=h,h=f,f=D);var m=xa.call(arguments,3),p=u(l)&&!l,n=(p?c:d).defer(),
q=n.promise,v;v=b.defer(function(){try{n.resolve(f.apply(null,m))}catch(b){n.reject(b),e(b)}finally{delete g[q.$$timeoutId]}p||a.$apply()},h);q.$$timeoutId=v;g[v]=n;return q}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].promise.$$state.pur=!0,g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}function ma(a){if(!F(a))return a;Ba&&(W.setAttribute("href",a),a=W.href);W.setAttribute("href",a);return{href:W.href,protocol:W.protocol?
W.protocol.replace(/:$/,""):"",host:W.host,search:W.search?W.search.replace(/^\?/,""):"",hash:W.hash?W.hash.replace(/^#/,""):"",hostname:W.hostname,port:W.port,pathname:"/"===W.pathname.charAt(0)?W.pathname:"/"+W.pathname}}function Ag(a){var b=[Qd].concat(a.map(ma));return function(a){a=ma(a);return b.some(Pd.bind(null,a))}}function Pd(a,b){a=ma(a);b=ma(b);return a.protocol===b.protocol&&a.host===b.host}function $f(){this.$get=ka(y)}function Rd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}
var d=a[0]||{},c={},e="";return function(){var a,g,k,h,l;try{a=d.cookie||""}catch(m){a=""}if(a!==e)for(e=a,a=e.split("; "),c={},k=0;k<a.length;k++)g=a[k],h=g.indexOf("="),0<h&&(l=b(g.substring(0,h)),x(c[l])&&(c[l]=b(g.substring(h+1))));return c}}function dg(){this.$get=Rd}function gd(a){function b(d,c){if(G(d)){var e={};q(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",
Sd);b("date",Td);b("filter",Kg);b("json",Lg);b("limitTo",Mg);b("lowercase",Ng);b("number",Ud);b("orderBy",Vd);b("uppercase",Og)}function Kg(){return function(a,b,d,c){if(!ja(a)){if(null==a)return a;throw M("filter")("notarray",a);}c=c||"$";var e;switch(Ec(b)){case "function":break;case "boolean":case "null":case "number":case "string":e=!0;case "object":b=Pg(b,d,c,e);break;default:return a}return Array.prototype.filter.call(a,b)}}function Pg(a,b,d,c){var e=G(a)&&d in a;!0===b?b=sa:C(b)||(b=function(a,
b){if(x(a))return!1;if(null===a||null===b)return a===b;if(G(b)||G(a)&&!ac(a))return!1;a=N(""+a);b=N(""+b);return-1!==a.indexOf(b)});return function(f){return e&&!G(f)?ga(f,a[d],b,d,!1):ga(f,a,b,d,c)}}function ga(a,b,d,c,e,f){var g=Ec(a),k=Ec(b);if("string"===k&&"!"===b.charAt(0))return!ga(a,b.substring(1),d,c,e);if(I(a))return a.some(function(a){return ga(a,b,d,c,e)});switch(g){case "object":var h;if(e){for(h in a)if(h.charAt&&"$"!==h.charAt(0)&&ga(a[h],b,d,c,!0))return!0;return f?!1:ga(a,b,d,c,!1)}if("object"===
k){for(h in b)if(f=b[h],!C(f)&&!x(f)&&(g=h===c,!ga(g?a:a[h],f,d,c,g,g)))return!1;return!0}return d(a,b);case "function":return!1;default:return d(a,b)}}function Ec(a){return null===a?"null":typeof a}function Sd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){x(c)&&(c=b.CURRENCY_SYM);x(e)&&(e=b.PATTERNS[1].maxFrac);var f=c?/\u00A4/g:/\s*\u00A4\s*/g;return null==a?a:Wd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(f,c)}}function Ud(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==
a?a:Wd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Qg(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Xd))&&(a=a.replace(Xd,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)===Fc;e++);if(e===(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)===Fc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Yd&&(d=d.splice(0,Yd-1),b=c-1,c=1);return{d:d,e:b,i:c}}function Rg(a,b,d,c){var e=a.d,f=e.length-a.i;b=x(b)?Math.min(Math.max(d,f),c):+b;d=
b+a.i;c=e[d];if(0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[d-1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Wd(a,b,d,c,e){if(!F(a)&&!Y(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,k=Math.abs(a)+"",h="";if(f)h="\u221e";
else{g=Qg(k);Rg(g,e,b.minFrac,b.maxFrac);h=g.d;k=g.i;e=g.e;f=[];for(g=h.reduce(function(a,b){return a&&!b},!0);0>k;)h.unshift(0),k++;0<k?f=h.splice(k,h.length):(f=h,h=[0]);k=[];for(h.length>=b.lgSize&&k.unshift(h.splice(-b.lgSize,h.length).join(""));h.length>b.gSize;)k.unshift(h.splice(-b.gSize,h.length).join(""));h.length&&k.unshift(h.join(""));h=k.join(d);f.length&&(h+=c+f.join(""));e&&(h+="e+"+e)}return 0>a&&!g?b.negPre+h+b.negSuf:b.posPre+h+b.posSuf}function Ob(a,b,d,c){var e="";if(0>a||c&&0>=
a)c?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=Fc+a;d&&(a=a.substr(a.length-b));return e+a}function ca(a,b,d,c,e){d=d||0;return function(f){f=f["get"+a]();if(0<d||f>-d)f+=d;0===f&&-12===d&&(f=12);return Ob(f,b,c,e)}}function mb(a,b,d){return function(c,e){var f=c["get"+a](),g=ub((d?"STANDALONE":"")+(b?"SHORT":"")+a);return e[g][f]}}function Zd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function $d(a){return function(b){var d=Zd(b.getFullYear());b=+new Date(b.getFullYear(),
b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Ob(b,a)}}function Gc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Td(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,k=b[8]?a.setUTCFullYear:a.setFullYear,h=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=Z(b[9]+b[10]),g=Z(b[9]+b[11]));k.call(a,Z(b[1]),Z(b[2])-1,Z(b[3]));f=Z(b[4]||0)-f;g=Z(b[5]||0)-g;k=Z(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));h.call(a,f,g,k,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(c,d,f){var g="",k=[],h,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;F(c)&&(c=Sg.test(c)?Z(c):b(c));Y(c)&&(c=new Date(c));if(!da(c)||!isFinite(c.getTime()))return c;for(;d;)(l=Tg.exec(d))?(k=db(k,l,1),d=k.pop()):(k.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=dc(f,m),c=ec(c,f,!0));q(k,function(b){h=Ug[b];g+=h?h(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Lg(){return function(a,b){x(b)&&(b=2);return eb(a,b)}}function Mg(){return function(a,
b,d){b=Infinity===Math.abs(Number(b))?Number(b):Z(b);if(X(b))return a;Y(a)&&(a=a.toString());if(!ja(a))return a;d=!d||isNaN(d)?0:Z(d);d=0>d?Math.max(0,a.length+d):d;return 0<=b?Hc(a,d,d+b):0===d?Hc(a,b,a.length):Hc(a,Math.max(0,d+b),d)}}function Hc(a,b,d){return F(a)?a.slice(b,d):xa.call(a,b,d)}function Vd(a){function b(b){return b.map(function(b){var c=1,d=ab;if(C(b))d=b;else if(F(b)){if("+"===b.charAt(0)||"-"===b.charAt(0))c="-"===b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var e=
d(),d=function(a){return a[e]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}function c(a,b){var c=0,d=a.type,h=b.type;if(d===h){var h=a.value,l=b.value;"string"===d?(h=h.toLowerCase(),l=l.toLowerCase()):"object"===d&&(G(h)&&(h=a.index),G(l)&&(l=b.index));h!==l&&(c=h<l?-1:1)}else c=d<h?-1:1;return c}return function(a,f,g,k){if(null==a)return a;if(!ja(a))throw M("orderBy")("notarray",a);I(f)||(f=[f]);0===f.length&&
(f=["+"]);var h=b(f),l=g?-1:1,m=C(k)?k:c;a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:h.map(function(c){var e=c.get(a);c=typeof e;if(null===e)c="string",e="null";else if("object"===c)a:{if(C(e.valueOf)&&(e=e.valueOf(),d(e)))break a;ac(e)&&(e=e.toString(),d(e))}return{value:e,type:c,index:b}})}});a.sort(function(a,b){for(var d=0,e=h.length;d<e;d++){var g=m(a.predicateValues[d],b.predicateValues[d]);if(g)return g*h[d].descending*
l}return(m(a.tieBreaker,b.tieBreaker)||c(a.tieBreaker,b.tieBreaker))*l});return a=a.map(function(a){return a.value})}}function Ra(a){C(a)&&(a={link:a});a.restrict=a.restrict||"AC";return ka(a)}function Pb(a,b,d,c,e){this.$$controls=[];this.$error={};this.$$success={};this.$pending=void 0;this.$name=e(b.name||b.ngForm||"")(d);this.$dirty=!1;this.$valid=this.$pristine=!0;this.$submitted=this.$invalid=!1;this.$$parentForm=Qb;this.$$element=a;this.$$animate=c;ae(this)}function ae(a){a.$$classCache={};
a.$$classCache[be]=!(a.$$classCache[nb]=a.$$element.hasClass(nb))}function ce(a){function b(a,b,c){c&&!a.$$classCache[b]?(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,b),a.$$classCache[b]=!1)}function d(a,c,d){c=c?"-"+Xc(c,"-"):"";b(a,nb+c,!0===d);b(a,be+c,!1===d)}var c=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,g,k){x(g)?(this.$pending||(this.$pending={}),c(this.$pending,a,k)):(this.$pending&&e(this.$pending,
a,k),de(this.$pending)&&(this.$pending=void 0));La(g)?g?(e(this.$error,a,k),c(this.$$success,a,k)):(c(this.$error,a,k),e(this.$$success,a,k)):(e(this.$error,a,k),e(this.$$success,a,k));this.$pending?(b(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,d(this,"",null)):(b(this,"ng-pending",!1),this.$valid=de(this.$error),this.$invalid=!this.$valid,d(this,"",this.$valid));g=this.$pending&&this.$pending[a]?void 0:this.$error[a]?!1:this.$$success[a]?!0:null;d(this,a,g);this.$$parentForm.$setValidity(a,
g,this)}}function de(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Ic(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Va(a,b,d,c,e,f){var g=N(b[0].type);if(!e.android){var k=!1;b.on("compositionstart",function(){k=!0});b.on("compositionupdate",function(a){if(x(a.data)||""===a.data)k=!1});b.on("compositionend",function(){k=!1;l()})}var h,l=function(a){h&&(f.defer.cancel(h),h=null);if(!k){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&
"false"===d.ngTrim||(e=Q(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){h||(h=f.defer(function(){h=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut drop",m)}b.on("change",l);if(ee[g]&&c.$$hasNativeValidators&&g===d.type)b.on("keydown wheel mousedown",function(a){if(!h){var b=this.validity,
c=b.badInput,d=b.typeMismatch;h=f.defer(function(){h=null;b.badInput===c&&b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Rb(a,b){return function(d,c){var e,f;if(da(d))return d;if(F(d)){'"'===d.charAt(0)&&'"'===d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(Vg.test(d))return new Date(d);a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),
ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},q(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function ob(a,b,d,c){return function(e,f,g,k,h,l,m){function p(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function n(a){return u(a)&&!da(a)?q(a)||void 0:a}function q(a,b){var c=k.$options.getOption("timezone");E&&E!==c&&(b=Uc(b,dc(E)));var e=d(a,b);!isNaN(e)&&c&&(e=ec(e,c));return e}
Jc(e,f,g,k);Va(e,f,g,k,h,l);var r,E;k.$$parserName=a;k.$parsers.push(function(a){if(k.$isEmpty(a))return null;if(b.test(a))return q(a,r)});k.$formatters.push(function(a){if(a&&!da(a))throw pb("datefmt",a);if(p(a)){r=a;var b=k.$options.getOption("timezone");b&&(E=b,r=ec(r,b,!0));return m("date")(a,c,b)}E=r=null;return""});if(u(g.min)||g.ngMin){var A;k.$validators.min=function(a){return!p(a)||x(A)||d(a)>=A};g.$observe("min",function(a){A=n(a);k.$validate()})}if(u(g.max)||g.ngMax){var s;k.$validators.max=
function(a){return!p(a)||x(s)||d(a)<=s};g.$observe("max",function(a){s=n(a);k.$validate()})}}}function Jc(a,b,d,c){(c.$$hasNativeValidators=G(b[0].validity))&&c.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function fe(a){a.$$parserName="number";a.$parsers.push(function(b){if(a.$isEmpty(b))return null;if(Wg.test(b))return parseFloat(b)});a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!Y(b))throw pb("numfmt",b);b=b.toString()}return b})}function Wa(a){u(a)&&
!Y(a)&&(a=parseFloat(a));return X(a)?void 0:a}function Kc(a){var b=a.toString(),d=b.indexOf(".");return-1===d?-1<a&&1>a&&(a=/e-(\d+)$/.exec(b))?Number(a[1]):0:b.length-d-1}function ge(a,b,d){a=Number(a);var c=(a|0)!==a,e=(b|0)!==b,f=(d|0)!==d;if(c||e||f){var g=c?Kc(a):0,k=e?Kc(b):0,h=f?Kc(d):0,g=Math.max(g,k,h),g=Math.pow(10,g);a*=g;b*=g;d*=g;c&&(a=Math.round(a));e&&(b=Math.round(b));f&&(d=Math.round(d))}return 0===(a-b)%d}function he(a,b,d,c,e){if(u(c)){a=a(c);if(!a.constant)throw pb("constexpr",
d,c);return a(b)}return e}function Lc(a,b){function d(a,b){if(!a||!a.length)return[];if(!b||!b.length)return a;var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e===b[f])continue a;c.push(e)}return c}function c(a){var b=a;I(a)?b=a.map(c).join(" "):G(a)&&(b=Object.keys(a).filter(function(b){return a[b]}).join(" "));return b}function e(a){var b=a;if(I(a))b=a.map(e);else if(G(a)){var c=!1,b=Object.keys(a).filter(function(b){b=a[b];!c&&x(b)&&(c=!0);return b});c&&b.push(void 0)}return b}
a="ngClass"+a;var f;return["$parse",function(g){return{restrict:"AC",link:function(k,h,l){function m(a,b){var c=[];q(a,function(a){if(0<b||s[a])s[a]=(s[a]||0)+b,s[a]===+(0<b)&&c.push(a)});return c.join(" ")}function p(a){if(a===b){var c=z,c=m(c&&c.split(" "),1);l.$addClass(c)}else c=z,c=m(c&&c.split(" "),-1),l.$removeClass(c);u=a}function n(a){a=c(a);a!==z&&r(a)}function r(a){if(u===b){var c=z&&z.split(" "),e=a&&a.split(" "),g=d(c,e),c=d(e,c),g=m(g,-1),c=m(c,1);l.$addClass(c);l.$removeClass(g)}z=
a}var v=l[a].trim(),E=":"===v.charAt(0)&&":"===v.charAt(1),v=g(v,E?e:c),A=E?n:r,s=h.data("$classCounts"),u=!0,z;s||(s=R(),h.data("$classCounts",s));"ngClass"!==a&&(f||(f=g("$index",function(a){return a&1})),k.$watch(f,p));k.$watch(v,A,E)}}}]}function Sb(a,b,d,c,e,f,g,k,h){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=
!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=h(d.name||"",!1)(a);this.$$parentForm=Qb;this.$options=Tb;this.$$updateEvents="";this.$$updateEventHandler=this.$$updateEventHandler.bind(this);this.$$parsedNgModel=e(d.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=void 0;this.$$currentValidationRunId=
0;Object.defineProperty(this,"$$scope",{value:a});this.$$attr=d;this.$$element=c;this.$$animate=f;this.$$timeout=g;this.$$parse=e;this.$$q=k;this.$$exceptionHandler=b;ae(this);Xg(this)}function Xg(a){a.$$scope.$watch(function(b){b=a.$$ngModelGet(b);b===a.$modelValue||a.$modelValue!==a.$modelValue&&b!==b||a.$$setModelValue(b);return b})}function Mc(a){this.$$options=a}function ie(a,b){q(b,function(b,c){u(a[c])||(a[c]=b)})}function Fa(a,b){a.prop("selected",b);a.attr("selected",b)}var Oc={objectMaxDepth:5},
Yg=/^\/(.+)\/([a-z]*)$/,ra=Object.prototype.hasOwnProperty,N=function(a){return F(a)?a.toLowerCase():a},ub=function(a){return F(a)?a.toUpperCase():a},Ba,z,ta,xa=[].slice,wg=[].splice,Zg=[].push,ha=Object.prototype.toString,Rc=Object.getPrototypeOf,oa=M("ng"),ea=y.angular||(y.angular={}),jc,qb=0;Ba=y.document.documentMode;var X=Number.isNaN||function(a){return a!==a};D.$inject=[];ab.$inject=[];var I=Array.isArray,ue=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,
Q=function(a){return F(a)?a.trim():a},Nd=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ia=function(){if(!u(Ia.rules)){var a=y.document.querySelector("[ng-csp]")||y.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ia.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ia;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,
noInlineStyle:!1}}}return Ia.rules},rb=function(){if(u(rb.name_))return rb.name_;var a,b,d=Ga.length,c,e;for(b=0;b<d;++b)if(c=Ga[b],a=y.document.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+"jq");break}return rb.name_=e},we=/:/g,Ga=["ng-","data-ng-","ng:","x-ng-"],ze=function(a){var b=a.currentScript;if(!b)return!0;if(!(b instanceof y.HTMLScriptElement||b instanceof y.SVGScriptElement))return!1;b=b.attributes;return[b.getNamedItem("src"),b.getNamedItem("href"),b.getNamedItem("xlink:href")].every(function(b){if(!b)return!0;
if(!b.value)return!1;var c=a.createElement("a");c.href=b.value;if(a.location.origin===c.origin)return!0;switch(c.protocol){case "http:":case "https:":case "ftp:":case "blob:":case "file:":case "data:":return!0;default:return!1}})}(y.document),Ce=/[A-Z]/g,Yc=!1,Ma=3,He={full:"1.6.10",major:1,minor:6,dot:10,codeName:"crystalline-persuasion"};S.expando="ng339";var ib=S.cache={},ig=1;S._data=function(a){return this.cache[a[this.expando]]||{}};var eg=/-([a-z])/g,$g=/^-ms-/,Ab={mouseleave:"mouseout",mouseenter:"mouseover"},
mc=M("jqLite"),hg=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,lc=/<|&#?\w+;/,fg=/<([\w:-]+)/,gg=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,$={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option;$.tbody=$.tfoot=$.colgroup=$.caption=$.thead;$.th=$.td;var ng=y.Node.prototype.contains||
function(a){return!!(this.compareDocumentPosition(a)&16)},Ua=S.prototype={ready:id,toString:function(){var a=[];q(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?z(this[a]):z(this[this.length+a])},length:0,push:Zg,sort:[].sort,splice:[].splice},Gb={};q("multiple selected checked disabled readOnly required open".split(" "),function(a){Gb[N(a)]=a});var nd={};q("input select option textarea button form details".split(" "),function(a){nd[a]=!0});var ud={ngMinlength:"minlength",
ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};q({data:qc,removeData:pc,hasData:function(a){for(var b in ib[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)pc(a[b])}},function(a,b){S[b]=a});q({data:qc,inheritedData:Eb,scope:function(a){return z.data(a,"$scope")||Eb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return z.data(a,"$isolateScope")||z.data(a,"$isolateScopeNoTemplate")},controller:kd,injector:function(a){return Eb(a,
"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Bb,css:function(a,b,d){b=xb(b.replace($g,"ms-"));if(u(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==Ma&&2!==c&&8!==c&&a.getAttribute){var c=N(b),e=Gb[c];if(u(d))null===d||!1===d&&e?a.removeAttribute(b):a.setAttribute(b,e?c:d);else return a=a.getAttribute(b),e&&null!==a&&(a=c),null===a?void 0:a}},prop:function(a,b,d){if(u(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(x(d)){var c=
a.nodeType;return 1===c||c===Ma?a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(x(b)){if(a.multiple&&"select"===ya(a)){var d=[];q(a.options,function(a){a.selected&&d.push(a.value||a.text)});return d}return a.value}a.value=b},html:function(a,b){if(x(b))return a.innerHTML;yb(a,!0);a.innerHTML=b},empty:ld},function(a,b){S.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==ld&&x(2===a.length&&a!==Bb&&a!==kd?b:c)){if(G(b)){for(e=0;e<g;e++)if(a===qc)a(this[e],b);else for(f in b)a(this[e],
f,b[f]);return this}e=a.$dv;g=x(e)?Math.min(g,1):g;for(f=0;f<g;f++){var k=a(this[f],b,c);e=e?e+k:k}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});q({removeData:pc,on:function(a,b,d,c){if(u(c))throw mc("onargs");if(kc(a)){c=zb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=kg(a,e));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,k=function(b,c,g){var k=e[b];k||(k=e[b]=[],k.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f));k.push(d)};g--;)b=c[g],Ab[b]?(k(Ab[b],mg),
k(b,void 0,!0)):k(b)}},off:jd,one:function(a,b,d){a=z(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;yb(a);q(new S(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];q(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new S(b);for(var d=0,c=b.length;d<
c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;q(new S(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){var d=z(b).eq(0).clone()[0],c=a.parentNode;c&&c.replaceChild(d,a);d.appendChild(a)},remove:Fb,detach:function(a){Fb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;if(c){b=new S(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}}},addClass:Db,removeClass:Cb,toggleClass:function(a,b,d){b&&q(b.split(" "),function(b){var e=
d;x(e)&&(e=!Bb(a,b));(e?Db:Cb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:oc,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=zb(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=
!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:D,type:f,target:a},b.type&&(c=P(c,b)),b=pa(g),e=d?[c].concat(d):[c],q(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){S.prototype[b]=function(b,c,e){for(var f,g=0,k=this.length;g<k;g++)x(f)?(f=a(this[g],b,c,e),u(f)&&(f=z(f))):nc(f,a(this[g],b,c,e));return u(f)?f:this}});S.prototype.bind=S.prototype.on;S.prototype.unbind=S.prototype.off;var ah=Object.create(null);
od.prototype={_idx:function(a){if(a===this._lastKey)return this._lastIndex;this._lastKey=a;return this._lastIndex=this._keys.indexOf(a)},_transformKey:function(a){return X(a)?ah:a},get:function(a){a=this._transformKey(a);a=this._idx(a);if(-1!==a)return this._values[a]},set:function(a,b){a=this._transformKey(a);var d=this._idx(a);-1===d&&(d=this._lastIndex=this._keys.length);this._keys[d]=a;this._values[d]=b},delete:function(a){a=this._transformKey(a);a=this._idx(a);if(-1===a)return!1;this._keys.splice(a,
1);this._values.splice(a,1);this._lastKey=NaN;this._lastIndex=-1;return!0}};var Hb=od,cg=[function(){this.$get=[function(){return Hb}]}],pg=/^([^(]+?)=>/,qg=/^[^(]*\(\s*([^)]*)\)/m,bh=/,/,ch=/^\s*(_?)(\S+?)\1\s*$/,og=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Aa=M("$injector");gb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw F(d)&&d||(d=a.name||rg(a)),Aa("strictdi",d);b=pd(a);q(b[1].split(bh),function(a){a.replace(ch,function(a,b,d){c.push(d)})})}a.$inject=
c}}else I(a)?(b=a.length-1,sb(a[b],"fn"),c=a.slice(0,b)):sb(a,"fn",!0);return c};var je=M("$animate"),uf=function(){this.$get=D},vf=function(){var a=new Hb,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=F(b)?b.split(" "):I(b)?b:[],q(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){q(b,function(b){var c=a.get(b);if(c){var d=sg(b.attr("class")),e="",f="";q(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});q(b,function(a){e&&
Db(a,e);f&&Cb(a,f)});a.delete(b)}});b.length=0}return{enabled:D,on:D,off:D,pin:D,push:function(g,k,h,l){l&&l();h=h||{};h.from&&g.css(h.from);h.to&&g.css(h.to);if(h.addClass||h.removeClass)if(k=h.addClass,l=h.removeClass,h=a.get(g)||{},k=e(h,k,!0),l=e(h,l,!1),k||l)a.set(g,h),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},sf=["$provide",function(a){var b=this,d=null,c=null;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&"."!==c.charAt(0))throw je("notcsel",
c);var g=c+"-animation";b.$$registeredAnimations[c.substr(1)]=g;a.factory(g,d)};this.customFilter=function(a){1===arguments.length&&(c=C(a)?a:null);return c};this.classNameFilter=function(a){if(1===arguments.length&&(d=a instanceof RegExp?a:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(d.toString()))throw d=null,je("nongcls","ng-animate");return d};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){e=f;break a}}e=void 0}!e||
e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,h,l){d=d&&z(d);h=h&&z(h);d=d||h.parent();b(c,d,h);return a.push(c,"enter",Ja(l))},move:function(c,d,h,l){d=d&&z(d);h=h&&z(h);d=d||h.parent();b(c,d,h);return a.push(c,"move",Ja(l))},leave:function(b,c){return a.push(b,"leave",Ja(c),function(){b.remove()})},addClass:function(b,c,d){d=Ja(d);d.addClass=jb(d.addclass,c);return a.push(b,
"addClass",d)},removeClass:function(b,c,d){d=Ja(d);d.removeClass=jb(d.removeClass,c);return a.push(b,"removeClass",d)},setClass:function(b,c,d,f){f=Ja(f);f.addClass=jb(f.addClass,c);f.removeClass=jb(f.removeClass,d);return a.push(b,"setClass",f)},animate:function(b,c,d,f,m){m=Ja(m);m.from=m.from?P(m.from,c):c;m.to=m.to?P(m.to,d):d;m.tempClasses=jb(m.tempClasses,f||"ng-inline-animate");return a.push(b,"animate",m)}}}]}],xf=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b);1<d.length||
a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},wf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){c()?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=
function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;q(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:D,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},
pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(q(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return f}]},tf=function(){this.$get=
["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);k||h.complete();k=!0});return h}var g=e||{};g.$$prepared||(g=na(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var k,h=new d;return{start:f,end:f}}}]},aa=M("$compile"),uc=new function(){};$c.$inject=["$provide","$$sanitizeUriProvider"];
Jb.prototype.isFirstChange=function(){return this.previousValue===uc};var qd=/^((?:x|data)[:\-_])/i,vg=/[:\-_]+(.)/g,wd=M("$controller"),vd=/^(\S+)(\s+as\s+([\w$]+))?$/,Ef=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof z&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},xd="application/json",xc={"Content-Type":xd+";charset=utf-8"},yg=/^\[|^\{(?!\{)/,zg={"[":/]$/,"{":/}$/},xg=/^\)]\}',?\n/,Kb=M("$http"),Ea=ea.$interpolateMinErr=M("$interpolate");Ea.throwNoconcat=
function(a){throw Ea("noconcat",a);};Ea.interr=function(a,b){return Ea("interr",a,b.toString())};var Mf=function(){this.$get=function(){function a(a){var b=function(a){b.data=a;b.called=!0};b.id=a;return b}var b=ea.callbacks,d={};return{createCallback:function(c){c="_"+(b.$$counter++).toString(36);var e="angular.callbacks."+c,f=a(c);d[e]=b[c]=f;return e},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){delete b[d[a].id];delete d[a]}}}},
dh=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Cg={http:80,https:443,ftp:21},kb=M("$location"),Dg=/^\s*[\\/]{2,}/,eh={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Lb("$$absUrl"),url:function(a){if(x(a))return this.$$url;var b=dh.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Lb("$$protocol"),host:Lb("$$host"),port:Lb("$$port"),path:Ed("$$path",function(a){a=null!==a?a.toString():"";return"/"===a.charAt(0)?a:"/"+
a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(F(a)||Y(a))a=a.toString(),this.$$search=fc(a);else if(G(a))a=na(a,{}),q(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw kb("isrcharg");break;default:x(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Ed("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};q([Dd,Bc,Ac],function(a){a.prototype=Object.create(eh);
a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==Ac||!this.$$html5)throw kb("nostate");this.$$state=x(b)?null:b;this.$$urlUpdatedByLocation=!0;return this}});var Xa=M("$parse"),Hg={}.constructor.prototype.valueOf,Ub=R();q("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Ub[a]=!0});var fh={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Nb=function(a){this.options=a};Nb.prototype={constructor:Nb,lex:function(a){this.text=a;this.index=0;for(this.tokens=
[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Ub[b],e=Ub[d];Ub[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,
text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,
this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-
56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=u(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw Xa("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=N(this.text.charAt(this.index));
if("."===d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"===d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"===a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||c&&this.isNumber(c)||"e"!==a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=
this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=
fh[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var r=function(a,b){this.lexer=a;this.options=b};r.Program="Program";r.ExpressionStatement="ExpressionStatement";r.AssignmentExpression="AssignmentExpression";r.ConditionalExpression="ConditionalExpression";r.LogicalExpression="LogicalExpression";r.BinaryExpression="BinaryExpression";r.UnaryExpression="UnaryExpression";
r.CallExpression="CallExpression";r.MemberExpression="MemberExpression";r.Identifier="Identifier";r.Literal="Literal";r.ArrayExpression="ArrayExpression";r.Property="Property";r.ObjectExpression="ObjectExpression";r.ThisExpression="ThisExpression";r.LocalsExpression="LocalsExpression";r.NGValueParameter="NGValueParameter";r.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},
program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:r.Program,body:a}},expressionStatement:function(){return{type:r.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Id(a))throw Xa("lval");
a={type:r.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:r.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:r.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a=
{type:r.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:r.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:r.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:r.BinaryExpression,
operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:r.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:r.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?
a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=na(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:r.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:r.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):
"["===b.text?(a={type:r.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:r.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:r.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(","))
}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:r.Identifier,name:a.text}},constant:function(){return{type:r.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:r.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
b={type:r.Property,kind:"init"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),b.value=this.expression()):this.throwError("invalid key",this.peek());a.push(b)}while(this.expect(","))}this.consume("}");
return{type:r.ObjectExpression,properties:a}},throwError:function(a,b){throw Xa("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw Xa("ueoe",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw Xa("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,
e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:r.ThisExpression},$locals:{type:r.LocalsExpression}}};var Gd=2;Kd.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};U(a,b.$filter);var d="",c;this.stage="assign";if(c=Jd(a))this.state.computing=
"assign",d=this.nextId(),this.recurse(c,d),this.return_(d),d="fn.assign="+this.generateFunction("assign","s,v,l");c=Hd(a.body);b.stage="inputs";q(c,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}};b.state.computing=d;var k=b.nextId();b.recurse(a,k);b.return_(k);b.state.inputs.push({name:d,isPure:a.isPure});a.watchId=c});this.state.computing="fn";this.stage="main";this.recurse(a);a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+
d+this.watchFns()+"return fn;";a=(new Function("$filter","getStringValue","ifDefined","plus",a))(this.$filter,Eg,Fg,Fd);this.state=this.stage=void 0;return a},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;q(b,function(b){a.push("var "+b.name+"="+d.generateFunction(b.name,"s"));b.isPure&&a.push(b.name,".isPure="+JSON.stringify(b.isPure)+";")});b.length&&a.push("fn.inputs=["+b.map(function(a){return a.name}).join(",")+"];");return a.join("")},generateFunction:function(a,
b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;q(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,e,f){var g,k,h=this,l,m,p;c=c||D;if(!f&&u(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,
this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case r.Program:q(a.body,function(b,c){h.recurse(b.expression,void 0,void 0,function(a){k=a});c!==a.body.length-1?h.current().body.push(k,";"):h.return_(k)});break;case r.Literal:m=this.escape(a.value);this.assign(b,m);c(b||m);break;case r.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){k=a});m=a.operator+"("+this.ifDefined(k,0)+")";this.assign(b,m);c(m);break;case r.BinaryExpression:this.recurse(a.left,
void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){k=a});m="+"===a.operator?this.plus(g,k):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(k,0):"("+g+")"+a.operator+"("+k+")";this.assign(b,m);c(m);break;case r.LogicalExpression:b=b||this.nextId();h.recurse(a.left,b);h.if_("&&"===a.operator?b:h.not(b),h.lazyRecurse(a.right,b));c(b);break;case r.ConditionalExpression:b=b||this.nextId();h.recurse(a.test,b);h.if_(b,h.lazyRecurse(a.alternate,b),h.lazyRecurse(a.consequent,
b));c(b);break;case r.Identifier:b=b||this.nextId();d&&(d.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",a.name)),function(){h.if_("inputs"===h.stage||"s",function(){e&&1!==e&&h.if_(h.isNull(h.nonComputedMember("s",a.name)),h.lazyAssign(h.nonComputedMember("s",a.name),"{}"));h.assign(b,h.nonComputedMember("s",a.name))})},b&&h.lazyAssign(b,h.nonComputedMember("l",
a.name)));c(b);break;case r.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();h.recurse(a.object,g,void 0,function(){h.if_(h.notNull(g),function(){a.computed?(k=h.nextId(),h.recurse(a.property,k),h.getStringValue(k),e&&1!==e&&h.if_(h.not(h.computedMember(g,k)),h.lazyAssign(h.computedMember(g,k),"{}")),m=h.computedMember(g,k),h.assign(b,m),d&&(d.computed=!0,d.name=k)):(e&&1!==e&&h.if_(h.isNull(h.nonComputedMember(g,a.property.name)),h.lazyAssign(h.nonComputedMember(g,
a.property.name),"{}")),m=h.nonComputedMember(g,a.property.name),h.assign(b,m),d&&(d.computed=!1,d.name=a.property.name))},function(){h.assign(b,"undefined")});c(b)},!!e);break;case r.CallExpression:b=b||this.nextId();a.filter?(k=h.filter(a.callee.name),l=[],q(a.arguments,function(a){var b=h.nextId();h.recurse(a,b);l.push(b)}),m=k+"("+l.join(",")+")",h.assign(b,m),c(b)):(k=h.nextId(),g={},l=[],h.recurse(a.callee,k,g,function(){h.if_(h.notNull(k),function(){q(a.arguments,function(b){h.recurse(b,a.constant?
void 0:h.nextId(),void 0,function(a){l.push(a)})});m=g.name?h.member(g.context,g.name,g.computed)+"("+l.join(",")+")":k+"("+l.join(",")+")";h.assign(b,m)},function(){h.assign(b,"undefined")});c(b)}));break;case r.AssignmentExpression:k=this.nextId();g={};this.recurse(a.left,void 0,g,function(){h.if_(h.notNull(g.context),function(){h.recurse(a.right,k);m=h.member(g.context,g.name,g.computed)+a.operator+k;h.assign(b,m);c(b||m)})},1);break;case r.ArrayExpression:l=[];q(a.elements,function(b){h.recurse(b,
a.constant?void 0:h.nextId(),void 0,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(b||m);break;case r.ObjectExpression:l=[];p=!1;q(a.properties,function(a){a.computed&&(p=!0)});p?(b=b||this.nextId(),this.assign(b,"{}"),q(a.properties,function(a){a.computed?(g=h.nextId(),h.recurse(a.key,g)):g=a.key.type===r.Identifier?a.key.name:""+a.key.value;k=h.nextId();h.recurse(a.value,k);h.assign(h.member(b,g,a.computed),k)})):(q(a.properties,function(b){h.recurse(b.value,a.constant?void 0:
h.nextId(),void 0,function(a){l.push(h.escape(b.key.type===r.Identifier?b.key.name:""+b.key.value)+":"+a)})}),m="{"+l.join(",")+"}",this.assign(b,m));c(b||m);break;case r.ThisExpression:this.assign(b,"s");c(b||"s");break;case r.LocalsExpression:this.assign(b,"l");c(b||"l");break;case r.NGValueParameter:this.assign(b,"v"),c(b||"v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},assign:function(a,
b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),d(),c.push("}"))}},
not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,d,c,e,f){var g=
this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(F(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(Y(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw Xa("esc");},nextId:function(a,
b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};Ld.prototype={compile:function(a){var b=this;U(a,b.$filter);var d,c;if(d=Jd(a))c=this.recurse(d);d=Hd(a.body);var e;d&&(e=[],q(d,function(a,c){var d=b.recurse(a);d.isPure=a.isPure;a.input=d;e.push(d);a.watchId=c}));var f=[];q(a.body,function(a){f.push(b.recurse(a.expression))});a=0===a.body.length?D:1===a.body.length?f[0]:function(a,b){var c;q(f,function(d){c=
d(a,b)});return c};c&&(a.assign=function(a,b,d){return c(a,d,b)});e&&(a.inputs=e);return a},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case r.Literal:return this.value(a.value,b);case r.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case r.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case r.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),
this["binary"+a.operator](c,e,b);case r.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case r.Identifier:return f.identifier(a.name,b,d);case r.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d):this.nonComputedMember(c,e,b,d);case r.CallExpression:return g=[],q(a.arguments,function(a){g.push(f.recurse(a))}),
a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var p=[],n=0;n<g.length;++n)p.push(g[n](a,c,d,f));a=e.apply(void 0,p,f);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,f){var p=e(a,c,d,f),n;if(null!=p.value){n=[];for(var q=0;q<g.length;++q)n.push(g[q](a,c,d,f));n=p.value.apply(p.context,n)}return b?{value:n}:n};case r.AssignmentExpression:return c=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,f,g){var p=
c(a,d,f,g);a=e(a,d,f,g);p.context[p.name]=a;return b?{value:a}:a};case r.ArrayExpression:return g=[],q(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],n=0;n<g.length;++n)f.push(g[n](a,c,d,e));return b?{value:f}:f};case r.ObjectExpression:return g=[],q(a.properties,function(a){a.computed?g.push({key:f.recurse(a.key),computed:!0,value:f.recurse(a.value)}):g.push({key:a.key.type===r.Identifier?a.key.name:""+a.key.value,computed:!1,value:f.recurse(a.value)})}),function(a,
c,d,e){for(var f={},n=0;n<g.length;++n)g[n].computed?f[g[n].key(a,c,d,e)]=g[n].value(a,c,d,e):f[g[n].key]=g[n].value(a,c,d,e);return b?{value:f}:f};case r.ThisExpression:return function(a){return b?{value:a}:a};case r.LocalsExpression:return function(a,c){return b?{value:c}:c};case r.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=u(d)?+d:0;return b?{value:d}:d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,
e,f);d=u(d)?-d:-0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);c=b(c,e,f,g);k=Fd(k,c);return d?{value:k}:k}},"binary-":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);c=b(c,e,f,g);k=(u(k)?k:0)-(u(c)?c:0);return d?{value:k}:k}},"binary*":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,
e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,
e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=
a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,k){e=a(e,f,g,k)?b(e,f,g,k):d(e,f,g,k);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d){return function(c,e,f,g){c=e&&a in e?e:c;d&&1!==d&&c&&null==c[a]&&(c[a]={});e=c?c[a]:void 0;return b?{context:c,name:a,value:e}:
e}},computedMember:function(a,b,d,c){return function(e,f,g,k){var h=a(e,f,g,k),l,m;null!=h&&(l=b(e,f,g,k),l+="",c&&1!==c&&h&&!h[l]&&(h[l]={}),m=h[l]);return d?{context:h,name:l,value:m}:m}},nonComputedMember:function(a,b,d,c){return function(e,f,g,k){e=a(e,f,g,k);c&&1!==c&&e&&null==e[b]&&(e[b]={});f=null!=e?e[b]:void 0;return d?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};Mb.prototype={constructor:Mb,parse:function(a){a=this.getAst(a);var b=
this.astCompiler.compile(a.ast),d=a.ast;b.literal=0===d.body.length||1===d.body.length&&(d.body[0].expression.type===r.Literal||d.body[0].expression.type===r.ArrayExpression||d.body[0].expression.type===r.ObjectExpression);b.constant=a.ast.constant;b.oneTime=a.oneTime;return b},getAst:function(a){var b=!1;a=a.trim();":"===a.charAt(0)&&":"===a.charAt(1)&&(b=!0,a=a.substring(2));return{ast:this.ast.ast(a),oneTime:b}}};var wa=M("$sce"),fa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},
Dc=/_([a-z])/g,Jg=M("$compile"),W=y.document.createElement("a"),Qd=ma(y.location.href);Rd.$inject=["$document"];gd.$inject=["$provide"];var Yd=22,Xd=".",Fc="0";Sd.$inject=["$locale"];Ud.$inject=["$locale"];var Ug={yyyy:ca("FullYear",4,0,!1,!0),yy:ca("FullYear",2,0,!0,!0),y:ca("FullYear",1,0,!1,!0),MMMM:mb("Month"),MMM:mb("Month",!0),MM:ca("Month",2,1),M:ca("Month",1,1),LLLL:mb("Month",!1,!0),dd:ca("Date",2),d:ca("Date",1),HH:ca("Hours",2),H:ca("Hours",1),hh:ca("Hours",2,-12),h:ca("Hours",1,-12),mm:ca("Minutes",
2),m:ca("Minutes",1),ss:ca("Seconds",2),s:ca("Seconds",1),sss:ca("Milliseconds",3),EEEE:mb("Day"),EEE:mb("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Ob(Math[0<a?"floor":"ceil"](a/60),2)+Ob(Math.abs(a%60),2))},ww:$d(2),w:$d(1),G:Gc,GG:Gc,GGG:Gc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},Tg=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Sg=/^-?\d+$/;
Td.$inject=["$locale"];var Ng=ka(N),Og=ka(ub);Vd.$inject=["$parse"];var Je=ka({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===ha.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),vb={};q(Gb,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!==a){var c=Da("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==
e[c]&&d(a,b,e)});vb[c]=function(){return{restrict:"A",priority:100,link:e}}}});q(ud,function(a,b){vb[b]=function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"===e.ngPattern.charAt(0)&&(c=e.ngPattern.match(Yg))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});q(["src","srcset","href"],function(a){var b=Da("ng-"+a);vb[b]=function(){return{priority:99,link:function(d,c,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ha.call(c.prop("href"))&&
(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(g,b),Ba&&f&&c.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Qb={$addControl:D,$$renameControl:function(a,b){a.$name=b},$removeControl:D,$setValidity:D,$setDirty:D,$setPristine:D,$setSubmitted:D};Pb.$inject=["$element","$attrs","$scope","$animate","$interpolate"];Pb.prototype={$rollbackViewValue:function(){q(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){q(this.$$controls,function(a){a.$commitViewValue()})},
$addControl:function(a){Ha(a.$name,"input");this.$$controls.push(a);a.$name&&(this[a.$name]=a);a.$$parentForm=this},$$renameControl:function(a,b){var d=a.$name;this[d]===a&&delete this[d];this[b]=a;a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===a&&delete this[a.$name];q(this.$pending,function(b,d){this.$setValidity(d,null,a)},this);q(this.$error,function(b,d){this.$setValidity(d,null,a)},this);q(this.$$success,function(b,d){this.$setValidity(d,null,a)},this);cb(this.$$controls,a);
a.$$parentForm=Qb},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ya);this.$$animate.addClass(this.$$element,Vb);this.$dirty=!0;this.$pristine=!1;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ya,Vb+" ng-submitted");this.$dirty=!1;this.$pristine=!0;this.$submitted=!1;q(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){q(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,
"ng-submitted");this.$submitted=!0;this.$$parentForm.$setSubmitted()}};ce({clazz:Pb,set:function(a,b,d){var c=a[b];c?-1===c.indexOf(d)&&c.push(d):a[b]=[d]},unset:function(a,b,d){var c=a[b];c&&(cb(c,d),0===c.length&&delete a[b])}});var ke=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||D}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Pb,compile:function(d,f){d.addClass(Ya).addClass(nb);var g=f.name?"name":
a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var p=f[0];if(!("action"in e)){var n=function(b){a.$apply(function(){p.$commitViewValue();p.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",n);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",n)},0,!1)})}(f[1]||p.$$parentForm).$addControl(p);var q=g?c(p.$name):D;g&&(q(a,p),e.$observe(g,function(b){p.$name!==b&&(q(a,void 0),p.$$parentForm.$$renameControl(p,b),q=c(p.$name),q(a,p))}));d.on("$destroy",function(){p.$$parentForm.$removeControl(p);
q(a,void 0);P(p,Qb)})}}}}}]},Ke=ke(),We=ke(!0),Vg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,gh=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,hh=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Wg=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,le=/^(\d{4,})-(\d{2})-(\d{2})$/,
me=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Nc=/^(\d{4,})-W(\d\d)$/,ne=/^(\d{4,})-(\d\d)$/,oe=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ee=R();q(["date","datetime-local","month","time","week"],function(a){ee[a]=!0});var pe={text:function(a,b,d,c,e,f){Va(a,b,d,c,e,f);Ic(c)},date:ob("date",le,Rb(le,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ob("datetimelocal",me,Rb(me,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:ob("time",oe,Rb(oe,["HH","mm",
"ss","sss"]),"HH:mm:ss.sss"),week:ob("week",Nc,function(a,b){if(da(a))return a;if(F(a)){Nc.lastIndex=0;var d=Nc.exec(a);if(d){var c=+d[1],e=+d[2],f=d=0,g=0,k=0,h=Zd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),k=b.getMilliseconds());return new Date(c,0,h.getDate()+e,d,f,g,k)}}return NaN},"yyyy-Www"),month:ob("month",ne,Rb(ne,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f){Jc(a,b,d,c);fe(c);Va(a,b,d,c,e,f);var g,k;if(u(d.min)||d.ngMin)c.$validators.min=function(a){return c.$isEmpty(a)||
x(g)||a>=g},d.$observe("min",function(a){g=Wa(a);c.$validate()});if(u(d.max)||d.ngMax)c.$validators.max=function(a){return c.$isEmpty(a)||x(k)||a<=k},d.$observe("max",function(a){k=Wa(a);c.$validate()});if(u(d.step)||d.ngStep){var h;c.$validators.step=function(a,b){return c.$isEmpty(b)||x(h)||ge(b,g||0,h)};d.$observe("step",function(a){h=Wa(a);c.$validate()})}},url:function(a,b,d,c,e,f){Va(a,b,d,c,e,f);Ic(c);c.$$parserName="url";c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||gh.test(d)}},
email:function(a,b,d,c,e,f){Va(a,b,d,c,e,f);Ic(c);c.$$parserName="email";c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||hh.test(d)}},radio:function(a,b,d,c){var e=!d.ngTrim||"false"!==Q(d.ngTrim);x(d.name)&&b.attr("name",++qb);b.on("click",function(a){var g;b[0].checked&&(g=d.value,e&&(g=Q(g)),c.$setViewValue(g,a&&a.type))});c.$render=function(){var a=d.value;e&&(a=Q(a));b[0].checked=a===c.$viewValue};d.$observe("value",c.$render)},range:function(a,b,d,c,e,f){function g(a,c){b.attr(a,
d[a]);d.$observe(a,c)}function k(a){p=Wa(a);X(c.$modelValue)||(m?(a=b.val(),p>a&&(a=p,b.val(a)),c.$setViewValue(a)):c.$validate())}function h(a){n=Wa(a);X(c.$modelValue)||(m?(a=b.val(),n<a&&(b.val(n),a=n<p?p:n),c.$setViewValue(a)):c.$validate())}function l(a){q=Wa(a);X(c.$modelValue)||(m&&c.$viewValue!==b.val()?c.$setViewValue(b.val()):c.$validate())}Jc(a,b,d,c);fe(c);Va(a,b,d,c,e,f);var m=c.$$hasNativeValidators&&"range"===b[0].type,p=m?0:void 0,n=m?100:void 0,q=m?1:void 0,r=b[0].validity;a=u(d.min);
e=u(d.max);f=u(d.step);var E=c.$render;c.$render=m&&u(r.rangeUnderflow)&&u(r.rangeOverflow)?function(){E();c.$setViewValue(b.val())}:E;a&&(c.$validators.min=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||x(p)||b>=p},g("min",k));e&&(c.$validators.max=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||x(n)||b<=n},g("max",h));f&&(c.$validators.step=m?function(){return!r.stepMismatch}:function(a,b){return c.$isEmpty(b)||x(q)||ge(b,p||0,q)},g("step",l))},checkbox:function(a,b,d,c,e,
f,g,k){var h=he(k,a,"ngTrueValue",d.ngTrueValue,!0),l=he(k,a,"ngFalseValue",d.ngFalseValue,!1);b.on("click",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return sa(a,h)});c.$parsers.push(function(a){return a?h:l})},hidden:D,button:D,submit:D,reset:D,file:D},ad=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,
f,g,k){k[0]&&(pe[N(g.type)]||pe.text)(e,f,g,k[0],b,a,d,c)}}}}],ih=/^(true|false|\d+)$/,of=function(){function a(a,d,c){var e=u(c)?c:9===Ba?"":null;a.prop("value",e);d.$set("value",c)}return{restrict:"A",priority:100,compile:function(b,d){return ih.test(d.ngValue)?function(b,d,f){b=b.$eval(f.ngValue);a(d,f,b)}:function(b,d,f){b.$watch(f.ngValue,function(b){a(d,f,b)})}}}},Oe=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,
e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=hc(a)})}}}}],Qe=["$interpolate","$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=x(a)?"":a})}}}}],Pe=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});
d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,function(){var d=f(b);c.html(a.getTrustedHtml(d)||"")})}}}}],nf=ka({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),Re=Lc("",!0),Te=Lc("Odd",0),Se=Lc("Even",1),Ue=Ra({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Ve=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],fd={},jh={blur:!0,focus:!0};
q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Da("ng-"+a);fd[b]=["$parse","$rootScope",function(d,c){return{restrict:"A",compile:function(e,f){var g=d(f[b]);return function(b,d){d.on(a,function(d){var e=function(){g(b,{$event:d})};jh[a]&&c.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Ye=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,
terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,e,f,g){var k,h,l;d.$watch(e.ngIf,function(d){d?h||g(function(d,f){h=f;d[d.length++]=b.$$createComment("end ngIf",e.ngIf);k={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),h&&(h.$destroy(),h=null),k&&(l=tb(k.clone),a.leave(l).done(function(a){!1!==a&&(l=null)}),k=null))})}}}],Ze=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ea.noop,compile:function(c,
e){var f=e.ngInclude||e.src,g=e.onload||"",k=e.autoscroll;return function(c,e,m,p,n){var q=0,r,E,A,s=function(){E&&(E.remove(),E=null);r&&(r.$destroy(),r=null);A&&(d.leave(A).done(function(a){!1!==a&&(E=null)}),E=A,A=null)};c.$watch(f,function(f){var m=function(a){!1===a||!u(k)||k&&!c.$eval(k)||b()},w=++q;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&w===q){var b=c.$new();p.template=a;a=n(b,function(a){s();d.enter(a,null,e).done(m)});r=b;A=a;r.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){c.$$destroyed||
w!==q||(s(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(s(),p.template=null)})}}}}],qf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(b,d,c,e){ha.call(d[0]).match(/SVG/)?(d.empty(),a(hd(e.template,y.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],$e=Ra({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),mf=function(){return{restrict:"A",
priority:100,require:"ngModel",link:function(a,b,d,c){var e=d.ngList||", ",f="false"!==d.ngTrim,g=f?Q(e):e;c.$parsers.push(function(a){if(!x(a)){var b=[];a&&q(a.split(g),function(a){a&&b.push(f?Q(a):a)});return b}});c.$formatters.push(function(a){if(I(a))return a.join(e)});c.$isEmpty=function(a){return!a||!a.length}}}},nb="ng-valid",be="ng-invalid",Ya="ng-pristine",Vb="ng-dirty",pb=M("ngModel");Sb.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" ");
Sb.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);C(c)&&(c=a(b));return c};this.$$ngModelSet=function(a,c){C(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw pb("nonassign",this.$$attr.ngModel,za(this.$$element));},$render:D,$isEmpty:function(a){return x(a)||
""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1;this.$pristine=!0;this.$$animate.removeClass(this.$$element,Vb);this.$$animate.addClass(this.$$element,Ya)},$setDirty:function(){this.$dirty=!0;this.$pristine=!1;this.$$animate.removeClass(this.$$element,
Ya);this.$$animate.addClass(this.$$element,Vb);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1;this.$untouched=!0;this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0;this.$untouched=!1;this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(!X(this.$modelValue)){var a=
this.$$lastCommittedViewValue,b=this.$$rawModelValue,d=this.$valid,c=this.$modelValue,e=this.$options.getOption("allowInvalid"),f=this;this.$$runValidators(b,a,function(a){e||d===a||(f.$modelValue=a?b:void 0,f.$modelValue!==c&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,d){function c(){var c=!0;q(h.$validators,function(d,e){var g=Boolean(d(a,b));c=c&&g;f(e,g)});return c?!0:(q(h.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;q(h.$asyncValidators,function(e,
g){var h=e(a,b);if(!h||!C(h.then))throw pb("nopromise",h);f(g,void 0);c.push(h.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});c.length?h.$$q.all(c).then(function(){g(d)},D):g(!0)}function f(a,b){k===h.$$currentValidationRunId&&h.$setValidity(a,b)}function g(a){k===h.$$currentValidationRunId&&d(a)}this.$$currentValidationRunId++;var k=this.$$currentValidationRunId,h=this;(function(){var a=h.$$parserName||"parse";if(x(h.$$parserValid))f(a,null);else return h.$$parserValid||(q(h.$validators,function(a,
b){f(b,null)}),q(h.$asyncValidators,function(a,b){f(b,null)})),f(a,h.$$parserValid),h.$$parserValid;return!0})()?c()?e():g(!1):g(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue!==a||""===a&&this.$$hasNativeValidators)this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate()},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;if(this.$$parserValid=
x(a)?void 0:!0)for(var d=0;d<this.$parsers.length;d++)if(a=this.$parsers[d](a),x(a)){this.$$parserValid=!1;break}X(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var c=this.$modelValue,e=this.$options.getOption("allowInvalid");this.$$rawModelValue=a;e&&(this.$modelValue=a,b.$modelValue!==c&&b.$$writeModelToScope());this.$$runValidators(a,this.$$lastCommittedViewValue,function(d){e||(b.$modelValue=d?a:void 0,b.$modelValue!==c&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,
this.$modelValue);q(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},this)},$setViewValue:function(a,b){this.$viewValue=a;this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");Y(b[a])?b=b[a]:Y(b["default"])&&(b=b["default"]);this.$$timeout.cancel(this.$$pendingDebounce);var d=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){d.$commitViewValue()},b):this.$$scope.$root.$$phase?
this.$commitViewValue():this.$$scope.$apply(function(){d.$commitViewValue()})},$overrideModelOptions:function(a){this.$options=this.$options.createChild(a);this.$$setUpdateOnEvents()},$processModelValue:function(){var a=this.$$format();this.$viewValue!==a&&(this.$$updateEmptyClasses(a),this.$viewValue=this.$$lastCommittedViewValue=a,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,D))},$$format:function(){for(var a=this.$formatters,b=a.length,d=this.$modelValue;b--;)d=a[b](d);
return d},$$setModelValue:function(a){this.$modelValue=this.$$rawModelValue=a;this.$$parserValid=void 0;this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler);if(this.$$updateEvents=this.$options.getOption("updateOn"))this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(a){this.$$debounceViewValueCommit(a&&a.type)}};ce({clazz:Sb,set:function(a,b){a[b]=!0},unset:function(a,
b){delete a[b]}});var lf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Sb,priority:1,compile:function(b){b.addClass(Ya).addClass("ng-untouched").addClass(nb);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;if(f=f[2])g.$options=f.$options;g.$$initGetterSetters();b.$addControl(g);e.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,
c,e,f){function g(){k.$setTouched()}var k=f[0];k.$$setUpdateOnEvents();c.on("blur",function(){k.$touched||(a.$$phase?b.$evalAsync(g):b.$apply(g))})}}}}}],Tb,kh=/(\s+|^)default(\s+|$)/;Mc.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=!1;a=P({},a);q(a,function(d,c){"$inherit"===d?"*"===c?b=!0:(a[c]=this.$$options[c],"updateOn"===c&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===c&&(a.updateOnDefault=!1,a[c]=Q(d.replace(kh,function(){a.updateOnDefault=
!0;return" "})))},this);b&&(delete a["*"],ie(a,this.$$options));ie(a,Tb.$$options);return new Mc(a)}};Tb=new Mc({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var pf=function(){function a(a,d){this.$$attrs=a;this.$$scope=d}a.$inject=["$attrs","$scope"];a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Tb,d=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(d)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},
bindToController:!0,controller:a}},af=Ra({terminal:!0,priority:1E3}),lh=M("ngOptions"),mh=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,jf=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;
if(!q&&ja(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var p=a.match(mh);if(!p)throw lh("iexp",a,za(b));var n=p[5]||p[7],q=p[6];a=/ as /.test(p[0])&&p[1];var r=p[9];b=d(p[2]?p[1]:n);var E=a&&d(a)||b,A=r&&d(r),s=r?function(a,b){return A(c,b)}:function(a){return Na(a)},u=function(a,b){return s(a,t(a,b))},z=d(p[2]||p[1]),w=d(p[3]||""),H=d(p[4]||""),y=d(p[8]),x={},t=q?function(a,b){x[q]=b;x[n]=a;return x}:function(a){x[n]=a;return x};return{trackBy:r,getTrackByValue:u,
getWatchables:d(y,function(a){var b=[];a=a||[];for(var d=f(a),e=d.length,g=0;g<e;g++){var k=a===d?g:d[g],l=a[k],k=t(l,k),l=s(l,k);b.push(l);if(p[2]||p[1])l=z(c,k),b.push(l);p[4]&&(k=H(c,k),b.push(k))}return b}),getOptions:function(){for(var a=[],b={},d=y(c)||[],g=f(d),k=g.length,n=0;n<k;n++){var p=d===g?n:g[n],q=t(d[p],p),B=E(c,q),p=s(B,q),A=z(c,q),x=w(c,q),q=H(c,q),B=new e(p,B,A,x,q);a.push(B);b[p]=B}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[u(a)]},getViewValueFromOption:function(a){return r?
na(a.viewValue):a.viewValue}}}}}var e=y.document.createElement("option"),f=y.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=D},post:function(d,k,h,l){function m(a){var b=(a=s.getOptionFromViewValue(a))&&a.element;b&&!b.selected&&(b.selected=!0);return a}function p(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);b.value=a.selectValue}var n=l[0],r=l[1],v=
h.multiple;l=0;for(var E=k.children(),A=E.length;l<A;l++)if(""===E[l].value){n.hasEmptyOption=!0;n.emptyOption=E.eq(l);break}k.empty();l=!!n.emptyOption;z(e.cloneNode(!1)).val("?");var s,x=c(h.ngOptions,k,d),y=b[0].createDocumentFragment();n.generateUnknownOptionValue=function(a){return"?"};v?(n.writeValue=function(a){if(s){var b=a&&a.map(m)||[];s.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})}},n.readValue=function(){var a=k.val()||
[],b=[];q(a,function(a){(a=s.selectValueMap[a])&&!a.disabled&&b.push(s.getViewValueFromOption(a))});return b},x.trackBy&&d.$watchCollection(function(){if(I(r.$viewValue))return r.$viewValue.map(function(a){return x.getTrackByValue(a)})},function(){r.$render()})):(n.writeValue=function(a){if(s){var b=k[0].options[k[0].selectedIndex],c=s.getOptionFromViewValue(a);b&&b.removeAttribute("selected");c?(k[0].value!==c.selectValue&&(n.removeUnknownOption(),k[0].value=c.selectValue,c.element.selected=!0),
c.element.setAttribute("selected","selected")):n.selectUnknownOrEmptyOption(a)}},n.readValue=function(){var a=s.selectValueMap[k.val()];return a&&!a.disabled?(n.unselectEmptyOption(),n.removeUnknownOption(),s.getViewValueFromOption(a)):null},x.trackBy&&d.$watch(function(){return x.getTrackByValue(r.$viewValue)},function(){r.$render()}));l&&(a(n.emptyOption)(d),k.prepend(n.emptyOption),8===n.emptyOption[0].nodeType?(n.hasEmptyOption=!1,n.registerOption=function(a,b){""===b.val()&&(n.hasEmptyOption=
!0,n.emptyOption=b,n.emptyOption.removeClass("ng-scope"),r.$render(),b.on("$destroy",function(){var a=n.$isEmptyOptionSelected();n.hasEmptyOption=!1;n.emptyOption=void 0;a&&r.$render()}))}):n.emptyOption.removeClass("ng-scope"));d.$watchCollection(x.getWatchables,function(){var a=s&&n.readValue();if(s)for(var b=s.items.length-1;0<=b;b--){var c=s.items[b];u(c.group)?Fb(c.element.parentNode):Fb(c.element)}s=x.getOptions();var d={};s.items.forEach(function(a){var b;if(u(a.group)){b=d[a.group];b||(b=
f.cloneNode(!1),y.appendChild(b),b.label=null===a.group?"null":a.group,d[a.group]=b);var c=e.cloneNode(!1);b.appendChild(c);p(a,c)}else b=e.cloneNode(!1),y.appendChild(b),p(a,b)});k[0].appendChild(y);r.$render();r.$isEmpty(a)||(b=n.readValue(),(x.trackBy||v?sa(a,b):a===b)||(r.$setViewValue(b),r.$render()))})}}}}],bf=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,k){function h(a){g.text(a||"")}var l=k.count,m=k.$attr.when&&g.attr(k.$attr.when),
p=k.offset||0,n=f.$eval(m)||{},r={},v=b.startSymbol(),E=b.endSymbol(),A=v+l+"-"+p+E,s=ea.noop,u;q(k,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+N(c[2]),n[c]=g.attr(k.$attr[b]))});q(n,function(a,d){r[d]=b(a.replace(c,A))});f.$watch(l,function(b){var c=parseFloat(b),e=X(c);e||c in n||(c=a.pluralCat(c-p));c===u||e&&X(u)||(s(),e=r[c],x(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),s=D,h()):s=f.$watch(e,h),u=c)})}}}],cf=["$parse","$animate","$compile",function(a,b,d){var c=
M("ngRepeat"),e=function(a,b,c,d,e,m,p){a[c]=d;e&&(a[e]=m);a.$index=b;a.$first=0===b;a.$last=b===p-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var k=g.ngRepeat,h=d.$$createComment("end ngRepeat",k),l=k.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l)throw c("iexp",k);var m=l[1],p=l[2],n=l[3],r=l[4],l=m.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);
if(!l)throw c("iidexp",m);var v=l[3]||l[1],u=l[2];if(n&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(n)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(n)))throw c("badident",n);var A,s,x,z,w={$id:Na};r?A=a(r):(x=function(a,b){return Na(b)},z=function(a){return a});return function(a,d,f,g,l){A&&(s=function(b,c,d){u&&(w[u]=b);w[v]=c;w.$index=d;return A(a,w)});var m=R();a.$watchCollection(p,function(f){var g,p,r=d[0],t,A=R(),w,B,y,C,F,D,G;n&&(a[n]=f);if(ja(f))F=
f,p=s||x;else for(G in p=s||z,F=[],f)ra.call(f,G)&&"$"!==G.charAt(0)&&F.push(G);w=F.length;G=Array(w);for(g=0;g<w;g++)if(B=f===F?g:F[g],y=f[B],C=p(B,y,g),m[C])D=m[C],delete m[C],A[C]=D,G[g]=D;else{if(A[C])throw q(G,function(a){a&&a.scope&&(m[a.id]=a)}),c("dupes",k,C,y);G[g]={id:C,scope:void 0,clone:void 0};A[C]=!0}for(t in m){D=m[t];C=tb(D.clone);b.leave(C);if(C[0].parentNode)for(g=0,p=C.length;g<p;g++)C[g].$$NG_REMOVED=!0;D.scope.$destroy()}for(g=0;g<w;g++)if(B=f===F?g:F[g],y=f[B],D=G[g],D.scope){t=
r;do t=t.nextSibling;while(t&&t.$$NG_REMOVED);D.clone[0]!==t&&b.move(tb(D.clone),null,r);r=D.clone[D.clone.length-1];e(D.scope,g,v,y,u,B,w)}else l(function(a,c){D.scope=c;var d=h.cloneNode(!1);a[a.length++]=d;b.enter(a,null,r);r=d;D.clone=a;A[D.id]=D;e(D.scope,g,v,y,u,B,w)});m=A})}}}}],df=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Xe=["$animate",function(a){return{restrict:"A",
multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ef=Ra(function(a,b,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&q(d,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),ff=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,c,e,f){var g=[],k=[],h=[],l=[],m=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};d.$watch(e.ngSwitch||
e.on,function(c){for(var d,e;h.length;)a.cancel(h.pop());d=0;for(e=l.length;d<e;++d){var r=tb(k[d].clone);l[d].$destroy();(h[d]=a.leave(r)).done(m(h,d))}k.length=0;l.length=0;(g=f.cases["!"+c]||f.cases["?"])&&q(g,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");k.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],gf=Ra({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){a=d.ngSwitchWhen.split(d.ngSwitchWhenSeparator).sort().filter(function(a,
b,c){return c[b-1]!==a});q(a,function(a){c.cases["!"+a]=c.cases["!"+a]||[];c.cases["!"+a].push({transclude:e,element:b})})}}),hf=Ra({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,element:b})}}),nh=M("ngTransclude"),kf=["$compile",function(a){return{restrict:"EAC",compile:function(b){var d=a(b.contents());b.empty();return function(a,b,f,g,k){function h(){d(a,function(a){b.append(a)})}if(!k)throw nh("orphan",
za(b));f.ngTransclude===f.$attr.ngTransclude&&(f.ngTransclude="");f=f.ngTransclude||f.ngTranscludeSlot;k(function(a,c){var d;if(d=a.length)a:{d=0;for(var f=a.length;d<f;d++){var g=a[d];if(g.nodeType!==Ma||g.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(h(),c.$destroy())},null,f);f&&!k.isSlotFilled(f)&&h()}}}}],Le=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"===d.type&&a.put(d.id,b[0].text)}}}],oh={$setViewValue:D,$render:D},ph=["$element",
"$scope",function(a,b){function d(){g||(g=!0,b.$$postDigest(function(){g=!1;e.ngModelCtrl.$render()}))}function c(a){k||(k=!0,b.$$postDigest(function(){b.$$destroyed||(k=!1,e.ngModelCtrl.$setViewValue(e.readValue()),a&&e.ngModelCtrl.$render())}))}var e=this,f=new Hb;e.selectValueMap={};e.ngModelCtrl=oh;e.multiple=!1;e.unknownOption=z(y.document.createElement("option"));e.hasEmptyOption=!1;e.emptyOption=void 0;e.renderUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);
a.prepend(e.unknownOption);Fa(e.unknownOption,!0);a.val(b)};e.updateUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);Fa(e.unknownOption,!0);a.val(b)};e.generateUnknownOptionValue=function(a){return"? "+Na(a)+" ?"};e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()};e.selectEmptyOption=function(){e.emptyOption&&(a.val(""),Fa(e.emptyOption,!0))};e.unselectEmptyOption=function(){e.hasEmptyOption&&Fa(e.emptyOption,!1)};b.$on("$destroy",
function(){e.renderUnknownOption=D});e.readValue=function(){var b=a.val(),b=b in e.selectValueMap?e.selectValueMap[b]:b;return e.hasOption(b)?b:null};e.writeValue=function(b){var c=a[0].options[a[0].selectedIndex];c&&Fa(z(c),!1);e.hasOption(b)?(e.removeUnknownOption(),c=Na(b),a.val(c in e.selectValueMap?c:b),Fa(z(a[0].options[a[0].selectedIndex]),!0)):e.selectUnknownOrEmptyOption(b)};e.addOption=function(a,b){if(8!==b[0].nodeType){Ha(a,'"option value"');""===a&&(e.hasEmptyOption=!0,e.emptyOption=
b);var c=f.get(a)||0;f.set(a,c+1);d()}};e.removeOption=function(a){var b=f.get(a);b&&(1===b?(f.delete(a),""===a&&(e.hasEmptyOption=!1,e.emptyOption=void 0)):f.set(a,b-1))};e.hasOption=function(a){return!!f.get(a)};e.$hasEmptyOption=function(){return e.hasEmptyOption};e.$isUnknownOptionSelected=function(){return a[0].options[0]===e.unknownOption[0]};e.$isEmptyOptionSelected=function(){return e.hasEmptyOption&&a[0].options[a[0].selectedIndex]===e.emptyOption[0]};e.selectUnknownOrEmptyOption=function(a){null==
a&&e.emptyOption?(e.removeUnknownOption(),e.selectEmptyOption()):e.unknownOption.parent().length?e.updateUnknownOption(a):e.renderUnknownOption(a)};var g=!1,k=!1;e.registerOption=function(a,b,f,g,k){if(f.$attr.ngValue){var q,r=NaN;f.$observe("value",function(a){var d,f=b.prop("selected");u(r)&&(e.removeOption(q),delete e.selectValueMap[r],d=!0);r=Na(a);q=a;e.selectValueMap[r]=a;e.addOption(a,b);b.attr("value",r);d&&f&&c()})}else g?f.$observe("value",function(a){e.readValue();var d,f=b.prop("selected");
u(q)&&(e.removeOption(q),d=!0);q=a;e.addOption(a,b);d&&f&&c()}):k?a.$watch(k,function(a,d){f.$set("value",a);var g=b.prop("selected");d!==a&&e.removeOption(d);e.addOption(a,b);d&&g&&c()}):e.addOption(f.value,b);f.$observe("disabled",function(a){if("true"===a||a&&b.prop("selected"))e.multiple?c(!0):(e.ngModelCtrl.$setViewValue(null),e.ngModelCtrl.$render())});b.on("$destroy",function(){var a=e.readValue(),b=f.value;e.removeOption(b);d();(e.multiple&&a&&-1!==a.indexOf(b)||a===b)&&c(!0)})}}],Me=function(){return{restrict:"E",
require:["select","?ngModel"],controller:ph,priority:1,link:{pre:function(a,b,d,c){var e=c[0],f=c[1];if(f){if(e.ngModelCtrl=f,b.on("change",function(){e.removeUnknownOption();a.$apply(function(){f.$setViewValue(e.readValue())})}),d.multiple){e.multiple=!0;e.readValue=function(){var a=[];q(b.find("option"),function(b){b.selected&&!b.disabled&&(b=b.value,a.push(b in e.selectValueMap?e.selectValueMap[b]:b))});return a};e.writeValue=function(a){q(b.find("option"),function(b){var c=!!a&&(-1!==Array.prototype.indexOf.call(a,
b.value)||-1!==Array.prototype.indexOf.call(a,e.selectValueMap[b.value]));c!==b.selected&&Fa(z(b),c)})};var g,k=NaN;a.$watch(function(){k!==f.$viewValue||sa(g,f.$viewValue)||(g=pa(f.$viewValue),f.$render());k=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}else e.registerOption=D},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},Ne=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){var c,e;u(d.ngValue)||
(u(d.value)?c=a(d.value,!0):(e=a(b.text(),!0))||d.$set("value",b.text()));return function(a,b,d){var h=b.parent();(h=h.data("$selectController")||h.parent().data("$selectController"))&&h.registerOption(a,b,d,c,e)}}}}],cd=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe("required",function(){c.$validate()}))}}},bd=function(){return{restrict:"A",require:"?ngModel",link:function(a,
b,d,c){if(c){var e,f=d.ngPattern||d.pattern;d.$observe("pattern",function(a){F(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw M("ngPattern")("noregexp",f,a,za(b));e=a||void 0;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||x(e)||e.test(b)}}}}},ed=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=-1;d.$observe("maxlength",function(a){a=Z(a);e=X(a)?-1:a;c.$validate()});c.$validators.maxlength=function(a,b){return 0>e||c.$isEmpty(b)||
b.length<=e}}}}},dd=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=0;d.$observe("minlength",function(a){e=Z(a)||0;c.$validate()});c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=e}}}}};y.angular.bootstrap?y.console&&console.log("WARNING: Tried to load AngularJS more than once."):(De(),Ge(ea),ea.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM",
"PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,
6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,
c){var e=a|0,f=c;void 0===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),z(function(){ye(y.document,Wc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
//# sourceMappingURL=angular.min.js.map

/*
 AngularJS v1.5.0
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(s,q,t){'use strict';var f="BUTTON A INPUT TEXTAREA SELECT DETAILS SUMMARY".split(" "),l=function(a,c){if(-1!==c.indexOf(a[0].nodeName))return!0};q.module("ngAria",["ng"]).provider("$aria",function(){function a(a,h,p,n){return function(d,e,b){var g=b.$normalize(h);!c[g]||l(e,p)||b[g]||d.$watch(b[a],function(b){b=n?!b:!!b;e.attr(h,b)})}}var c={ariaHidden:!0,ariaChecked:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeypress:!0,bindRoleForClick:!0};this.config=
function(a){c=q.extend(c,a)};this.$get=function(){return{config:function(a){return c[a]},$$watchExpr:a}}}).directive("ngShow",["$aria",function(a){return a.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function(a){return a.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function(a){return a.$$watchExpr("ngValue","aria-checked",f,!1)}]).directive("ngChecked",["$aria",function(a){return a.$$watchExpr("ngChecked","aria-checked",f,!1)}]).directive("ngRequired",
["$aria",function(a){return a.$$watchExpr("ngRequired","aria-required",f,!1)}]).directive("ngModel",["$aria",function(a){function c(c,n,d,e){return a.config(n)&&!d.attr(c)&&(e||!l(d,f))}function m(a,c){return!c.attr("role")&&c.attr("type")===a&&"INPUT"!==c[0].nodeName}function h(a,c){var d=a.type,e=a.role;return"checkbox"===(d||e)||"menuitemcheckbox"===e?"checkbox":"radio"===(d||e)||"menuitemradio"===e?"radio":"range"===d||"progressbar"===e||"slider"===e?"range":""}return{restrict:"A",require:"ngModel",
priority:200,compile:function(f,n){var d=h(n,f);return{pre:function(a,b,c,k){"checkbox"===d&&(k.$isEmpty=function(a){return!1===a})},post:function(e,b,g,k){function f(){return k.$modelValue}function h(a){b.attr("aria-checked",g.value==k.$viewValue)}function n(){b.attr("aria-checked",!k.$isEmpty(k.$viewValue))}var l=c("tabindex","tabindex",b,!1);switch(d){case "radio":case "checkbox":m(d,b)&&b.attr("role",d);c("aria-checked","ariaChecked",b,!1)&&e.$watch(f,"radio"===d?h:n);l&&b.attr("tabindex",0);
break;case "range":m(d,b)&&b.attr("role","slider");if(a.config("ariaValue")){var p=!b.attr("aria-valuemin")&&(g.hasOwnProperty("min")||g.hasOwnProperty("ngMin")),q=!b.attr("aria-valuemax")&&(g.hasOwnProperty("max")||g.hasOwnProperty("ngMax")),r=!b.attr("aria-valuenow");p&&g.$observe("min",function(a){b.attr("aria-valuemin",a)});q&&g.$observe("max",function(a){b.attr("aria-valuemax",a)});r&&e.$watch(f,function(a){b.attr("aria-valuenow",a)})}l&&b.attr("tabindex",0)}!g.hasOwnProperty("ngRequired")&&
k.$validators.required&&c("aria-required","ariaRequired",b,!1)&&g.$observe("required",function(){b.attr("aria-required",!!g.required)});c("aria-invalid","ariaInvalid",b,!0)&&e.$watch(function(){return k.$invalid},function(a){b.attr("aria-invalid",!!a)})}}}}}]).directive("ngDisabled",["$aria",function(a){return a.$$watchExpr("ngDisabled","aria-disabled",f,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(a,c,f,h){c.attr("aria-live")||c.attr("aria-live",
"assertive")}}}).directive("ngClick",["$aria","$parse",function(a,c){return{restrict:"A",compile:function(m,h){var p=c(h.ngClick,null,!0);return function(c,d,e){if(!l(d,f)&&(a.config("bindRoleForClick")&&!d.attr("role")&&d.attr("role","button"),a.config("tabindex")&&!d.attr("tabindex")&&d.attr("tabindex",0),a.config("bindKeypress")&&!e.ngKeypress))d.on("keypress",function(a){function d(){p(c,{$event:a})}var e=a.which||a.keyCode;32!==e&&13!==e||c.$apply(d)})}}}}]).directive("ngDblclick",["$aria",function(a){return function(c,
m,h){!a.config("tabindex")||m.attr("tabindex")||l(m,f)||m.attr("tabindex",0)}}])})(window,window.angular);
//# sourceMappingURL=angular-aria.min.js.map

/**
 * Bunch of useful filters for angularJS(with no external dependencies!)
 * @version v0.5.7 - 2015-10-04 * @link https://github.com/a8m/angular-filter
 * @author Ariel Mashraki <ariel@mashraki.co.il>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */!function(a,b,c){"use strict";function d(a){return D(a)?a:Object.keys(a).map(function(b){return a[b]})}function e(a){return null===a}function f(a,b){var d=Object.keys(a);return-1==d.map(function(d){return b[d]!==c&&b[d]==a[d]}).indexOf(!1)}function g(a,b){if(""===b)return a;var c=a.indexOf(b.charAt(0));return-1===c?!1:g(a.substr(c+1),b.substr(1))}function h(a,b,c){var d=0;return a.filter(function(a){var e=x(c)?b>d&&c(a):b>d;return d=e?d+1:d,e})}function i(a,b,c){return c.round(a*c.pow(10,b))/c.pow(10,b)}function j(a,b,c){b=b||[];var d=Object.keys(a);return d.forEach(function(d){if(C(a[d])&&!D(a[d])){var e=c?c+"."+d:c;j(a[d],b,e||d)}else{var f=c?c+"."+d:d;b.push(f)}}),b}function k(a){return a&&a.$evalAsync&&a.$watch}function l(){return function(a,b){return a>b}}function m(){return function(a,b){return a>=b}}function n(){return function(a,b){return b>a}}function o(){return function(a,b){return b>=a}}function p(){return function(a,b){return a==b}}function q(){return function(a,b){return a!=b}}function r(){return function(a,b){return a===b}}function s(){return function(a,b){return a!==b}}function t(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?!1:b.some(function(b){return C(b)||z(c)?a(c)(b):b===c})}}function u(a,b){return b=b||0,b>=a.length?a:D(a[b])?u(a.slice(0,b).concat(a[b],a.slice(b+1)),b):u(a,b+1)}function v(a){return function(b,c){function e(a,b){return y(b)?!1:a.some(function(a){return H(a,b)})}if(b=C(b)?d(b):b,!D(b))return b;var f=[],g=a(c);return y(c)?b.filter(function(a,b,c){return c.indexOf(a)===b}):b.filter(function(a){var b=g(a);return e(f,b)?!1:(f.push(b),!0)})}}function w(a,b,c){return b?a+c+w(a,--b,c):a}var x=b.isDefined,y=b.isUndefined,z=b.isFunction,A=b.isString,B=b.isNumber,C=b.isObject,D=b.isArray,E=b.forEach,F=b.extend,G=b.copy,H=b.equals;String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),b.module("a8m.angular",[]).filter("isUndefined",function(){return function(a){return b.isUndefined(a)}}).filter("isDefined",function(){return function(a){return b.isDefined(a)}}).filter("isFunction",function(){return function(a){return b.isFunction(a)}}).filter("isString",function(){return function(a){return b.isString(a)}}).filter("isNumber",function(){return function(a){return b.isNumber(a)}}).filter("isArray",function(){return function(a){return b.isArray(a)}}).filter("isObject",function(){return function(a){return b.isObject(a)}}).filter("isEqual",function(){return function(a,c){return b.equals(a,c)}}),b.module("a8m.conditions",[]).filter({isGreaterThan:l,">":l,isGreaterThanOrEqualTo:m,">=":m,isLessThan:n,"<":n,isLessThanOrEqualTo:o,"<=":o,isEqualTo:p,"==":p,isNotEqualTo:q,"!=":q,isIdenticalTo:r,"===":r,isNotIdenticalTo:s,"!==":s}),b.module("a8m.is-null",[]).filter("isNull",function(){return function(a){return e(a)}}),b.module("a8m.after-where",[]).filter("afterWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(-1===c?0:c)}}),b.module("a8m.after",[]).filter("after",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(b):a}}),b.module("a8m.before-where",[]).filter("beforeWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(0,-1===c?a.length:++c)}}),b.module("a8m.before",[]).filter("before",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(0,b?--b:b):a}}),b.module("a8m.chunk-by",["a8m.filter-watcher"]).filter("chunkBy",["filterWatcher",function(a){return function(b,c,d){function e(a,b){for(var c=[];a--;)c[a]=b;return c}function f(a,b,c){return D(a)?a.map(function(a,d,f){return d*=b,a=f.slice(d,d+b),!y(c)&&a.length<b?a.concat(e(b-a.length,c)):a}).slice(0,Math.ceil(a.length/b)):a}return a.isMemoized("chunkBy",arguments)||a.memoize("chunkBy",arguments,this,f(b,c,d))}}]),b.module("a8m.concat",[]).filter("concat",[function(){return function(a,b){if(y(b))return a;if(D(a))return C(b)?a.concat(d(b)):a.concat(b);if(C(a)){var c=d(a);return C(b)?c.concat(d(b)):c.concat(b)}return a}}]),b.module("a8m.contains",[]).filter({contains:["$parse",t],some:["$parse",t]}),b.module("a8m.count-by",[]).filter("countBy",["$parse",function(a){return function(b,c){var e,f={},g=a(c);return b=C(b)?d(b):b,!D(b)||y(c)?b:(b.forEach(function(a){e=g(a),f[e]||(f[e]=0),f[e]++}),f)}}]),b.module("a8m.defaults",[]).filter("defaults",["$parse",function(a){return function(b,c){if(b=C(b)?d(b):b,!D(b)||!C(c))return b;var e=j(c);return b.forEach(function(b){e.forEach(function(d){var e=a(d),f=e.assign;y(e(b))&&f(b,e(c))})}),b}}]),b.module("a8m.every",[]).filter("every",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?!0:b.every(function(b){return C(b)||z(c)?a(c)(b):b===c})}}]),b.module("a8m.filter-by",[]).filter("filterBy",["$parse",function(a){return function(b,e,f){var g;return f=A(f)||B(f)?String(f).toLowerCase():c,b=C(b)?d(b):b,!D(b)||y(f)?b:b.filter(function(b){return e.some(function(c){if(~c.indexOf("+")){var d=c.replace(new RegExp("\\s","g"),"").split("+");g=d.reduce(function(c,d,e){return 1===e?a(c)(b)+" "+a(d)(b):c+" "+a(d)(b)})}else g=a(c)(b);return A(g)||B(g)?String(g).toLowerCase().contains(f):!1})})}}]),b.module("a8m.first",[]).filter("first",["$parse",function(a){return function(b){var e,f,g;return b=C(b)?d(b):b,D(b)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(b,e,f?a(f):f):b[0]):b}}]),b.module("a8m.flatten",[]).filter("flatten",function(){return function(a,b){return b=b||!1,a=C(a)?d(a):a,D(a)?b?[].concat.apply([],a):u(a,0):a}}),b.module("a8m.fuzzy-by",[]).filter("fuzzyBy",["$parse",function(a){return function(b,c,e,f){var h,i,j=f||!1;return b=C(b)?d(b):b,!D(b)||y(c)||y(e)?b:(i=a(c),b.filter(function(a){return h=i(a),A(h)?(h=j?h:h.toLowerCase(),e=j?e:e.toLowerCase(),g(h,e)!==!1):!1}))}}]),b.module("a8m.fuzzy",[]).filter("fuzzy",function(){return function(a,b,c){function e(a,b){var c,d,e=Object.keys(a);return 0<e.filter(function(e){return c=a[e],d?!0:A(c)?(c=f?c:c.toLowerCase(),d=g(c,b)!==!1):!1}).length}var f=c||!1;return a=C(a)?d(a):a,!D(a)||y(b)?a:(b=f?b:b.toLowerCase(),a.filter(function(a){return A(a)?(a=f?a:a.toLowerCase(),g(a,b)!==!1):C(a)?e(a,b):!1}))}}),b.module("a8m.group-by",["a8m.filter-watcher"]).filter("groupBy",["$parse","filterWatcher",function(a,b){return function(c,d){function e(a,b){var c,d={};return E(a,function(a){c=b(a),d[c]||(d[c]=[]),d[c].push(a)}),d}return!C(c)||y(d)?c:b.isMemoized("groupBy",arguments)||b.memoize("groupBy",arguments,this,e(c,a(d)))}}]),b.module("a8m.is-empty",[]).filter("isEmpty",function(){return function(a){return C(a)?!d(a).length:!a.length}}),b.module("a8m.join",[]).filter("join",function(){return function(a,b){return y(a)||!D(a)?a:(y(b)&&(b=" "),a.join(b))}}),b.module("a8m.last",[]).filter("last",["$parse",function(a){return function(b){var e,f,g,i=G(b);return i=C(i)?d(i):i,D(i)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(i.reverse(),e,f?a(f):f).reverse():i[i.length-1]):i}}]),b.module("a8m.map",[]).filter("map",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.map(function(b){return a(c)(b)})}}]),b.module("a8m.omit",[]).filter("omit",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return!a(c)(b)})}}]),b.module("a8m.pick",[]).filter("pick",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return a(c)(b)})}}]),b.module("a8m.range",[]).filter("range",function(){return function(a,b){for(var c=0;c<parseInt(b);c++)a.push(c);return a}}),b.module("a8m.remove-with",[]).filter("removeWith",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return!f(b,a)}))}}),b.module("a8m.remove",[]).filter("remove",function(){return function(a){a=C(a)?d(a):a;var b=Array.prototype.slice.call(arguments,1);return D(a)?a.filter(function(a){return!b.some(function(b){return H(b,a)})}):a}}),b.module("a8m.reverse",[]).filter("reverse",[function(){return function(a){return a=C(a)?d(a):a,A(a)?a.split("").reverse().join(""):D(a)?a.slice().reverse():a}}]),b.module("a8m.search-field",[]).filter("searchField",["$parse",function(a){return function(b){var c,e;b=C(b)?d(b):b;var f=Array.prototype.slice.call(arguments,1);return D(b)&&f.length?b.map(function(b){return e=f.map(function(d){return(c=a(d))(b)}).join(" "),F(b,{searchField:e})}):b}}]),b.module("a8m.to-array",[]).filter("toArray",function(){return function(a,b){return C(a)?b?Object.keys(a).map(function(b){return F(a[b],{$key:b})}):d(a):a}}),b.module("a8m.unique",[]).filter({unique:["$parse",v],uniq:["$parse",v]}),b.module("a8m.where",[]).filter("where",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return f(b,a)}))}}),b.module("a8m.xor",[]).filter("xor",["$parse",function(a){return function(b,c,e){function f(b,c){var d=a(e);return c.some(function(a){return e?H(d(a),d(b)):H(a,b)})}return e=e||!1,b=C(b)?d(b):b,c=C(c)?d(c):c,D(b)&&D(c)?b.concat(c).filter(function(a){return!(f(a,b)&&f(a,c))}):b}}]),b.module("a8m.math.byteFmt",["a8m.math"]).filter("byteFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)?1024>b?i(b,c,a)+" B":1048576>b?i(b/1024,c,a)+" KB":1073741824>b?i(b/1048576,c,a)+" MB":i(b/1073741824,c,a)+" GB":"NaN"}}]),b.module("a8m.math.degrees",["a8m.math"]).filter("degrees",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)){var d=180*b/a.PI;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.kbFmt",["a8m.math"]).filter("kbFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)?1024>b?i(b,c,a)+" KB":1048576>b?i(b/1024,c,a)+" MB":i(b/1048576,c,a)+" GB":"NaN"}}]),b.module("a8m.math",[]).factory("$math",["$window",function(a){return a.Math}]),b.module("a8m.math.max",["a8m.math"]).filter("max",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.max.apply(a,e))}return function(b,d){return D(b)?y(d)?a.max.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.min",["a8m.math"]).filter("min",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.min.apply(a,e))}return function(b,d){return D(b)?y(d)?a.min.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.percent",["a8m.math"]).filter("percent",["$math","$window",function(a,b){return function(c,d,e){var f=A(c)?b.Number(c):c;return d=d||100,e=e||!1,!B(f)||b.isNaN(f)?c:e?a.round(f/d*100):f/d*100}}]),b.module("a8m.math.radians",["a8m.math"]).filter("radians",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)){var d=3.14159265359*b/180;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.radix",[]).filter("radix",function(){return function(a,b){var c=/^[2-9]$|^[1-2]\d$|^3[0-6]$/;return B(a)&&c.test(b)?a.toString(b).toUpperCase():a}}),b.module("a8m.math.shortFmt",["a8m.math"]).filter("shortFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)?1e3>b?b:1e6>b?i(b/1e3,c,a)+" K":1e9>b?i(b/1e6,c,a)+" M":i(b/1e9,c,a)+" B":"NaN"}}]),b.module("a8m.math.sum",[]).filter("sum",function(){return function(a,b){return D(a)?a.reduce(function(a,b){return a+b},b||0):a}}),b.module("a8m.ends-with",[]).filter("endsWith",function(){return function(a,b,c){var d,e=c||!1;return!A(a)||y(b)?a:(a=e?a:a.toLowerCase(),d=a.length-b.length,-1!==a.indexOf(e?b:b.toLowerCase(),d))}}),b.module("a8m.latinize",[]).filter("latinize",[function(){function a(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return c[a]||a})}for(var b=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],c={},d=0;d<b.length;d++)for(var e=b[d].letters.split(""),f=0;f<e.length;f++)c[e[f]]=b[d].base;return function(b){return A(b)?a(b):b}}]),b.module("a8m.ltrim",[]).filter("ltrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+"),""):a}}),b.module("a8m.match",[]).filter("match",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?a.match(d):null}}),b.module("a8m.repeat",[]).filter("repeat",[function(){return function(a,b,c){var d=~~b;return A(a)&&d?w(a,--b,c||""):a}}]),b.module("a8m.rtrim",[]).filter("rtrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp(c+"+$"),""):a}}),b.module("a8m.slugify",[]).filter("slugify",[function(){return function(a,b){var c=y(b)?"-":b;return A(a)?a.toLowerCase().replace(/\s+/g,c):a}}]),b.module("a8m.starts-with",[]).filter("startsWith",function(){return function(a,b,c){var d=c||!1;return!A(a)||y(b)?a:(a=d?a:a.toLowerCase(),!a.indexOf(d?b:b.toLowerCase()))}}),b.module("a8m.stringular",[]).filter("stringular",function(){return function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return y(b[c])?a:b[c]})}}),b.module("a8m.strip-tags",[]).filter("stripTags",function(){return function(a){return A(a)?a.replace(/<\S[^><]*>/g,""):a}}),b.module("a8m.test",[]).filter("test",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?d.test(a):a}}),b.module("a8m.trim",[]).filter("trim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+|"+c+"+$","g"),""):a}}),b.module("a8m.truncate",[]).filter("truncate",function(){return function(a,b,c,d){return b=y(b)?a.length:b,d=d||!1,c=c||"",!A(a)||a.length<=b?a:a.substring(0,d?-1===a.indexOf(" ",b)?a.length:a.indexOf(" ",b):b)+c}}),b.module("a8m.ucfirst",[]).filter("ucfirst",[function(){return function(a){return A(a)?a.split(" ").map(function(a){return a.charAt(0).toUpperCase()+a.substring(1)}).join(" "):a}}]),b.module("a8m.uri-component-encode",[]).filter("uriComponentEncode",["$window",function(a){return function(b){return A(b)?a.encodeURIComponent(b):b}}]),b.module("a8m.uri-encode",[]).filter("uriEncode",["$window",function(a){return function(b){return A(b)?a.encodeURI(b):b}}]),b.module("a8m.wrap",[]).filter("wrap",function(){return function(a,b,c){return A(a)&&x(b)?[b,a,c||b].join(""):a}}),b.module("a8m.filter-watcher",[]).provider("filterWatcher",function(){this.$get=["$window","$rootScope",function(a,b){function c(b,c){function d(){var b=[];return function(c,d){if(C(d)&&!e(d)){if(~b.indexOf(d))return"[Circular]";b.push(d)}return a==d?"$WINDOW":a.document==d?"$DOCUMENT":k(d)?"$SCOPE":d}}return[b,JSON.stringify(c,d())].join("#").replace(/"/g,"")}function d(a){var b=a.targetScope.$id;E(l[b],function(a){delete j[a]}),delete l[b]}function f(){m(function(){b.$$phase||(j={})},2e3)}function g(a,b){var c=a.$id;return y(l[c])&&(a.$on("$destroy",d),l[c]=[]),l[c].push(b)}function h(a,b){var d=c(a,b);return j[d]}function i(a,b,d,e){var h=c(a,b);return j[h]=e,k(d)?g(d,h):f(),e}var j={},l={},m=a.setTimeout;return{isMemoized:h,memoize:i}}]}),b.module("angular.filter",["a8m.ucfirst","a8m.uri-encode","a8m.uri-component-encode","a8m.slugify","a8m.latinize","a8m.strip-tags","a8m.stringular","a8m.truncate","a8m.starts-with","a8m.ends-with","a8m.wrap","a8m.trim","a8m.ltrim","a8m.rtrim","a8m.repeat","a8m.test","a8m.match","a8m.to-array","a8m.concat","a8m.contains","a8m.unique","a8m.is-empty","a8m.after","a8m.after-where","a8m.before","a8m.before-where","a8m.defaults","a8m.where","a8m.reverse","a8m.remove","a8m.remove-with","a8m.group-by","a8m.count-by","a8m.chunk-by","a8m.search-field","a8m.fuzzy-by","a8m.fuzzy","a8m.omit","a8m.pick","a8m.every","a8m.filter-by","a8m.xor","a8m.map","a8m.first","a8m.last","a8m.flatten","a8m.join","a8m.range","a8m.math","a8m.math.max","a8m.math.min","a8m.math.percent","a8m.math.radix","a8m.math.sum","a8m.math.degrees","a8m.math.radians","a8m.math.byteFmt","a8m.math.kbFmt","a8m.math.shortFmt","a8m.angular","a8m.conditions","a8m.is-null","a8m.filter-watcher"])}(window,window.angular);
/*
 AngularJS v1.5.0
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(Q,d,G){'use strict';function H(t,g){g=g||{};d.forEach(g,function(d,q){delete g[q]});for(var q in t)!t.hasOwnProperty(q)||"$"===q.charAt(0)&&"$"===q.charAt(1)||(g[q]=t[q]);return g}var z=d.$$minErr("$resource"),N=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;d.module("ngResource",["ng"]).provider("$resource",function(){var t=/^https?:\/\/[^\/]*/,g=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}};
this.$get=["$http","$log","$q","$timeout",function(q,M,I,J){function A(d,h){return encodeURIComponent(d).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,h?"%20":"+")}function B(d,h){this.template=d;this.defaults=v({},g.defaults,h);this.urlParams={}}function K(e,h,n,k){function c(a,b){var c={};b=v({},h,b);u(b,function(b,h){x(b)&&(b=b());var f;if(b&&b.charAt&&"@"==b.charAt(0)){f=a;var l=b.substr(1);if(null==l||""===l||"hasOwnProperty"===l||!N.test("."+
l))throw z("badmember",l);for(var l=l.split("."),m=0,k=l.length;m<k&&d.isDefined(f);m++){var r=l[m];f=null!==f?f[r]:G}}else f=b;c[h]=f});return c}function O(a){return a.resource}function m(a){H(a||{},this)}var t=new B(e,k);n=v({},g.defaults.actions,n);m.prototype.toJSON=function(){var a=v({},this);delete a.$promise;delete a.$resolved;return a};u(n,function(a,b){var h=/^(POST|PUT|PATCH)$/i.test(a.method),e=a.timeout,E=d.isDefined(a.cancellable)?a.cancellable:k&&d.isDefined(k.cancellable)?k.cancellable:
g.defaults.cancellable;e&&!d.isNumber(e)&&(M.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete a.timeout,e=null);m[b]=function(f,l,k,g){var r={},n,w,C;switch(arguments.length){case 4:C=g,w=k;case 3:case 2:if(x(l)){if(x(f)){w=f;C=l;break}w=l;C=k}else{r=f;n=l;w=k;break}case 1:x(f)?
w=f:h?n=f:r=f;break;case 0:break;default:throw z("badargs",arguments.length);}var D=this instanceof m,p=D?n:a.isArray?[]:new m(n),s={},A=a.interceptor&&a.interceptor.response||O,B=a.interceptor&&a.interceptor.responseError||G,y,F;u(a,function(a,b){switch(b){default:s[b]=P(a);case "params":case "isArray":case "interceptor":case "cancellable":}});!D&&E&&(y=I.defer(),s.timeout=y.promise,e&&(F=J(y.resolve,e)));h&&(s.data=n);t.setUrlParams(s,v({},c(n,a.params||{}),r),a.url);r=q(s).then(function(f){var c=
f.data;if(c){if(d.isArray(c)!==!!a.isArray)throw z("badcfg",b,a.isArray?"array":"object",d.isArray(c)?"array":"object",s.method,s.url);if(a.isArray)p.length=0,u(c,function(b){"object"===typeof b?p.push(new m(b)):p.push(b)});else{var l=p.$promise;H(c,p);p.$promise=l}}f.resource=p;return f},function(b){(C||L)(b);return I.reject(b)});r.finally(function(){p.$resolved=!0;!D&&E&&(p.$cancelRequest=d.noop,J.cancel(F),y=F=s.timeout=null)});r=r.then(function(b){var a=A(b);(w||L)(a,b.headers);return a},B);return D?
r:(p.$promise=r,p.$resolved=!1,E&&(p.$cancelRequest=y.resolve),p)};m.prototype["$"+b]=function(a,c,d){x(a)&&(d=c,c=a,a={});a=m[b].call(this,a,this,c,d);return a.$promise||a}});m.bind=function(a){return K(e,v({},h,a),n)};return m}var L=d.noop,u=d.forEach,v=d.extend,P=d.copy,x=d.isFunction;B.prototype={setUrlParams:function(e,h,n){var k=this,c=n||k.template,g,m,q="",a=k.urlParams={};u(c.split(/\W/),function(b){if("hasOwnProperty"===b)throw z("badname");!/^\d+$/.test(b)&&b&&(new RegExp("(^|[^\\\\]):"+
b+"(\\W|$)")).test(c)&&(a[b]={isQueryParamValue:(new RegExp("\\?.*=:"+b+"(?:\\W|$)")).test(c)})});c=c.replace(/\\:/g,":");c=c.replace(t,function(a){q=a;return""});h=h||{};u(k.urlParams,function(a,e){g=h.hasOwnProperty(e)?h[e]:k.defaults[e];d.isDefined(g)&&null!==g?(m=a.isQueryParamValue?A(g,!0):A(g,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),c=c.replace(new RegExp(":"+e+"(\\W|$)","g"),function(a,b){return m+b})):c=c.replace(new RegExp("(/?):"+e+"(\\W|$)","g"),function(a,b,c){return"/"==
c.charAt(0)?c:b+c})});k.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/");c=c.replace(/\/\.(?=\w+($|\?))/,".");e.url=q+c.replace(/\/\\\./,"/.");u(h,function(a,c){k.urlParams[c]||(e.params=e.params||{},e.params[c]=a)})}};return K}]})})(window,window.angular);
//# sourceMappingURL=angular-resource.min.js.map

/*
 AngularJS v1.5.0
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(r,d,C){'use strict';function x(s,h,g){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,c,b,f,y){function k(){n&&(g.cancel(n),n=null);l&&(l.$destroy(),l=null);m&&(n=g.leave(m),n.then(function(){n=null}),m=null)}function z(){var b=s.current&&s.current.locals;if(d.isDefined(b&&b.$template)){var b=a.$new(),f=s.current;m=y(b,function(b){g.enter(b,null,m||c).then(function(){!d.isDefined(u)||u&&!a.$eval(u)||h()});k()});l=f.scope=b;l.$emit("$viewContentLoaded");
l.$eval(v)}else k()}var l,m,n,u=b.autoscroll,v=b.onload||"";a.$on("$routeChangeSuccess",z);z()}}}function A(d,h,g){return{restrict:"ECA",priority:-400,link:function(a,c){var b=g.current,f=b.locals;c.html(f.$template);var y=d(c.contents());if(b.controller){f.$scope=a;var k=h(b.controller,f);b.controllerAs&&(a[b.controllerAs]=k);c.data("$ngControllerController",k);c.children().data("$ngControllerController",k)}a[b.resolveAs||"$resolve"]=f;y(a)}}}r=d.module("ngRoute",["ng"]).provider("$route",function(){function s(a,
c){return d.extend(Object.create(a),c)}function h(a,d){var b=d.caseInsensitiveMatch,f={originalPath:a,regexp:a},g=f.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,d,b,c){a="?"===c?c:null;c="*"===c?c:null;g.push({name:b,optional:!!a});d=d||"";return""+(a?"":d)+"(?:"+(a?d:"")+(c&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1");f.regexp=new RegExp("^"+a+"$",b?"i":"");return f}var g={};this.when=function(a,c){var b=d.copy(c);d.isUndefined(b.reloadOnSearch)&&
(b.reloadOnSearch=!0);d.isUndefined(b.caseInsensitiveMatch)&&(b.caseInsensitiveMatch=this.caseInsensitiveMatch);g[a]=d.extend(b,a&&h(a,b));if(a){var f="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";g[f]=d.extend({redirectTo:a},h(f,b))}return this};this.caseInsensitiveMatch=!1;this.otherwise=function(a){"string"===typeof a&&(a={redirectTo:a});this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(a,c,b,f,h,k,r){function l(b){var e=
t.current;(x=(p=n())&&e&&p.$$route===e.$$route&&d.equals(p.pathParams,e.pathParams)&&!p.reloadOnSearch&&!v)||!e&&!p||a.$broadcast("$routeChangeStart",p,e).defaultPrevented&&b&&b.preventDefault()}function m(){var w=t.current,e=p;if(x)w.params=e.params,d.copy(w.params,b),a.$broadcast("$routeUpdate",w);else if(e||w)v=!1,(t.current=e)&&e.redirectTo&&(d.isString(e.redirectTo)?c.path(u(e.redirectTo,e.params)).search(e.params).replace():c.url(e.redirectTo(e.pathParams,c.path(),c.search())).replace()),f.when(e).then(function(){if(e){var a=
d.extend({},e.resolve),b,c;d.forEach(a,function(b,e){a[e]=d.isString(b)?h.get(b):h.invoke(b,null,null,e)});d.isDefined(b=e.template)?d.isFunction(b)&&(b=b(e.params)):d.isDefined(c=e.templateUrl)&&(d.isFunction(c)&&(c=c(e.params)),d.isDefined(c)&&(e.loadedTemplateUrl=r.valueOf(c),b=k(c)));d.isDefined(b)&&(a.$template=b);return f.all(a)}}).then(function(c){e==t.current&&(e&&(e.locals=c,d.copy(e.params,b)),a.$broadcast("$routeChangeSuccess",e,w))},function(b){e==t.current&&a.$broadcast("$routeChangeError",
e,w,b)})}function n(){var a,b;d.forEach(g,function(f,g){var q;if(q=!b){var h=c.path();q=f.keys;var l={};if(f.regexp)if(h=f.regexp.exec(h)){for(var k=1,n=h.length;k<n;++k){var m=q[k-1],p=h[k];m&&p&&(l[m.name]=p)}q=l}else q=null;else q=null;q=a=q}q&&(b=s(f,{params:d.extend({},c.search(),a),pathParams:a}),b.$$route=f)});return b||g[null]&&s(g[null],{params:{},pathParams:{}})}function u(a,b){var c=[];d.forEach((a||"").split(":"),function(a,d){if(0===d)c.push(a);else{var f=a.match(/(\w+)(?:[?*])?(.*)/),
g=f[1];c.push(b[g]);c.push(f[2]||"");delete b[g]}});return c.join("")}var v=!1,p,x,t={routes:g,reload:function(){v=!0;var b={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0;v=!1}};a.$evalAsync(function(){l(b);b.defaultPrevented||m()})},updateParams:function(a){if(this.current&&this.current.$$route)a=d.extend({},this.current.params,a),c.path(u(this.current.$$route.originalPath,a)),c.search(a);else throw B("norout");}};a.$on("$locationChangeStart",l);a.$on("$locationChangeSuccess",
m);return t}]});var B=d.$$minErr("ngRoute");r.provider("$routeParams",function(){this.$get=function(){return{}}});r.directive("ngView",x);r.directive("ngView",A);x.$inject=["$route","$anchorScroll","$animate"];A.$inject=["$compile","$controller","$route"]})(window,window.angular);
//# sourceMappingURL=angular-route.min.js.map

/*!
 * angular-translate - v2.17.1 - 2018-04-16
 * 
 * Copyright (c) 2018 The angular-translate team, Pascal Precht; Licensed MIT
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():e()}(0,function(){function t(t){"use strict";var e=t.storageKey(),n=t.storage(),a=function(){var a=t.preferredLanguage();angular.isString(a)?t.use(a):n.put(e,t.use())};a.displayName="fallbackFromIncorrectStorageValue",n?n.get(e)?t.use(n.get(e)).catch(a):a():angular.isString(t.preferredLanguage())&&t.use(t.preferredLanguage())}function e(t,e,n,a){"use strict";var r,i,s,o,u,l,c,f,g,p,h,d,v,m,$,y,b={},S=[],L=t,j=[],w="translate-cloak",C=!1,N=!1,O=".",E=!1,k=!1,P=0,A=!0,z="default",T={default:function(t){return(t||"").split("-").join("_")},java:function(t){var e=(t||"").split("-").join("_"),n=e.split("_");return n.length>1?n[0].toLowerCase()+"_"+n[1].toUpperCase():e},bcp47:function(t){var e=(t||"").split("_").join("-"),n=e.split("-");switch(n.length){case 1:n[0]=n[0].toLowerCase();break;case 2:n[0]=n[0].toLowerCase(),4===n[1].length?n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase():n[1]=n[1].toUpperCase();break;case 3:n[0]=n[0].toLowerCase(),n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase(),n[2]=n[2].toUpperCase();break;default:return e}return n.join("-")},"iso639-1":function(t){return(t||"").split("_").join("-").split("-")[0].toLowerCase()}},x=function(){if(angular.isFunction(a.getLocale))return a.getLocale();var t,n,r=e.$get().navigator,i=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(r.languages))for(t=0;t<r.languages.length;t++)if((n=r.languages[t])&&n.length)return n;for(t=0;t<i.length;t++)if((n=r[i[t]])&&n.length)return n;return null};x.displayName="angular-translate/service: getFirstBrowserLanguage";var F=function(){var t=x()||"";return T[z]&&(t=T[z](t)),t};F.displayName="angular-translate/service: getLocale";var I=function(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1},_=function(){return this.toString().replace(/^\s+|\s+$/g,"")},V=function(t){return angular.isString(t)?t.toLowerCase():t},R=function(t){if(t){for(var e=[],n=V(t),a=0,r=S.length;a<r;a++)e.push(V(S[a]));if((a=I(e,n))>-1)return S[a];if(i){var s;for(var o in i)if(i.hasOwnProperty(o)){var u=!1,l=Object.prototype.hasOwnProperty.call(i,o)&&V(o)===V(t);if("*"===o.slice(-1)&&(u=V(o.slice(0,-1))===V(t.slice(0,o.length-1))),(l||u)&&(s=i[o],I(e,V(s))>-1))return s}}var c=t.split("_");return c.length>1&&I(e,V(c[0]))>-1?c[0]:void 0}},D=function(t,e){if(!t&&!e)return b;if(t&&!e){if(angular.isString(t))return b[t]}else angular.isObject(b[t])||(b[t]={}),angular.extend(b[t],K(e));return this};this.translations=D,this.cloakClassName=function(t){return t?(w=t,this):w},this.nestedObjectDelimeter=function(t){return t?(O=t,this):O};var K=function(t,e,n,a){var r,i,s;e||(e=[]),n||(n={});for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s=t[r],angular.isObject(s)?K(s,e.concat(r),n,r):(i=e.length?""+e.join(O)+O+r:r,e.length&&r===a&&(n[""+e.join(O)]="@:"+i),n[i]=s));return n};K.displayName="flatObject",this.addInterpolation=function(t){return j.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return p=t,this},this.useSanitizeValueStrategy=function(t){return n.useStrategy(t),this},this.preferredLanguage=function(t){return t?(U(t),this):r};var U=function(t){return t&&(r=t),r};this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(v=t,this):v},this.translationNotFoundIndicatorRight=function(t){return t?(m=t,this):m},this.fallbackLanguage=function(t){return M(t),this};var M=function(t){return t?(angular.isString(t)?(o=!0,s=[t]):angular.isArray(t)&&(o=!1,s=t),angular.isString(r)&&I(s,r)<0&&s.push(r),this):o?s[0]:s};this.use=function(t){if(t){if(!b[t]&&!h)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return u=t,this}return u},this.resolveClientLocale=function(){return F()};var H=function(t){return t?(L=t,this):f?f+L:L};this.storageKey=H,this.useUrlLoader=function(t,e){return this.useLoader("$translateUrlLoader",angular.extend({url:t},e))},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return h=t,d=e||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return c=t,this},this.storagePrefix=function(t){return t?(f=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return g=t,this},this.usePostCompiling=function(t){return C=!!t,this},this.forceAsyncReload=function(t){return N=!!t,this},this.uniformLanguageTag=function(t){return t?angular.isString(t)&&(t={standard:t}):t={},z=t.standard,this},this.determinePreferredLanguage=function(t){var e=t&&angular.isFunction(t)?t():F();return r=S.length?R(e)||e:e,this},this.registerAvailableLanguageKeys=function(t,e){return t?(S=t,e&&(i=e),this):S},this.useLoaderCache=function(t){return!1===t?$=void 0:!0===t?$=!0:void 0===t?$="$translationCache":t&&($=t),this},this.directivePriority=function(t){return void 0===t?P:(P=t,this)},this.statefulFilter=function(t){return void 0===t?A:(A=t,this)},this.postProcess=function(t){return y=t||void 0,this},this.keepContent=function(t){return k=!!t,this},this.$get=["$log","$injector","$rootScope","$q",function(t,e,n,a){var i,f,z,T=e.get(p||"$translateDefaultInterpolation"),x=!1,V={},G={},q=function(t,e,n,o,l,g){!u&&r&&(u=r);var p=l&&l!==u?R(l)||l:u;if(l&&lt(l),angular.isArray(t)){return function(t){for(var r={},i=[],s=0,u=t.length;s<u;s++)i.push(function(t){var i=a.defer(),s=function(e){r[t]=e,i.resolve([t,e])};return q(t,e,n,o,l,g).then(s,s),i.promise}(t[s]));return a.all(i).then(function(){return r})}(t)}var h=a.defer();t&&(t=_.apply(t));var d=function(){var t=G[p]||G[r];if(f=0,c&&!t){var e=i.get(L);if(t=G[e],s&&s.length){var n=I(s,e);f=0===n?1:0,I(s,r)<0&&s.push(r)}}return t}();if(d){var v=function(){l||(p=u),it(t,e,n,o,p,g).then(h.resolve,h.reject)};v.displayName="promiseResolved",d.finally(v).catch(angular.noop)}else it(t,e,n,o,p,g).then(h.resolve,h.reject);return h.promise},Y=function(t){return v&&(t=[v,t].join(" ")),m&&(t=[t,m].join(" ")),t},B=function(t){u=t,c&&i.put(q.storageKey(),u),n.$emit("$translateChangeSuccess",{language:t}),T.setLocale(u);var e=function(t,e){V[e].setLocale(u)};e.displayName="eachInterpolatorLocaleSetter",angular.forEach(V,e),n.$emit("$translateChangeEnd",{language:t})},J=function(t){if(!t)throw"No language key specified for loading.";var r=a.defer();n.$emit("$translateLoadingStart",{language:t}),x=!0;var i=$;"string"==typeof i&&(i=e.get(i));var s=angular.extend({},d,{key:t,$http:angular.extend({},{cache:i},d.$http)}),o=function(e){var a={};n.$emit("$translateLoadingSuccess",{language:t}),angular.isArray(e)?angular.forEach(e,function(t){angular.extend(a,K(t))}):angular.extend(a,K(e)),x=!1,r.resolve({key:t,table:a}),n.$emit("$translateLoadingEnd",{language:t})};o.displayName="onLoaderSuccess";var u=function(t){n.$emit("$translateLoadingError",{language:t}),r.reject(t),n.$emit("$translateLoadingEnd",{language:t})};return u.displayName="onLoaderError",e.get(h)(s).then(o,u),r.promise};if(c&&(!(i=e.get(c)).get||!i.put))throw new Error("Couldn't use storage '"+c+"', missing get() or put() method!");if(j.length){var Q=function(t){var n=e.get(t);n.setLocale(r||u),V[n.getInterpolationIdentifier()]=n};Q.displayName="interpolationFactoryAdder",angular.forEach(j,Q)}var W=function(t){var e=a.defer();if(Object.prototype.hasOwnProperty.call(b,t))e.resolve(b[t]);else if(G[t]){var n=function(t){D(t.key,t.table),e.resolve(t.table)};n.displayName="translationTableResolver",G[t].then(n,e.reject)}else e.reject();return e.promise},X=function(t,e,n,r,i){var s=a.defer(),o=function(a){if(Object.prototype.hasOwnProperty.call(a,e)&&null!==a[e]){r.setLocale(t);var o=a[e];if("@:"===o.substr(0,2))X(t,o.substr(2),n,r,i).then(s.resolve,s.reject);else{var l=r.interpolate(a[e],n,"service",i,e);l=ut(e,a[e],l,n,t),s.resolve(l)}r.setLocale(u)}else s.reject()};return o.displayName="fallbackTranslationResolver",W(t).then(o,s.reject),s.promise},Z=function(t,e,n,a,r){var i,s=b[t];if(s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){if(a.setLocale(t),i=a.interpolate(s[e],n,"filter",r,e),i=ut(e,s[e],i,n,t,r),!angular.isString(i)&&angular.isFunction(i.$$unwrapTrustedValue)){var o=i.$$unwrapTrustedValue();if("@:"===o.substr(0,2))return Z(t,o.substr(2),n,a,r)}else if("@:"===i.substr(0,2))return Z(t,i.substr(2),n,a,r);a.setLocale(u)}return i},tt=function(t,n,a,r){return g?e.get(g)(t,u,n,a,r):t},et=function(t,e,n,r,i,o){var u=a.defer();if(t<s.length){var l=s[t];X(l,e,n,r,o).then(function(t){u.resolve(t)},function(){return et(t+1,e,n,r,i,o).then(u.resolve,u.reject)})}else if(i)u.resolve(i);else{var c=tt(e,n,i);g&&c?u.resolve(c):u.reject(Y(e))}return u.promise},nt=function(t,e,n,a,r){var i;if(t<s.length){var o=s[t];(i=Z(o,e,n,a,r))||""===i||(i=nt(t+1,e,n,a))}return i},at=function(t,e,n,a,r){return et(z>0?z:f,t,e,n,a,r)},rt=function(t,e,n,a){return nt(z>0?z:f,t,e,n,a)},it=function(t,e,n,r,i,o){var u=a.defer(),l=i?b[i]:b,c=n?V[n]:T;if(l&&Object.prototype.hasOwnProperty.call(l,t)&&null!==l[t]){var f=l[t];if("@:"===f.substr(0,2))q(f.substr(2),e,n,r,i,o).then(u.resolve,u.reject);else{var p=c.interpolate(f,e,"service",o,t);p=ut(t,f,p,e,i),u.resolve(p)}}else{var h;g&&!x&&(h=tt(t,e,r)),i&&s&&s.length?at(t,e,c,r,o).then(function(t){u.resolve(t)},function(t){u.reject(Y(t))}):g&&!x&&h?r?u.resolve(r):u.resolve(h):r?u.resolve(r):u.reject(Y(t))}return u.promise},st=function(t,e,n,a,r){var i,o=a?b[a]:b,u=T;if(V&&Object.prototype.hasOwnProperty.call(V,n)&&(u=V[n]),o&&Object.prototype.hasOwnProperty.call(o,t)&&null!==o[t]){var l=o[t];"@:"===l.substr(0,2)?i=st(l.substr(2),e,n,a,r):(i=u.interpolate(l,e,"filter",r,t),i=ut(t,l,i,e,a,r))}else{var c;g&&!x&&(c=tt(t,e,r)),a&&s&&s.length?(f=0,i=rt(t,e,u,r)):i=g&&!x&&c?c:Y(t)}return i},ot=function(t){l===t&&(l=void 0),G[t]=void 0},ut=function(t,n,a,r,i,s){var o=y;return o&&("string"==typeof o&&(o=e.get(o)),o)?o(t,n,a,r,i,s):a},lt=function(t){b[t]||!h||G[t]||(G[t]=J(t).then(function(t){return D(t.key,t.table),t}))};q.preferredLanguage=function(t){return t&&U(t),r},q.cloakClassName=function(){return w},q.nestedObjectDelimeter=function(){return O},q.fallbackLanguage=function(t){if(void 0!==t&&null!==t){if(M(t),h&&s&&s.length)for(var e=0,n=s.length;e<n;e++)G[s[e]]||(G[s[e]]=J(s[e]));q.use(q.use())}return o?s[0]:s},q.useFallbackLanguage=function(t){if(void 0!==t&&null!==t)if(t){var e=I(s,t);e>-1&&(z=e)}else z=0},q.proposedLanguage=function(){return l},q.storage=function(){return i},q.negotiateLocale=R,q.use=function(t){if(!t)return u;var e=a.defer();e.promise.then(null,angular.noop),n.$emit("$translateChangeStart",{language:t});var r=R(t);return S.length>0&&!r?a.reject(t):(r&&(t=r),l=t,!N&&b[t]||!h||G[t]?G[t]?G[t].then(function(t){return l===t.key&&B(t.key),e.resolve(t.key),t},function(t){return!u&&s&&s.length>0&&s[0]!==t?q.use(s[0]).then(e.resolve,e.reject):e.reject(t)}):(e.resolve(t),B(t)):(G[t]=J(t).then(function(n){return D(n.key,n.table),e.resolve(n.key),l===t&&B(n.key),n},function(t){return n.$emit("$translateChangeError",{language:t}),e.reject(t),n.$emit("$translateChangeEnd",{language:t}),a.reject(t)}),G[t].finally(function(){ot(t)}).catch(angular.noop)),e.promise)},q.resolveClientLocale=function(){return F()},q.storageKey=function(){return H()},q.isPostCompilingEnabled=function(){return C},q.isForceAsyncReloadEnabled=function(){return N},q.isKeepContent=function(){return k},q.refresh=function(t){function e(t){var e=J(t);return G[t]=e,e.then(function(e){b[t]={},D(t,e.table),i[t]=!0},angular.noop),e}if(!h)throw new Error("Couldn't refresh translation table, no loader registered!");n.$emit("$translateRefreshStart",{language:t});var r=a.defer(),i={};if(r.promise.then(function(){for(var t in b)b.hasOwnProperty(t)&&(t in i||delete b[t]);u&&B(u)},angular.noop).finally(function(){n.$emit("$translateRefreshEnd",{language:t})}),t)b[t]?e(t).then(r.resolve,r.reject):r.reject();else{var o=s&&s.slice()||[];u&&-1===o.indexOf(u)&&o.push(u),a.all(o.map(e)).then(r.resolve,r.reject)}return r.promise},q.instant=function(t,e,n,a,i){var o=a&&a!==u?R(a)||a:u;if(null===t||angular.isUndefined(t))return t;if(a&&lt(a),angular.isArray(t)){for(var l={},c=0,f=t.length;c<f;c++)l[t[c]]=q.instant(t[c],e,n,a,i);return l}if(angular.isString(t)&&t.length<1)return t;t&&(t=_.apply(t));var p,h=[];r&&h.push(r),o&&h.push(o),s&&s.length&&(h=h.concat(s));for(var d=0,$=h.length;d<$;d++){var y=h[d];if(b[y]&&void 0!==b[y][t]&&(p=st(t,e,n,o,i)),void 0!==p)break}if(!p&&""!==p)if(v||m)p=Y(t);else{p=T.interpolate(t,e,"filter",i);var S;g&&!x&&(S=tt(t,e,i)),g&&!x&&S&&(p=S)}return p},q.versionInfo=function(){return"2.17.1"},q.loaderCache=function(){return $},q.directivePriority=function(){return P},q.statefulFilter=function(){return A},q.isReady=function(){return E};var ct=a.defer();ct.promise.then(function(){E=!0}),q.onReady=function(t){var e=a.defer();return angular.isFunction(t)&&e.promise.then(t),E?e.resolve():ct.promise.then(e.resolve),e.promise},q.getAvailableLanguageKeys=function(){return S.length>0?S:null},q.getTranslationTable=function(t){return(t=t||q.use())&&b[t]?angular.copy(b[t]):null};var ft=n.$on("$translateReady",function(){ct.resolve(),ft(),ft=null}),gt=n.$on("$translateChangeEnd",function(){ct.resolve(),gt(),gt=null});if(h){if(angular.equals(b,{})&&q.use()&&q.use(q.use()),s&&s.length)for(var pt=0,ht=s.length;pt<ht;pt++){var dt=s[pt];!N&&b[dt]||(G[dt]=J(dt).then(function(t){return D(t.key,t.table),n.$emit("$translateChangeEnd",{language:t.key}),t}))}}else n.$emit("$translateReady",{language:q.use()});return q}]}function n(t,e){"use strict";var n,a={};return a.setLocale=function(t){n=t},a.getInterpolationIdentifier=function(){return"default"},a.useSanitizeValueStrategy=function(t){return e.useStrategy(t),this},a.interpolate=function(n,a,r,i,s){a=a||{},a=e.sanitize(a,"params",i,r);var o;return angular.isNumber(n)?o=""+n:angular.isString(n)?(o=t(n)(a),o=e.sanitize(o,"text",i,r)):o="",o},a}function a(t,e,n,a,i){"use strict";var s=function(){return this.toString().replace(/^\s+|\s+$/g,"")},o=function(t){return angular.isString(t)?t.toLowerCase():t};return{restrict:"AE",scope:!0,priority:t.directivePriority(),compile:function(u,l){var c=l.translateValues?l.translateValues:void 0,f=l.translateInterpolation?l.translateInterpolation:void 0,g=l.translateSanitizeStrategy?l.translateSanitizeStrategy:void 0,p=u[0].outerHTML.match(/translate-value-+/i),h="^(.*)("+e.startSymbol()+".*"+e.endSymbol()+")(.*)",d="^(.*)"+e.startSymbol()+"(.*)"+e.endSymbol()+"(.*)";return function(u,v,m){u.interpolateParams={},u.preText="",u.postText="",u.translateNamespace=r(u);var $={},y=function(t){if(angular.isFunction(y._unwatchOld)&&(y._unwatchOld(),y._unwatchOld=void 0),angular.equals(t,"")||!angular.isDefined(t)){var n=s.apply(v.text()),a=n.match(h);if(angular.isArray(a)){u.preText=a[1],u.postText=a[3],$.translate=e(a[2])(u.$parent);var r=n.match(d);angular.isArray(r)&&r[2]&&r[2].length&&(y._unwatchOld=u.$watch(r[2],function(t){$.translate=t,j()}))}else $.translate=n||void 0}else $.translate=t;j()};!function(t,e,n){if(e.translateValues&&angular.extend(t,a(e.translateValues)(u.$parent)),p)for(var r in n)Object.prototype.hasOwnProperty.call(e,r)&&"translateValue"===r.substr(0,14)&&"translateValues"!==r&&(t[o(r.substr(14,1))+r.substr(15)]=n[r])}(u.interpolateParams,m,l);var b=!0;m.$observe("translate",function(t){void 0===t?y(""):""===t&&b||($.translate=t,j()),b=!1});for(var S in m)m.hasOwnProperty(S)&&"translateAttr"===S.substr(0,13)&&S.length>13&&function(t){m.$observe(t,function(e){$[t]=e,j()})}(S);if(m.$observe("translateDefault",function(t){u.defaultText=t,j()}),g&&m.$observe("translateSanitizeStrategy",function(t){u.sanitizeStrategy=a(t)(u.$parent),j()}),c&&m.$observe("translateValues",function(t){t&&u.$parent.$watch(function(){angular.extend(u.interpolateParams,a(t)(u.$parent))})}),p){for(var L in m)Object.prototype.hasOwnProperty.call(m,L)&&"translateValue"===L.substr(0,14)&&"translateValues"!==L&&function(t){m.$observe(t,function(e){var n=o(t.substr(14,1))+t.substr(15);u.interpolateParams[n]=e})}(L)}var j=function(){for(var t in $)$.hasOwnProperty(t)&&void 0!==$[t]&&w(t,$[t],u,u.interpolateParams,u.defaultText,u.translateNamespace)},w=function(e,n,a,r,i,s){n?(s&&"."===n.charAt(0)&&(n=s+n),t(n,r,f,i,a.translateLanguage,a.sanitizeStrategy).then(function(t){C(t,a,!0,e)},function(t){C(t,a,!1,e)})):C(n,a,!1,e)},C=function(e,a,r,i){if(r||void 0!==a.defaultText&&(e=a.defaultText),"translate"===i){(r||!r&&!t.isKeepContent()&&void 0===m.translateKeepContent)&&v.empty().append(a.preText+e+a.postText);var s=t.isPostCompilingEnabled(),o=void 0!==l.translateCompile,u=o&&"false"!==l.translateCompile;(s&&!o||u)&&n(v.contents())(a)}else{var c=m.$attr[i];"data-"===c.substr(0,5)&&(c=c.substr(5)),c=c.substr(15),v.attr(c,e)}};(c||p||m.translateDefault)&&u.$watch("interpolateParams",j,!0),u.$on("translateLanguageChanged",j);var N=i.$on("$translateChangeSuccess",j);v.text().length?y(m.translate?m.translate:""):m.translate&&y(m.translate),j(),u.$on("$destroy",N)}}}}function r(t){"use strict";return t.translateNamespace?t.translateNamespace:t.$parent?r(t.$parent):void 0}function i(t,e){"use strict";return{restrict:"A",priority:t.directivePriority(),link:function(n,a,r){var i,o,u,l={},c=function(){angular.forEach(i,function(e,i){e&&(l[i]=!0,n.translateNamespace&&"."===e.charAt(0)&&(e=n.translateNamespace+e),t(e,o,r.translateInterpolation,void 0,n.translateLanguage,u).then(function(t){a.attr(i,t)},function(t){a.attr(i,t)}))}),angular.forEach(l,function(t,e){i[e]||(a.removeAttr(e),delete l[e])})};s(n,r.translateAttr,function(t){i=t},c),s(n,r.translateValues,function(t){o=t},c),s(n,r.translateSanitizeStrategy,function(t){u=t},c),r.translateValues&&n.$watch(r.translateValues,c,!0),n.$on("translateLanguageChanged",c);var f=e.$on("$translateChangeSuccess",c);c(),n.$on("$destroy",f)}}}function s(t,e,n,a){"use strict";e&&("::"===e.substr(0,2)?e=e.substr(2):t.$watch(e,function(t){n(t),a()},!0),n(t.$eval(e)))}function o(t,e){"use strict";return{compile:function(n){var a=function(e){e.addClass(t.cloakClassName())},r=function(e){e.removeClass(t.cloakClassName())};return a(n),function(n,i,s){var o=r.bind(this,i),u=a.bind(this,i);s.translateCloak&&s.translateCloak.length?(s.$observe("translateCloak",function(e){t(e).then(o,u)}),e.$on("$translateChangeSuccess",function(){t(s.translateCloak).then(o,u)})):t.onReady(o)}}}}function u(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(t,e,n){t.translateNamespace=l(t),t.translateNamespace&&"."===n.translateNamespace.charAt(0)?t.translateNamespace+=n.translateNamespace:t.translateNamespace=n.translateNamespace}}}}}function l(t){"use strict";return t.translateNamespace?t.translateNamespace:t.$parent?l(t.$parent):void 0}function c(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(t,e,n){n.$observe("translateLanguage",function(e){t.translateLanguage=e}),t.$watch("translateLanguage",function(){t.$broadcast("translateLanguageChanged")})}}}}function f(t,e){"use strict";var n=function(n,a,r,i){if(!angular.isObject(a)){var s=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};a=t(a)(s)}return e.instant(n,a,r,i)};return e.statefulFilter()&&(n.$stateful=!0),n}function g(t){"use strict";return t("translations")}return t.$inject=["$translate"],e.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],a.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],i.$inject=["$translate","$rootScope"],o.$inject=["$translate","$rootScope"],f.$inject=["$parse","$translate"],g.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(t),t.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",function(){"use strict";var t,e,n,a=null,r=!1,i=!1;(n={sanitize:function(t,e){return"text"===e&&(t=o(t)),t},escape:function(t,e){return"text"===e&&(t=s(t)),t},sanitizeParameters:function(t,e){return"params"===e&&(t=l(t,o)),t},escapeParameters:function(t,e){return"params"===e&&(t=l(t,s)),t},sce:function(t,e,n){return"text"===e?t=u(t):"params"===e&&"filter"!==n&&(t=l(t,s)),t},sceParameters:function(t,e){return"params"===e&&(t=l(t,u)),t}}).escaped=n.escapeParameters,this.addStrategy=function(t,e){return n[t]=e,this},this.removeStrategy=function(t){return delete n[t],this},this.useStrategy=function(t){return r=!0,a=t,this},this.$get=["$injector","$log",function(s,o){var u={},l=function(t,e,a,r){return angular.forEach(r,function(r){if(angular.isFunction(r))t=r(t,e,a);else if(angular.isFunction(n[r]))t=n[r](t,e,a);else{if(!angular.isString(n[r]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'");if(!u[n[r]])try{u[n[r]]=s.get(n[r])}catch(t){throw u[n[r]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'")}t=u[n[r]](t,e,a)}}),t},c=function(){r||i||(o.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),i=!0)};return s.has("$sanitize")&&(t=s.get("$sanitize")),s.has("$sce")&&(e=s.get("$sce")),{useStrategy:function(t){return function(e){t.useStrategy(e)}}(this),sanitize:function(t,e,n,r){if(a||c(),n||null===n||(n=a),!n)return t;r||(r="service");var i=angular.isArray(n)?n:[n];return l(t,e,r,i)}}}];var s=function(t){var e=angular.element("<div></div>");return e.text(t),e.html()},o=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return t(e)},u=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return e.trustAsHtml(t)},l=function(t,e,n){if(angular.isDate(t))return t;if(angular.isObject(t)){var a=angular.isArray(t)?[]:{};if(n){if(n.indexOf(t)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(t),angular.forEach(t,function(t,r){angular.isFunction(t)||(a[r]=l(t,e,n))}),n.splice(-1,1),a}return angular.isNumber(t)?t:!0===t||!1===t?t:angular.isUndefined(t)||null===t?t:e(t)}}),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",e),e.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",a),a.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",i),i.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",o),o.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",u),u.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",c),c.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",f),f.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",g),g.displayName="$translationCache","pascalprecht.translate"});
/*!
 * angular-translate - v2.10.0 - 2016-02-28
 * 
 * Copyright (c) 2016 The angular-translate team, Pascal Precht; Licensed MIT
 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a,b){"use strict";return function(c){if(!c||!c.url)throw new Error("Couldn't use urlLoader since no url is given!");var d={};return d[c.queryParameter||"lang"]=c.key,b(angular.extend({url:c.url,params:d,method:"GET"},c.$http)).then(function(a){return a.data},function(){return a.reject(c.key)})}}return angular.module("pascalprecht.translate").factory("$translateUrlLoader",a),a.$inject=["$q","$http"],a.displayName="$translateUrlLoader","pascalprecht.translate"});
/*!
 * angular-translate - v2.10.0 - 2016-02-28
 * 
 * Copyright (c) 2016 The angular-translate team, Pascal Precht; Licensed MIT
 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a,b){"use strict";return function(c){if(!(c&&(angular.isArray(c.files)||angular.isString(c.prefix)&&angular.isString(c.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");c.files||(c.files=[{prefix:c.prefix,suffix:c.suffix}]);for(var d=function(d){if(!d||!angular.isString(d.prefix)||!angular.isString(d.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");return b(angular.extend({url:[d.prefix,c.key,d.suffix].join(""),method:"GET",params:""},c.$http)).then(function(a){return a.data},function(){return a.reject(c.key)})},e=[],f=c.files.length,g=0;f>g;g++)e.push(d({prefix:c.files[g].prefix,key:c.key,suffix:c.files[g].suffix}));return a.all(e).then(function(a){for(var b=a.length,c={},d=0;b>d;d++)for(var e in a[d])c[e]=a[d][e];return c})}}return angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",a),a.$inject=["$q","$http"],a.displayName="$translateStaticFilesLoader","pascalprecht.translate"});
/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 2.5.0 - 2017-01-28
 * License: MIT
 */angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(a,b,c,d){var e=d.has("$animateCss")?d.get("$animateCss"):null;return{link:function(d,f,g){function h(){r=!!("horizontal"in g),r?(s={width:""},t={width:"0"}):(s={height:""},t={height:"0"}),d.$eval(g.uibCollapse)||f.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(s)}function i(a){return r?{width:a.scrollWidth+"px"}:{height:a.scrollHeight+"px"}}function j(){f.hasClass("collapse")&&f.hasClass("in")||b.resolve(n(d)).then(function(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(f,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:i(f[0])}).start()["finally"](k):a.addClass(f,"in",{css:{overflow:"hidden"},to:i(f[0])}).then(k)},angular.noop)}function k(){f.removeClass("collapsing").addClass("collapse").css(s),o(d)}function l(){return f.hasClass("collapse")||f.hasClass("in")?void b.resolve(p(d)).then(function(){f.css(i(f[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),e?e(f,{removeClass:"in",to:t}).start()["finally"](m):a.removeClass(f,"in",{to:t}).then(m)},angular.noop):m()}function m(){f.css(t),f.removeClass("collapsing").addClass("collapse"),q(d)}var n=c(g.expanding),o=c(g.expanded),p=c(g.collapsing),q=c(g.collapsed),r=!1,s={},t={};h(),d.$watch(g.uibCollapse,function(a){a?l():j()})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(a,b,c){c.$observe("disabled",function(a){c.$set("tabindex",a?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){b.addClass("panel"),d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass||"panel-default",a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)};var e="accordiongroup-"+a.$id+"-"+Math.floor(1e4*Math.random());a.headingId=e+"-tab",a.panelId=e+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){function a(){return"uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"}return{require:"^uibAccordionGroup",link:function(b,c,d,e){b.$watch(function(){return e[d.uibAccordionTransclude]},function(b){if(b){var d=angular.element(c[0].querySelector(a()));d.html(""),d.append(b)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(a,b,c,d,e){a.closeable=!!c.close,b.addClass("alert"),c.$set("role","alert"),a.closeable&&b.addClass("alert-dismissible");var f=angular.isDefined(c.dismissOnTimeout)?d(c.dismissOnTimeout)(a.$parent):null;f&&e(function(){a.close()},parseInt(f,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(b,c,d,e){var f=e[0],g=e[1],h=a(d.uibUncheckable);c.find("input").css({display:"none"}),g.$render=function(){c.toggleClass(f.activeClass,angular.equals(g.$modelValue,b.$eval(d.uibBtnRadio)))},c.on(f.toggleEvent,function(){if(!d.disabled){var a=c.hasClass(f.activeClass);a&&!angular.isDefined(d.uncheckable)||b.$apply(function(){g.$setViewValue(a?null:b.$eval(d.uibBtnRadio)),g.$render()})}}),d.uibUncheckable&&b.$watch(h,function(a){d.$set("uncheckable",a?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find("input").css({display:"none"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(a,b,c,d,e){function f(a){for(var b=0;b<p.length;b++)p[b].slide.active=b===a}function g(c,d,g){if(!s){if(angular.extend(c,{direction:g}),angular.extend(p[r].slide||{},{direction:g}),e.enabled(b)&&!a.$currentTransition&&p[d].element&&o.slides.length>1){p[d].element.data(q,c.direction);var h=o.getCurrentIndex();angular.isNumber(h)&&p[h].element&&p[h].element.data(q,c.direction),a.$currentTransition=!0,e.on("addClass",p[d].element,function(b,c){"close"===c&&(a.$currentTransition=null,e.off("addClass",b))})}a.active=c.index,r=c.index,f(d),k()}}function h(a){for(var b=0;b<p.length;b++)if(p[b].slide===a)return b}function i(){m&&(c.cancel(m),m=null)}function j(b){b.length||(a.$currentTransition=null)}function k(){i();var b=+a.interval;!isNaN(b)&&b>0&&(m=c(l,b))}function l(){var b=+a.interval;n&&!isNaN(b)&&b>0&&p.length?a.next():a.pause()}var m,n,o=this,p=o.slides=a.slides=[],q="uib-slideDirection",r=a.active,s=!1;b.addClass("carousel"),o.addSlide=function(b,c){p.push({slide:b,element:c}),p.sort(function(a,b){return+a.slide.index-+b.slide.index}),(b.index===a.active||1===p.length&&!angular.isNumber(a.active))&&(a.$currentTransition&&(a.$currentTransition=null),r=b.index,a.active=b.index,f(r),o.select(p[h(b)]),1===p.length&&a.play())},o.getCurrentIndex=function(){for(var a=0;a<p.length;a++)if(p[a].slide.index===r)return a},o.next=a.next=function(){var b=(o.getCurrentIndex()+1)%p.length;return 0===b&&a.noWrap()?void a.pause():o.select(p[b],"next")},o.prev=a.prev=function(){var b=o.getCurrentIndex()-1<0?p.length-1:o.getCurrentIndex()-1;return a.noWrap()&&b===p.length-1?void a.pause():o.select(p[b],"prev")},o.removeSlide=function(b){var c=h(b);p.splice(c,1),p.length>0&&r===c?c>=p.length?(r=p.length-1,a.active=r,f(r),o.select(p[p.length-1])):(r=c,a.active=r,f(r),o.select(p[c])):r>c&&(r--,a.active=r),0===p.length&&(r=null,a.active=null)},o.select=a.select=function(b,c){var d=h(b.slide);void 0===c&&(c=d>o.getCurrentIndex()?"next":"prev"),b.slide.index===r||a.$currentTransition||g(b.slide,d,c)},a.indexOfSlide=function(a){return+a.slide.index},a.isActive=function(b){return a.active===b.slide.index},a.isPrevDisabled=function(){return 0===a.active&&a.noWrap()},a.isNextDisabled=function(){return a.active===p.length-1&&a.noWrap()},a.pause=function(){a.noPause||(n=!1,i())},a.play=function(){n||(n=!0,k())},b.on("mouseenter",a.pause),b.on("mouseleave",a.play),a.$on("$destroy",function(){s=!0,i()}),a.$watch("noTransition",function(a){e.enabled(b,!a)}),a.$watch("interval",k),a.$watchCollection("slides",j),a.$watch("active",function(a){if(angular.isNumber(a)&&r!==a){for(var b=0;b<p.length;b++)if(p[b].slide.index===a){a=b;break}var c=p[a];c&&(f(a),o.select(p[a]),r=a)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(a){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(b,c,d,e){c.addClass("item"),e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(b){a[b?"addClass":"removeClass"](c,"active")})}}}]).animation(".item",["$animateCss",function(a){function b(a,b,c){a.removeClass(b),c&&c()}var c="uib-slideDirection";return{beforeAddClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i+" "+h,f);return d.addClass(h),a(d,{addClass:i}).start().done(j),function(){g=!0}}f()},beforeRemoveClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i,f);return a(d,{addClass:i}).start().done(j),function(){g=!0}}f()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function(a,b,c,d,e){function f(a){return e(s,{key:a},!0)[0]}function g(a){var b=[],c=a.split(""),e=a.indexOf("'");if(e>-1){var f=!1;a=a.split("");for(var g=e;g<a.length;g++)f?("'"===a[g]&&(g+1<a.length&&"'"===a[g+1]?(a[g+1]="$",c[g+1]=""):(c[g]="",f=!1)),a[g]="$"):"'"===a[g]&&(a[g]="$",c[g]="",f=!0);a=a.join("")}return angular.forEach(s,function(d){var e=a.indexOf(d.key);if(e>-1){a=a.split(""),c[e]="("+d.regex+")",a[e]="$";for(var f=e+1,g=e+d.key.length;g>f;f++)c[f]="",a[f]="$";a=a.join(""),b.push({index:e,key:d.key,apply:d.apply,matcher:d.regex})}}),{regex:new RegExp("^"+c.join("")+"$"),map:d(b,"index")}}function h(a){for(var b,c,d=[],e=0;e<a.length;)if(angular.isNumber(c)){if("'"===a.charAt(e))(e+1>=a.length||"'"!==a.charAt(e+1))&&(d.push(i(a,c,e)),c=null);else if(e===a.length)for(;c<a.length;)b=j(a,c),d.push(b),c=b.endIdx;e++}else"'"!==a.charAt(e)?(b=j(a,e),d.push(b.parser),e=b.endIdx):(c=e,e++);return d}function i(a,b,c){return function(){return a.substr(b+1,c-b-1)}}function j(a,b){for(var c=a.substr(b),d=0;d<s.length;d++)if(new RegExp("^"+s[d].key).test(c)){var e=s[d];return{endIdx:b+e.key.length,parser:e.formatter}}return{endIdx:b+1,parser:function(){return c.charAt(0)}}}function k(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}function l(a){return parseInt(a,10)}function m(a,b){return a&&b?q(a,b):a}function n(a,b){return a&&b?q(a,b,!0):a}function o(a,b){a=a.replace(/:/g,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function p(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function q(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=o(b,d);return p(a,c*(e-d))}var r,s,t=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){r=b.id,this.parsers={},this.formatters={},s=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(a){a=+a,this.year=69>a?a+2e3:a+1900},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){var b=a.getMonth();return/^[0-9]$/.test(b)?c(a,"MM"):c(a,"M")}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)},formatter:function(a){return c(a,"MMMM")}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)},formatter:function(a){return c(a,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){var b=a.getDate();return/^[1-9]$/.test(b)?c(a,"dd"):c(a,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"d")}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|"),formatter:function(a){return c(a,"EEEE")}},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(a){return c(a,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a},formatter:function(a){return c(a,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"s")}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)},formatter:function(a){return c(a,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=l(c+d),this.minutes+=l(c+e)},formatter:function(a){return c(a,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(a){return c(a,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(a){return c(a,"w")}},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(a){return c(a,"GGGG")}},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GGG")}},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GG")}},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"G")}}],angular.version.major>=1&&angular.version.minor>4&&s.push({key:"LLLL",regex:b.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.STANDALONEMONTH.indexOf(a)},formatter:function(a){return c(a,"LLLL")}})},this.init(),this.getParser=function(a){var b=f(a);return b&&b.apply||null},this.overrideParser=function(a,b){var c=f(a);c&&angular.isFunction(b)&&(this.parsers={},c.apply=b)}.bind(this),this.filter=function(a,c){if(!angular.isDate(a)||isNaN(a)||!c)return"";c=b.DATETIME_FORMATS[c]||c,b.id!==r&&this.init(),this.formatters[c]||(this.formatters[c]=h(c));var d=this.formatters[c];return d.reduce(function(b,c){return b+c(a)},"")},this.parse=function(c,d,e){if(!angular.isString(c)||!d)return c;d=b.DATETIME_FORMATS[d]||d,d=d.replace(t,"\\$&"),b.id!==r&&this.init(),this.parsers[d]||(this.parsers[d]=g(d,"apply"));var f=this.parsers[d],h=f.regex,i=f.map,j=c.match(h),l=!1;if(j&&j.length){var m,n;angular.isDate(e)&&!isNaN(e.getTime())?m={year:e.getFullYear(),month:e.getMonth(),date:e.getDate(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds()}:(e&&a.warn("dateparser:","baseDate is not a valid date"),m={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var o=1,p=j.length;p>o;o++){var q=i[o-1];"Z"===q.matcher&&(l=!0),q.apply&&q.apply.call(m,j[o])}var s=l?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,u=l?Date.prototype.setUTCHours:Date.prototype.setHours;return k(m.year,m.month,m.date)&&(!angular.isDate(e)||isNaN(e.getTime())||l?(n=new Date(0),s.call(n,m.year,m.month,m.date),u.call(n,m.hours||0,m.minutes||0,m.seconds||0,m.milliseconds||0)):(n=new Date(e),s.call(n,m.year,m.month,m.date),u.call(n,m.hours,m.minutes,m.seconds,m.milliseconds))),n}},this.toTimezone=m,this.fromTimezone=n,this.timezoneToOffset=o,this.addDateMinutes=p,this.convertTimezoneToLocal=q}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(a){var b=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,c=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(d,e){function f(a,b,c){i.push(a),j.push({scope:a,element:b}),o.forEach(function(b,c){g(b,a)}),a.$on("$destroy",h)}function g(b,d){var e=b.match(c),f=d.$eval(e[1]),g=e[2],h=k[b];if(!h){var i=function(b){var c=null;j.some(function(a){var d=a.scope.$eval(m);return d===b?(c=a,!0):void 0}),h.lastActivated!==c&&(h.lastActivated&&a.removeClass(h.lastActivated.element,f),c&&a.addClass(c.element,f),h.lastActivated=c)};k[b]=h={lastActivated:null,scope:d,watchFn:i,compareWithExp:g,watcher:d.$watch(g,i)}}h.watchFn(d.$eval(g))}function h(a){var b=a.targetScope,c=i.indexOf(b);if(i.splice(c,1),j.splice(c,1),i.length){var d=i[0];angular.forEach(k,function(a){a.scope===b&&(a.watcher=d.$watch(a.compareWithExp,a.watchFn),a.scope=d)})}else k={}}var i=[],j=[],k={},l=e.uibIsClass.match(b),m=l[2],n=l[1],o=n.split(",");return f}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){a.datepickerMode=b,a.datepickerOptions.datepickerMode=b}function n(b){var c;if(angular.version.minor<6)c=b.$options||a.datepickerOptions.ngModelOptions||i.ngModelOptions||{},c.getOption=function(a){return c[a]};else{var d=b.$options.getOption("timezone")||(a.datepickerOptions.ngModelOptions?a.datepickerOptions.ngModelOptions.timezone:null)||(i.ngModelOptions?i.ngModelOptions.timezone:null);c=b.$options.createChild(i.ngModelOptions).createChild(a.datepickerOptions.ngModelOptions).createChild(b.$options).createChild({timezone:d})}return c}var o=this,p={$setViewValue:angular.noop},q={},r=[];b.addClass("uib-datepicker"),c.$set("role","application"),a.datepickerOptions||(a.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(b){switch(b){case"customClass":case"dateDisabled":a[b]=a.datepickerOptions[b]||angular.noop;break;case"datepickerMode":a.datepickerMode=angular.isDefined(a.datepickerOptions.datepickerMode)?a.datepickerOptions.datepickerMode:i.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":o[b]=angular.isDefined(a.datepickerOptions[b])?e(a.datepickerOptions[b])(a.$parent):i[b];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":o[b]=angular.isDefined(a.datepickerOptions[b])?a.datepickerOptions[b]:i[b];break;case"startingDay":angular.isDefined(a.datepickerOptions.startingDay)?o.startingDay=a.datepickerOptions.startingDay:angular.isNumber(i.startingDay)?o.startingDay=i.startingDay:o.startingDay=(f.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":a.$watch("datepickerOptions."+b,function(a){a?angular.isDate(a)?o[b]=l.fromTimezone(new Date(a),q.getOption("timezone")):(j&&g.warn("Literal date support has been deprecated, please switch to date object usage"),o[b]=new Date(h(a,"medium"))):o[b]=i[b]?l.fromTimezone(new Date(i[b]),q.getOption("timezone")):null,o.refreshView()});break;case"maxMode":case"minMode":a.datepickerOptions[b]?a.$watch(function(){return a.datepickerOptions[b]},function(c){o[b]=a[b]=angular.isDefined(c)?c:a.datepickerOptions[b],("minMode"===b&&o.modes.indexOf(a.datepickerOptions.datepickerMode)<o.modes.indexOf(o[b])||"maxMode"===b&&o.modes.indexOf(a.datepickerOptions.datepickerMode)>o.modes.indexOf(o[b]))&&(a.datepickerMode=o[b],a.datepickerOptions.datepickerMode=o[b])}):o[b]=a[b]=i[b]||null}}),a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.disabled=angular.isDefined(c.disabled)||!1,angular.isDefined(c.ngDisabled)&&r.push(a.$parent.$watch(c.ngDisabled,function(b){a.disabled=b,o.refreshView()})),a.isActive=function(b){return 0===o.compare(b.date,o.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(b){p=b,q=n(p),a.datepickerOptions.initDate?(o.activeDate=l.fromTimezone(a.datepickerOptions.initDate,q.getOption("timezone"))||new Date,a.$watch("datepickerOptions.initDate",function(a){a&&(p.$isEmpty(p.$modelValue)||p.$invalid)&&(o.activeDate=l.fromTimezone(a,q.getOption("timezone")),o.refreshView())})):o.activeDate=new Date;var c=p.$modelValue?new Date(p.$modelValue):new Date;this.activeDate=isNaN(c)?l.fromTimezone(new Date,q.getOption("timezone")):l.fromTimezone(c,q.getOption("timezone")),p.$render=function(){o.render()}},this.render=function(){if(p.$viewValue){var a=new Date(p.$viewValue),b=!isNaN(a);b?this.activeDate=l.fromTimezone(a,q.getOption("timezone")):k||g.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var b=p.$viewValue?new Date(p.$viewValue):null;b=l.fromTimezone(b,q.getOption("timezone")),p.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}},this.createDateObject=function(b,c){var d=p.$viewValue?new Date(p.$viewValue):null;d=l.fromTimezone(d,q.getOption("timezone"));var e=new Date;e=l.fromTimezone(e,q.getOption("timezone"));var f=this.compare(b,e),g={date:b,label:l.filter(b,c),selected:d&&0===this.compare(b,d),disabled:this.isDisabled(b),past:0>f,current:0===f,future:f>0,customClass:this.customClass(b)||null};return d&&0===this.compare(b,d)&&(a.selectedDt=g),o.activeDate&&0===this.compare(g.date,o.activeDate)&&(a.activeDt=g),g},this.isDisabled=function(b){return a.disabled||this.minDate&&this.compare(b,this.minDate)<0||this.maxDate&&this.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===o.minMode){var c=p.$viewValue?l.fromTimezone(new Date(p.$viewValue),q.getOption("timezone")):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=l.toTimezone(c,q.getOption("timezone")),p.$setViewValue(c),p.$render()}else o.activeDate=b,m(o.modes[o.modes.indexOf(a.datepickerMode)-1]),a.$emit("uib:datepicker.mode");a.$broadcast("uib:datepicker.focus")},a.move=function(a){var b=o.activeDate.getFullYear()+a*(o.step.years||0),c=o.activeDate.getMonth()+a*(o.step.months||0);o.activeDate.setFullYear(b,c,1),o.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===o.maxMode&&1===b||a.datepickerMode===o.minMode&&-1===b||(m(o.modes[o.modes.indexOf(a.datepickerMode)+b]),a.$emit("uib:datepicker.mode"))},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var s=function(){o.element[0].focus()};a.$on("uib:datepicker.focus",s),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),o.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(o.isDisabled(o.activeDate))return;a.select(o.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(o.handleKeyDown(c,b),o.refreshView()):a.toggleMode("up"===c?1:-1)},b.on("keydown",function(b){a.$apply(function(){a.keydown(b)})}),a.$on("$destroy",function(){for(;r.length;)r.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;b>f;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;42>k;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k});a.labels=new Array(7);for(var l=0;7>l;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;n>o;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var e=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;12>f;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,this.monthColumns),a.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=this.monthColumns;else if("right"===a)c+=1;else if("down"===a)c+=this.monthColumns;else if("pageup"===a||"pagedown"===a){var d=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a){return parseInt((a-1)/f,10)*f+1}var e,f;this.element=b,this.yearpickerInit=function(){e=this.yearColumns,f=this.yearRows*e,this.step={years:f}},this._refreshView=function(){for(var b,c=new Array(f),g=0,h=d(this.activeDate.getFullYear());f>g;g++)b=new Date(this.activeDate),b.setFullYear(h+g,0,1),c[g]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=this.split(c,e),a.columns=e},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=e:"right"===a?c+=1:"down"===a?c+=e:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*f:"home"===a?c=d(this.activeDate.getFullYear()):"end"===a&&(c=d(this.activeDate.getFullYear())+f-1),this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/day.html"},
require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d,e={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},f={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},g=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(d)){var f=a.find("body");f.addClass("uib-position-body-scrollbar-measure"),d=b.innerWidth-f[0].clientWidth,d=isFinite(d)?d:0,f.removeClass("uib-position-body-scrollbar-measure")}return d}if(angular.isUndefined(c)){var g=angular.element('<div class="uib-position-scrollbar-measure"></div>');a.find("body").append(g),c=g[0].offsetWidth-g[0].clientWidth,c=isFinite(c)?c:0,g.remove()}return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight),e=this.parseStyle(c.paddingBottom),f=this.scrollParent(a,!1,!0),h=this.scrollbarWidth(g.test(f.tagName));return{scrollbarWidth:h,widthOverflow:f.scrollWidth>f.clientWidth,right:d+h,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+h,originalBottom:e}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e.hidden:e.normal,f=b.getComputedStyle(a);return d.test(f.overflow+f.overflowY+f.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);var g=d?e.hidden:e.normal,h=a[0].documentElement,i=b.getComputedStyle(c);if(f&&g.test(i.overflow+i.overflowY+i.overflowX))return c;var j="absolute"===i.position,k=c.parentElement||h;if(k===h||"fixed"===i.position)return h;for(;k.parentElement&&k!==h;){var l=b.getComputedStyle(k);if(j&&"static"!==l.position&&(j=!1),!j&&g.test(l.overflow+l.overflowY+l.overflowX))break;k=k.parentElement}return k},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=f.auto.test(a);return b&&(a=a.replace(f.auto,"")),a=a.split("-"),a[0]=a[0]||"top",f.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",f.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(a,c,d,e){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=e?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a,e),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(f.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":f.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},adjustTop:function(a,b,c,d){return-1!==a.indexOf("top")&&c!==d?{top:b.top-d+"px"}:void 0},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),g=e?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(g){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css(h);var i="border-"+c[0]+"-width",j=b.getComputedStyle(g)[i],k="border-";k+=f.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],k+="-radius";var l=b.getComputedStyle(e?d:a)[k];switch(c[0]){case"top":h.bottom=e?"0":"-"+j;break;case"bottom":h.top=e?"0":"-"+j;break;case"left":h.right=e?"0":"-"+j;break;case"right":h.left=e?"0":"-"+j}h[c[1]]=l,angular.element(g).css(h)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(b){var c=l.parse(b,x,a.date);if(isNaN(c))for(var d=0;d<J.length;d++)if(c=l.parse(b,J[d],a.date),!isNaN(c))return c;return c}function r(a){if(angular.isNumber(a)&&(a=new Date(a)),!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=q(a);if(!isNaN(b))return l.toTimezone(b,H.getOption("timezone"))}return H.getOption("allowInvalid")?a:void 0}function s(a,b){var d=a||b;return c.ngRequired||d?(angular.isNumber(d)&&(d=new Date(d)),d?angular.isDate(d)&&!isNaN(d)?!0:angular.isString(d)?!isNaN(q(d)):!1:!0):!0}function t(c){if(a.isOpen||!a.disabled){var d=I[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}}function u(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}function v(){if(a.isOpen){var d=angular.element(I[0].querySelector(".uib-datepicker-popup")),e=c.popupPlacement?c.popupPlacement:m.placement,f=j.positionElements(b,d,e,z);d.css({top:f.top+"px",left:f.left+"px"}),d.hasClass("uib-position-measure")&&d.removeClass("uib-position-measure")}}function w(a){var b;return angular.version.minor<6?(b=angular.isObject(a.$options)?a.$options:{timezone:null},b.getOption=function(a){return b[a]}):b=a.$options,b}var x,y,z,A,B,C,D,E,F,G,H,I,J,K=!1,L=[];this.init=function(e){if(G=e,H=w(G),y=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):m.closeOnDateSelection,z=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):m.appendToBody,A=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):m.onOpenFocus,B=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:m.datepickerPopupTemplateUrl,C=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:m.datepickerTemplateUrl,J=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):m.altInputFormats,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):m.showButtonBar,m.html5Types[c.type]?(x=m.html5Types[c.type],K=!0):(x=c.uibDatepickerPopup||m.datepickerPopup,c.$observe("uibDatepickerPopup",function(a,b){var c=a||m.datepickerPopup;if(c!==x&&(x=c,G.$modelValue=null,!x))throw new Error("uibDatepickerPopup must have a date format specified.")})),!x)throw new Error("uibDatepickerPopup must have a date format specified.");if(K&&c.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");D=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),D.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":B}),E=angular.element(D.children()[0]),E.attr("template-url",C),a.datepickerOptions||(a.datepickerOptions={}),K&&"month"===c.type&&(a.datepickerOptions.datepickerMode="month",a.datepickerOptions.minMode="month"),E.attr("datepicker-options","datepickerOptions"),K?G.$formatters.push(function(b){return a.date=l.fromTimezone(b,H.getOption("timezone")),b}):(G.$$parserName="date",G.$validators.date=s,G.$parsers.unshift(r),G.$formatters.push(function(b){return G.$isEmpty(b)?(a.date=b,b):(angular.isNumber(b)&&(b=new Date(b)),a.date=l.fromTimezone(b,H.getOption("timezone")),l.filter(a.date,x))})),G.$viewChangeListeners.push(function(){a.date=q(G.$viewValue)}),b.on("keydown",u),I=d(D)(a),D.remove(),z?h.find("body").append(I):b.after(I),a.$on("$destroy",function(){for(a.isOpen===!0&&(i.$$phase||a.$apply(function(){a.isOpen=!1})),I.remove(),b.off("keydown",u),h.off("click",t),F&&F.off("scroll",v),angular.element(g).off("resize",v);L.length;)L.shift()()})},a.getText=function(b){return a[b+"Text"]||m[b+"Text"]},a.isDisabled=function(b){"today"===b&&(b=l.fromTimezone(new Date,H.getOption("timezone")));var c={};return angular.forEach(["minDate","maxDate"],function(b){a.datepickerOptions[b]?angular.isDate(a.datepickerOptions[b])?c[b]=new Date(a.datepickerOptions[b]):(p&&e.warn("Literal date support has been deprecated, please switch to date object usage"),c[b]=new Date(k(a.datepickerOptions[b],"medium"))):c[b]=null}),a.datepickerOptions&&c.minDate&&a.compare(b,c.minDate)<0||c.maxDate&&a.compare(b,c.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){a.date=c;var d=a.date?l.filter(a.date,x):null;b.val(d),G.$setViewValue(d),y&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(c.stopPropagation(),a.isOpen=!1,b[0].focus())},a.select=function(b,c){if(c.stopPropagation(),"today"===b){var d=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(d.getFullYear(),d.getMonth(),d.getDate())):(b=l.fromTimezone(d,H.getOption("timezone")),b.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(c){c.stopPropagation(),a.isOpen=!1,b[0].focus()},a.disabled=angular.isDefined(c.disabled)||!1,c.ngDisabled&&L.push(a.$parent.$watch(f(c.ngDisabled),function(b){a.disabled=b})),a.$watch("isOpen",function(d){d?a.disabled?a.isOpen=!1:n(function(){v(),A&&a.$broadcast("uib:datepicker.focus"),h.on("click",t);var d=c.popupPlacement?c.popupPlacement:m.placement;z||j.parsePlacement(d)[2]?(F=F||angular.element(j.scrollParent(b)),F&&F.on("scroll",v)):F=null,angular.element(g).on("resize",v)},0,!1):(h.off("click",t),F&&F.off("scroll",v),angular.element(g).off("resize",v))}),a.$on("uib:datepicker.mode",function(){n(v,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(b,c){var d;return function(){var e=this,f=Array.prototype.slice.call(arguments);d&&a.cancel(d),d=a(function(){b.apply(e,f)},c)}}}]),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function(a,b,c){var d=null,e=c.createNew();this.isOnlyOpen=function(a,b){var c=e.get(b);if(c){var d=c.reduce(function(b,c){return c.scope===a?c:b},{});if(d)return 1===c.length}return!1},this.open=function(b,c,g){if(d||a.on("click",f),d&&d!==b&&(d.isOpen=!1),d=b,g){var h=e.get(g);if(h){var i=h.map(function(a){return a.scope});-1===i.indexOf(b)&&e.put(g,{scope:b})}else e.put(g,{scope:b})}},this.close=function(b,c,g){if(d===b&&(a.off("click",f),a.off("keydown",this.keybindFilter),d=null),g){var h=e.get(g);if(h){var i=h.reduce(function(a,c){return c.scope===b?c:a},{});i&&e.remove(g,i)}}};var f=function(a){if(d&&d.isOpen&&!(a&&"disabled"===d.getAutoClose()||a&&3===a.which)){var c=d.getToggleElement();if(!(a&&c&&c[0].contains(a.target))){var e=d.getDropdownElement();a&&"outsideClick"===d.getAutoClose()&&e&&e[0].contains(a.target)||(d.focusToggleElement(),d.isOpen=!1,b.$$phase||d.$apply())}}};this.keybindFilter=function(a){if(d){var b=d.getDropdownElement(),c=d.getToggleElement(),e=b&&b[0].contains(a.target),g=c&&c[0].contains(a.target);27===a.which?(a.stopPropagation(),d.focusToggleElement(),f()):d.isKeynavEnabled()&&-1!==[38,40].indexOf(a.which)&&d.isOpen&&(e||g)&&(a.preventDefault(),a.stopPropagation(),d.focusDropdownEntry(a.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){function l(){b.append(o.dropdownMenu)}var m,n,o=this,p=a.$new(),q=e.appendToOpenClass,r=e.openClass,s=angular.noop,t=c.onToggle?d(c.onToggle):angular.noop,u=!1,v=i.find("body");b.addClass("dropdown"),this.init=function(){c.isOpen&&(n=d(c.isOpen),s=n.assign,a.$watch(n,function(a){p.isOpen=!!a})),u=angular.isDefined(c.keyboardNav)},this.toggle=function(a){return p.isOpen=arguments.length?!!a:!p.isOpen,angular.isFunction(s)&&s(p,p.isOpen),p.isOpen},this.isOpen=function(){return p.isOpen},p.getToggleElement=function(){return o.toggleElement},p.getAutoClose=function(){return c.autoClose||"always"},p.getElement=function(){return b},p.isKeynavEnabled=function(){return u},p.focusDropdownEntry=function(a){var c=o.dropdownMenu?angular.element(o.dropdownMenu).find("a"):b.find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(o.selectedOption)?o.selectedOption=o.selectedOption===c.length-1?o.selectedOption:o.selectedOption+1:o.selectedOption=0;break;case 38:angular.isNumber(o.selectedOption)?o.selectedOption=0===o.selectedOption?0:o.selectedOption-1:o.selectedOption=c.length-1}c[o.selectedOption].focus()},p.getDropdownElement=function(){return o.dropdownMenu},p.focusToggleElement=function(){o.toggleElement&&o.toggleElement[0].focus()},p.$watch("isOpen",function(e,n){var u=null,w=!1;if(angular.isDefined(c.dropdownAppendTo)){var x=d(c.dropdownAppendTo)(p);x&&(u=angular.element(x))}if(angular.isDefined(c.dropdownAppendToBody)){var y=d(c.dropdownAppendToBody)(p);y!==!1&&(w=!0)}if(w&&!u&&(u=v),u&&o.dropdownMenu&&(e?(u.append(o.dropdownMenu),b.on("$destroy",l)):(b.off("$destroy",l),l())),u&&o.dropdownMenu){var z,A,B,C=h.positionElements(b,o.dropdownMenu,"bottom-left",!0),D=0;if(z={top:C.top+"px",display:e?"block":"none"},A=o.dropdownMenu.hasClass("dropdown-menu-right"),A?(z.left="auto",B=h.scrollbarPadding(u),B.heightOverflow&&B.scrollbarWidth&&(D=B.scrollbarWidth),z.right=window.innerWidth-D-(C.left+b.prop("offsetWidth"))+"px"):(z.left=C.left+"px",z.right="auto"),!w){var E=h.offset(u);z.top=C.top-E.top+"px",A?z.right=window.innerWidth-(C.left-E.left+b.prop("offsetWidth"))+"px":z.left=C.left-E.left+"px"}o.dropdownMenu.css(z)}var F=u?u:b,G=u?q:r,H=F.hasClass(G),I=f.isOnlyOpen(a,u);if(H===!e){var J;J=u?I?"removeClass":"addClass":e?"addClass":"removeClass",g[J](F,G).then(function(){angular.isDefined(e)&&e!==n&&t(a,{open:!!e})})}if(e)o.dropdownMenuTemplateUrl?k(o.dropdownMenuTemplateUrl).then(function(a){m=p.$new(),j(a.trim())(m,function(a){var b=a;o.dropdownMenu.replaceWith(b),o.dropdownMenu=b,i.on("keydown",f.keybindFilter)})}):i.on("keydown",f.keybindFilter),p.focusToggleElement(),f.open(p,b,u);else{if(f.close(p,b,u),o.dropdownMenuTemplateUrl){m&&m.$destroy();var K=angular.element('<ul class="dropdown-menu"></ul>');o.dropdownMenu.replaceWith(K),o.dropdownMenu=K}o.selectedOption=null}angular.isFunction(s)&&s(a,e)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass("dropdown-menu");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.on("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.off("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.pop()},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var a=this;this.resolver=null,this.setResolver=function(a){this.resolver=a},this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d)return d.resolve(a,e,f,g);var h=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?h.push(c.resolve(b.invoke(a))):angular.isString(a)?h.push(c.resolve(b.get(a))):h.push(c.resolve(a))}),c.all(h).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,c){function d(b,d,e){e.modalInClass&&(a.addClass(d,e.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();b.modalOptions.animation?a.removeClass(d,e.modalInClass).then(g):g()}))}return{restrict:"A",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(a,b,c,d){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(e,f,g){f.addClass(g.windowTopClass||""),e.size=g.size,e.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},f.on("click",e.close),e.$isRendered=!0;var h=b.defer();e.$$postDigest(function(){h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=c(f,{addClass:g.modalInClass}).start(),e.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();c(f,{removeClass:g.modalInClass}).start().then(d)})),b.when(h).then(function(){var b=a.getTop();if(b&&a.modalRendered(b.key),!d[0].activeElement||!f[0].contains(d[0].activeElement)){var c=f[0].querySelector("[autofocus]");c?c.focus():f[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(a){return{link:function(b,c,d,e,f){f(b.$parent,function(b){c.empty(),a.enter(b,c)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,b,c,d,e,f,g,h,i){function j(a){var b="-";return a.replace(E,function(a,c){return(c?b:"")+a.toLowerCase()})}function k(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function l(){for(var a=-1,b=x.keys(),c=0;c<b.length;c++)x.get(b[c]).value.backdrop&&(a=c);return a>-1&&A>a&&(a=A),a}function m(a,b){var c=x.get(a).value,d=c.appendTo;x.remove(a),B=x.top(),B&&(A=parseInt(B.value.modalDomEl.attr("index"),10)),p(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||w;y.remove(b,a);var e=y.hasKey(b);d.toggleClass(b,e),!e&&v&&v.heightOverflow&&v.scrollbarWidth&&(v.originalRight?d.css({paddingRight:v.originalRight+"px"}):d.css({paddingRight:""}),v=null),n(!0)},c.closedDeferred),o(),b&&b.focus?b.focus():d.focus&&d.focus()}function n(a){var b;x.length()>0&&(b=x.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function o(){if(t&&-1===l()){var a=u;p(t,u,function(){a=null}),t=void 0,u=void 0}}function p(b,c,d,e){function g(){g.done||(g.done=!0,a.leave(b).then(function(){d&&d(),b.remove(),e&&e.resolve()}),c.$destroy())}var h,i=null,j=function(){return h||(h=f.defer(),i=h.promise),function(){h.resolve()}};return c.$broadcast(z.NOW_CLOSING_EVENT,j),f.when(i).then(g)}function q(a){if(a.isDefaultPrevented())return a;var b=x.top();if(b)switch(a.which){case 27:b.value.keyboard&&(a.preventDefault(),e.$apply(function(){z.dismiss(b.key,"escape key press")}));break;case 9:var c=z.loadFocusElementList(b),d=!1;a.shiftKey?(z.isFocusInFirstItem(a,c)||z.isModalFocused(a,b))&&(d=z.focusLastFocusableElement(c)):z.isFocusInLastItem(a,c)&&(d=z.focusFirstFocusableElement(c)),d&&(a.preventDefault(),a.stopPropagation())}}function r(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}function s(){Array.prototype.forEach.call(document.querySelectorAll("["+C+"]"),function(a){var b=parseInt(a.getAttribute(C),10),c=b-1;a.setAttribute(C,c),c||(a.removeAttribute(C),a.removeAttribute("aria-hidden"))})}var t,u,v,w="modal-open",x=h.createNew(),y=g.createNew(),z={NOW_CLOSING_EVENT:"modal.stack.now-closing"},A=0,B=null,C="data-bootstrap-modal-aria-hidden-count",D="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",E=/[A-Z]/g;return e.$watch(l,function(a){u&&(u.index=a)}),c.on("keydown",q),e.$on("$destroy",function(){c.off("keydown",q)}),z.open=function(b,f){function g(a){function b(a){var b=a.parent()?a.parent().children():[];return Array.prototype.filter.call(b,function(b){return b!==a[0]})}if(a&&"BODY"!==a[0].tagName)return b(a).forEach(function(a){var b="true"===a.getAttribute("aria-hidden"),c=parseInt(a.getAttribute(C),10);c||(c=b?1:0),a.setAttribute(C,c+1),a.setAttribute("aria-hidden","true")}),g(a.parent())}var h=c[0].activeElement,k=f.openedClass||w;n(!1),B=x.top(),x.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo}),y.put(k,b);var m=f.appendTo,o=l();o>=0&&!t&&(u=e.$new(!0),u.modalOptions=f,u.index=o,t=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),t.attr({"class":"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),f.backdropClass&&t.addClass(f.backdropClass),f.animation&&t.attr("modal-animation","true"),d(t)(u),a.enter(t,m),i.isScrollable(m)&&(v=i.scrollbarPadding(m),v.heightOverflow&&v.scrollbarWidth&&m.css({paddingRight:v.right+"px"})));var p;f.component?(p=document.createElement(j(f.component.name)),p=angular.element(p),p.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):p=f.content,A=B?parseInt(B.value.modalDomEl.attr("index"),10)+1:0;var q=angular.element('<div uib-modal-window="modal-window"></div>');q.attr({"class":"modal","template-url":f.windowTemplateUrl,"window-top-class":f.windowTopClass,role:"dialog","aria-labelledby":f.ariaLabelledBy,"aria-describedby":f.ariaDescribedBy,size:f.size,index:A,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(p),f.windowClass&&q.addClass(f.windowClass),f.animation&&q.attr("modal-animation","true"),m.addClass(k),f.scope&&(f.scope.$$topModalIndex=A),a.enter(d(q)(f.scope),m),x.top().value.modalDomEl=q,x.top().value.modalOpener=h,g(q)},z.close=function(a,b){var c=x.get(a);return s(),c&&r(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),m(a,c.value.modalOpener),!0):!c},z.dismiss=function(a,b){var c=x.get(a);return s(),c&&r(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),m(a,c.value.modalOpener),!0):!c},z.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},z.getTop=function(){return x.top()},z.modalRendered=function(a){var b=x.get(a);b&&b.value.renderDeferred.resolve()},z.focusFirstFocusableElement=function(a){return a.length>0?(a[0].focus(),!0):!1},z.focusLastFocusableElement=function(a){return a.length>0?(a[a.length-1].focus(),!0):!1},z.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},z.isFocusInFirstItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[0]:!1},z.isFocusInLastItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[b.length-1]:!1},z.loadFocusElementList=function(a){if(a){var b=a.value.modalDomEl;if(b&&b.length){var c=b[0].querySelectorAll(D);return c?Array.prototype.filter.call(c,function(a){return k(a)}):c}}},z}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(e){function j(){return q}var l=c.defer(),m=c.defer(),n=c.defer(),o=c.defer(),p={result:l.promise,opened:m.promise,closed:n.promise,rendered:o.promise,close:function(a){return h.close(p,a)},dismiss:function(a){return h.dismiss(p,a)}};if(e=angular.extend({},a.options,e),e.resolve=e.resolve||{},e.appendTo=e.appendTo||d.find("body").eq(0),!e.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!e.component&&!e.template&&!e.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var q;q=e.component?c.when(g.resolve(e.resolve,{},null,null)):c.all([i(e),g.resolve(e.resolve,{},null,null)]);var r;return r=k=c.all([k]).then(j,j).then(function(a){function c(b,c,d,e){b.$scope=g,b.$scope.$resolve={},d?b.$scope.$uibModalInstance=p:b.$uibModalInstance=p;var f=c?a[1]:a;angular.forEach(f,function(a,c){e&&(b[c]=a),b.$scope.$resolve[c]=a})}var d=e.scope||b,g=d.$new();g.$close=p.close,g.$dismiss=p.dismiss,g.$on("$destroy",function(){g.$$uibDestructionScheduled||g.$dismiss("$uibUnscheduledDestruction")});var i,j,k={scope:g,deferred:l,renderDeferred:o,closedDeferred:n,animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,ariaLabelledBy:e.ariaLabelledBy,ariaDescribedBy:e.ariaDescribedBy,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo},q={},r={};e.component?(c(q,!1,!0,!1),q.name=e.component,k.component=q):e.controller&&(c(r,!0,!1,!0),j=f(e.controller,r,!0,e.controllerAs),e.controllerAs&&e.bindToController&&(i=j.instance,i.$close=g.$close,i.$dismiss=g.$dismiss,angular.extend(i,{$resolve:r.$scope.$resolve},d)),i=j(),angular.isFunction(i.$onInit)&&i.$onInit()),e.component||(k.content=a[0]),h.open(p,k),m.resolve(!0)},function(a){m.reject(a),l.reject(a)})["finally"](function(){k===r&&(k=null)}),p},j}]};return a}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop,b.ngModelCtrl={$setViewValue:angular.noop},b._watchers=[],b.init=function(a,e){b.ngModelCtrl=a,b.config=e,a.$render=function(){b.render()},d.itemsPerPage?b._watchers.push(c.$parent.$watch(d.itemsPerPage,function(a){
b.itemsPerPage=parseInt(a,10),c.totalPages=b.calculateTotalPages(),b.updatePage()})):b.itemsPerPage=e.itemsPerPage,c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})},b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)},b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1},c.selectPage=function(a,d){d&&d.preventDefault();var e=!c.ngDisabled||!d;e&&c.page!==a&&a>0&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())},c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]},c.noPrevious=function(){return 1===c.page},c.noNext=function(){return c.page===c.totalPages},b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages),c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()},c.$on("$destroy",function(){for(;b._watchers.length;)b._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align,c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},link:function(b,c,d,e){c.addClass("pager");var f=e[0],g=e[1];g&&f.init(g,a)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,e){function f(a,b,c){return{number:a,text:b,active:c}}function g(a,b){var c=[],d=1,e=b,g=angular.isDefined(i)&&b>i;g&&(j?(d=Math.max(a-Math.floor(i/2),1),e=d+i-1,e>b&&(e=b,d=e-i+1)):(d=(Math.ceil(a/i)-1)*i+1,e=Math.min(d+i-1,b)));for(var h=d;e>=h;h++){var n=f(h,m(h),h===a);c.push(n)}if(g&&i>0&&(!j||k||l)){if(d>1){if(!l||d>3){var o=f(d-1,"...",!1);c.unshift(o)}if(l){if(3===d){var p=f(2,"2",!1);c.unshift(p)}var q=f(1,"1",!1);c.unshift(q)}}if(b>e){if(!l||b-2>e){var r=f(e+1,"...",!1);c.push(r)}if(l){if(e===b-2){var s=f(b-1,b-1,!1);c.push(s)}var t=f(b,b,!1);c.push(t)}}}return c}var h=this,i=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):e.maxSize,j=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):e.rotate,k=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):e.forceEllipses,l=angular.isDefined(b.boundaryLinkNumbers)?a.$parent.$eval(b.boundaryLinkNumbers):e.boundaryLinkNumbers,m=angular.isDefined(b.pageLabel)?function(c){return a.$parent.$eval(b.pageLabel,{$page:c})}:angular.identity;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):e.boundaryLinks,a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):e.directionLinks,b.$set("role","menu"),d.create(this,a,b),b.maxSize&&h._watchers.push(a.$parent.$watch(c(b.maxSize),function(a){i=parseInt(a,10),h.render()}));var n=this.render;this.render=function(){n(),a.page>0&&a.page<=a.totalPages&&(a.pages=g(a.page,a.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},link:function(a,c,d,e){c.addClass("pagination");var f=e[0],g=e[1];g&&f.init(g,b)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){function n(a){if(27===a.which){var b=o.top();b&&(b.value.close(),b=null)}}var o=m.createNew();return h.on("keyup",n),k.$on("$destroy",function(){h.off("keyup",n)}),function(e,k,m,n){function p(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup uib-title="'+r+"title"+s+'" '+(n.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'origin-scope="origScope" class="uib-position-measure '+k+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){P.isOpen?q():m()}function m(){O&&!a.$eval(d[k+"Enable"])||(u(),x(),P.popupDelay?H||(H=g(r,P.popupDelay,!1)):r())}function q(){s(),P.popupCloseDelay?I||(I=g(t,P.popupCloseDelay,!1)):t()}function r(){return s(),u(),P.content?(v(),void P.$evalAsync(function(){P.isOpen=!0,y(!0),U()})):angular.noop}function s(){H&&(g.cancel(H),H=null),J&&(g.cancel(J),J=null)}function t(){P&&P.$evalAsync(function(){P&&(P.isOpen=!1,y(!1),P.animation?G||(G=g(w,150,!1)):w())})}function u(){I&&(g.cancel(I),I=null),G&&(g.cancel(G),G=null)}function v(){E||(F=P.$new(),E=c(F,function(a){M?h.find("body").append(a):b.after(a)}),o.add(P,{close:t}),z())}function w(){s(),u(),A(),E&&(E.remove(),E=null,K&&g.cancel(K)),o.remove(P),F&&(F.$destroy(),F=null)}function x(){P.title=d[k+"Title"],S?P.content=S(a):P.content=d[e],P.popupClass=d[k+"Class"],P.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:n.placement;var b=i.parsePlacement(P.placement);L=b[1]?b[0]+"-"+b[1]:b[0];var c=parseInt(d[k+"PopupDelay"],10),f=parseInt(d[k+"PopupCloseDelay"],10);P.popupDelay=isNaN(c)?n.popupDelay:c,P.popupCloseDelay=isNaN(f)?n.popupCloseDelay:f}function y(b){R&&angular.isFunction(R.assign)&&R.assign(a,b)}function z(){T.length=0,S?(T.push(a.$watch(S,function(a){P.content=a,!a&&P.isOpen&&t()})),T.push(F.$watch(function(){Q||(Q=!0,F.$$postDigest(function(){Q=!1,P&&P.isOpen&&U()}))}))):T.push(d.$observe(e,function(a){P.content=a,!a&&P.isOpen?t():U()})),T.push(d.$observe(k+"Title",function(a){P.title=a,P.isOpen&&U()})),T.push(d.$observe(k+"Placement",function(a){P.placement=a?a:n.placement,P.isOpen&&U()}))}function A(){T.length&&(angular.forEach(T,function(a){a()}),T.length=0)}function B(a){P&&P.isOpen&&E&&(b[0].contains(a.target)||E[0].contains(a.target)||q())}function C(a){27===a.which&&q()}function D(){var c=[],e=[],f=a.$eval(d[k+"Trigger"]);V(),angular.isObject(f)?(Object.keys(f).forEach(function(a){c.push(a),e.push(f[a])}),N={show:c,hide:e}):N=p(f),"none"!==N.show&&N.show.forEach(function(a,c){"outsideClick"===a?(b.on("click",j),h.on("click",B)):a===N.hide[c]?b.on(a,j):a&&(b.on(a,m),b.on(N.hide[c],q)),b.on("keypress",C)})}var E,F,G,H,I,J,K,L,M=angular.isDefined(n.appendToBody)?n.appendToBody:!1,N=p(void 0),O=angular.isDefined(d[k+"Enable"]),P=a.$new(!0),Q=!1,R=angular.isDefined(d[k+"IsOpen"])?l(d[k+"IsOpen"]):!1,S=n.useContentExp?l(d[e]):!1,T=[],U=function(){E&&E.html()&&(J||(J=g(function(){var a=i.positionElements(b,E,P.placement,M),c=angular.isDefined(E.offsetHeight)?E.offsetHeight:E.prop("offsetHeight"),d=M?i.offset(b):i.position(b);E.css({top:a.top+"px",left:a.left+"px"});var e=a.placement.split("-");E.hasClass(e[0])||(E.removeClass(L.split("-")[0]),E.addClass(e[0])),E.hasClass(n.placementClassPrefix+a.placement)||(E.removeClass(n.placementClassPrefix+L),E.addClass(n.placementClassPrefix+a.placement)),K=g(function(){var a=angular.isDefined(E.offsetHeight)?E.offsetHeight:E.prop("offsetHeight"),b=i.adjustTop(e,d,c,a);b&&E.css(b),K=null},0,!1),E.hasClass("uib-position-measure")?(i.positionArrow(E,a.placement),E.removeClass("uib-position-measure")):L!==a.placement&&i.positionArrow(E,a.placement),L=a.placement,J=null},0,!1)))};P.origScope=a,P.isOpen=!1,P.contentExp=function(){return P.content},d.$observe("disabled",function(a){a&&s(),a&&P.isOpen&&t()}),R&&a.$watch(R,function(a){P&&!a===P.isOpen&&j()});var V=function(){N.show.forEach(function(a){"outsideClick"===a?b.off("click",j):(b.off(a,m),b.off(a,j)),b.off("keypress",C)}),N.hide.forEach(function(a){"outsideClick"===a?h.off("click",B):b.off(a,q)})};D();var W=a.$eval(d[k+"Animation"]);P.animation=angular.isDefined(W)?!!W:n.animation;var X,Y=k+"AppendToBody";X=Y in d&&void 0===d[Y]?!0:a.$eval(d[Y]),M=angular.isDefined(X)?X:M,a.$on("$destroy",function(){V(),w(),P=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}b.popupClass&&c.addClass(b.popupClass),b.animation&&c.addClass(d.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){function d(){return angular.isDefined(a.maxParam)?a.maxParam:c.max}var e=this,f=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=d(),this.addBar=function(a,b,c){f||b.css({transition:"none"}),this.bars.push(a),a.max=d(),a.title=c&&angular.isDefined(c.title)?c.title:"progressbar",a.$watch("value",function(b){a.recalculatePercentage()}),a.recalculatePercentage=function(){var b=e.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);b>100&&(a.percent-=b-100)},a.$on("$destroy",function(){b=null,e.removeBar(a)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("maxParam",function(a){e.bars.forEach(function(a){a.max=d(),a.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop},e=this;this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff,this.enableReset=angular.isDefined(b.enableReset)?a.$parent.$eval(b.enableReset):c.enableReset;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){if(!a.readonly&&b>=0&&b<=a.range.length){var c=e.enableReset&&d.$viewValue===b?0:b;d.$setViewValue(c),d.$render()}},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue,a.title=e.getTitle(a.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){function b(a){for(var b=0;b<d.tabs.length;b++)if(d.tabs[b].index===a)return b}var c,d=this;d.tabs=[],d.select=function(a,f){if(!e){var g=b(c),h=d.tabs[g];if(h){if(h.tab.onDeselect({$event:f,$selectedIndex:a}),f&&f.isDefaultPrevented())return;h.tab.active=!1}var i=d.tabs[a];i?(i.tab.onSelect({$event:f}),i.tab.active=!0,d.active=i.index,c=i.index):!i&&angular.isDefined(c)&&(d.active=null,c=null)}},d.addTab=function(a){if(d.tabs.push({tab:a,index:a.index}),d.tabs.sort(function(a,b){return a.index>b.index?1:a.index<b.index?-1:0}),a.index===d.active||!angular.isDefined(d.active)&&1===d.tabs.length){var c=b(a.index);d.select(c)}},d.removeTab=function(a){for(var b,c=0;c<d.tabs.length;c++)if(d.tabs[c].tab===a){b=c;break}if(d.tabs[b].index===d.active){var e=b===d.tabs.length-1?b-1:b+1%d.tabs.length;d.select(e)}d.tabs.splice(b,1)},a.$watch("tabset.active",function(a){angular.isDefined(a)&&a!==c&&d.select(b(a))});var e;a.$on("$destroy",function(){e=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tabset.html"},link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(b,c,d,e,f){b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),angular.isUndefined(d.index)&&(e.tabs&&e.tabs.length?b.index=Math.max.apply(null,e.tabs.map(function(a){return a.index}))+1:b.index=0),angular.isUndefined(d.classes)&&(b.classes=""),b.select=function(a){if(!b.disabled){for(var c,d=0;d<e.tabs.length;d++)if(e.tabs[d].tab===b){c=d;break}e.select(c,a)}},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase()||"uib:tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude).tab;e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){function h(){var b=+a.hours,c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c&&""!==a.hours?(a.showMeridian&&(12===b&&(b=0),a.meridian===y[1]&&(b+=12)),b):void 0}function i(){var b=+a.minutes,c=b>=0&&60>b;return c&&""!==a.minutes?b:void 0}function j(){var b=+a.seconds;return b>=0&&60>b?b:void 0}function k(a,b){return null===a?"":angular.isDefined(a)&&a.toString().length<2&&!b?"0"+a:a.toString()}function l(a){m(),x.$setViewValue(new Date(v)),n(a)}function m(){s&&s.$setValidity("hours",!0),t&&t.$setValidity("minutes",!0),u&&u.$setValidity("seconds",!0),x.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1,a.invalidSeconds=!1}function n(b){if(x.$modelValue){var c=v.getHours(),d=v.getMinutes(),e=v.getSeconds();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:k(c,!z),"m"!==b&&(a.minutes=k(d)),a.meridian=v.getHours()<12?y[0]:y[1],"s"!==b&&(a.seconds=k(e)),a.meridian=v.getHours()<12?y[0]:y[1]}else a.hours=null,a.minutes=null,a.seconds=null,a.meridian=y[0]}function o(a){v=q(v,a),l()}function p(a,b){return q(a,60*b)}function q(a,b){var c=new Date(a.getTime()+1e3*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),d}function r(){return(null===a.hours||""===a.hours)&&(null===a.minutes||""===a.minutes)&&(!a.showSeconds||a.showSeconds&&(null===a.seconds||""===a.seconds))}var s,t,u,v=new Date,w=[],x={$setViewValue:angular.noop},y=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS,z=angular.isDefined(c.padHours)?a.$parent.$eval(c.padHours):!0;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr("tabindex"),this.init=function(b,d){x=b,x.$render=this.render,x.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=d.eq(2);s=e.controller("ngModel"),t=f.controller("ngModel"),u=h.controller("ngModel");var i=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;i&&this.setupMousewheelEvents(e,f,h);var j=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;j&&this.setupArrowkeyEvents(e,f,h),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f,h)};var A=g.hourStep;c.hourStep&&w.push(a.$parent.$watch(d(c.hourStep),function(a){A=+a}));var B=g.minuteStep;c.minuteStep&&w.push(a.$parent.$watch(d(c.minuteStep),function(a){B=+a}));var C;w.push(a.$parent.$watch(d(c.min),function(a){var b=new Date(a);C=isNaN(b)?void 0:b}));var D;w.push(a.$parent.$watch(d(c.max),function(a){var b=new Date(a);D=isNaN(b)?void 0:b}));var E=!1;c.ngDisabled&&w.push(a.$parent.$watch(d(c.ngDisabled),function(a){E=a})),a.noIncrementHours=function(){var a=p(v,60*A);return E||a>D||v>a&&C>a},a.noDecrementHours=function(){var a=p(v,60*-A);return E||C>a||a>v&&a>D},a.noIncrementMinutes=function(){var a=p(v,B);return E||a>D||v>a&&C>a},a.noDecrementMinutes=function(){var a=p(v,-B);return E||C>a||a>v&&a>D},a.noIncrementSeconds=function(){var a=q(v,F);return E||a>D||v>a&&C>a},a.noDecrementSeconds=function(){var a=q(v,-F);return E||C>a||a>v&&a>D},a.noToggleMeridian=function(){return v.getHours()<12?E||p(v,720)>D:E||p(v,-720)<C};var F=g.secondStep;c.secondStep&&w.push(a.$parent.$watch(d(c.secondStep),function(a){F=+a})),a.showSeconds=g.showSeconds,c.showSeconds&&w.push(a.$parent.$watch(d(c.showSeconds),function(b){a.showSeconds=!!b})),a.showMeridian=g.showMeridian,c.showMeridian&&w.push(a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,x.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(v.setHours(c),l())}else n()})),this.setupMousewheelEvents=function(b,c,d){var e=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.on("mousewheel wheel",function(b){E||a.$apply(e(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.on("mousewheel wheel",function(b){E||a.$apply(e(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()}),d.on("mousewheel wheel",function(b){E||a.$apply(e(b)?a.incrementSeconds():a.decrementSeconds()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c,d){b.on("keydown",function(b){E||(38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply()))}),c.on("keydown",function(b){E||(38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply()))}),d.on("keydown",function(b){E||(38===b.which?(b.preventDefault(),a.incrementSeconds(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementSeconds(),a.$apply()))})},this.setupInputEvents=function(b,c,d){if(a.readonlyInput)return a.updateHours=angular.noop,a.updateMinutes=angular.noop,void(a.updateSeconds=angular.noop);var e=function(b,c,d){x.$setViewValue(null),x.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b,s&&s.$setValidity("hours",!1)),angular.isDefined(c)&&(a.invalidMinutes=c,t&&t.$setValidity("minutes",!1)),angular.isDefined(d)&&(a.invalidSeconds=d,u&&u.$setValidity("seconds",!1))};a.updateHours=function(){var a=h(),b=i();x.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(v.setHours(a),v.setMinutes(b),C>v||v>D?e(!0):l("h")):e(!0)},b.on("blur",function(b){x.$setTouched(),r()?m():null===a.hours||""===a.hours?e(!0):!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=k(a.hours,!z)})}),a.updateMinutes=function(){var a=i(),b=h();x.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(v.setHours(b),v.setMinutes(a),C>v||v>D?e(void 0,!0):l("m")):e(void 0,!0)},c.on("blur",function(b){x.$setTouched(),r()?m():null===a.minutes?e(void 0,!0):!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=k(a.minutes)})}),a.updateSeconds=function(){var a=j();x.$setDirty(),angular.isDefined(a)?(v.setSeconds(a),l("s")):e(void 0,void 0,!0)},d.on("blur",function(b){r()?m():!a.invalidSeconds&&a.seconds<10&&a.$apply(function(){a.seconds=k(a.seconds)})})},this.render=function(){var b=x.$viewValue;isNaN(b)?(x.$setValidity("time",!1),e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(v=b),C>v||v>D?(x.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):m(),n())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*A*60)},a.decrementHours=function(){a.noDecrementHours()||o(60*-A*60)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(60*B)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(60*-B)},a.incrementSeconds=function(){a.noIncrementSeconds()||o(F)},a.decrementSeconds=function(){a.noDecrementSeconds()||o(-F)},a.toggleMeridian=function(){var b=i(),c=h();a.noToggleMeridian()||(angular.isDefined(b)&&angular.isDefined(c)?o(720*(v.getHours()<12?60:-60)):a.meridian=a.meridian===y[0]?y[1]:y[0])},a.blur=function(){x.$setTouched()},a.$on("$destroy",function(){for(;w.length;)w.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(a){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){P.moveInProgress||(P.moveInProgress=!0,P.$digest()),$()}function o(){P.position=F?l.offset(b):l.position(b),P.position.top+=b.prop("offsetHeight")}function p(a){var b;return angular.version.minor<6?(b=a.$options||{},b.getOption=function(a){return b[a]}):b=a.$options,b}var q,r,s=[9,13,27,38,40],t=200,u=a.$eval(c.typeaheadMinLength);u||0===u||(u=1),a.$watch(c.typeaheadMinLength,function(a){u=a||0===a?a:1});var v=a.$eval(c.typeaheadWaitMs)||0,w=a.$eval(c.typeaheadEditable)!==!1;a.$watch(c.typeaheadEditable,function(a){w=a!==!1});var x,y,z=e(c.typeaheadLoading).assign||angular.noop,A=c.typeaheadShouldSelect?e(c.typeaheadShouldSelect):function(a,b){var c=b.$event;return 13===c.which||9===c.which},B=e(c.typeaheadOnSelect),C=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):!1,D=e(c.typeaheadNoResults).assign||angular.noop,E=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,F=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):!1,G=c.typeaheadAppendTo?a.$eval(c.typeaheadAppendTo):null,H=a.$eval(c.typeaheadFocusFirst)!==!1,I=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):!1,J=e(c.typeaheadIsOpen).assign||angular.noop,K=a.$eval(c.typeaheadShowHint)||!1,L=e(c.ngModel),M=e(c.ngModel+"($$$p)"),N=function(b,c){return angular.isFunction(L(a))&&r.getOption("getterSetter")?M(b,{$$$p:c}):L.assign(b,c)},O=m.parse(c.uibTypeahead),P=a.$new(),Q=a.$on("$destroy",function(){P.$destroy()});P.$on("$destroy",Q);var R="typeahead-"+P.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":R});var S,T;K&&(S=angular.element("<div></div>"),S.css("position","relative"),b.after(S),T=b.clone(),T.attr("placeholder",""),T.attr("tabindex","-1"),T.val(""),T.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),b.css({position:"relative","vertical-align":"top","background-color":"transparent"}),T.attr("id")&&T.removeAttr("id"),S.append(T),T.after(b));var U=angular.element("<div uib-typeahead-popup></div>");U.attr({id:R,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(c.typeaheadTemplateUrl)&&U.attr("template-url",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&U.attr("popup-template-url",c.typeaheadPopupTemplateUrl);var V=function(){K&&T.val("")},W=function(){P.matches=[],P.activeIdx=-1,b.attr("aria-expanded",!1),V()},X=function(a){return R+"-option-"+a};P.$watch("activeIdx",function(a){0>a?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",X(a))});var Y=function(a,b){return P.matches.length>b&&a?a.toUpperCase()===P.matches[b].label.toUpperCase():!1},Z=function(c,d){var e={$viewValue:c};z(a,!0),D(a,!1),f.when(O.source(a,e)).then(function(f){var g=c===q.$viewValue;if(g&&x)if(f&&f.length>0){P.activeIdx=H?0:-1,D(a,!1),P.matches.length=0;for(var h=0;h<f.length;h++)e[O.itemName]=f[h],P.matches.push({id:X(h),label:O.viewMapper(P,e),model:f[h]});if(P.query=c,o(),b.attr("aria-expanded",!0),I&&1===P.matches.length&&Y(c,0)&&(angular.isNumber(P.debounceUpdate)||angular.isObject(P.debounceUpdate)?k(function(){P.select(0,d)},angular.isNumber(P.debounceUpdate)?P.debounceUpdate:P.debounceUpdate["default"]):P.select(0,d)),K){var i=P.matches[0].label;angular.isString(c)&&c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()?T.val(c+i.slice(c.length)):T.val("")}}else W(),D(a,!0);g&&z(a,!1)},function(){W(),z(a,!1),D(a,!0)})};F&&(angular.element(i).on("resize",n),h.find("body").on("scroll",n));var $=k(function(){P.matches.length&&o(),P.moveInProgress=!1},t);P.moveInProgress=!1,P.query=void 0;var _,aa=function(a){_=g(function(){Z(a)},v)},ba=function(){_&&g.cancel(_)};W(),P.assignIsOpen=function(b){J(a,b)},P.select=function(d,e){var f,h,i={};y=!0,i[O.itemName]=h=P.matches[d].model,f=O.modelMapper(a,i),N(a,f),q.$setValidity("editable",!0),q.$setValidity("parse",!0),B(a,{$item:h,$model:f,$label:O.viewMapper(a,i),$event:e}),W(),P.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.on("keydown",function(b){if(0!==P.matches.length&&-1!==s.indexOf(b.which)){var c=A(a,{$event:b});if(-1===P.activeIdx&&c||9===b.which&&b.shiftKey)return W(),void P.$digest();b.preventDefault();var d;switch(b.which){case 27:b.stopPropagation(),W(),a.$digest();break;case 38:P.activeIdx=(P.activeIdx>0?P.activeIdx:P.matches.length)-1,P.$digest(),d=U[0].querySelectorAll(".uib-typeahead-match")[P.activeIdx],d.parentNode.scrollTop=d.offsetTop;break;case 40:P.activeIdx=(P.activeIdx+1)%P.matches.length,P.$digest(),d=U[0].querySelectorAll(".uib-typeahead-match")[P.activeIdx],
d.parentNode.scrollTop=d.offsetTop;break;default:c&&P.$apply(function(){angular.isNumber(P.debounceUpdate)||angular.isObject(P.debounceUpdate)?k(function(){P.select(P.activeIdx,b)},angular.isNumber(P.debounceUpdate)?P.debounceUpdate:P.debounceUpdate["default"]):P.select(P.activeIdx,b)})}}}),b.on("focus",function(a){x=!0,0!==u||q.$viewValue||g(function(){Z(q.$viewValue,a)},0)}),b.on("blur",function(a){C&&P.matches.length&&-1!==P.activeIdx&&!y&&(y=!0,P.$apply(function(){angular.isObject(P.debounceUpdate)&&angular.isNumber(P.debounceUpdate.blur)?k(function(){P.select(P.activeIdx,a)},P.debounceUpdate.blur):P.select(P.activeIdx,a)})),!w&&q.$error.editable&&(q.$setViewValue(),P.$apply(function(){q.$setValidity("editable",!0),q.$setValidity("parse",!0)}),b.val("")),x=!1,y=!1});var ca=function(c){b[0]!==c.target&&3!==c.which&&0!==P.matches.length&&(W(),j.$$phase||a.$digest())};h.on("click",ca),a.$on("$destroy",function(){h.off("click",ca),(F||G)&&da.remove(),F&&(angular.element(i).off("resize",n),h.find("body").off("scroll",n)),U.remove(),K&&S.remove()});var da=d(U)(P);F?h.find("body").append(da):G?angular.element(G).eq(0).append(da):b.after(da),this.init=function(b){q=b,r=p(q),P.debounceUpdate=e(r.getOption("debounce"))(a),q.$parsers.unshift(function(b){return x=!0,0===u||b&&b.length>=u?v>0?(ba(),aa(b)):Z(b):(z(a,!1),ba(),W()),w?b:b?void q.$setValidity("editable",!1):(q.$setValidity("editable",!0),null)}),q.$formatters.push(function(b){var c,d,e={};return w||q.$setValidity("editable",!0),E?(e.$model=b,E(a,e)):(e[O.itemName]=b,c=O.viewMapper(a,e),e[O.itemName]=void 0,d=O.viewMapper(a,e),c!==d?c:b)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(a,b,c,d){d[1].init(d[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function(a){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(b,c,d){b.templateUrl=d.templateUrl,b.isOpen=function(){var a=b.matches.length>0;return b.assignIsOpen({isOpen:a}),a},b.isActive=function(a){return b.active===a},b.selectActive=function(a){b.active=a},b.selectMatch=function(c,d){var e=b.debounce();angular.isNumber(e)||angular.isObject(e)?a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e["default"]):b.select({activeIdx:c,evt:d})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"uib/template/typeahead/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c),b(c)(d)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0});
!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function r(n){return null===n?NaN:+n}function u(n){return!isNaN(n)}function i(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function a(n){return n.length}function o(n){for(var t=1;n*t%1;)t*=10;return t}function l(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function c(){this._=Object.create(null)}function s(n){return(n+="")===xa||n[0]===ba?ba+n:n}function f(n){return(n+="")[0]===ba?n.slice(1):n}function h(n){return s(n)in this._}function g(n){return(n=s(n))in this._&&delete this._[n]}function p(){var n=[];for(var t in this._)n.push(f(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=_a.length;r>e;++e){var u=_a[e]+t;if(u in n)return u}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new c;return t.on=function(t,u){var i,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,i=e.indexOf(a)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function S(){oa.event.preventDefault()}function k(){for(var n,t=oa.event;n=t.sourceEvent;)t=n;return t}function N(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=oa.event;u.target=n,oa.event=u,t[u.type].apply(e,r)}finally{oa.event=i}}},t}function E(n){return Sa(n,Aa),n}function A(n){return"function"==typeof n?n:function(){return ka(n,this)}}function C(n){return"function"==typeof n?n:function(){return Na(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=oa.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?o:a:n.local?i:u}function L(n){return n.trim().replace(/\s+/g," ")}function q(n){return new RegExp("(?:^|\\s+)"+oa.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=T(n).map(D);var u=n.length;return"function"==typeof t?r:e}function D(n){var t=q(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",L(u+" "+n))):e.setAttribute("class",L(u.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e===Ca&&t.documentElement.namespaceURI===Ca?t.createElement(n):t.createElementNS(e,n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=oa.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return Ea(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],a=0,o=i.length;o>a;a++)(u=i[a])&&t(u,a,e);return n}function Z(n){return Sa(n,La),n}function V(n){var t,e;return function(r,u,i){var a,o=n[i].update,l=o.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(a=o[t])&&++t<l;);return a}}function X(n,t,e){function r(){var t=this[a];t&&(this.removeEventListener(n,t,t.$),delete this[a])}function u(){var u=l(t,ca(arguments));r.call(this),this.addEventListener(n,this[a]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+oa.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var a="__on"+n,o=n.indexOf("."),l=$;o>0&&(n=n.slice(0,o));var c=qa.get(n);return c&&(n=c,l=B),o?t?u:r:t?b:i}function $(n,t){return function(e){var r=oa.event;oa.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{oa.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Ra,u="click"+r,i=oa.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ta&&(Ta="onselectstart"in e?!1:x(e.style,"userSelect")),Ta){var a=n(e).style,o=a[Ta];a[Ta]="none"}return function(n){if(i.on(r,null),Ta&&(a[Ta]=o),n){var t=function(){i.on(u,null)};i.on(u,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var u=r.createSVGPoint();if(0>Da){var i=t(n);if(i.scrollX||i.scrollY){r=oa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Da=!(a.f||a.e),r.remove()}}return Da?(u.x=e.pageX,u.y=e.pageY):(u.x=e.clientX,u.y=e.clientY),u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}function G(){return oa.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nn(n){return n>1?0:-1>n?ja:Math.acos(n)}function tn(n){return n>1?Oa:-1>n?-Oa:Math.asin(n)}function en(n){return((n=Math.exp(n))-1/n)/2}function rn(n){return((n=Math.exp(n))+1/n)/2}function un(n){return((n=Math.exp(2*n))-1)/(n+1)}function an(n){return(n=Math.sin(n/2))*n}function on(){}function ln(n,t,e){return this instanceof ln?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof ln?new ln(n.h,n.s,n.l):_n(""+n,wn,ln):new ln(n,t,e)}function cn(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(a-i)*n/60:180>n?a:240>n?i+(a-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,a;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,a=.5>=e?e*(1+t):e+t-e*t,i=2*e-a,new yn(u(n+120),u(n),u(n-120))}function sn(n,t,e){return this instanceof sn?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof sn?new sn(n.h,n.c,n.l):n instanceof hn?pn(n.l,n.a,n.b):pn((n=Sn((n=oa.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new sn(n,t,e)}function fn(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new hn(e,Math.cos(n*=Ia)*t,Math.sin(n)*t)}function hn(n,t,e){return this instanceof hn?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof hn?new hn(n.l,n.a,n.b):n instanceof sn?fn(n.h,n.c,n.l):Sn((n=yn(n)).r,n.g,n.b):new hn(n,t,e)}function gn(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=vn(u)*Qa,r=vn(r)*no,i=vn(i)*to,new yn(mn(3.2404542*u-1.5371385*r-.4985314*i),mn(-.969266*u+1.8760108*r+.041556*i),mn(.0556434*u-.2040259*r+1.0572252*i))}function pn(n,t,e){return n>0?new sn(Math.atan2(e,t)*Ya,Math.sqrt(t*t+e*e),n):new sn(NaN,NaN,n)}function vn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function dn(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function mn(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function yn(n,t,e){return this instanceof yn?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof yn?new yn(n.r,n.g,n.b):_n(""+n,yn,cn):new yn(n,t,e)}function Mn(n){return new yn(n>>16,n>>8&255,255&n)}function xn(n){return Mn(n)+""}function bn(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function _n(n,t,e){var r,u,i,a=0,o=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(Nn(u[0]),Nn(u[1]),Nn(u[2]))}return(i=uo.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(a=(3840&i)>>4,a=a>>4|a,o=240&i,o=o>>4|o,l=15&i,l=l<<4|l):7===n.length&&(a=(16711680&i)>>16,o=(65280&i)>>8,l=255&i)),t(a,o,l))}function wn(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),a=Math.max(n,t,e),o=a-i,l=(a+i)/2;return o?(u=.5>l?o/(a+i):o/(2-a-i),r=n==a?(t-e)/o+(e>t?6:0):t==a?(e-n)/o+2:(n-t)/o+4,r*=60):(r=NaN,u=l>0&&1>l?0:r),new ln(r,u,l)}function Sn(n,t,e){n=kn(n),t=kn(t),e=kn(e);var r=dn((.4124564*n+.3575761*t+.1804375*e)/Qa),u=dn((.2126729*n+.7151522*t+.072175*e)/no),i=dn((.0193339*n+.119192*t+.9503041*e)/to);return hn(116*u-16,500*(r-u),200*(u-i))}function kn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Nn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function En(n){return"function"==typeof n?n:function(){return n}}function An(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Cn(t,e,n,r)}}function Cn(n,t,e,r){function u(){var n,t=l.status;if(!t&&Ln(l)||t>=200&&300>t||304===t){try{n=e.call(i,l)}catch(r){return void a.error.call(i,r)}a.load.call(i,n)}else a.error.call(i,l)}var i={},a=oa.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(n)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=u:l.onreadystatechange=function(){l.readyState>3&&u()},l.onprogress=function(n){var t=oa.event;oa.event=n;try{a.progress.call(i,l)}finally{oa.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?o[n]:(null==t?delete o[n]:o[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(c=n,i):c},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ca(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),l.open(e,n,!0),null==t||"accept"in o||(o.accept=t+",*/*"),l.setRequestHeader)for(var s in o)l.setRequestHeader(s,o[s]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),a.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},oa.rebind(i,a,"on"),null==r?i:i.get(zn(r))}function zn(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Ln(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qn(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,n:null};return ao?ao.n=i:io=i,ao=i,oo||(lo=clearTimeout(lo),oo=1,co(Tn)),i}function Tn(){var n=Rn(),t=Dn()-n;t>24?(isFinite(t)&&(clearTimeout(lo),lo=setTimeout(Tn,t)),oo=0):(oo=1,co(Tn))}function Rn(){for(var n=Date.now(),t=io;t;)n>=t.t&&t.c(n-t.t)&&(t.c=null),t=t.n;return n}function Dn(){for(var n,t=io,e=1/0;t;)t.c?(t.t<e&&(e=t.t),t=(n=t).n):t=n?n.n=t.n:io=t.n;return ao=n,e}function Pn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Un(n,t){var e=Math.pow(10,3*Ma(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function jn(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],a=0,o=r[0],l=0;u>0&&o>0&&(l+o+1>t&&(o=Math.max(1,t-l)),i.push(n.substring(u-=o,u+o)),!((l+=o+1)>t));)o=r[a=(a+1)%r.length];return i.reverse().join(e)}:y;return function(n){var e=fo.exec(n),r=e[1]||" ",a=e[2]||">",o=e[3]||"-",l=e[4]||"",c=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===a)&&(c=r="0",a="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===l&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=ho.get(g)||Fn;var M=c&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===o?"":o;if(0>p){var l=oa.formatPrefix(n,h);n=l.scale(n),e=l.symbol+d}else n*=p;n=g(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=y?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!c&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===a?u+n+k:">"===a?k+u+n:"^"===a?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}function Fn(n){return n+""}function Hn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function On(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new po(e-1)),1),e}function i(n,e){return t(n=new po(+n),e),n}function a(n,r,i){var a=u(n),o=[];if(i>1)for(;r>a;)e(a)%i||o.push(new Date(+a)),t(a,1);else for(;r>a;)o.push(new Date(+a)),t(a,1);return o}function o(n,t,e){try{po=Hn;var r=new Hn;return r._=n,a(r,t,e)}finally{po=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=a;var l=n.utc=In(n);return l.floor=l,l.round=In(r),l.ceil=In(u),l.offset=In(i),l.range=o,n}function In(n){return function(t,e){try{po=Hn;var r=new Hn;return r._=t,n(r,e)._}finally{po=Date}}}function Yn(n){function t(n){function t(t){for(var e,u,i,a=[],o=-1,l=0;++o<r;)37===n.charCodeAt(o)&&(a.push(n.slice(l,o)),null!=(u=mo[e=n.charAt(++o)])&&(e=n.charAt(++o)),(i=A[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),a.push(e),l=o+1);return a.push(n.slice(l,o)),a.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&po!==Hn,a=new(i?Hn:po);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?a._:a},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,a,o=0,l=t.length,c=e.length;l>o;){if(r>=c)return-1;if(u=t.charCodeAt(o++),37===u){if(a=t.charAt(o++),i=C[a in mo?t.charAt(o++):a],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){N.lastIndex=0;var r=N.exec(t.slice(e));return r?(n.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,r){return e(n,A.c.toString(),t,r)}function l(n,t,r){return e(n,A.x.toString(),t,r)}function c(n,t,r){return e(n,A.X.toString(),t,r)}function s(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{po=Hn;var t=new po;return t._=n,r(t)}finally{po=Date}}var r=t(n);return e.parse=function(n){try{po=Hn;var t=r.parse(n);return t&&t._}finally{po=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ct;var M=oa.map(),x=Vn(v),b=Xn(v),_=Vn(d),w=Xn(d),S=Vn(m),k=Xn(m),N=Vn(y),E=Xn(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var A={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return Zn(n.getDate(),t,2)},e:function(n,t){return Zn(n.getDate(),t,2)},H:function(n,t){return Zn(n.getHours(),t,2)},I:function(n,t){return Zn(n.getHours()%12||12,t,2)},j:function(n,t){return Zn(1+go.dayOfYear(n),t,3)},L:function(n,t){return Zn(n.getMilliseconds(),t,3)},m:function(n,t){return Zn(n.getMonth()+1,t,2)},M:function(n,t){return Zn(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return Zn(n.getSeconds(),t,2)},U:function(n,t){return Zn(go.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Zn(go.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return Zn(n.getFullYear()%100,t,2)},Y:function(n,t){return Zn(n.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},C={a:r,A:u,b:i,B:a,c:o,d:tt,e:tt,H:rt,I:rt,j:et,L:at,m:nt,M:ut,p:s,S:it,U:Bn,w:$n,W:Wn,x:l,X:c,y:Gn,Y:Jn,Z:Kn,"%":lt};return t}function Zn(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Vn(n){return new RegExp("^(?:"+n.map(oa.requote).join("|")+")","i")}function Xn(n){for(var t=new c,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function $n(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Bn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Wn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Jn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Gn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.y=Qn(+r[0]),e+r[0].length):-1}function Kn(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Qn(n){return n+(n>68?1900:2e3)}function nt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function tt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function et(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function rt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ut(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function it(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function at(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ot(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=Ma(t)/60|0,u=Ma(t)%60;return e+Zn(r,"0",2)+Zn(u,"0",2)}function lt(n,t,e){Mo.lastIndex=0;var r=Mo.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ct(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function st(){}function ft(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function ht(n,t){n&&wo.hasOwnProperty(n.type)&&wo[n.type](n,t)}function gt(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function pt(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)gt(n[e],t,1);t.polygonEnd()}function vt(){function n(n,t){n*=Ia,t=t*Ia/2+ja/4;var e=n-r,a=e>=0?1:-1,o=a*e,l=Math.cos(t),c=Math.sin(t),s=i*c,f=u*l+s*Math.cos(o),h=s*a*Math.sin(o);ko.add(Math.atan2(h,f)),r=n,u=l,i=c}var t,e,r,u,i;No.point=function(a,o){No.point=n,r=(t=a)*Ia,u=Math.cos(o=(e=o)*Ia/2+ja/4),i=Math.sin(o)},No.lineEnd=function(){n(t,e)}}function dt(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function mt(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function yt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Mt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function xt(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function bt(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function _t(n){return[Math.atan2(n[1],n[0]),tn(n[2])]}function wt(n,t){return Ma(n[0]-t[0])<Pa&&Ma(n[1]-t[1])<Pa}function St(n,t){n*=Ia;var e=Math.cos(t*=Ia);kt(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function kt(n,t,e){++Eo,Co+=(n-Co)/Eo,zo+=(t-zo)/Eo,Lo+=(e-Lo)/Eo}function Nt(){function n(n,u){n*=Ia;var i=Math.cos(u*=Ia),a=i*Math.cos(n),o=i*Math.sin(n),l=Math.sin(u),c=Math.atan2(Math.sqrt((c=e*l-r*o)*c+(c=r*a-t*l)*c+(c=t*o-e*a)*c),t*a+e*o+r*l);Ao+=c,qo+=c*(t+(t=a)),To+=c*(e+(e=o)),Ro+=c*(r+(r=l)),kt(t,e,r)}var t,e,r;jo.point=function(u,i){u*=Ia;var a=Math.cos(i*=Ia);t=a*Math.cos(u),e=a*Math.sin(u),r=Math.sin(i),jo.point=n,kt(t,e,r)}}function Et(){jo.point=St}function At(){function n(n,t){n*=Ia;var e=Math.cos(t*=Ia),a=e*Math.cos(n),o=e*Math.sin(n),l=Math.sin(t),c=u*l-i*o,s=i*a-r*l,f=r*o-u*a,h=Math.sqrt(c*c+s*s+f*f),g=r*a+u*o+i*l,p=h&&-nn(g)/h,v=Math.atan2(h,g);Do+=p*c,Po+=p*s,Uo+=p*f,Ao+=v,qo+=v*(r+(r=a)),To+=v*(u+(u=o)),Ro+=v*(i+(i=l)),kt(r,u,i)}var t,e,r,u,i;jo.point=function(a,o){t=a,e=o,jo.point=n,a*=Ia;var l=Math.cos(o*=Ia);r=l*Math.cos(a),u=l*Math.sin(a),i=Math.sin(o),kt(r,u,i)},jo.lineEnd=function(){n(t,e),jo.lineEnd=Et,jo.point=St}}function Ct(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function zt(){return!0}function Lt(n,t,e,r,u){var i=[],a=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(wt(e,r)){u.lineStart();for(var o=0;t>o;++o)u.point((e=n[o])[0],e[1]);return void u.lineEnd()}var l=new Tt(e,n,null,!0),c=new Tt(e,null,l,!1);l.o=c,i.push(l),a.push(c),l=new Tt(r,n,null,!1),c=new Tt(r,null,l,!0),l.o=c,i.push(l),a.push(c)}}),a.sort(t),qt(i),qt(a),i.length){for(var o=0,l=e,c=a.length;c>o;++o)a[o].e=l=!l;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var o=0,c=s.length;c>o;++o)u.point((f=s[o])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var o=s.length-1;o>=0;--o)u.point((f=s[o])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function qt(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function Tt(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Rt(n,t,e,r){return function(u,i){function a(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function o(n,t){var e=u(n,t);d.point(e[0],e[1])}function l(){y.point=o,d.lineStart()}function c(){y.point=a,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,a=-1;if(r>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++a<r;)i.point((u=n[a])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Dt))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:c,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=c,g=oa.merge(g);var n=Ot(m,p);g.length?(b||(i.polygonStart(),b=!0),Lt(g,Ut,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Pt(),x=t(M),b=!1;return y}}function Dt(n){return n.length>1}function Pt(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ut(n,t){return((n=n.x)[0]<0?n[1]-Oa-Pa:Oa-n[1])-((t=t.x)[0]<0?t[1]-Oa-Pa:Oa-t[1])}function jt(n){var t,e=NaN,r=NaN,u=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(i,a){var o=i>0?ja:-ja,l=Ma(i-e);Ma(l-ja)<Pa?(n.point(e,r=(r+a)/2>0?Oa:-Oa),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(o,r),n.point(i,r),t=0):u!==o&&l>=ja&&(Ma(e-u)<Pa&&(e-=u*Pa),Ma(i-o)<Pa&&(i-=o*Pa),r=Ft(e,r,i,a),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(o,r),t=0),n.point(e=i,r=a),u=o},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function Ft(n,t,e,r){var u,i,a=Math.sin(n-e);return Ma(a)>Pa?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*a)):(t+r)/2}function Ht(n,t,e,r){var u;if(null==n)u=e*Oa,r.point(-ja,u),r.point(0,u),r.point(ja,u),r.point(ja,0),r.point(ja,-u),r.point(0,-u),r.point(-ja,-u),r.point(-ja,0),r.point(-ja,u);else if(Ma(n[0]-t[0])>Pa){var i=n[0]<t[0]?ja:-ja;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function Ot(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,a=0;ko.reset();for(var o=0,l=t.length;l>o;++o){var c=t[o],s=c.length;if(s)for(var f=c[0],h=f[0],g=f[1]/2+ja/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=c[d];var m=n[0],y=n[1]/2+ja/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=b>=0?1:-1,w=_*b,S=w>ja,k=p*M;if(ko.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*Fa:b,S^h>=e^m>=e){var N=yt(dt(f),dt(n));bt(N);var E=yt(u,N);bt(E);var A=(S^b>=0?-1:1)*tn(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(a+=S^b>=0?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(-Pa>i||Pa>i&&0>ko)^1&a}function It(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,l,c,s;return{lineStart:function(){c=l=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=a?v?0:u(f,h):v?u(f+(0>f?ja:-ja),h):0;if(!e&&(c=l=v)&&n.lineStart(),v!==l&&(g=r(e,p),(wt(e,g)||wt(p,g))&&(p[0]+=Pa,p[1]+=Pa,v=t(p[0],p[1]))),v!==l)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(o&&e&&a^v){var m;d&i||!(m=r(p,e,!0))||(s=0,a?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&wt(e,p)||n.point(p[0],p[1]),e=p,l=v,i=d},lineEnd:function(){l&&n.lineEnd(),e=null},clean:function(){return s|(c&&l)<<1}}}function r(n,t,e){var r=dt(n),u=dt(t),a=[1,0,0],o=yt(r,u),l=mt(o,o),c=o[0],s=l-c*c;if(!s)return!e&&n;var f=i*l/s,h=-i*c/s,g=yt(a,o),p=xt(a,f),v=xt(o,h);Mt(p,v);var d=g,m=mt(p,d),y=mt(d,d),M=m*m-y*(mt(p,p)-1);if(!(0>M)){var x=Math.sqrt(M),b=xt(d,(-m-x)/y);if(Mt(b,p),b=_t(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],N=t[1];w>S&&(_=w,w=S,S=_);var E=S-w,A=Ma(E-ja)<Pa,C=A||Pa>E;if(!A&&k>N&&(_=k,k=N,N=_),C?A?k+N>0^b[1]<(Ma(b[0]-w)<Pa?k:N):k<=b[1]&&b[1]<=N:E>ja^(w<=b[0]&&b[0]<=S)){var z=xt(d,(-m+x)/y);return Mt(z,p),[b,_t(z)]}}}function u(t,e){var r=a?n:ja-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),a=i>0,o=Ma(i)>Pa,l=ve(n,6*Ia);return Rt(t,e,l,a?[0,-n]:[-ja,n-ja])}function Yt(n,t,e,r){return function(u){var i,a=u.a,o=u.b,l=a.x,c=a.y,s=o.x,f=o.y,h=0,g=1,p=s-l,v=f-c;if(i=n-l,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-l,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-c,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-c,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:l+h*p,y:c+h*v}),1>g&&(u.b={x:l+g*p,y:c+g*v}),u}}}}}}function Zt(n,t,e,r){function u(r,u){return Ma(r[0]-n)<Pa?u>0?0:3:Ma(r[0]-e)<Pa?u>0?2:1:Ma(r[1]-t)<Pa?u>0?1:0:u>0?3:2}function i(n,t){return a(n.x,t.x)}function a(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(o){function l(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,a=1,o=d[u],l=o.length,c=o[0];l>a;++a)i=o[a],c[1]<=r?i[1]>r&&Q(c,i,n)>0&&++t:i[1]<=r&&Q(c,i,n)<0&&--t,c=i;return 0!==t}function c(i,o,l,c){var s=0,f=0;if(null==i||(s=u(i,l))!==(f=u(o,l))||a(i,o)<0^l>0){do c.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+l+4)%4)!==f)}else c.point(o[0],o[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&o.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,b=_=NaN}function g(){v&&(p(y,M),x&&w&&E.rejoin(),v.push(E.buffer())),C.point=f,w&&o.lineEnd()}function p(n,t){n=Math.max(-Ho,Math.min(Ho,n)),t=Math.max(-Ho,Math.min(Ho,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,M=t,x=e,S=!1,e&&(o.lineStart(),o.point(n,t));else if(e&&w)o.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};A(r)?(w||(o.lineStart(),o.point(r.a.x,r.a.y)),o.point(r.b.x,r.b.y),e||o.lineEnd(),k=!1):e&&(o.lineStart(),o.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,N=o,E=Pt(),A=Yt(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){o=E,v=[],d=[],k=!0},polygonEnd:function(){o=N,v=oa.merge(v);var t=l([n,r]),e=k&&t,u=v.length;(e||u)&&(o.polygonStart(),e&&(o.lineStart(),c(null,null,1,o),o.lineEnd()),u&&Lt(v,i,t,c,o),o.polygonEnd()),v=d=m=null}};return C}}function Vt(n){var t=0,e=ja/3,r=oe(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*ja/180,e=n[1]*ja/180):[t/ja*180,e/ja*180]},u}function Xt(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),a-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),a=Math.sqrt(i)/u;return e.invert=function(n,t){var e=a-t;return[Math.atan2(n,e)/u,tn((i-(n*n+e*e)*u*u)/(2*u))]},e}function $t(){function n(n,t){Io+=u*n-r*t,r=n,u=t}var t,e,r,u;$o.point=function(i,a){$o.point=n,t=r=i,e=u=a},$o.lineEnd=function(){n(t,e)}}function Bt(n,t){Yo>n&&(Yo=n),n>Vo&&(Vo=n),Zo>t&&(Zo=t),t>Xo&&(Xo=t)}function Wt(){function n(n,t){a.push("M",n,",",t,i)}function t(n,t){a.push("M",n,",",t),o.point=e}function e(n,t){a.push("L",n,",",t)}function r(){o.point=n}function u(){a.push("Z")}var i=Jt(4.5),a=[],o={point:n,lineStart:function(){o.point=t},lineEnd:r,polygonStart:function(){o.lineEnd=u},polygonEnd:function(){o.lineEnd=r,o.point=n},pointRadius:function(n){return i=Jt(n),o},result:function(){if(a.length){var n=a.join("");return a=[],n}}};return o}function Jt(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Gt(n,t){Co+=n,zo+=t,++Lo}function Kt(){function n(n,r){var u=n-t,i=r-e,a=Math.sqrt(u*u+i*i);qo+=a*(t+n)/2,To+=a*(e+r)/2,Ro+=a,Gt(t=n,e=r)}var t,e;Wo.point=function(r,u){Wo.point=n,Gt(t=r,e=u)}}function Qt(){Wo.point=Gt}function ne(){function n(n,t){var e=n-r,i=t-u,a=Math.sqrt(e*e+i*i);qo+=a*(r+n)/2,To+=a*(u+t)/2,Ro+=a,a=u*n-r*t,Do+=a*(r+n),Po+=a*(u+t),Uo+=3*a,Gt(r=n,u=t)}var t,e,r,u;Wo.point=function(i,a){Wo.point=n,Gt(t=r=i,e=u=a)},Wo.lineEnd=function(){n(t,e)}}function te(n){function t(t,e){n.moveTo(t+a,e),n.arc(t,e,a,0,Fa)}function e(t,e){n.moveTo(t,e),o.point=r}function r(t,e){n.lineTo(t,e)}function u(){o.point=t}function i(){n.closePath()}var a=4.5,o={point:t,lineStart:function(){o.point=e},lineEnd:u,polygonStart:function(){o.lineEnd=i},polygonEnd:function(){o.lineEnd=u,o.point=t},pointRadius:function(n){return a=n,o},result:b};return o}function ee(n){function t(n){return(o?r:e)(n)}function e(t){return ie(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=NaN,S.point=i,t.lineStart()}function i(e,r){var i=dt([e,r]),a=n(e,r);u(M,x,y,b,_,w,M=a[0],x=a[1],y=e,b=i[0],_=i[1],w=i[2],o,t),t.point(M,x)}function a(){S.point=e,t.lineEnd()}function l(){
r(),S.point=c,S.lineEnd=s}function c(n,t){i(f=n,h=t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,o,t),S.lineEnd=a,a()}var f,h,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,o,l,c,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(x>4*i&&d--){var b=o+g,_=l+p,w=c+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),N=Ma(Ma(w)-1)<Pa||Ma(r-h)<Pa?(r+h)/2:Math.atan2(_,b),E=n(N,k),A=E[0],C=E[1],z=A-t,L=C-e,q=M*z-y*L;(q*q/x>i||Ma((y*z+M*L)/x-.5)>.3||a>o*g+l*p+c*v)&&(u(t,e,r,o,l,c,A,C,N,b/=S,_/=S,w,d,m),m.point(A,C),u(A,C,N,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,a=Math.cos(30*Ia),o=16;return t.precision=function(n){return arguments.length?(o=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function re(n){var t=ee(function(t,e){return n([t*Ya,e*Ya])});return function(n){return le(t(n))}}function ue(n){this.stream=n}function ie(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ae(n){return oe(function(){return n})()}function oe(n){function t(n){return n=o(n[0]*Ia,n[1]*Ia),[n[0]*h+l,c-n[1]*h]}function e(n){return n=o.invert((n[0]-l)/h,(c-n[1])/h),n&&[n[0]*Ya,n[1]*Ya]}function r(){o=Ct(a=fe(m,M,x),i);var n=i(v,d);return l=g-n[0]*h,c=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,a,o,l,c,s,f=ee(function(n,t){return n=i(n,t),[n[0]*h+l,c-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,M=0,x=0,b=Fo,_=y,w=null,S=null;return t.stream=function(n){return s&&(s.valid=!1),s=le(b(a,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Fo):It((w=+n)*Ia),u()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Zt(n[0][0],n[0][1],n[1][0],n[1][1]):y,u()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Ia,d=n[1]%360*Ia,r()):[v*Ya,d*Ya]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Ia,M=n[1]%360*Ia,x=n.length>2?n[2]%360*Ia:0,r()):[m*Ya,M*Ya,x*Ya]},oa.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function le(n){return ie(n,function(t,e){n.point(t*Ia,e*Ia)})}function ce(n,t){return[n,t]}function se(n,t){return[n>ja?n-Fa:-ja>n?n+Fa:n,t]}function fe(n,t,e){return n?t||e?Ct(ge(n),pe(t,e)):ge(n):t||e?pe(t,e):se}function he(n){return function(t,e){return t+=n,[t>ja?t-Fa:-ja>t?t+Fa:t,e]}}function ge(n){var t=he(n);return t.invert=he(-n),t}function pe(n,t){function e(n,t){var e=Math.cos(t),o=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),s=c*r+o*u;return[Math.atan2(l*i-s*a,o*r-c*u),tn(s*i+l*a)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),a=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),o=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),s=c*i-l*a;return[Math.atan2(l*i+c*a,o*r+s*u),tn(s*r-o*u)]},e}function ve(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,a,o){var l=a*t;null!=u?(u=de(e,u),i=de(e,i),(a>0?i>u:u>i)&&(u+=a*Fa)):(u=n+a*Fa,i=n-.5*l);for(var c,s=u;a>0?s>i:i>s;s-=l)o.point((c=_t([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],c[1])}}function de(n,t){var e=dt(t);e[0]-=n,bt(e);var r=nn(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Pa)%(2*Math.PI)}function me(n,t,e){var r=oa.range(n,t-Pa,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function ye(n,t,e){var r=oa.range(n,t-Pa,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Me(n){return n.source}function xe(n){return n.target}function be(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),a=Math.cos(r),o=Math.sin(r),l=u*Math.cos(n),c=u*Math.sin(n),s=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(an(r-t)+u*a*an(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*l+t*s,u=e*c+t*f,a=e*i+t*o;return[Math.atan2(u,r)*Ya,Math.atan2(a,Math.sqrt(r*r+u*u))*Ya]}:function(){return[n*Ya,t*Ya]};return p.distance=h,p}function _e(){function n(n,u){var i=Math.sin(u*=Ia),a=Math.cos(u),o=Ma((n*=Ia)-t),l=Math.cos(o);Jo+=Math.atan2(Math.sqrt((o=a*Math.sin(o))*o+(o=r*i-e*a*l)*o),e*i+r*a*l),t=n,e=i,r=a}var t,e,r;Go.point=function(u,i){t=u*Ia,e=Math.sin(i*=Ia),r=Math.cos(i),Go.point=n},Go.lineEnd=function(){Go.point=Go.lineEnd=b}}function we(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),a=Math.cos(u);return[Math.atan2(n*i,r*a),Math.asin(r&&e*i/r)]},e}function Se(n,t){function e(n,t){a>0?-Oa+Pa>t&&(t=-Oa+Pa):t>Oa-Pa&&(t=Oa-Pa);var e=a/Math.pow(u(t),i);return[e*Math.sin(i*n),a-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(ja/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),a=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=a-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(a/r,1/i))-Oa]},e):Ne}function ke(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return Ma(u)<Pa?ce:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function Ne(n,t){return[n,Math.log(Math.tan(ja/4+t/2))]}function Ee(n){var t,e=ae(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var a=i.apply(e,arguments);if(a===e){if(t=null==n){var o=ja*r(),l=u();i([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else t&&(a=null);return a},e.clipExtent(null)}function Ae(n,t){return[Math.log(Math.tan(ja/4+t/2)),-n]}function Ce(n){return n[0]}function ze(n){return n[1]}function Le(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function qe(n,t){return n[0]-t[0]||n[1]-t[1]}function Te(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Re(n,t,e,r){var u=n[0],i=e[0],a=t[0]-u,o=r[0]-i,l=n[1],c=e[1],s=t[1]-l,f=r[1]-c,h=(o*(l-c)-f*(u-i))/(f*a-o*s);return[u+h*a,l+h*s]}function De(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Pe(){rr(this),this.edge=this.site=this.circle=null}function Ue(n){var t=cl.pop()||new Pe;return t.site=n,t}function je(n){Be(n),al.remove(n),cl.push(n),rr(n)}function Fe(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,a=n.N,o=[n];je(n);for(var l=i;l.circle&&Ma(e-l.circle.x)<Pa&&Ma(r-l.circle.cy)<Pa;)i=l.P,o.unshift(l),je(l),l=i;o.unshift(l),Be(l);for(var c=a;c.circle&&Ma(e-c.circle.x)<Pa&&Ma(r-c.circle.cy)<Pa;)a=c.N,o.push(c),je(c),c=a;o.push(c),Be(c);var s,f=o.length;for(s=1;f>s;++s)c=o[s],l=o[s-1],nr(c.edge,l.site,c.site,u);l=o[0],c=o[f-1],c.edge=Ke(l.site,c.site,null,u),$e(l),$e(c)}function He(n){for(var t,e,r,u,i=n.x,a=n.y,o=al._;o;)if(r=Oe(o,a)-i,r>Pa)o=o.L;else{if(u=i-Ie(o,a),!(u>Pa)){r>-Pa?(t=o.P,e=o):u>-Pa?(t=o,e=o.N):t=e=o;break}if(!o.R){t=o;break}o=o.R}var l=Ue(n);if(al.insert(t,l),t||e){if(t===e)return Be(t),e=Ue(t.site),al.insert(l,e),l.edge=e.edge=Ke(t.site,l.site),$e(t),void $e(e);if(!e)return void(l.edge=Ke(t.site,l.site));Be(t),Be(e);var c=t.site,s=c.x,f=c.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};nr(e.edge,c,p,x),l.edge=Ke(c,n,null,x),e.edge=Ke(n,p,null,x),$e(t),$e(e)}}function Oe(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var a=n.P;if(!a)return-(1/0);e=a.site;var o=e.x,l=e.y,c=l-t;if(!c)return o;var s=o-r,f=1/i-1/c,h=s/c;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*c)-l+c/2+u-i/2)))/f+r:(r+o)/2}function Ie(n,t){var e=n.N;if(e)return Oe(e,t);var r=n.site;return r.y===t?r.x:1/0}function Ye(n){this.site=n,this.edges=[]}function Ze(n){for(var t,e,r,u,i,a,o,l,c,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=il,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(o=i.edges,l=o.length,a=0;l>a;)s=o[a].end(),r=s.x,u=s.y,c=o[++a%l].start(),t=c.x,e=c.y,(Ma(r-t)>Pa||Ma(u-e)>Pa)&&(o.splice(a,0,new tr(Qe(i.site,s,Ma(r-f)<Pa&&p-u>Pa?{x:f,y:Ma(t-f)<Pa?e:p}:Ma(u-p)<Pa&&h-r>Pa?{x:Ma(e-p)<Pa?t:h,y:p}:Ma(r-h)<Pa&&u-g>Pa?{x:h,y:Ma(t-h)<Pa?e:g}:Ma(u-g)<Pa&&r-f>Pa?{x:Ma(e-g)<Pa?t:f,y:g}:null),i.site,null)),++l)}function Ve(n,t){return t.angle-n.angle}function Xe(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function $e(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var a=u.x,o=u.y,l=r.x-a,c=r.y-o,s=i.x-a,f=i.y-o,h=2*(l*f-c*s);if(!(h>=-Ua)){var g=l*l+c*c,p=s*s+f*f,v=(f*g-c*p)/h,d=(l*p-s*g)/h,f=d+o,m=sl.pop()||new Xe;m.arc=n,m.site=u,m.x=v+a,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=ll._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}ll.insert(y,m),y||(ol=m)}}}}function Be(n){var t=n.circle;t&&(t.P||(ol=t.N),ll.remove(t),sl.push(t),rr(t),n.circle=null)}function We(n){for(var t,e=ul,r=Yt(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Je(t,n)||!r(t)||Ma(t.a.x-t.b.x)<Pa&&Ma(t.a.y-t.b.y)<Pa)&&(t.a=t.b=null,e.splice(u,1))}function Je(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,a=t[0][0],o=t[1][0],l=t[0][1],c=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(a>d||d>=o)return;if(h>p){if(i){if(i.y>=c)return}else i={x:d,y:l};e={x:d,y:c}}else{if(i){if(i.y<l)return}else i={x:d,y:c};e={x:d,y:l}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else{if(i){if(i.y<l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else if(v>g){if(i){if(i.x>=o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}else{if(i){if(i.x<a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}return n.a=i,n.b=e,!0}function Ge(n,t){this.l=n,this.r=t,this.a=this.b=null}function Ke(n,t,e,r){var u=new Ge(n,t);return ul.push(u),e&&nr(u,n,t,e),r&&nr(u,t,n,r),il[n.i].edges.push(new tr(u,n,t)),il[t.i].edges.push(new tr(u,t,n)),u}function Qe(n,t,e){var r=new Ge(n,null);return r.a=t,r.b=e,ul.push(r),r}function nr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function tr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function er(){this._=null}function rr(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function ur(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ir(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function ar(n){for(;n.L;)n=n.L;return n}function or(n,t){var e,r,u,i=n.sort(lr).pop();for(ul=[],il=new Array(n.length),al=new er,ll=new er;;)if(u=ol,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(il[i.i]=new Ye(i),He(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Fe(u.arc)}t&&(We(t),Ze(t));var a={cells:il,edges:ul};return al=ll=ul=il=null,a}function lr(n,t){return t.y-n.y||t.x-n.x}function cr(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function sr(n){return n.x}function fr(n){return n.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gr(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var a=.5*(e+u),o=.5*(r+i),l=t.nodes;l[0]&&gr(n,l[0],e,r,a,o),l[1]&&gr(n,l[1],a,r,u,o),l[2]&&gr(n,l[2],e,o,a,i),l[3]&&gr(n,l[3],a,o,u,i)}}function pr(n,t,e,r,u,i,a){var o,l=1/0;return function c(n,s,f,h,g){if(!(s>i||f>a||r>h||u>g)){if(p=n.point){var p,v=t-n.x,d=e-n.y,m=v*v+d*d;if(l>m){var y=Math.sqrt(l=m);r=t-y,u=e-y,i=t+y,a=e+y,o=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:c(n,s,f,x,b);break;case 1:c(n,x,f,h,b);break;case 2:c(n,s,b,x,g);break;case 3:c(n,x,b,h,g)}}}(n,r,u,i,a),o}function vr(n,t){n=oa.rgb(n),t=oa.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,a=t.g-r,o=t.b-u;return function(n){return"#"+bn(Math.round(e+i*n))+bn(Math.round(r+a*n))+bn(Math.round(u+o*n))}}function dr(n,t){var e,r={},u={};for(e in n)e in t?r[e]=Mr(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function mr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function yr(n,t){var e,r,u,i=hl.lastIndex=gl.lastIndex=0,a=-1,o=[],l=[];for(n+="",t+="";(e=hl.exec(n))&&(r=gl.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),o[a]?o[a]+=u:o[++a]=u),(e=e[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:mr(e,r)})),i=gl.lastIndex;return i<t.length&&(u=t.slice(i),o[a]?o[a]+=u:o[++a]=u),o.length<2?l[0]?(t=l[0].x,function(n){return t(n)+""}):function(){return t}:(t=l.length,function(n){for(var e,r=0;t>r;++r)o[(e=l[r]).i]=e.x(n);return o.join("")})}function Mr(n,t){for(var e,r=oa.interpolators.length;--r>=0&&!(e=oa.interpolators[r](n,t)););return e}function xr(n,t){var e,r=[],u=[],i=n.length,a=t.length,o=Math.min(n.length,t.length);for(e=0;o>e;++e)r.push(Mr(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;a>e;++e)u[e]=t[e];return function(n){for(e=0;o>e;++e)u[e]=r[e](n);return u}}function br(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function _r(n){return function(t){return 1-n(1-t)}}function wr(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function Sr(n){return n*n}function kr(n){return n*n*n}function Nr(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Er(n){return function(t){return Math.pow(t,n)}}function Ar(n){return 1-Math.cos(n*Oa)}function Cr(n){return Math.pow(2,10*(n-1))}function zr(n){return 1-Math.sqrt(1-n*n)}function Lr(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Fa*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Fa/t)}}function qr(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Tr(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Rr(n,t){n=oa.hcl(n),t=oa.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,a=t.c-r,o=t.l-u;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return fn(e+i*n,r+a*n,u+o*n)+""}}function Dr(n,t){n=oa.hsl(n),t=oa.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,a=t.s-r,o=t.l-u;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return cn(e+i*n,r+a*n,u+o*n)+""}}function Pr(n,t){n=oa.lab(n),t=oa.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,a=t.a-r,o=t.b-u;return function(n){return gn(e+i*n,r+a*n,u+o*n)+""}}function Ur(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function jr(n){var t=[n.a,n.b],e=[n.c,n.d],r=Hr(t),u=Fr(t,e),i=Hr(Or(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Ya,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Ya:0}function Fr(n,t){return n[0]*t[0]+n[1]*t[1]}function Hr(n){var t=Math.sqrt(Fr(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Or(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Ir(n){return n.length?n.pop()+",":""}function Yr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=e.push("translate(",null,",",null,")");r.push({i:u-4,x:mr(n[0],t[0])},{i:u-2,x:mr(n[1],t[1])})}else(t[0]||t[1])&&e.push("translate("+t+")")}function Zr(n,t,e,r){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),r.push({i:e.push(Ir(e)+"rotate(",null,")")-2,x:mr(n,t)})):t&&e.push(Ir(e)+"rotate("+t+")")}function Vr(n,t,e,r){n!==t?r.push({i:e.push(Ir(e)+"skewX(",null,")")-2,x:mr(n,t)}):t&&e.push(Ir(e)+"skewX("+t+")")}function Xr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=e.push(Ir(e)+"scale(",null,",",null,")");r.push({i:u-4,x:mr(n[0],t[0])},{i:u-2,x:mr(n[1],t[1])})}else(1!==t[0]||1!==t[1])&&e.push(Ir(e)+"scale("+t+")")}function $r(n,t){var e=[],r=[];return n=oa.transform(n),t=oa.transform(t),Yr(n.translate,t.translate,e,r),Zr(n.rotate,t.rotate,e,r),Vr(n.skew,t.skew,e,r),Xr(n.scale,t.scale,e,r),n=t=null,function(n){for(var t,u=-1,i=r.length;++u<i;)e[(t=r[u]).i]=t.x(n);return e.join("")}}function Br(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Wr(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Jr(n){for(var t=n.source,e=n.target,r=Kr(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Gr(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Kr(n,t){if(n===t)return n;for(var e=Gr(n),r=Gr(t),u=e.pop(),i=r.pop(),a=null;u===i;)a=u,u=e.pop(),i=r.pop();return a}function Qr(n){n.fixed|=2}function nu(n){n.fixed&=-7}function tu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function eu(n){n.fixed&=-5}function ru(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,a=n.nodes,o=a.length,l=-1;++l<o;)i=a[l],null!=i&&(ru(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var c=t*e[n.point.index];n.charge+=n.pointCharge=c,r+=c*n.point.x,u+=c*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function uu(n,t){return oa.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=su,n}function iu(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function au(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,a=-1;++a<u;)e.push(i[a]);for(;null!=(n=r.pop());)t(n)}function ou(n){return n.children}function lu(n){return n.value}function cu(n,t){return t.value-n.value}function su(n){return oa.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function fu(n){return n.x}function hu(n){return n.y}function gu(n,t,e){n.y0=t,n.y=e}function pu(n){return oa.range(n.length)}function vu(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function du(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function mu(n){return n.reduce(yu,0)}function yu(n,t){return n+t[1]}function Mu(n,t){return xu(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function xu(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function bu(n){return[oa.min(n),oa.max(n)]}function _u(n,t){return n.value-t.value}function wu(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Su(n,t){n._pack_next=t,t._pack_prev=n}function ku(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function Nu(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(c=e.length)){var e,r,u,i,a,o,l,c,s=1/0,f=-(1/0),h=1/0,g=-(1/0);if(e.forEach(Eu),r=e[0],r.x=-r.r,r.y=0,t(r),c>1&&(u=e[1],u.x=u.r,u.y=0,t(u),c>2))for(i=e[2],zu(r,u,i),t(i),wu(r,i),r._pack_prev=i,wu(i,u),u=r._pack_next,a=3;c>a;a++){zu(r,u,i=e[a]);var p=0,v=1,d=1;for(o=u._pack_next;o!==u;o=o._pack_next,v++)if(ku(o,i)){p=1;break}if(1==p)for(l=r._pack_prev;l!==o._pack_prev&&!ku(l,i);l=l._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?Su(r,u=o):Su(r=l,u),a--):(wu(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(a=0;c>a;a++)i=e[a],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(Au)}}function Eu(n){n._pack_next=n._pack_prev=n}function Au(n){delete n._pack_next,delete n._pack_prev}function Cu(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,a=u.length;++i<a;)Cu(u[i],t,e,r)}function zu(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var a=t.r+e.r,o=u*u+i*i;a*=a,r*=r;var l=.5+(r-a)/(2*o),c=Math.sqrt(Math.max(0,2*a*(r+o)-(r-=o)*r-a*a))/(2*o);e.x=n.x+l*u+c*i,e.y=n.y+l*i-c*u}else e.x=n.x+r,e.y=n.y}function Lu(n,t){return n.parent==t.parent?1:2}function qu(n){var t=n.children;return t.length?t[0]:n.t}function Tu(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ru(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Du(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Pu(n,t,e){return n.a.parent===t.parent?n.a:e}function Uu(n){return 1+oa.max(n,function(n){return n.y})}function ju(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Fu(n){var t=n.children;return t&&t.length?Fu(t[0]):n}function Hu(n){var t,e=n.children;return e&&(t=e.length)?Hu(e[t-1]):n}function Ou(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Iu(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Yu(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Zu(n){return n.rangeExtent?n.rangeExtent():Yu(n.range())}function Vu(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Xu(n,t){var e,r=0,u=n.length-1,i=n[r],a=n[u];return i>a&&(e=r,r=u,u=e,e=i,i=a,a=e),n[r]=t.floor(i),n[u]=t.ceil(a),n}function $u(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:Sl}function Bu(n,t,e,r){var u=[],i=[],a=0,o=Math.min(n.length,t.length)-1;for(n[o]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<=o;)u.push(e(n[a-1],n[a])),i.push(r(t[a-1],t[a]));return function(t){var e=oa.bisect(n,t,1,o)-1;return i[e](u[e](t))}}function Wu(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Bu:Vu,l=r?Wr:Br;return a=u(n,t,l,e),o=u(t,n,l,Mr),i}function i(n){return a(n)}var a,o;return i.invert=function(n){return o(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Ur)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Qu(n,t)},i.tickFormat=function(t,e){return ni(n,t,e)},i.nice=function(t){return Gu(n,t),u()},i.copy=function(){return Wu(n,t,e,r)},u()}function Ju(n,t){return oa.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Gu(n,t){return Xu(n,$u(Ku(n,t)[2])),Xu(n,$u(Ku(n,t)[2])),n}function Ku(n,t){null==t&&(t=10);var e=Yu(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Qu(n,t){return oa.range.apply(oa,Ku(n,t))}function ni(n,t,e){var r=Ku(n,t);if(e){var u=fo.exec(e);if(u.shift(),"s"===u[8]){var i=oa.formatPrefix(Math.max(Ma(r[0]),Ma(r[1])));return u[7]||(u[7]="."+ti(i.scale(r[2]))),u[8]="f",e=oa.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+ei(u[8],r)),e=u.join("")}else e=",."+ti(r[2])+"f";return oa.format(e)}function ti(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function ei(n,t){var e=ti(t[2]);return n in kl?Math.abs(e-ti(Math.max(Ma(t[0]),Ma(t[1]))))+ +("e"!==n):e-2*("%"===n)}function ri(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function a(t){return n(u(t))}return a.invert=function(t){return i(n.invert(t))},a.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),a):r},a.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),a):t},a.nice=function(){var t=Xu(r.map(u),e?Math:El);return n.domain(t),r=t.map(i),a},a.ticks=function(){var n=Yu(r),a=[],o=n[0],l=n[1],c=Math.floor(u(o)),s=Math.ceil(u(l)),f=t%1?2:t;if(isFinite(s-c)){if(e){for(;s>c;c++)for(var h=1;f>h;h++)a.push(i(c)*h);a.push(i(c))}else for(a.push(i(c));c++<s;)for(var h=f-1;h>0;h--)a.push(i(c)*h);for(c=0;a[c]<o;c++);for(s=a.length;a[s-1]>l;s--);a=a.slice(c,s)}return a},a.tickFormat=function(n,e){if(!arguments.length)return Nl;arguments.length<2?e=Nl:"function"!=typeof e&&(e=oa.format(e));var r=Math.max(1,t*n/a.ticks().length);return function(n){var a=n/i(Math.round(u(n)));return t-.5>a*t&&(a*=t),r>=a?e(n):""}},a.copy=function(){return ri(n.copy(),t,e,r)},Ju(a,n)}function ui(n,t,e){function r(t){return n(u(t))}var u=ii(t),i=ii(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Qu(e,n)},r.tickFormat=function(n,t){return ni(e,n,t)},r.nice=function(n){return r.domain(Gu(e,n))},r.exponent=function(a){return arguments.length?(u=ii(t=a),i=ii(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return ui(n.copy(),t,e)},Ju(r,n)}function ii(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function ai(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):NaN))-1)%i.length]}function r(t,e){return oa.range(n.length).map(function(n){return t+e*n})}var u,i,a;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new c;for(var i,a=-1,o=r.length;++a<o;)u.has(i=r[a])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,a=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,o){arguments.length<2&&(o=0);var l=u[0],c=u[1],s=n.length<2?(l=(l+c)/2,0):(c-l)/(n.length-1+o);return i=r(l+s*o/2,s),a=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,o){arguments.length<2&&(o=0);var l=u[0],c=u[1],s=n.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(n.length-1+o)|0;return i=r(l+Math.round(s*o/2+(c-l-(n.length-1+o)*s)/2),s),a=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=u[1]<u[0],s=u[c-0],f=u[1-c],h=(f-s)/(n.length-o+2*l);return i=r(s+h*l,h),c&&i.reverse(),a=h*(1-o),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=u[1]<u[0],s=u[c-0],f=u[1-c],h=Math.floor((f-s)/(n.length-o+2*l));return i=r(s+Math.round((f-s-(n.length-o)*h)/2),h),c&&i.reverse(),a=Math.round(h*(1-o)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Yu(t.a[0])},e.copy=function(){return ai(n,t)},e.domain(n)}function oi(n,t){function i(){var e=0,r=t.length;for(o=[];++e<r;)o[e-1]=oa.quantile(n,e/r);return a}function a(n){return isNaN(n=+n)?void 0:t[oa.bisect(o,n)]}var o;return a.domain=function(t){return arguments.length?(n=t.map(r).filter(u).sort(e),i()):n},a.range=function(n){return arguments.length?(t=n,i()):t},a.quantiles=function(){return o},a.invertExtent=function(e){return e=t.indexOf(e),0>e?[NaN,NaN]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},a.copy=function(){return oi(n,t)},i()}function li(n,t,e){function r(t){return e[Math.max(0,Math.min(a,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),a=e.length-1,r}var i,a;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?NaN:t/i+n,[t,t+1/i]},r.copy=function(){return li(n,t,e)},u()}function ci(n,t){function e(e){return e>=e?t[oa.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return ci(n,t)},e}function si(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Qu(n,t)},t.tickFormat=function(t,e){return ni(n,t,e)},t.copy=function(){return si(n)},t}function fi(){return 0}function hi(n){return n.innerRadius}function gi(n){return n.outerRadius}function pi(n){return n.startAngle}function vi(n){return n.endAngle}function di(n){return n&&n.padAngle}function mi(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function yi(n,t,e,r,u){var i=n[0]-t[0],a=n[1]-t[1],o=(u?r:-r)/Math.sqrt(i*i+a*a),l=o*a,c=-o*i,s=n[0]+l,f=n[1]+c,h=t[0]+l,g=t[1]+c,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(0>m?-1:1)*Math.sqrt(Math.max(0,M*M*y-x*x)),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,N=_-p,E=w-v,A=S-p,C=k-v;return N*N+E*E>A*A+C*C&&(_=S,w=k),[[_-l,w-c],[_*e/M,w*e/M]]}function Mi(n){function t(t){function a(){c.push("M",i(n(s),o))}for(var l,c=[],s=[],f=-1,h=t.length,g=En(e),p=En(r);++f<h;)u.call(this,l=t[f],f)?s.push([+g.call(this,l,f),+p.call(this,l,f)]):s.length&&(a(),s=[]);return s.length&&a(),c.length?c.join(""):null}var e=Ce,r=ze,u=zt,i=xi,a=i.key,o=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(a="function"==typeof n?i=n:(i=Tl.get(n)||xi).key,t):a},t.tension=function(n){return arguments.length?(o=n,t):o},t}function xi(n){return n.length>1?n.join("L"):n+"Z"}function bi(n){return n.join("L")+"Z"}function _i(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function wi(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function Si(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function ki(n,t){return n.length<4?xi(n):n[1]+Ai(n.slice(1,-1),Ci(n,t))}function Ni(n,t){return n.length<3?bi(n):n[0]+Ai((n.push(n[0]),n),Ci([n[n.length-2]].concat(n,[n[1]]),t))}function Ei(n,t){return n.length<3?xi(n):n[0]+Ai(n,Ci(n,t))}function Ai(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return xi(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],a=t[0],o=a,l=1;if(e&&(r+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],u=n[1],l=2),t.length>1){o=t[1],i=n[l],l++,r+="C"+(u[0]+a[0])+","+(u[1]+a[1])+","+(i[0]-o[0])+","+(i[1]-o[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,l++)i=n[l],o=t[c],r+="S"+(i[0]-o[0])+","+(i[1]-o[1])+","+i[0]+","+i[1]}if(e){var s=n[l];r+="Q"+(i[0]+2*o[0]/3)+","+(i[1]+2*o[1]/3)+","+s[0]+","+s[1]}return r}function Ci(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],a=n[1],o=1,l=n.length;++o<l;)e=i,i=a,a=n[o],r.push([u*(a[0]-e[0]),u*(a[1]-e[1])]);return r}function zi(n){if(n.length<3)return xi(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],a=[u,u,u,(r=n[1])[0]],o=[i,i,i,r[1]],l=[u,",",i,"L",Ri(Pl,a),",",Ri(Pl,o)];for(n.push(n[e-1]);++t<=e;)r=n[t],a.shift(),a.push(r[0]),o.shift(),o.push(r[1]),Di(l,a,o);return n.pop(),l.push("L",r),l.join("")}function Li(n){if(n.length<4)return xi(n);for(var t,e=[],r=-1,u=n.length,i=[0],a=[0];++r<3;)t=n[r],i.push(t[0]),a.push(t[1]);for(e.push(Ri(Pl,i)+","+Ri(Pl,a)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),a.shift(),a.push(t[1]),Di(e,i,a);return e.join("")}function qi(n){for(var t,e,r=-1,u=n.length,i=u+4,a=[],o=[];++r<4;)e=n[r%u],a.push(e[0]),o.push(e[1]);for(t=[Ri(Pl,a),",",Ri(Pl,o)],--r;++r<i;)e=n[r%u],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Di(t,a,o);return t.join("")}function Ti(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],a=n[0][1],o=n[e][0]-i,l=n[e][1]-a,c=-1;++c<=e;)r=n[c],u=c/e,r[0]=t*r[0]+(1-t)*(i+u*o),r[1]=t*r[1]+(1-t)*(a+u*l);return zi(n)}function Ri(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Di(n,t,e){n.push("C",Ri(Rl,t),",",Ri(Rl,e),",",Ri(Dl,t),",",Ri(Dl,e),",",Ri(Pl,t),",",Ri(Pl,e))}function Pi(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Ui(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],a=r[0]=Pi(u,i);++t<e;)r[t]=(a+(a=Pi(u=i,i=n[t+1])))/2;return r[t]=a,r}function ji(n){for(var t,e,r,u,i=[],a=Ui(n),o=-1,l=n.length-1;++o<l;)t=Pi(n[o],n[o+1]),Ma(t)<Pa?a[o]=a[o+1]=0:(e=a[o]/t,r=a[o+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),a[o]=u*e,a[o+1]=u*r));for(o=-1;++o<=l;)u=(n[Math.min(l,o+1)][0]-n[Math.max(0,o-1)][0])/(6*(1+a[o]*a[o])),i.push([u||0,a[o]*u||0]);return i}function Fi(n){return n.length<3?xi(n):n[0]+Ai(n,ji(n))}function Hi(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]-Oa,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Oi(n){function t(t){function l(){v.push("M",o(n(m),f),s,c(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=En(e),b=En(u),_=e===r?function(){
return g}:En(r),w=u===i?function(){return p}:En(i);++y<M;)a.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),+w.call(this,h,y)])):d.length&&(l(),d=[],m=[]);return d.length&&l(),v.length?v.join(""):null}var e=Ce,r=Ce,u=0,i=ze,a=zt,o=xi,l=o.key,c=o,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(a=n,t):a},t.interpolate=function(n){return arguments.length?(l="function"==typeof n?o=n:(o=Tl.get(n)||xi).key,c=o.reverse||o,s=o.closed?"M":"L",t):l},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Ii(n){return n.radius}function Yi(n){return[n.x,n.y]}function Zi(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Oa;return[e*Math.cos(r),e*Math.sin(r)]}}function Vi(){return 64}function Xi(){return"circle"}function $i(n){var t=Math.sqrt(n/ja);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Bi(n){return function(){var t,e,r;(t=this[n])&&(r=t[e=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[e]:delete this[n],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Wi(n,t,e){return Sa(n,Yl),n.namespace=t,n.id=e,n}function Ji(n,t,e,r){var u=n.id,i=n.namespace;return Y(n,"function"==typeof e?function(n,a,o){n[i][u].tween.set(t,r(e.call(n,n.__data__,a,o)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Gi(n){return null==n&&(n=""),function(){this.textContent=n}}function Ki(n){return null==n?"__transition__":"__transition_"+n+"__"}function Qi(n,t,e,r,u){function i(n){var t=v.delay;return s.t=t+l,n>=t?a(n-t):void(s.c=a)}function a(e){var u=p.active,i=p[u];i&&(i.timer.c=null,i.timer.t=NaN,--p.count,delete p[u],i.event&&i.event.interrupt.call(n,n.__data__,i.index));for(var a in p)if(r>+a){var c=p[a];c.timer.c=null,c.timer.t=NaN,--p.count,delete p[a]}s.c=o,qn(function(){return s.c&&o(e||1)&&(s.c=null,s.t=NaN),1},0,l),p.active=r,v.event&&v.event.start.call(n,n.__data__,t),g=[],v.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&g.push(r)}),h=v.ease,f=v.duration}function o(u){for(var i=u/f,a=h(i),o=g.length;o>0;)g[--o].call(n,a);return i>=1?(v.event&&v.event.end.call(n,n.__data__,t),--p.count?delete p[r]:delete n[e],1):void 0}var l,s,f,h,g,p=n[e]||(n[e]={active:0,count:0}),v=p[r];v||(l=u.time,s=qn(i,0,l),v=p[r]={tween:new c,time:l,timer:s,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++p.count)}function na(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function ta(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function ea(n){return n.toISOString()}function ra(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=oa.bisect(Kl,u);return i==Kl.length?[t.year,Ku(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Kl[i-1]<Kl[i]/u?i-1:i]:[tc,Ku(n,e)[2]]}return r.invert=function(t){return ua(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(ua)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,ua(+e+1),t).length}var i=r.domain(),a=Yu(i),o=null==n?u(a,10):"number"==typeof n&&u(a,n);return o&&(n=o[0],t=o[1]),r.domain(Xu(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=ua(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=ua(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Yu(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],ua(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return ra(n.copy(),t,e)},Ju(r,n)}function ua(n){return new Date(n)}function ia(n){return JSON.parse(n.responseText)}function aa(n){var t=sa.createRange();return t.selectNode(sa.body),t.createContextualFragment(n.responseText)}var oa={version:"3.5.16"},la=[].slice,ca=function(n){return la.call(n)},sa=this.document;if(sa)try{ca(sa.documentElement.childNodes)[0].nodeType}catch(fa){ca=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),sa)try{sa.createElement("DIV").style.setProperty("opacity",0,"")}catch(ha){var ga=this.Element.prototype,pa=ga.setAttribute,va=ga.setAttributeNS,da=this.CSSStyleDeclaration.prototype,ma=da.setProperty;ga.setAttribute=function(n,t){pa.call(this,n,t+"")},ga.setAttributeNS=function(n,t,e){va.call(this,n,t,e+"")},da.setProperty=function(n,t,e){ma.call(this,n,t+"",e)}}oa.ascending=e,oa.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN},oa.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},oa.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},oa.extent=function(n,t){var e,r,u,i=-1,a=n.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=n[i])&&r>=r){e=u=r;break}for(;++i<a;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<a;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=u=r;break}for(;++i<a;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},oa.sum=function(n,t){var e,r=0,i=n.length,a=-1;if(1===arguments.length)for(;++a<i;)u(e=+n[a])&&(r+=e);else for(;++a<i;)u(e=+t.call(n,n[a],a))&&(r+=e);return r},oa.mean=function(n,t){var e,i=0,a=n.length,o=-1,l=a;if(1===arguments.length)for(;++o<a;)u(e=r(n[o]))?i+=e:--l;else for(;++o<a;)u(e=r(t.call(n,n[o],o)))?i+=e:--l;return l?i/l:void 0},oa.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},oa.median=function(n,t){var i,a=[],o=n.length,l=-1;if(1===arguments.length)for(;++l<o;)u(i=r(n[l]))&&a.push(i);else for(;++l<o;)u(i=r(t.call(n,n[l],l)))&&a.push(i);return a.length?oa.quantile(a.sort(e),.5):void 0},oa.variance=function(n,t){var e,i,a=n.length,o=0,l=0,c=-1,s=0;if(1===arguments.length)for(;++c<a;)u(e=r(n[c]))&&(i=e-o,o+=i/++s,l+=i*(e-o));else for(;++c<a;)u(e=r(t.call(n,n[c],c)))&&(i=e-o,o+=i/++s,l+=i*(e-o));return s>1?l/(s-1):void 0},oa.deviation=function(){var n=oa.variance.apply(this,arguments);return n?Math.sqrt(n):n};var ya=i(e);oa.bisectLeft=ya.left,oa.bisect=oa.bisectRight=ya.right,oa.bisector=function(n){return i(1===n.length?function(t,r){return e(n(t),r)}:n)},oa.shuffle=function(n,t,e){(i=arguments.length)<3&&(e=n.length,2>i&&(t=0));for(var r,u,i=e-t;i;)u=Math.random()*i--|0,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},oa.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},oa.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},oa.transpose=function(n){if(!(u=n.length))return[];for(var t=-1,e=oa.min(n,a),r=new Array(e);++t<e;)for(var u,i=-1,o=r[t]=new Array(u);++i<u;)o[i]=n[i][t];return r},oa.zip=function(){return oa.transpose(arguments)},oa.keys=function(n){var t=[];for(var e in n)t.push(e);return t},oa.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},oa.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},oa.merge=function(n){for(var t,e,r,u=n.length,i=-1,a=0;++i<u;)a+=n[i].length;for(e=new Array(a);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--a]=r[t];return e};var Ma=Math.abs;oa.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,u=[],i=o(Ma(e)),a=-1;if(n*=i,t*=i,e*=i,0>e)for(;(r=n+e*++a)>t;)u.push(r/i);else for(;(r=n+e*++a)<t;)u.push(r/i);return u},oa.map=function(n,t){var e=new c;if(n instanceof c)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var a in n)e.set(a,n[a]);return e};var xa="__proto__",ba="\x00";l(c,{has:h,get:function(n){return this._[s(n)]},set:function(n,t){return this._[s(n)]=t},remove:g,keys:p,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:f(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t),this._[t])}}),oa.nest=function(){function n(t,a,o){if(o>=i.length)return r?r.call(u,a):e?a.sort(e):a;for(var l,s,f,h,g=-1,p=a.length,v=i[o++],d=new c;++g<p;)(h=d.get(l=v(s=a[g])))?h.push(s):d.set(l,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,o))}):(s={},f=function(e,r){s[e]=n(t,r,o)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=a[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],a=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(oa.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return a[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},oa.set=function(n){var t=new m;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},l(m,{has:h,add:function(n){return this._[s(n+="")]=!0,n},remove:g,values:p,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t))}}),oa.behavior={},oa.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=M(n,t,t[e]);return n};var _a=["webkit","ms","moz","Moz","o","O"];oa.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},oa.event=null,oa.requote=function(n){return n.replace(wa,"\\$&")};var wa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},ka=function(n,t){return t.querySelector(n)},Na=function(n,t){return t.querySelectorAll(n)},Ea=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(Ea=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(ka=function(n,t){return Sizzle(n,t)[0]||null},Na=Sizzle,Ea=Sizzle.matchesSelector),oa.selection=function(){return oa.select(sa.documentElement)};var Aa=oa.selection.prototype=[];Aa.select=function(n){var t,e,r,u,i=[];n=A(n);for(var a=-1,o=this.length;++a<o;){i.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,c=r.length;++l<c;)(u=r[l])?(t.push(e=n.call(u,u.__data__,l,a)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return E(i)},Aa.selectAll=function(n){var t,e,r=[];n=C(n);for(var u=-1,i=this.length;++u<i;)for(var a=this[u],o=-1,l=a.length;++o<l;)(e=a[o])&&(r.push(t=ca(n.call(e,e.__data__,o,u))),t.parentNode=e);return E(r)};var Ca="http://www.w3.org/1999/xhtml",za={svg:"http://www.w3.org/2000/svg",xhtml:Ca,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};oa.ns={prefix:za,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),za.hasOwnProperty(e)?{space:za[e],local:n}:n}},Aa.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=oa.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},Aa.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!q(n[u]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},Aa.style=function(n,e,r){var u=arguments.length;if(3>u){if("string"!=typeof n){2>u&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>u){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},Aa.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},Aa.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},Aa.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},Aa.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},Aa.insert=function(n,t){return n=j(n),t=A(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},Aa.remove=function(){return this.each(F)},Aa.data=function(n,t){function e(n,e){var r,u,i,a=n.length,f=e.length,h=Math.min(a,f),g=new Array(f),p=new Array(f),v=new Array(a);if(t){var d,m=new c,y=new Array(a);for(r=-1;++r<a;)(u=n[r])&&(m.has(d=t.call(u,u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d);for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=H(i),m.set(d,!0);for(r=-1;++r<a;)r in y&&m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=H(i);for(;f>r;++r)p[r]=H(e[r]);for(;a>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,o.push(p),l.push(g),s.push(v)}var r,u,i=-1,a=this.length;if(!arguments.length){for(n=new Array(a=(r=this[0]).length);++i<a;)(u=r[i])&&(n[i]=u.__data__);return n}var o=Z([]),l=E([]),s=E([]);if("function"==typeof n)for(;++i<a;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<a;)e(r=this[i],n);return l.enter=function(){return o},l.exit=function(){return s},l},Aa.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},Aa.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,a=this.length;a>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var o=0,l=e.length;l>o;o++)(r=e[o])&&n.call(r,r.__data__,o,i)&&t.push(r)}return E(u)},Aa.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},Aa.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},Aa.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},Aa.call=function(n){var t=ca(arguments);return n.apply(t[0]=this,t),this},Aa.empty=function(){return!this.node()},Aa.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},Aa.size=function(){var n=0;return Y(this,function(){++n}),n};var La=[];oa.selection.enter=Z,oa.selection.enter.prototype=La,La.append=Aa.append,La.empty=Aa.empty,La.node=Aa.node,La.call=Aa.call,La.size=Aa.size,La.select=function(n){for(var t,e,r,u,i,a=[],o=-1,l=this.length;++o<l;){r=(u=this[o]).update,a.push(t=[]),t.parentNode=u.parentNode;for(var c=-1,s=u.length;++c<s;)(i=u[c])?(t.push(r[c]=e=n.call(u.parentNode,i.__data__,c,o)),e.__data__=i.__data__):t.push(null)}return E(a)},La.insert=function(n,t){return arguments.length<2&&(t=V(this)),Aa.insert.call(this,n,t)},oa.select=function(t){var e;return"string"==typeof t?(e=[ka(t,sa)],e.parentNode=sa.documentElement):(e=[t],e.parentNode=n(t)),E([e])},oa.selectAll=function(n){var t;return"string"==typeof n?(t=ca(Na(n,sa)),t.parentNode=sa.documentElement):(t=ca(n),t.parentNode=null),E([t])},Aa.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var qa=oa.map({mouseenter:"mouseover",mouseleave:"mouseout"});sa&&qa.forEach(function(n){"on"+n in sa&&qa.remove(n)});var Ta,Ra=0;oa.mouse=function(n){return J(n,k())};var Da=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;oa.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return J(n,r)},oa.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function e(n,t,e,i,a){return function(){function o(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,M=r,g({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:n,dy:e}))}function l(){t(h,v)&&(m.on(i+d,null).on(a+d,null),y(p),g({type:"dragend"}))}var c,s=this,f=oa.event.target.correspondingElement||oa.event.target,h=s.parentNode,g=r.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=oa.select(e(f)).on(i+d,o).on(a+d,l),y=W(f),M=t(h,v);u?(c=u.apply(s,arguments),c=[c.x-M[0],c.y-M[1]]):c=[0,0],g({type:"dragstart"})}}var r=N(n,"drag","dragstart","dragend"),u=null,i=e(b,oa.mouse,t,"mousemove","mouseup"),a=e(G,oa.touch,y,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},oa.rebind(n,r,"on")},oa.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?ca(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Pa=1e-6,Ua=Pa*Pa,ja=Math.PI,Fa=2*ja,Ha=Fa-Pa,Oa=ja/2,Ia=ja/180,Ya=180/ja,Za=Math.SQRT2,Va=2,Xa=4;oa.interpolateZoom=function(n,t){var e,r,u=n[0],i=n[1],a=n[2],o=t[0],l=t[1],c=t[2],s=o-u,f=l-i,h=s*s+f*f;if(Ua>h)r=Math.log(c/a)/Za,e=function(n){return[u+n*s,i+n*f,a*Math.exp(Za*n*r)]};else{var g=Math.sqrt(h),p=(c*c-a*a+Xa*h)/(2*a*Va*g),v=(c*c-a*a-Xa*h)/(2*c*Va*g),d=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-d)/Za,e=function(n){var t=n*r,e=rn(d),o=a/(Va*g)*(e*un(Za*t+d)-en(d));return[u+o*s,i+o*f,a*e/rn(Za*t+d)]}}return e.duration=1e3*r,e},oa.behavior.zoom=function(){function n(n){n.on(L,f).on(Ba+".zoom",g).on("dblclick.zoom",p).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function u(n){k.k=Math.max(A[0],Math.min(A[1],n))}function i(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function a(t,e,r,a){t.__chart__={x:k.x,y:k.y,k:k.k},u(Math.pow(2,a)),i(d=e,r),t=oa.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function o(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function l(n){z++||n({type:"zoomstart"})}function c(n){o(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(n){--z||(n({type:"zoomend"}),d=null)}function f(){function n(){o=1,i(oa.mouse(u),h),c(a)}function r(){f.on(q,null).on(T,null),g(o),s(a)}var u=this,a=D.of(u,arguments),o=0,f=oa.select(t(u)).on(q,n).on(T,r),h=e(oa.mouse(u)),g=W(u);Il.call(u),l(a)}function h(){function n(){var n=oa.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=oa.event.target;oa.select(t).on(x,r).on(b,o),_.push(t);for(var e=oa.event.changedTouches,u=0,i=e.length;i>u;++u)d[e[u].identifier]=null;var l=n(),c=Date.now();if(1===l.length){if(500>c-M){var s=l[0];a(p,s,d[s.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=c}else if(l.length>1){var s=l[0],f=l[1],h=s[0]-f[0],g=s[1]-f[1];m=h*h+g*g}}function r(){var n,t,e,r,a=oa.touches(p);Il.call(p);for(var o=0,l=a.length;l>o;++o,r=null)if(e=a[o],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],u(f*g)}M=null,i(n,t),c(v)}function o(){if(oa.event.touches.length){for(var t=oa.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var u in d)return void n()}oa.selectAll(_).on(y,null),w.on(L,f).on(R,h),N(),s(v)}var g,p=this,v=D.of(p,arguments),d={},m=0,y=".zoom-"+oa.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,_=[],w=oa.select(p),N=W(p);t(),l(v),w.on(L,null).on(R,t)}function g(){var n=D.of(this,arguments);y?clearTimeout(y):(Il.call(this),v=e(d=m||oa.mouse(this)),l(n)),y=setTimeout(function(){y=null,s(n)},50),S(),u(Math.pow(2,.002*$a())*k.k),i(d,v),c(n)}function p(){var n=oa.mouse(this),t=Math.log(k.k)/Math.LN2;a(this,n,e(n),oa.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,m,y,M,x,b,_,w,k={x:0,y:0,k:1},E=[960,500],A=Wa,C=250,z=0,L="mousedown.zoom",q="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=N(n,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in sa?($a=function(){return-oa.event.deltaY*(oa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in sa?($a=function(){return oa.event.wheelDelta},"mousewheel"):($a=function(){return-oa.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Hl?oa.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(n)}).tween("zoom:zoom",function(){var e=E[0],r=E[1],u=d?d[0]:e/2,i=d?d[1]:r/2,a=oa.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=a(t),o=e/r[2];this.__chart__=k={x:u-r[0]*o,y:i-r[1]*o,k:o},c(n)}}).each("interrupt.zoom",function(){s(n)}).each("end.zoom",function(){s(n)}):(this.__chart__=k,l(n),c(n),s(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},o(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:null},u(+t),o(),n):k.k},n.scaleExtent=function(t){return arguments.length?(A=null==t?Wa:[+t[0],+t[1]],n):A},n.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],n):m},n.size=function(t){return arguments.length?(E=t&&[+t[0],+t[1]],n):E},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},oa.rebind(n,D,"on")};var $a,Ba,Wa=[0,1/0];oa.color=on,on.prototype.toString=function(){return this.rgb()+""},oa.hsl=ln;var Ja=ln.prototype=new on;Ja.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,this.l/n)},Ja.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,n*this.l)},Ja.rgb=function(){return cn(this.h,this.s,this.l)},oa.hcl=sn;var Ga=sn.prototype=new on;Ga.brighter=function(n){return new sn(this.h,this.c,Math.min(100,this.l+Ka*(arguments.length?n:1)))},Ga.darker=function(n){return new sn(this.h,this.c,Math.max(0,this.l-Ka*(arguments.length?n:1)))},Ga.rgb=function(){return fn(this.h,this.c,this.l).rgb()},oa.lab=hn;var Ka=18,Qa=.95047,no=1,to=1.08883,eo=hn.prototype=new on;eo.brighter=function(n){return new hn(Math.min(100,this.l+Ka*(arguments.length?n:1)),this.a,this.b)},eo.darker=function(n){return new hn(Math.max(0,this.l-Ka*(arguments.length?n:1)),this.a,this.b)},eo.rgb=function(){return gn(this.l,this.a,this.b)},oa.rgb=yn;var ro=yn.prototype=new on;ro.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new yn(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new yn(u,u,u)},ro.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new yn(n*this.r,n*this.g,n*this.b)},ro.hsl=function(){return wn(this.r,this.g,this.b)},ro.toString=function(){return"#"+bn(this.r)+bn(this.g)+bn(this.b)};var uo=oa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});uo.forEach(function(n,t){uo.set(n,Mn(t))}),oa.functor=En,oa.xhr=An(y),oa.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var a=Cn(n,t,null==e?r:u(e),i);return a.row=function(n){return arguments.length?a.response(null==(e=n)?r:u(n)):e},a}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(a).join(n)}function a(n){return o.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var o=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=c)return a;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;c>s;){var r=n.charCodeAt(s++),o=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++o);else if(r!==l)continue;return n.slice(t,s-o)}return n.slice(t)}for(var r,u,i={},a={},o=[],c=n.length,s=0,f=0;(r=e())!==a;){for(var h=[];r!==i&&r!==a;)h.push(r),r=e();t&&null==(h=t(h,f++))||o.push(h)}return o},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new m,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(a).join(n)].concat(t.map(function(t){return u.map(function(n){return a(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},oa.csv=oa.dsv(",","text/csv"),oa.tsv=oa.dsv("	","text/tab-separated-values");var io,ao,oo,lo,co=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};oa.timer=function(){qn.apply(this,arguments)},oa.timer.flush=function(){Rn(),Dn()},oa.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var so=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Un);oa.formatPrefix=function(n,t){var e=0;return(n=+n)&&(0>n&&(n*=-1),t&&(n=oa.round(n,Pn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),so[8+e/3]};var fo=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ho=oa.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=oa.round(n,Pn(n,t))).toFixed(Math.max(0,Math.min(20,Pn(n*(1+1e-15),t))))}}),go=oa.time={},po=Date;Hn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){vo.setUTCDate.apply(this._,arguments)},setDay:function(){vo.setUTCDay.apply(this._,arguments)},setFullYear:function(){vo.setUTCFullYear.apply(this._,arguments)},setHours:function(){vo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){vo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){vo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){vo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){vo.setUTCSeconds.apply(this._,arguments)},setTime:function(){vo.setTime.apply(this._,arguments)}};var vo=Date.prototype;go.year=On(function(n){return n=go.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),go.years=go.year.range,go.years.utc=go.year.utc.range,go.day=On(function(n){var t=new po(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),go.days=go.day.range,go.days.utc=go.day.utc.range,go.dayOfYear=function(n){var t=go.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=go[n]=On(function(n){return(n=go.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=go.year(n).getDay();return Math.floor((go.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});go[n+"s"]=e.range,go[n+"s"].utc=e.utc.range,go[n+"OfYear"]=function(n){var e=go.year(n).getDay();return Math.floor((go.dayOfYear(n)+(e+t)%7)/7)}}),go.week=go.sunday,go.weeks=go.sunday.range,go.weeks.utc=go.sunday.utc.range,go.weekOfYear=go.sundayOfYear;var mo={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,Mo=/^%/;oa.locale=function(n){return{numberFormat:jn(n),timeFormat:Yn(n)}};var xo=oa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});oa.format=xo.numberFormat,oa.geo={},st.prototype={s:0,t:0,add:function(n){ft(n,this.t,bo),ft(bo.s,this.s,this),this.s?this.t+=bo.t:this.s=bo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bo=new st;oa.geo.stream=function(n,t){n&&_o.hasOwnProperty(n.type)?_o[n.type](n,t):ht(n,t)};var _o={Feature:function(n,t){ht(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)ht(e[r].geometry,t)}},wo={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){gt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)gt(e[r],t,0)},Polygon:function(n,t){pt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)pt(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)ht(e[r],t)}};oa.geo.area=function(n){return So=0,oa.geo.stream(n,No),So};var So,ko=new st,No={sphere:function(){So+=4*ja},point:b,lineStart:b,lineEnd:b,polygonStart:function(){ko.reset(),No.lineStart=vt},polygonEnd:function(){var n=2*ko;So+=0>n?4*ja+n:n,No.lineStart=No.lineEnd=No.point=b}};oa.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=dt([t*Ia,e*Ia]);if(m){var u=yt(m,r),i=[u[1],-u[0],0],a=yt(i,u);bt(a),a=_t(a);var l=t-p,c=l>0?1:-1,v=a[0]*Ya*c,d=Ma(l)>180;if(d^(v>c*p&&c*t>v)){var y=a[1]*Ya;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>c*p&&c*t>v)){var y=-a[1]*Ya;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?o(s,t)>o(s,h)&&(h=t):o(t,h)>o(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?o(s,t)>o(s,h)&&(h=t):o(t,h)>o(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=Ma(r)>180?r+(r>0?360:-360):r}else v=n,d=e;No.point(n,e),t(n,e)}function i(){No.lineStart()}function a(){u(v,d),No.lineEnd(),Ma(y)>Pa&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function o(n,t){return(t-=n)<0?t+360:t}function l(n,t){return n[0]-t[0]}function c(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=a,y=0,No.polygonStart()},polygonEnd:function(){No.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>ko?(s=-(h=180),f=-(g=90)):y>Pa?g=90:-Pa>y&&(f=-90),x[0]=s,x[1]=h}};return function(n){g=h=-(s=f=1/0),M=[],oa.geo.stream(n,b);var t=M.length;if(t){M.sort(l);for(var e,r=1,u=M[0],i=[u];t>r;++r)e=M[r],c(e[0],u)||c(e[1],u)?(o(u[0],e[1])>o(u[0],u[1])&&(u[1]=e[1]),o(e[0],u[1])>o(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var a,e,p=-(1/0),t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(a=o(u[1],e[0]))>p&&(p=a,s=e[0],h=u[1])}return M=x=null,s===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[s,f],[h,g]]}}(),oa.geo.centroid=function(n){Eo=Ao=Co=zo=Lo=qo=To=Ro=Do=Po=Uo=0,oa.geo.stream(n,jo);var t=Do,e=Po,r=Uo,u=t*t+e*e+r*r;return Ua>u&&(t=qo,e=To,r=Ro,Pa>Ao&&(t=Co,e=zo,r=Lo),u=t*t+e*e+r*r,Ua>u)?[NaN,NaN]:[Math.atan2(e,t)*Ya,tn(r/Math.sqrt(u))*Ya]};var Eo,Ao,Co,zo,Lo,qo,To,Ro,Do,Po,Uo,jo={sphere:b,point:St,lineStart:Nt,lineEnd:Et,polygonStart:function(){jo.lineStart=At},polygonEnd:function(){jo.lineStart=Nt}},Fo=Rt(zt,jt,Ht,[-ja,-ja/2]),Ho=1e9;oa.geo.clipExtent=function(){var n,t,e,r,u,i,a={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(o){return arguments.length?(i=Zt(n=+o[0][0],t=+o[0][1],e=+o[1][0],r=+o[1][1]),u&&(u.valid=!1,u=null),a):[[n,t],[e,r]]}};return a.extent([[0,0],[960,500]])},(oa.geo.conicEqualArea=function(){return Vt(Xt)}).raw=Xt,oa.geo.albers=function(){return oa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},oa.geo.albersUsa=function(){function n(n){var i=n[0],a=n[1];return t=null,e(i,a),t||(r(i,a),t)||u(i,a),t}var t,e,r,u,i=oa.geo.albers(),a=oa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=oa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?a:u>=.166&&.234>u&&r>=-.214&&-.115>r?o:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=a.stream(n),r=o.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),o.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),o.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var c=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*c,f-.238*c],[s+.455*c,f+.238*c]]).stream(l).point,r=a.translate([s-.307*c,f+.201*c]).clipExtent([[s-.425*c+Pa,f+.12*c+Pa],[s-.214*c-Pa,f+.234*c-Pa]]).stream(l).point,u=o.translate([s-.205*c,f+.212*c]).clipExtent([[s-.214*c+Pa,f+.166*c+Pa],[s-.115*c-Pa,f+.234*c-Pa]]).stream(l).point,n},n.scale(1070)};var Oo,Io,Yo,Zo,Vo,Xo,$o={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Io=0,$o.lineStart=$t},polygonEnd:function(){$o.lineStart=$o.lineEnd=$o.point=b,Oo+=Ma(Io/2)}},Bo={point:Bt,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Wo={point:Gt,lineStart:Kt,lineEnd:Qt,polygonStart:function(){Wo.lineStart=ne},polygonEnd:function(){Wo.point=Gt,Wo.lineStart=Kt,Wo.lineEnd=Qt}};oa.geo.path=function(){function n(n){return n&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=u(i)),oa.geo.stream(n,a)),i.result()}function t(){return a=null,n}var e,r,u,i,a,o=4.5;return n.area=function(n){return Oo=0,oa.geo.stream(n,u($o)),Oo},n.centroid=function(n){return Co=zo=Lo=qo=To=Ro=Do=Po=Uo=0,oa.geo.stream(n,u(Wo)),Uo?[Do/Uo,Po/Uo]:Ro?[qo/Ro,To/Ro]:Lo?[Co/Lo,zo/Lo]:[NaN,NaN]},n.bounds=function(n){return Vo=Xo=-(Yo=Zo=1/0),oa.geo.stream(n,u(Bo)),[[Yo,Zo],[Vo,Xo]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||re(n):y,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new Wt:new te(n),"function"!=typeof o&&i.pointRadius(o),t()):r},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(oa.geo.albersUsa()).context(null)},oa.geo.transform=function(n){return{stream:function(t){var e=new ue(t);for(var r in n)e[r]=n[r];return e}}},ue.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},oa.geo.projection=ae,oa.geo.projectionMutator=oe,(oa.geo.equirectangular=function(){return ae(ce)}).raw=ce.invert=ce,oa.geo.rotation=function(n){function t(t){return t=n(t[0]*Ia,t[1]*Ia),t[0]*=Ya,t[1]*=Ya,t}return n=fe(n[0]%360*Ia,n[1]*Ia,n.length>2?n[2]*Ia:0),t.invert=function(t){return t=n.invert(t[0]*Ia,t[1]*Ia),t[0]*=Ya,t[1]*=Ya,t},t},se.invert=ce,oa.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=fe(-n[0]*Ia,-n[1]*Ia,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Ya,n[1]*=Ya}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=ve((t=+r)*Ia,u*Ia),n):t},n.precision=function(r){return arguments.length?(e=ve(t*Ia,(u=+r)*Ia),n):u},n.angle(90)},oa.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Ia,u=n[1]*Ia,i=t[1]*Ia,a=Math.sin(r),o=Math.cos(r),l=Math.sin(u),c=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*a)*e+(e=c*s-l*f*o)*e),l*s+c*f*o)},oa.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return oa.range(Math.ceil(i/d)*d,u,d).map(h).concat(oa.range(Math.ceil(c/m)*m,l,m).map(g)).concat(oa.range(Math.ceil(r/p)*p,e,p).filter(function(n){return Ma(n%d)>Pa}).map(s)).concat(oa.range(Math.ceil(o/v)*v,a,v).filter(function(n){return Ma(n%m)>Pa}).map(f))}var e,r,u,i,a,o,l,c,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(l).slice(1),h(u).reverse().slice(1),g(c).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],c=+t[0][1],l=+t[1][1],i>u&&(t=i,i=u,u=t),c>l&&(t=c,c=l,l=t),n.precision(y)):[[i,c],[u,l]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),o>a&&(t=o,o=a,a=t),n.precision(y)):[[r,o],[e,a]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=me(o,a,90),f=ye(r,e,y),h=me(c,l,90),g=ye(i,u,y),n):y},n.majorExtent([[-180,-90+Pa],[180,90-Pa]]).minorExtent([[-180,-80-Pa],[180,80+Pa]])},oa.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=Me,u=xe;return n.distance=function(){return oa.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},oa.geo.interpolate=function(n,t){return be(n[0]*Ia,n[1]*Ia,t[0]*Ia,t[1]*Ia)},oa.geo.length=function(n){return Jo=0,oa.geo.stream(n,Go),Jo};var Jo,Go={sphere:b,point:b,lineStart:_e,lineEnd:b,polygonStart:b,polygonEnd:b},Ko=we(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(oa.geo.azimuthalEqualArea=function(){return ae(Ko)}).raw=Ko;var Qo=we(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},y);(oa.geo.azimuthalEquidistant=function(){return ae(Qo)}).raw=Qo,(oa.geo.conicConformal=function(){return Vt(Se)}).raw=Se,(oa.geo.conicEquidistant=function(){return Vt(ke)}).raw=ke;var nl=we(function(n){return 1/n},Math.atan);(oa.geo.gnomonic=function(){return ae(nl)}).raw=nl,Ne.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Oa]},(oa.geo.mercator=function(){return Ee(Ne)}).raw=Ne;var tl=we(function(){return 1},Math.asin);(oa.geo.orthographic=function(){return ae(tl)}).raw=tl;var el=we(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(oa.geo.stereographic=function(){return ae(el)}).raw=el,Ae.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Oa]},(oa.geo.transverseMercator=function(){var n=Ee(Ae),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Ae,oa.geom={},oa.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=En(e),i=En(r),a=n.length,o=[],l=[];for(t=0;a>t;t++)o.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(o.sort(qe),t=0;a>t;t++)l.push([o[t][0],-o[t][1]]);var c=Le(o),s=Le(l),f=s[0]===c[0],h=s[s.length-1]===c[c.length-1],g=[];for(t=c.length-1;t>=0;--t)g.push(n[o[c[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[o[s[t]][2]]);return g}var e=Ce,r=ze;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},oa.geom.polygon=function(n){return Sa(n,rl),n};var rl=oa.geom.polygon.prototype=[];rl.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},rl.centroid=function(n){var t,e,r=-1,u=this.length,i=0,a=0,o=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=o,o=this[r],e=t[0]*o[1]-o[0]*t[1],i+=(t[0]+o[0])*e,a+=(t[1]+o[1])*e;return[i*n,a*n]},rl.clip=function(n){for(var t,e,r,u,i,a,o=De(n),l=-1,c=this.length-De(this),s=this[c-1];++l<c;){for(t=n.slice(),n.length=0,u=this[l],i=t[(r=t.length-o)-1],e=-1;++e<r;)a=t[e],Te(a,s,u)?(Te(i,s,u)||n.push(Re(i,a,s,u)),n.push(a)):Te(i,s,u)&&n.push(Re(i,a,s,u)),i=a;o&&n.push(n[0]),s=u}return n};var ul,il,al,ol,ll,cl=[],sl=[];Ye.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Ve),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=ar(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(ur(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ir(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ir(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ur(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,a=n.R;if(e=i?a?ar(a):i:a,u?u.L===n?u.L=e:u.R=e:this._=e,i&&a?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==a?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=a,a.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,ur(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ir(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,ur(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ir(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ur(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ir(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},oa.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=o[0][0],u=o[0][1],i=o[1][0],a=o[1][1];return or(e(n),o).cells.forEach(function(e,o){var l=e.edges,c=e.site,s=t[o]=l.length?l.map(function(n){var t=n.start();return[t.x,t.y]}):c.x>=r&&c.x<=i&&c.y>=u&&c.y<=a?[[r,a],[i,a],[i,u],[r,u]]:[];s.point=n[o]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Pa)*Pa,y:Math.round(a(n,t)/Pa)*Pa,i:t}})}var r=Ce,u=ze,i=r,a=u,o=fl;return n?t(n):(t.links=function(n){return or(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return or(e(n)).cells.forEach(function(e,r){for(var u,i,a=e.site,o=e.edges.sort(Ve),l=-1,c=o.length,s=o[c-1].edge,f=s.l===a?s.r:s.l;++l<c;)u=s,i=f,s=o[l].edge,f=s.l===a?s.r:s.l,r<i.i&&r<f.i&&cr(a,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=En(r=n),t):r},t.y=function(n){return arguments.length?(a=En(u=n),t):u},t.clipExtent=function(n){return arguments.length?(o=null==n?fl:n,t):o===fl?null:o},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):o===fl?null:o&&o[1]},t)};var fl=[[-1e6,-1e6],[1e6,1e6]];oa.geom.delaunay=function(n){return oa.geom.voronoi().triangles(n)},oa.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,a,o){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var l=n.x,s=n.y;if(null!=l)if(Ma(l-e)+Ma(s-r)<.01)c(n,t,e,r,u,i,a,o);else{var f=n.point;n.x=n.y=n.point=null,c(n,f,l,s,u,i,a,o),c(n,t,e,r,u,i,a,o)}else n.x=e,n.y=r,n.point=t}else c(n,t,e,r,u,i,a,o)}function c(n,t,e,r,u,a,o,l){var c=.5*(u+o),s=.5*(a+l),f=e>=c,h=r>=s,g=h<<1|f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=hr()),f?u=c:o=c,h?a=s:l=s,i(n,t,e,r,u,a,o,l)}var s,f,h,g,p,v,d,m,y,M=En(o),x=En(l);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,a)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var b=+M(s=n[g],g),_=+x(s,g);v>b&&(v=b),d>_&&(d=_),b>m&&(m=b),_>y&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=hr();if(k.add=function(n){i(k,n,+M(n,++g),+x(n,g),v,d,m,y)},k.visit=function(n){gr(n,k,v,d,m,y)},k.find=function(n){return pr(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var a,o=Ce,l=ze;return(a=arguments.length)?(o=sr,l=fr,3===a&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(o=n,i):o},i.y=function(n){return arguments.length?(l=n,i):l},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},oa.interpolateRgb=vr,oa.interpolateObject=dr,oa.interpolateNumber=mr,oa.interpolateString=yr;var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gl=new RegExp(hl.source,"g");oa.interpolate=Mr,oa.interpolators=[function(n,t){var e=typeof t;return("string"===e?uo.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?vr:yr:t instanceof on?vr:Array.isArray(t)?xr:"object"===e&&isNaN(t)?dr:mr)(n,t)}],oa.interpolateArray=xr;var pl=function(){return y},vl=oa.map({linear:pl,poly:Er,quad:function(){return Sr},cubic:function(){return kr},sin:function(){return Ar},exp:function(){return Cr},circle:function(){return zr},elastic:Lr,back:qr,bounce:function(){return Tr}}),dl=oa.map({"in":y,out:_r,"in-out":wr,"out-in":function(n){return wr(_r(n))}});oa.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=vl.get(e)||pl,r=dl.get(r)||y,br(r(e.apply(null,la.call(arguments,1))))},oa.interpolateHcl=Rr,oa.interpolateHsl=Dr,oa.interpolateLab=Pr,oa.interpolateRound=Ur,oa.transform=function(n){var t=sa.createElementNS(oa.ns.prefix.svg,"g");return(oa.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new jr(e?e.matrix:ml)})(n)},jr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ml={a:1,b:0,c:0,d:1,e:0,f:0};oa.interpolateTransform=$r,oa.layout={},oa.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Jr(n[e]));return t}},oa.layout.chord=function(){function n(){var n,c,f,h,g,p={},v=[],d=oa.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(c=0,g=-1;++g<i;)c+=u[h][g];v.push(c),m.push(oa.range(i)),n+=c}for(a&&d.sort(function(n,t){return a(v[n],v[t])}),o&&m.forEach(function(n,t){n.sort(function(n,e){return o(u[t][n],u[t][e])})}),n=(Fa-s*i)/n,c=0,h=-1;++h<i;){for(f=c,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=c,_=c+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:c,value:v[y]},c+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}l&&t()}function t(){e.sort(function(n,t){return l((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,a,o,l,c={},s=0;return c.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,c):u},c.padding=function(n){return arguments.length?(s=n,e=r=null,c):s},c.sortGroups=function(n){return arguments.length?(a=n,e=r=null,c):a},c.sortSubgroups=function(n){return arguments.length?(o=n,e=null,c):o},c.sortChords=function(n){return arguments.length?(l=n,e&&t(),c):l},c.chords=function(){return e||n(),e},c.groups=function(){return r||n(),r},c},oa.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,a=t.cy-n.y,o=u-e,l=i*i+a*a;if(l>o*o/m){if(v>l){var c=t.charge/l;n.px-=i*c,n.py-=a*c}return!0}if(t.point&&l&&v>l){var c=t.pointCharge/l;n.px-=i*c,n.py-=a*c}}return!t.charge}}function t(n){n.px=oa.event.x,n.py=oa.event.y,l.resume()}var e,r,u,i,a,o,l={},c=oa.dispatch("start","tick","end"),s=[1,1],f=.9,h=yl,g=Ml,p=-30,v=xl,d=.1,m=.64,M=[],x=[];return l.tick=function(){if((u*=.99)<.005)return e=null,c.end({type:"end",alpha:u=0}),!0;var t,r,l,h,g,v,m,y,b,_=M.length,w=x.length;for(r=0;w>r;++r)l=x[r],h=l.source,g=l.target,y=g.x-h.x,b=g.y-h.y,(v=y*y+b*b)&&(v=u*a[r]*((v=Math.sqrt(v))-i[r])/v,y*=v,b*=v,g.x-=y*(m=h.weight+g.weight?h.weight/(h.weight+g.weight):.5),g.y-=b*m,h.x+=y*(m=1-m),h.y+=b*m);if((m=u*d)&&(y=s[0]/2,b=s[1]/2,r=-1,m))for(;++r<_;)l=M[r],l.x+=(y-l.x)*m,l.y+=(b-l.y)*m;if(p)for(ru(t=oa.geom.quadtree(M),u,o),r=-1;++r<_;)(l=M[r]).fixed||t.visit(n(l));for(r=-1;++r<_;)l=M[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);c.tick({type:"tick",alpha:u})},l.nodes=function(n){return arguments.length?(M=n,l):M},l.links=function(n){return arguments.length?(x=n,l):x},l.size=function(n){return arguments.length?(s=n,l):s},l.linkDistance=function(n){return arguments.length?(h="function"==typeof n?n:+n,l):h},l.distance=l.linkDistance,l.linkStrength=function(n){return arguments.length?(g="function"==typeof n?n:+n,l):g},l.friction=function(n){return arguments.length?(f=+n,l):f},l.charge=function(n){return arguments.length?(p="function"==typeof n?n:+n,l):p},l.chargeDistance=function(n){return arguments.length?(v=n*n,l):Math.sqrt(v)},l.gravity=function(n){return arguments.length?(d=+n,l):d},l.theta=function(n){return arguments.length?(m=n*n,l):Math.sqrt(m)},l.alpha=function(n){return arguments.length?(n=+n,u?n>0?u=n:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:u=0})):n>0&&(c.start({type:"start",alpha:u=n}),e=qn(l.tick)),l):u},l.start=function(){function n(n,r){if(!e){for(e=new Array(u),l=0;u>l;++l)e[l]=[];for(l=0;c>l;++l){var i=x[l];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var a,o=e[t],l=-1,s=o.length;++l<s;)if(!isNaN(a=o[l][n]))return a;return Math.random()*r}var t,e,r,u=M.length,c=x.length,f=s[0],v=s[1];for(t=0;u>t;++t)(r=M[t]).index=t,r.weight=0;for(t=0;c>t;++t)r=x[t],"number"==typeof r.source&&(r.source=M[r.source]),"number"==typeof r.target&&(r.target=M[r.target]),++r.source.weight,++r.target.weight;for(t=0;u>t;++t)r=M[t],isNaN(r.x)&&(r.x=n("x",f)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof h)for(t=0;c>t;++t)i[t]=+h.call(this,x[t],t);else for(t=0;c>t;++t)i[t]=h;if(a=[],"function"==typeof g)for(t=0;c>t;++t)a[t]=+g.call(this,x[t],t);else for(t=0;c>t;++t)a[t]=g;if(o=[],"function"==typeof p)for(t=0;u>t;++t)o[t]=+p.call(this,M[t],t);else for(t=0;u>t;++t)o[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=oa.behavior.drag().origin(y).on("dragstart.force",Qr).on("drag.force",t).on("dragend.force",nu)),arguments.length?void this.on("mouseover.force",tu).on("mouseout.force",eu).call(r):r},oa.rebind(l,c,"on")};var yl=20,Ml=1,xl=1/0;oa.layout.hierarchy=function(){function n(u){var i,a=[u],o=[];for(u.depth=0;null!=(i=a.pop());)if(o.push(i),(c=e.call(n,i,i.depth))&&(l=c.length)){for(var l,c,s;--l>=0;)a.push(s=c[l]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=c}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return au(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),o}var t=cu,e=ou,r=lu;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(iu(t,function(n){n.children&&(n.value=0)}),au(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},oa.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(a=i.length)){var a,o,l,c=-1;for(r=t.value?r/t.value:0;++c<a;)n(o=i[c],e,l=o.value*r,u),e+=l}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var a=r.call(this,e,i);return n(a[0],0,u[0],u[1]/t(a[0])),a}var r=oa.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},uu(e,r)},oa.layout.pie=function(){function n(a){var o,l=a.length,c=a.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/l,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(0>f?-1:1),p=oa.sum(c),v=p?(f-l*g)/p:0,d=oa.range(l),m=[];return null!=e&&d.sort(e===bl?function(n,t){return c[t]-c[n]}:function(n,t){return e(a[n],a[t])}),d.forEach(function(n){m[n]={data:a[n],value:o=c[n],startAngle:s,endAngle:s+=o*v+g,padAngle:h}}),m}var t=Number,e=bl,r=0,u=Fa,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var bl={};oa.layout.stack=function(){function n(o,l){if(!(h=o.length))return o;var c=o.map(function(e,r){return t.call(n,e,r)}),s=c.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),a.call(n,t,e)]})}),f=e.call(n,s,l);c=oa.permute(c,f),s=oa.permute(s,f);var h,g,p,v,d=r.call(n,s,l),m=c[0].length;for(p=0;m>p;++p)for(u.call(n,c[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,c[g][p],v+=s[g-1][p][1],s[g][p][1]);return o}var t=y,e=pu,r=vu,u=gu,i=fu,a=hu;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:_l.get(t)||pu,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:wl.get(t)||vu,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(a=t,n):a},n.out=function(t){return arguments.length?(u=t,n):u},n};var _l=oa.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(du),i=n.map(mu),a=oa.range(r).sort(function(n,t){return u[n]-u[t]}),o=0,l=0,c=[],s=[];for(t=0;r>t;++t)e=a[t],l>o?(o+=i[e],c.push(e)):(l+=i[e],s.push(e));return s.reverse().concat(c)},reverse:function(n){return oa.range(n.length).reverse()},"default":pu}),wl=oa.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,a=[],o=0,l=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>o&&(o=r),a.push(r)}for(e=0;i>e;++e)l[e]=(o-a[e])/2;return l},wiggle:function(n){var t,e,r,u,i,a,o,l,c,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=l=c=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,o=f[e][0]-f[e-1][0];s>t;++t){for(r=0,a=(n[t][e][1]-n[t][e-1][1])/(2*o);t>r;++r)a+=(n[r][e][1]-n[r][e-1][1])/o;i+=a*n[t][e][1]}g[e]=l-=u?i/u*o:0,c>l&&(c=l)}for(e=0;h>e;++e)g[e]-=c;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,a=1/u,o=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=a}for(e=0;i>e;++e)o[e]=0;return o},zero:vu});oa.layout.histogram=function(){function n(n,i){for(var a,o,l=[],c=n.map(e,this),s=r.call(this,c,i),f=u.call(this,s,c,i),i=-1,h=c.length,g=f.length-1,p=t?1:1/h;++i<g;)a=l[i]=[],a.dx=f[i+1]-(a.x=f[i]),a.y=0;if(g>0)for(i=-1;++i<h;)o=c[i],o>=s[0]&&o<=s[1]&&(a=l[oa.bisect(f,o,1,g)-1],a.y+=p,a.push(n[i]));return l}var t=!0,e=Number,r=bu,u=Mu;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=En(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return xu(n,t)}:En(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},oa.layout.pack=function(){function n(n,i){var a=e.call(this,n,i),o=a[0],l=u[0],c=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(o.x=o.y=0,au(o,function(n){n.r=+s(n.value)}),au(o,Nu),r){var f=r*(t?1:Math.max(2*o.r/l,2*o.r/c))/2;au(o,function(n){n.r+=f}),au(o,Nu),au(o,function(n){n.r-=f})}return Cu(o,l/2,c/2,t?1:1/Math.max(2*o.r/l,2*o.r/c)),a}var t,e=oa.layout.hierarchy().sort(_u),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},uu(n,e)},oa.layout.tree=function(){function n(n,u){var s=a.call(this,n,u),f=s[0],h=t(f);if(au(h,e),h.parent.m=-h.z,iu(h,r),c)iu(f,i);else{var g=f,p=f,v=f;iu(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=o(g,p)/2-g.x,m=l[0]/(p.x+o(p,g)/2+d),y=l[1]/(v.depth||1);iu(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,a=0,o=i.length;o>a;++a)r.push((i[a]=u={_:i[a],parent:t,children:(u=i[a].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Du(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+o(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+o(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,a=t,l=u.parent.children[0],c=u.m,s=i.m,f=a.m,h=l.m;a=Tu(a),u=qu(u),a&&u;)l=qu(l),i=Tu(i),i.a=n,r=a.z+f-u.z-c+o(a._,u._),r>0&&(Ru(Pu(a,n,e),n,r),c+=r,s+=r),f+=a.m,c+=u.m,h+=l.m,s+=i.m;a&&!Tu(i)&&(i.t=a,i.m+=f-s),u&&!qu(l)&&(l.t=u,l.m+=c-h,e=n)}return e}function i(n){n.x*=l[0],n.y=n.depth*l[1]}var a=oa.layout.hierarchy().sort(null).value(null),o=Lu,l=[1,1],c=null;return n.separation=function(t){return arguments.length?(o=t,n):o},n.size=function(t){return arguments.length?(c=null==(l=t)?i:null,n):c?null:l},n.nodeSize=function(t){return arguments.length?(c=null==(l=t)?null:i,n):c?l:null},uu(n,a)},oa.layout.cluster=function(){function n(n,i){var a,o=t.call(this,n,i),l=o[0],c=0;au(l,function(n){var t=n.children;t&&t.length?(n.x=ju(t),n.y=Uu(t)):(n.x=a?c+=e(n,a):0,n.y=0,a=n)});var s=Fu(l),f=Hu(l),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return au(l,u?function(n){n.x=(n.x-l.x)*r[0],n.y=(l.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(l.y?n.y/l.y:1))*r[1]}),o}var t=oa.layout.hierarchy().sort(null).value(null),e=Lu,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},uu(n,t)},oa.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var a,o,l,c=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?c.dx:"dice"===g?c.dy:"slice-dice"===g?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(n(h,c.dx*c.dy/e.value),s.area=0;(l=h.length)>0;)s.push(a=h[l-1]),s.area+=a.area,"squarify"!==g||(o=r(s,v))<=p?(h.pop(),p=o):(s.area-=s.pop().area,u(s,v,c,!1),v=Math.min(c.dx,c.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,c,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,a=f(t),o=r.slice(),l=[];for(n(o,a.dx*a.dy/t.value),l.area=0;i=o.pop();)l.push(i),l.area+=i.area,null!=i.z&&(u(l,i.z?a.dx:a.dy,a,!o.length),l.length=l.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,a=-1,o=n.length;++a<o;)(e=n[a].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,a=n.length,o=e.x,c=e.y,s=t?l(n.area/t):0;
if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<a;)u=n[i],u.x=o,u.y=c,u.dy=s,o+=u.dx=Math.min(e.x+e.dx-o,s?l(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-o,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<a;)u=n[i],u.x=o,u.y=c,u.dx=s,c+=u.dy=Math.min(e.y+e.dy-c,s?l(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-c,e.x+=s,e.dx-=s}}function i(r){var u=a||o(r),i=u[0];return i.x=i.y=0,i.value?(i.dx=c[0],i.dy=c[1]):i.dx=i.dy=0,a&&o.revalue(i),n([i],i.dx*i.dy/i.value),(a?e:t)(i),h&&(a=u),u}var a,o=oa.layout.hierarchy(),l=Math.round,c=[1,1],s=null,f=Ou,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(n){return arguments.length?(c=n,i):c},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Ou(t):Iu(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Iu(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?Ou:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(l=n?Math.round:Number,i):l!=Number},i.sticky=function(n){return arguments.length?(h=n,a=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},uu(i,o)},oa.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=oa.random.normal.apply(oa,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=oa.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},oa.scale={};var Sl={floor:y,ceil:y};oa.scale.linear=function(){return Wu([0,1],[0,1],Mr,!1)};var kl={s:1,g:1,p:1,r:1,e:1};oa.scale.log=function(){return ri(oa.scale.linear().domain([0,1]),10,!0,[1,10])};var Nl=oa.format(".0e"),El={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};oa.scale.pow=function(){return ui(oa.scale.linear(),1,[0,1])},oa.scale.sqrt=function(){return oa.scale.pow().exponent(.5)},oa.scale.ordinal=function(){return ai([],{t:"range",a:[[]]})},oa.scale.category10=function(){return oa.scale.ordinal().range(Al)},oa.scale.category20=function(){return oa.scale.ordinal().range(Cl)},oa.scale.category20b=function(){return oa.scale.ordinal().range(zl)},oa.scale.category20c=function(){return oa.scale.ordinal().range(Ll)};var Al=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xn),Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xn),zl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xn),Ll=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xn);oa.scale.quantile=function(){return oi([],[])},oa.scale.quantize=function(){return li(0,1,[0,1])},oa.scale.threshold=function(){return ci([.5],[0,1])},oa.scale.identity=function(){return si([0,1])},oa.svg={},oa.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),s=a.apply(this,arguments)-Oa,f=o.apply(this,arguments)-Oa,h=Math.abs(f-s),g=s>f?0:1;if(n>c&&(p=c,c=n,n=p),h>=Ha)return t(c,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,N=0,E=0,A=[];if((m=(+l.apply(this,arguments)||0)/2)&&(d=i===ql?Math.sqrt(n*n+c*c):+i.apply(this,arguments),g||(E*=-1),c&&(E=tn(d/c*Math.sin(m))),n&&(N=tn(d/n*Math.sin(m)))),c){y=c*Math.cos(s+E),M=c*Math.sin(s+E),x=c*Math.cos(f-E),b=c*Math.sin(f-E);var C=Math.abs(f-s-2*E)<=ja?0:1;if(E&&mi(y,M,x,b)===g^C){var z=(s+f)/2;y=c*Math.cos(z),M=c*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-N),w=n*Math.sin(f-N),S=n*Math.cos(s+N),k=n*Math.sin(s+N);var L=Math.abs(s-f+2*N)<=ja?0:1;if(N&&mi(_,w,S,k)===1-g^L){var q=(s+f)/2;_=n*Math.cos(q),w=n*Math.sin(q),S=k=null}}else _=w=0;if(h>Pa&&(p=Math.min(Math.abs(c-n)/2,+u.apply(this,arguments)))>.001){v=c>n^g?0:1;var T=p,R=p;if(ja>h){var D=null==S?[_,w]:null==x?[y,M]:Re([y,M],[S,k],[x,b],[_,w]),P=y-D[0],U=M-D[1],j=x-D[0],F=b-D[1],H=1/Math.sin(Math.acos((P*j+U*F)/(Math.sqrt(P*P+U*U)*Math.sqrt(j*j+F*F)))/2),O=Math.sqrt(D[0]*D[0]+D[1]*D[1]);R=Math.min(p,(n-O)/(H-1)),T=Math.min(p,(c-O)/(H+1))}if(null!=x){var I=yi(null==S?[_,w]:[S,k],[y,M],c,T,g),Y=yi([x,b],[_,w],c,T,g);p===T?A.push("M",I[0],"A",T,",",T," 0 0,",v," ",I[1],"A",c,",",c," 0 ",1-g^mi(I[1][0],I[1][1],Y[1][0],Y[1][1]),",",g," ",Y[1],"A",T,",",T," 0 0,",v," ",Y[0]):A.push("M",I[0],"A",T,",",T," 0 1,",v," ",Y[0])}else A.push("M",y,",",M);if(null!=S){var Z=yi([y,M],[S,k],n,-R,g),V=yi([_,w],null==x?[y,M]:[x,b],n,-R,g);p===R?A.push("L",V[0],"A",R,",",R," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^mi(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",R,",",R," 0 0,",v," ",Z[0]):A.push("L",V[0],"A",R,",",R," 0 0,",v," ",Z[0])}else A.push("L",_,",",w)}else A.push("M",y,",",M),null!=x&&A.push("A",c,",",c," 0 ",C,",",g," ",x,",",b),A.push("L",_,",",w),null!=S&&A.push("A",n,",",n," 0 ",L,",",1-g," ",S,",",k);return A.push("Z"),A.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=hi,r=gi,u=fi,i=ql,a=pi,o=vi,l=di;return n.innerRadius=function(t){return arguments.length?(e=En(t),n):e},n.outerRadius=function(t){return arguments.length?(r=En(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=En(t),n):u},n.padRadius=function(t){return arguments.length?(i=t==ql?ql:En(t),n):i},n.startAngle=function(t){return arguments.length?(a=En(t),n):a},n.endAngle=function(t){return arguments.length?(o=En(t),n):o},n.padAngle=function(t){return arguments.length?(l=En(t),n):l},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-Oa;return[Math.cos(t)*n,Math.sin(t)*n]},n};var ql="auto";oa.svg.line=function(){return Mi(y)};var Tl=oa.map({linear:xi,"linear-closed":bi,step:_i,"step-before":wi,"step-after":Si,basis:zi,"basis-open":Li,"basis-closed":qi,bundle:Ti,cardinal:Ei,"cardinal-open":ki,"cardinal-closed":Ni,monotone:Fi});Tl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Rl=[0,2/3,1/3,0],Dl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];oa.svg.line.radial=function(){var n=Mi(Hi);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},wi.reverse=Si,Si.reverse=wi,oa.svg.area=function(){return Oi(y)},oa.svg.area.radial=function(){var n=Oi(Hi);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},oa.svg.chord=function(){function n(n,o){var l=t(this,i,n,o),c=t(this,a,n,o);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,c)?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=o.call(n,u,r),a=l.call(n,u,r)-Oa,s=c.call(n,u,r)-Oa;return{r:i,a0:a,a1:s,p0:[i*Math.cos(a),i*Math.sin(a)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>ja)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=Me,a=xe,o=Ii,l=pi,c=vi;return n.radius=function(t){return arguments.length?(o=En(t),n):o},n.source=function(t){return arguments.length?(i=En(t),n):i},n.target=function(t){return arguments.length?(a=En(t),n):a},n.startAngle=function(t){return arguments.length?(l=En(t),n):l},n.endAngle=function(t){return arguments.length?(c=En(t),n):c},n},oa.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),a=e.call(this,n,u),o=(i.y+a.y)/2,l=[i,{x:i.x,y:o},{x:a.x,y:o},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Me,e=xe,r=Yi;return n.source=function(e){return arguments.length?(t=En(e),n):t},n.target=function(t){return arguments.length?(e=En(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},oa.svg.diagonal.radial=function(){var n=oa.svg.diagonal(),t=Yi,e=n.projection;return n.projection=function(n){return arguments.length?e(Zi(t=n)):t},n},oa.svg.symbol=function(){function n(n,r){return(Ul.get(t.call(this,n,r))||$i)(e.call(this,n,r))}var t=Xi,e=Vi;return n.type=function(e){return arguments.length?(t=En(e),n):t},n.size=function(t){return arguments.length?(e=En(t),n):e},n};var Ul=oa.map({circle:$i,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Fl)),e=t*Fl;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});oa.svg.symbolTypes=Ul.keys();var jl=Math.sqrt(3),Fl=Math.tan(30*Ia);Aa.transition=function(n){for(var t,e,r=Hl||++Zl,u=Ki(n),i=[],a=Ol||{time:Date.now(),ease:Nr,delay:0,duration:250},o=-1,l=this.length;++o<l;){i.push(t=[]);for(var c=this[o],s=-1,f=c.length;++s<f;)(e=c[s])&&Qi(e,s,u,r,a),t.push(e)}return Wi(i,u,r)},Aa.interrupt=function(n){return this.each(null==n?Il:Bi(Ki(n)))};var Hl,Ol,Il=Bi(Ki()),Yl=[],Zl=0;Yl.call=Aa.call,Yl.empty=Aa.empty,Yl.node=Aa.node,Yl.size=Aa.size,oa.transition=function(n,t){return n&&n.transition?Hl?n.transition(t):n:oa.selection().transition(n)},oa.transition.prototype=Yl,Yl.select=function(n){var t,e,r,u=this.id,i=this.namespace,a=[];n=A(n);for(var o=-1,l=this.length;++o<l;){a.push(t=[]);for(var c=this[o],s=-1,f=c.length;++s<f;)(r=c[s])&&(e=n.call(r,r.__data__,s,o))?("__data__"in r&&(e.__data__=r.__data__),Qi(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Wi(a,i,u)},Yl.selectAll=function(n){var t,e,r,u,i,a=this.id,o=this.namespace,l=[];n=C(n);for(var c=-1,s=this.length;++c<s;)for(var f=this[c],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[o][a],e=n.call(r,r.__data__,h,c),l.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&Qi(u,p,o,a,i),t.push(u)}return Wi(l,o,a)},Yl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,a=this.length;a>i;i++){u.push(t=[]);for(var e=this[i],o=0,l=e.length;l>o;o++)(r=e[o])&&n.call(r,r.__data__,o,i)&&t.push(r)}return Wi(u,this.namespace,this.id)},Yl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Yl.attr=function(n,t){function e(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(o);return e!==n&&(t=a(e,n),function(n){this.setAttribute(o,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(o.space,o.local);return e!==n&&(t=a(e,n),function(n){this.setAttributeNS(o.space,o.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var a="transform"==n?$r:Mr,o=oa.ns.qualify(n);return Ji(this,"attr."+n,t,o.local?i:u)},Yl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=oa.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Yl.style=function(n,e,r){function u(){this.style.removeProperty(n)}function i(e){return null==e?u:(e+="",function(){var u,i=t(this).getComputedStyle(this,null).getPropertyValue(n);return i!==e&&(u=Mr(i,e),function(t){this.style.setProperty(n,u(t),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof n){2>a&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Ji(this,"style."+n,e,i)},Yl.styleTween=function(n,e,r){function u(u,i){var a=e.call(this,u,i,t(this).getComputedStyle(this,null).getPropertyValue(n));return a&&function(t){this.style.setProperty(n,a(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,u)},Yl.text=function(n){return Ji(this,"text",n,Gi)},Yl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Yl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=oa.ease.apply(oa,arguments)),Y(this,function(r){r[e][t].ease=n}))},Yl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Yl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Yl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Ol,i=Hl;try{Hl=e,Y(this,function(t,u,i){Ol=t[r][e],n.call(t,t.__data__,u,i)})}finally{Ol=u,Hl=i}}else Y(this,function(u){var i=u[r][e];(i.event||(i.event=oa.dispatch("start","end","interrupt"))).on(n,t)});return this},Yl.transition=function(){for(var n,t,e,r,u=this.id,i=++Zl,a=this.namespace,o=[],l=0,c=this.length;c>l;l++){o.push(n=[]);for(var t=this[l],s=0,f=t.length;f>s;s++)(e=t[s])&&(r=e[a][u],Qi(e,s,a,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Wi(o,a,i)},oa.svg.axis=function(){function n(n){n.each(function(){var n,c=oa.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==l?f.ticks?f.ticks.apply(f,o):f.domain():l,g=null==t?f.tickFormat?f.tickFormat.apply(f,o):y:t,p=c.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Pa),d=oa.transition(p.exit()).style("opacity",Pa).remove(),m=oa.transition(p.order()).style("opacity",1),M=Math.max(u,0)+a,x=Zu(f),b=c.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),oa.transition(b));v.append("line"),v.append("text");var w,S,k,N,E=v.select("line"),A=m.select("line"),C=p.select("text").text(g),z=v.select("text"),L=m.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=na,w="x",k="y",S="x2",N="y2",C.attr("dy",0>q?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+q*i+"V0H"+x[1]+"V"+q*i)):(n=ta,w="y",k="x",S="y2",N="x2",C.attr("dy",".32em").style("text-anchor",0>q?"end":"start"),_.attr("d","M"+q*i+","+x[0]+"H0V"+x[1]+"H"+q*i)),E.attr(N,q*u),z.attr(k,q*M),A.attr(S,0).attr(N,q*u),L.attr(w,0).attr(k,q*M),f.rangeBand){var T=f,R=T.rangeBand()/2;s=f=function(n){return T(n)+R}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=oa.scale.linear(),r=Vl,u=6,i=6,a=3,o=[10],l=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Xl?t+"":Vl,n):r},n.ticks=function(){return arguments.length?(o=ca(arguments),n):o},n.tickValues=function(t){return arguments.length?(l=t,n):l},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(a=+t,n):a},n.tickSubdivide=function(){return arguments.length&&n},n};var Vl="bottom",Xl={top:1,right:1,bottom:1,left:1};oa.svg.brush=function(){function n(t){t.each(function(){var t=oa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),a=t.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=t.selectAll(".resize").data(v,y);o.exit().remove(),o.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return $l[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",n.empty()?"none":null);var l,f=oa.transition(t),h=oa.transition(a);c&&(l=Zu(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),s&&(l=Zu(s),h.attr("y",l[0]).attr("height",l[1]-l[0]),u(f)),e(f)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function u(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==oa.event.keyCode&&(C||(M=null,L[0]-=f[1],L[1]-=h[1],C=2),S())}function v(){32==oa.event.keyCode&&2==C&&(L[0]+=f[1],L[1]+=h[1],C=0,S())}function d(){var n=oa.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(oa.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),L[0]=f[+(n[0]<M[0])],L[1]=h[+(n[1]<M[1])]):M=null),E&&m(n,c,0)&&(r(k),t=!0),A&&m(n,s,1)&&(u(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function m(n,t,e){var r,u,i=Zu(t),l=i[0],c=i[1],s=L[e],v=e?h:f,d=v[1]-v[0];return C&&(l-=s,c-=d+s),r=(e?p:g)?Math.max(l,Math.min(c,n[e])):n[e],C?u=(r+=s)+d:(M&&(s=Math.max(l,Math.min(c,2*M[e]-r))),r>s?(u=r,r=s):u=s),v[0]!=r||v[1]!=u?(e?o=null:a=null,v[0]=r,v[1]=u,!0):void 0}function y(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),oa.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=oa.select(oa.event.target),w=l.of(b,arguments),k=oa.select(b),N=_.datum(),E=!/^(n|s)$/.test(N)&&c,A=!/^(e|w)$/.test(N)&&s,C=_.classed("extent"),z=W(b),L=oa.mouse(b),q=oa.select(t(b)).on("keydown.brush",i).on("keyup.brush",v);if(oa.event.changedTouches?q.on("touchmove.brush",d).on("touchend.brush",y):q.on("mousemove.brush",d).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)L[0]=f[0]-L[0],L[1]=h[0]-L[1];else if(N){var T=+/w$/.test(N),R=+/^n/.test(N);x=[f[1-T]-L[0],h[1-R]-L[1]],L[0]=f[T],L[1]=h[R]}else oa.event.altKey&&(M=L.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),oa.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var a,o,l=N(n,"brushstart","brush","brushend"),c=null,s=null,f=[0,0],h=[0,0],g=!0,p=!0,v=Bl[0];return n.event=function(n){n.each(function(){var n=l.of(this,arguments),t={x:f,y:h,i:a,j:o},e=this.__chart__||t;this.__chart__=t,Hl?oa.select(this).transition().each("start.brush",function(){a=e.i,o=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=xr(f,t.x),r=xr(h,t.y);return a=o=null,function(u){f=t.x=e(u),h=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,v=Bl[!c<<1|!s],n):c},n.y=function(t){return arguments.length?(s=t,v=Bl[!c<<1|!s],n):s},n.clamp=function(t){return arguments.length?(c&&s?(g=!!t[0],p=!!t[1]):c?g=!!t:s&&(p=!!t),n):c&&s?[g,p]:c?g:s?p:null},n.extent=function(t){var e,r,u,i,l;return arguments.length?(c&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),a=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(l=e,e=r,r=l),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(u=t[0],i=t[1],c&&(u=u[1],i=i[1]),o=[u,i],s.invert&&(u=s(u),i=s(i)),u>i&&(l=u,u=i,i=l),(u!=h[0]||i!=h[1])&&(h=[u,i])),n):(c&&(a?(e=a[0],r=a[1]):(e=f[0],r=f[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(l=e,e=r,r=l))),s&&(o?(u=o[0],i=o[1]):(u=h[0],i=h[1],s.invert&&(u=s.invert(u),i=s.invert(i)),u>i&&(l=u,u=i,i=l))),c&&s?[[e,u],[r,i]]:c?[e,r]:s&&[u,i])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],a=o=null),n},n.empty=function(){return!!c&&f[0]==f[1]||!!s&&h[0]==h[1]},oa.rebind(n,l,"on")};var $l={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wl=go.format=xo.timeFormat,Jl=Wl.utc,Gl=Jl("%Y-%m-%dT%H:%M:%S.%LZ");Wl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ea:Gl,ea.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},ea.toString=Gl.toString,go.second=On(function(n){return new po(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),go.seconds=go.second.range,go.seconds.utc=go.second.utc.range,go.minute=On(function(n){return new po(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),go.minutes=go.minute.range,go.minutes.utc=go.minute.utc.range,go.hour=On(function(n){var t=n.getTimezoneOffset()/60;return new po(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),go.hours=go.hour.range,go.hours.utc=go.hour.utc.range,go.month=On(function(n){return n=go.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),go.months=go.month.range,go.months.utc=go.month.utc.range;var Kl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ql=[[go.second,1],[go.second,5],[go.second,15],[go.second,30],[go.minute,1],[go.minute,5],[go.minute,15],[go.minute,30],[go.hour,1],[go.hour,3],[go.hour,6],[go.hour,12],[go.day,1],[go.day,2],[go.week,1],[go.month,1],[go.month,3],[go.year,1]],nc=Wl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",zt]]),tc={range:function(n,t,e){return oa.range(Math.ceil(n/e)*e,+t,e).map(ua)},floor:y,ceil:y};Ql.year=go.year,go.scale=function(){return ra(oa.scale.linear(),Ql,nc)};var ec=Ql.map(function(n){return[n[0].utc,n[1]]}),rc=Jl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",zt]]);ec.year=go.year.utc,go.scale.utc=function(){return ra(oa.scale.linear(),ec,rc)},oa.text=An(function(n){return n.responseText}),oa.json=function(n,t){return Cn(n,"application/json",ia,t)},oa.html=function(n,t){return Cn(n,"text/html",aa,t)},oa.xml=An(function(n){return n.responseXML}),"function"==typeof define&&define.amd?(this.d3=oa,define(oa)):"object"==typeof module&&module.exports?module.exports=oa:this.d3=oa}();
/*! @flowjs/flow.js 2.13.1 */
!function(a,b,c){"use strict";function d(b){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/Chrome/.test(a.navigator.userAgent)||/Firefox/.test(a.navigator.userAgent)||/Edge/.test(a.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,413,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:f},this.opts={},this.events={};var c=this;this.onDrop=function(a){c.opts.onDropStopPropagation&&a.stopPropagation(),a.preventDefault();var b=a.dataTransfer;b.items&&b.items[0]&&b.items[0].webkitGetAsEntry?c.webkitReadDataTransfer(a):c.addFiles(b.files,a)},this.preventEvent=function(a){a.preventDefault()},this.opts=d.extend({},this.defaults,b||{})}}function e(a,b,d){this.flowObj=a,this.bytes=null,this.file=b,this.name=b.fileName||b.name,this.size=b.size,this.relativePath=b.relativePath||b.webkitRelativePath||this.name,this.uniqueIdentifier=d===c?a.generateUniqueIdentifier(b):d,this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function f(a,b,c,d,e){var f="slice";a.file.slice?f="slice":a.file.mozSlice?f="mozSlice":a.file.webkitSlice&&(f="webkitSlice"),e.readFinished(a.file[f](b,c,d))}function g(a,b,c){this.flowObj=a,this.fileObj=b,this.offset=c,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=this.flowObj.opts.chunkSize,this.startByte=this.offset*this.chunkSize,this.computeEndByte=function(){var a=Math.min(this.fileObj.size,(this.offset+1)*this.chunkSize);return this.fileObj.size-a<this.chunkSize&&!this.flowObj.opts.forceChunkSize&&(a=this.fileObj.size),a},this.endByte=this.computeEndByte(),this.xhr=null;var d=this;this.event=function(a,b){b=Array.prototype.slice.call(arguments),b.unshift(d),d.fileObj.chunkEvent.apply(d.fileObj,b)},this.progressHandler=function(a){a.lengthComputable&&(d.loaded=a.loaded,d.total=a.total),d.event("progress",a)},this.testHandler=function(a){var b=d.status(!0);"error"===b?(d.event(b,d.message()),d.flowObj.uploadNextChunk()):"success"===b?(d.tested=!0,d.event(b,d.message()),d.flowObj.uploadNextChunk()):d.fileObj.paused||(d.tested=!0,d.send())},this.doneHandler=function(a){var b=d.status();if("success"===b||"error"===b)delete this.data,d.event(b,d.message()),d.flowObj.uploadNextChunk();else{d.event("retry",d.message()),d.pendingRetry=!0,d.abort(),d.retries++;var c=d.flowObj.opts.chunkRetryInterval;null!==c?setTimeout(function(){d.send()},c):d.send()}}}function h(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)}function i(a,b){return"function"==typeof a&&(b=Array.prototype.slice.call(arguments),a=a.apply(null,b.slice(1))),a}function j(a,b){setTimeout(a.bind(b),0)}function k(a,b){return l(arguments,function(b){b!==a&&l(b,function(b,c){a[c]=b})}),a}function l(a,b,c){if(a){var d;if("undefined"!=typeof a.length){for(d=0;d<a.length;d++)if(b.call(c,a[d],d)===!1)return}else for(d in a)if(a.hasOwnProperty(d)&&b.call(c,a[d],d)===!1)return}}if(!a||!b)return void console.warn("Flowjs needs window and document objects to work");var m=a.navigator.msPointerEnabled;d.prototype={on:function(a,b){a=a.toLowerCase(),this.events.hasOwnProperty(a)||(this.events[a]=[]),this.events[a].push(b)},off:function(a,b){a!==c?(a=a.toLowerCase(),b!==c?this.events.hasOwnProperty(a)&&h(this.events[a],b):delete this.events[a]):this.events={}},fire:function(a,b){b=Array.prototype.slice.call(arguments),a=a.toLowerCase();var c=!1;return this.events.hasOwnProperty(a)&&l(this.events[a],function(a){c=a.apply(this,b.slice(1))===!1||c},this),"catchall"!=a&&(b.unshift("catchAll"),c=this.fire.apply(this,b)===!1||c),!c},webkitReadDataTransfer:function(a){function b(a){a.readEntries(function(f){f.length?(g+=f.length,l(f,function(a){if(a.isFile){var e=a.fullPath;a.file(function(a){c(a,e)},d)}else a.isDirectory&&b(a.createReader())}),b(a)):e()},d)}function c(a,b){a.relativePath=b.substring(1),h.push(a),e()}function d(a){throw a}function e(){0==--g&&f.addFiles(h,a)}var f=this,g=a.dataTransfer.items.length,h=[];l(a.dataTransfer.items,function(a){var d=a.webkitGetAsEntry();return d?void(d.isFile?c(a.getAsFile(),d.fullPath):b(d.createReader())):void e()})},generateUniqueIdentifier:function(a){var b=this.opts.generateUniqueIdentifier;if("function"==typeof b)return b(a);var c=a.relativePath||a.webkitRelativePath||a.fileName||a.name;return a.size+"-"+c.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(a){var b=!1;if(this.opts.prioritizeFirstAndLastChunk&&(l(this.files,function(a){return!a.paused&&a.chunks.length&&"pending"===a.chunks[0].status()?(a.chunks[0].send(),b=!0,!1):!a.paused&&a.chunks.length>1&&"pending"===a.chunks[a.chunks.length-1].status()?(a.chunks[a.chunks.length-1].send(),b=!0,!1):void 0}),b))return b;if(l(this.files,function(a){return a.paused||l(a.chunks,function(a){return"pending"===a.status()?(a.send(),b=!0,!1):void 0}),b?!1:void 0}),b)return!0;var c=!1;return l(this.files,function(a){return a.isComplete()?void 0:(c=!0,!1)}),c||a||j(function(){this.fire("complete")},this),!1},assignBrowse:function(a,c,d,e){a instanceof Element&&(a=[a]),l(a,function(a){var f;"INPUT"===a.tagName&&"file"===a.type?f=a:(f=b.createElement("input"),f.setAttribute("type","file"),k(f.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),a.appendChild(f),a.addEventListener("click",function(){f.click()},!1)),this.opts.singleFile||d||f.setAttribute("multiple","multiple"),c&&f.setAttribute("webkitdirectory","webkitdirectory"),l(e,function(a,b){f.setAttribute(b,a)});var g=this;f.addEventListener("change",function(a){a.target.value&&(g.addFiles(a.target.files,a),a.target.value="")},!1)},this)},assignDrop:function(a){"undefined"==typeof a.length&&(a=[a]),l(a,function(a){a.addEventListener("dragover",this.preventEvent,!1),a.addEventListener("dragenter",this.preventEvent,!1),a.addEventListener("drop",this.onDrop,!1)},this)},unAssignDrop:function(a){"undefined"==typeof a.length&&(a=[a]),l(a,function(a){a.removeEventListener("dragover",this.preventEvent),a.removeEventListener("dragenter",this.preventEvent),a.removeEventListener("drop",this.onDrop)},this)},isUploading:function(){var a=!1;return l(this.files,function(b){return b.isUploading()?(a=!0,!1):void 0}),a},_shouldUploadNext:function(){var a=0,b=!0,c=this.opts.simultaneousUploads;return l(this.files,function(d){l(d.chunks,function(d){return"uploading"===d.status()&&(a++,a>=c)?(b=!1,!1):void 0})}),b&&a},upload:function(){var a=this._shouldUploadNext();if(a!==!1){this.fire("uploadStart");for(var b=!1,c=1;c<=this.opts.simultaneousUploads-a;c++)b=this.uploadNextChunk(!0)||b;b||j(function(){this.fire("complete")},this)}},resume:function(){l(this.files,function(a){a.isComplete()||a.resume()})},pause:function(){l(this.files,function(a){a.pause()})},cancel:function(){for(var a=this.files.length-1;a>=0;a--)this.files[a].cancel()},progress:function(){var a=0,b=0;return l(this.files,function(c){a+=c.progress()*c.size,b+=c.size}),b>0?a/b:0},addFile:function(a,b){this.addFiles([a],b)},addFiles:function(a,b){var c=[];l(a,function(a){if((!m||m&&a.size>0)&&(a.size%4096!==0||"."!==a.name&&"."!==a.fileName)){var d=this.generateUniqueIdentifier(a);if(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(d)){var f=new e(this,a,d);this.fire("fileAdded",f,b)&&c.push(f)}}},this),this.fire("filesAdded",c,b)&&(l(c,function(a){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(a)},this),this.fire("filesSubmitted",c,b))},removeFile:function(a){for(var b=this.files.length-1;b>=0;b--)this.files[b]===a&&(this.files.splice(b,1),a.abort(),this.fire("fileRemoved",a))},getFromUniqueIdentifier:function(a){var b=!1;return l(this.files,function(c){c.uniqueIdentifier===a&&(b=c)}),b},getSize:function(){var a=0;return l(this.files,function(b){a+=b.size}),a},sizeUploaded:function(){var a=0;return l(this.files,function(b){a+=b.sizeUploaded()}),a},timeRemaining:function(){var a=0,b=0;return l(this.files,function(c){c.paused||c.error||(a+=c.size-c.sizeUploaded(),b+=c.averageSpeed)}),a&&!b?Number.POSITIVE_INFINITY:a||b?Math.floor(a/b):0}},e.prototype={measureSpeed:function(){var a=Date.now()-this._lastProgressCallback;if(a){var b=this.flowObj.opts.speedSmoothingFactor,c=this.sizeUploaded();this.currentSpeed=Math.max((c-this._prevUploadedSize)/a*1e3,0),this.averageSpeed=b*this.currentSpeed+(1-b)*this.averageSpeed,this._prevUploadedSize=c}},chunkEvent:function(a,b,c){switch(b){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this,a),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,c,a),this.flowObj.fire("error",c,this,a);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this,a),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,c,a));break;case"retry":this.flowObj.fire("fileRetry",this,a)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(a){this.currentSpeed=0,this.averageSpeed=0;var b=this.chunks;a&&(this.chunks=[]),l(b,function(a){"uploading"===a.status()&&(a.abort(),this.flowObj.uploadNextChunk())},this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){"function"==typeof this.flowObj.opts.initFileFn&&this.flowObj.opts.initFileFn(this),this.abort(!0),this.error=!1,this._prevProgress=0;for(var a=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,b=Math.max(a(this.size/this.flowObj.opts.chunkSize),1),c=0;b>c;c++)this.chunks.push(new g(this.flowObj,this,c))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var a=0;l(this.chunks,function(b){a+=b.progress()*(b.endByte-b.startByte)});var b=a/this.size;return this._prevProgress=Math.max(this._prevProgress,b>.9999?1:b),this._prevProgress},isUploading:function(){var a=!1;return l(this.chunks,function(b){return"uploading"===b.status()?(a=!0,!1):void 0}),a},isComplete:function(){var a=!1;return l(this.chunks,function(b){var c=b.status();return"pending"===c||"uploading"===c||"reading"===c||1===b.preprocessState||1===b.readState?(a=!0,!1):void 0}),!a},sizeUploaded:function(){var a=0;return l(this.chunks,function(b){a+=b.sizeUploaded()}),a},timeRemaining:function(){if(this.paused||this.error)return 0;var a=this.size-this.sizeUploaded();return a&&!this.averageSpeed?Number.POSITIVE_INFINITY:a||this.averageSpeed?Math.floor(a/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr((~-this.name.lastIndexOf(".")>>>0)+2).toLowerCase()}},g.prototype={getParams:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObj.size,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget:function(a,b){return a+=a.indexOf("?")<0?"?":"&",a+b.join("&")},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var a=i(this.flowObj.opts.testMethod,this.fileObj,this),b=this.prepareXhrRequest(a,!0);this.xhr.send(b)},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(a){this.readState=2,this.bytes=a,this.send()},send:function(){var a=this.flowObj.opts.preprocess,b=this.flowObj.opts.readFileFn;if("function"==typeof a)switch(this.preprocessState){case 0:return this.preprocessState=1,void a(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void b(this.fileObj,this.startByte,this.endByte,this.fileObj.file.type,this);case 1:return}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var c=i(this.flowObj.opts.uploadMethod,this.fileObj,this),d=this.prepareXhrRequest(c,!1,this.flowObj.opts.method,this.bytes);this.xhr.send(d)},abort:function(){var a=this.xhr;this.xhr=null,a&&a.abort()},status:function(a){return 1===this.readState?"reading":this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":this.flowObj.opts.successStatuses.indexOf(this.xhr.status)>-1?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||!a&&this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var a=this.status();return"success"===a||"error"===a?1:"pending"===a?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var a=this.endByte-this.startByte;return"success"!==this.status()&&(a=this.progress()*a),a},prepareXhrRequest:function(a,b,c,d){var e=i(this.flowObj.opts.query,this.fileObj,this,b);e=k(e||{},this.getParams());var f=i(this.flowObj.opts.target,this.fileObj,this,b),g=null;if("GET"===a||"octet"===c){var h=[];l(e,function(a,b){h.push([encodeURIComponent(b),encodeURIComponent(a)].join("="))}),f=this.getTarget(f,h),g=d||null}else g=new FormData,l(e,function(a,b){g.append(b,a)}),"undefined"!=typeof d&&g.append(this.flowObj.opts.fileParameterName,d,this.fileObj.file.name);return this.xhr.open(a,f,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,l(i(this.flowObj.opts.headers,this.fileObj,this,b),function(a,b){this.xhr.setRequestHeader(b,a)},this),g}},d.evalOpts=i,d.extend=k,d.each=l,d.FlowFile=e,d.FlowChunk=g,d.version="2.13.1","object"==typeof module&&module&&"object"==typeof module.exports?module.exports=d:(a.Flow=d,"function"==typeof define&&define.amd&&define("flow",[],function(){return d}))}("undefined"!=typeof window&&window,"undefined"!=typeof document&&document);
(function (Flow, window, document, undefined) {
  'use strict';

  var extend = Flow.extend;
  var each = Flow.each;

  function addEvent(element, type, handler) {
    if (element.addEventListener) {
      element.addEventListener(type, handler, false);
    } else if (element.attachEvent) {
      element.attachEvent("on" + type, handler);
    } else {
      element["on" + type] = handler;
    }
  }

  function removeEvent(element, type, handler) {
    if (element.removeEventListener) {
      element.removeEventListener(type, handler, false);
    } else if (element.detachEvent) {
      element.detachEvent("on" + type, handler);
    } else {
      element["on" + type] = null;
    }
  }

  function removeElement(element) {
    element.parentNode.removeChild(element);
  }

  function isFunction(functionToCheck) {
    var getType = {};
    return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';
  }

  /**
   * Not resumable file upload library, for IE7-IE9 browsers
   * @name FustyFlow
   * @param [opts]
   * @param {bool} [opts.singleFile]
   * @param {string} [opts.fileParameterName]
   * @param {Object|Function} [opts.query]
   * @param {Object} [opts.headers]
   * @param {string} [opts.target]
   * @param {Function} [opts.generateUniqueIdentifier]
   * @param {bool} [opts.matchJSON]
   * @constructor
   */
  function FustyFlow(opts) {
    // Shortcut of "r instanceof Flow"
    this.support = false;

    this.files = [];
    this.events = [];
    this.defaults = {
      simultaneousUploads: 3,
      fileParameterName: 'file',
      query: {},
      target: '/',
      generateUniqueIdentifier: null,
      matchJSON: false
    };

    var $ = this;

    this.inputChangeEvent = function (event) {
      var input = event.target || event.srcElement;
      removeEvent(input, 'change', $.inputChangeEvent);
      var newClone = input.cloneNode(false);
      // change current input with new one
      input.parentNode.replaceChild(newClone, input);
      // old input will be attached to hidden form
      $.addFile(input, event);
      // reset new input
      newClone.value = '';
      addEvent(newClone, 'change', $.inputChangeEvent);
    };

    this.opts = Flow.extend({}, this.defaults, opts || {});
  }

  FustyFlow.prototype = {
    on: Flow.prototype.on,
    off: Flow.prototype.off,
    fire: Flow.prototype.fire,
    cancel: Flow.prototype.cancel,
    assignBrowse: function (domNodes) {
      if (typeof domNodes.length == 'undefined') {
        domNodes = [domNodes];
      }
      each(domNodes, function (domNode) {
        var input;
        if (domNode.tagName === 'INPUT' && domNode.type === 'file') {
          input = domNode;
        } else {
          input = document.createElement('input');
          input.setAttribute('type', 'file');

          extend(domNode.style, {
            display: 'inline-block',
            position: 'relative',
            overflow: 'hidden',
            verticalAlign: 'top'
          });

          extend(input.style, {
            position: 'absolute',
            top: 0,
            right: 0,
            fontFamily: 'Arial',
            // 4 persons reported this, the max values that worked for them were 243, 236, 236, 118
            fontSize: '118px',
            margin: 0,
            padding: 0,
            opacity: 0,
            filter: 'alpha(opacity=0)',
            cursor: 'pointer'
          });

          domNode.appendChild(input);
        }
        // When new files are added, simply append them to the overall list
        addEvent(input, 'change', this.inputChangeEvent);
      }, this);
    },
    assignDrop: function () {
      // not supported
    },
    unAssignDrop: function () {
      // not supported
    },
    isUploading: function () {
      var uploading = false;
      each(this.files, function (file) {
        if (file.isUploading()) {
          uploading = true;
          return false;
        }
      });
      return uploading;
    },
    upload: function () {
      // Kick off the queue
      var files = 0;
      each(this.files, function (file) {
        if (file.progress() == 1 || file.isPaused()) {
          return;
        }
        if (file.isUploading()) {
          files++;
          return;
        }
        if (files++ >= this.opts.simultaneousUploads) {
          return false;
        }
        if (files == 1) {
          this.fire('uploadStart');
        }
        file.send();
      }, this);
      if (!files) {
        this.fire('complete');
      }
    },
    pause: function () {
      each(this.files, function (file) {
        file.pause();
      });
    },
    resume: function () {
      each(this.files, function (file) {
        file.resume();
      });
    },
    progress: function () {
      var totalDone = 0;
      var totalFiles = 0;
      each(this.files, function (file) {
        totalDone += file.progress();
        totalFiles++;
      });
      return totalFiles > 0 ? totalDone / totalFiles : 0;
    },
    addFiles: function (elementsList, event) {
      var files = [];
      each(elementsList, function (element) {
        // is domElement ?
        if (element.nodeType === 1 && element.value) {
          var f = new FustyFlowFile(this, element);
          if (this.fire('fileAdded', f, event)) {
            files.push(f);
          }
        }
      }, this);
      if (this.fire('filesAdded', files, event)) {
        each(files, function (file) {
          if (this.opts.singleFile && this.files.length > 0) {
            this.removeFile(this.files[0]);
          }
          this.files.push(file);
        }, this);
      }
      this.fire('filesSubmitted', files, event);
    },
    addFile: function (file, event) {
      this.addFiles([file], event);
    },
    generateUniqueIdentifier: function (element) {
      var custom = this.opts.generateUniqueIdentifier;
      if (typeof custom === 'function') {
        return custom(element);
      }
      return 'xxxxxxxx-xxxx-yxxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
      });
    },
    getFromUniqueIdentifier: function (uniqueIdentifier) {
      var ret = false;
      each(this.files, function (f) {
        if (f.uniqueIdentifier == uniqueIdentifier) ret = f;
      });
      return ret;
    },
    removeFile: function (file) {
      for (var i = this.files.length - 1; i >= 0; i--) {
        if (this.files[i] === file) {
          this.files.splice(i, 1);
        }
      }
    },
    getSize: function () {
      // undefined
    },
    timeRemaining: function () {
      // undefined
    },
    sizeUploaded: function () {
      // undefined
    }
  };

  function FustyFlowFile(flowObj, element) {
    this.flowObj = flowObj;
    this.element = element;
    this.name = element.value && element.value.replace(/.*(\/|\\)/, "");
    this.relativePath = this.name;
    this.uniqueIdentifier = flowObj.generateUniqueIdentifier(element);
    this.iFrame = null;

    this.finished = false;
    this.error = false;
    this.paused = false;

    var $ = this;
    this.iFrameLoaded = function (event) {
      // when we remove iframe from dom
      // the request stops, but in IE load
      // event fires
      if (!$.iFrame || !$.iFrame.parentNode) {
        return;
      }
      $.finished = true;
      try {
        // fixing Opera 10.53
        if ($.iFrame.contentDocument &&
          $.iFrame.contentDocument.body &&
          $.iFrame.contentDocument.body.innerHTML == "false") {
          // In Opera event is fired second time
          // when body.innerHTML changed from false
          // to server response approx. after 1 sec
          // when we upload file with iframe
          return;
        }
      } catch (error) {
        //IE may throw an "access is denied" error when attempting to access contentDocument
        $.error = true;
        $.abort();
        $.flowObj.fire('fileError', $, error);
        return;
      }
      // iframe.contentWindow.document - for IE<7
      var doc = $.iFrame.contentDocument || $.iFrame.contentWindow.document;
      var innerHtml = doc.body.innerHTML;
      if ($.flowObj.opts.matchJSON) {
        innerHtml = /(\{.*\})/.exec(innerHtml)[0];
      }

      $.abort();
      $.flowObj.fire('fileSuccess', $, innerHtml);
      $.flowObj.upload();
    };
    this.bootstrap();
  }

  FustyFlowFile.prototype = {
    getExtension: Flow.FlowFile.prototype.getExtension,
    getType: function () {
      // undefined
    },
    send: function () {
      if (this.finished) {
        return;
      }
      var o = this.flowObj.opts;
      var form = this.createForm();
      var params = o.query;
      if (isFunction(params)) {
        params = params(this);
      }
      params[o.fileParameterName] = this.element;
      params['flowFilename'] = this.name;
      params['flowRelativePath'] = this.relativePath;
      params['flowIdentifier'] = this.uniqueIdentifier;

      this.addFormParams(form, params);
      addEvent(this.iFrame, 'load', this.iFrameLoaded);
      form.submit();
      removeElement(form);
    },
    abort: function (noupload) {
      if (this.iFrame) {
        this.iFrame.setAttribute('src', 'java' + String.fromCharCode(115) + 'cript:false;');
        removeElement(this.iFrame);
        this.iFrame = null;
        !noupload && this.flowObj.upload();
      }
    },
    cancel: function () {
      this.flowObj.removeFile(this);
      this.abort();
    },
    retry: function () {
      this.bootstrap();
      this.flowObj.upload();
    },
    bootstrap: function () {
      this.abort(true);
      this.finished = false;
      this.error = false;
    },
    timeRemaining: function () {
      // undefined
    },
    sizeUploaded: function () {
      // undefined
    },
    resume: function () {
      this.paused = false;
      this.flowObj.upload();
    },
    pause: function () {
      this.paused = true;
      this.abort();
    },
    isUploading: function () {
      return this.iFrame !== null;
    },
    isPaused: function () {
      return this.paused;
    },
    isComplete: function () {
      return this.progress() === 1;
    },
    progress: function () {
      if (this.error) {
        return 1;
      }
      return this.finished ? 1 : 0;
    },

    createIframe: function () {
      var iFrame = (/MSIE (6|7|8)/).test(navigator.userAgent) ?
        document.createElement('<iframe name="' + this.uniqueIdentifier + '_iframe' + '">') :
        document.createElement('iframe');

      iFrame.setAttribute('id', this.uniqueIdentifier + '_iframe_id');
      iFrame.setAttribute('name', this.uniqueIdentifier + '_iframe');
      iFrame.style.display = 'none';
      document.body.appendChild(iFrame);
      return iFrame;
    },
    createForm: function() {
      var target = this.flowObj.opts.target;
      if (typeof target === "function") {
        target = target.apply(null);
      }

      var form = document.createElement('form');
      form.encoding = "multipart/form-data";
      form.method = "POST";
      form.setAttribute('action', target);
      if (!this.iFrame) {
        this.iFrame = this.createIframe();
      }
      form.setAttribute('target', this.iFrame.name);
      form.style.display = 'none';
      document.body.appendChild(form);
      return form;
    },
    addFormParams: function(form, params) {
      var input;
      each(params, function (value, key) {
        if (value && value.nodeType === 1) {
          input = value;
        } else {
          input = document.createElement('input');
          input.setAttribute('value', value);
        }
        input.setAttribute('name', key);
        form.appendChild(input);
      });
    }
  };

  FustyFlow.FustyFlowFile = FustyFlowFile;

  if (typeof module !== 'undefined') {
    module.exports = FustyFlow;
  } else if (typeof define === "function" && define.amd) {
    // AMD/requirejs: Define the module
    define(function(){
      return FustyFlow;
    });
  } else {
    window.FustyFlow = FustyFlow;
  }
})(window.Flow, window, document);


(function (Flow, FustyFlow, window) {
  'use strict';

  var fustyFlowFactory = function (opts) {
    var flow = new Flow(opts);
    if (flow.support) {
      return flow;
    }
    return new FustyFlow(opts);
  }

  window.fustyFlowFactory = fustyFlowFactory;

})(window.Flow, window.FustyFlow, window);

/*! @flowjs/ng-flow 2.7.8 */
angular.module("flow.provider",[]).provider("flowFactory",function(){"use strict";this.defaults={},this.factory=function(a){return new Flow(a)},this.events=[],this.on=function(a,b){this.events.push([a,b])},this.$get=function(){var a=this.factory,b=this.defaults,c=this.events;return{create:function(d){var e=a(angular.extend({},b,d));return angular.forEach(c,function(a){e.on(a[0],a[1])}),e}}}}),angular.module("flow.init",["flow.provider"]).controller("flowCtrl",["$scope","$attrs","$parse","flowFactory",function(a,b,c,d){var e=angular.extend({},a.$eval(b.flowInit)),f=a.$eval(b.flowObject)||d.create(e),g=function(b){var c=Array.prototype.slice.call(arguments);c.shift();var d=a.$broadcast.apply(a,["flow::"+b,f].concat(c));return{progress:1,filesSubmitted:1,fileSuccess:1,fileError:1,complete:1}[b]&&a.$applyAsync(),d.defaultPrevented?!1:void 0};f.on("catchAll",g),a.$on("$destroy",function(){f.off("catchAll",g)}),a.$flow=f,b.hasOwnProperty("flowName")&&(c(b.flowName).assign(a,f),a.$on("$destroy",function(){c(b.flowName).assign(a)}))}]).directive("flowInit",[function(){return{scope:!0,controller:"flowCtrl"}}]),angular.module("flow.btn",["flow.init"]).directive("flowBtn",[function(){return{restrict:"EA",scope:!1,require:"^flowInit",link:function(a,b,c){var d=c.hasOwnProperty("flowDirectory"),e=c.hasOwnProperty("flowSingleFile"),f=c.hasOwnProperty("flowAttrs")&&a.$eval(c.flowAttrs);a.$flow.assignBrowse(b,d,e,f)}}}]),angular.module("flow.dragEvents",["flow.init"]).directive("flowPreventDrop",function(){return{scope:!1,link:function(a,b,c){b.bind("drop dragover",function(a){a.preventDefault()})}}}).directive("flowDragEnter",["$timeout",function(a){return{scope:!1,link:function(b,c,d){function e(a){var b=!1,c=a.dataTransfer||a.originalEvent.dataTransfer;return angular.forEach(c&&c.types,function(a){"Files"===a&&(b=!0)}),b}var f,g=!1;c.bind("dragover",function(c){e(c)&&(g||(b.$apply(d.flowDragEnter),g=!0),a.cancel(f),c.preventDefault())}),c.bind("dragleave drop",function(c){a.cancel(f),f=a(function(){b.$eval(d.flowDragLeave),f=null,g=!1},100)})}}}]),angular.module("flow.drop",["flow.init"]).directive("flowDrop",function(){return{scope:!1,require:"^flowInit",link:function(a,b,c){function d(){a.$flow.assignDrop(b)}function e(){a.$flow.unAssignDrop(b)}c.flowDropEnabled?a.$watch(c.flowDropEnabled,function(a){a?d():e()}):d()}}}),!function(a){"use strict";function b(a){return a.charAt(0).toUpperCase()+a.slice(1)}var c=a.module("flow.events",["flow.init"]),d={fileSuccess:["$file","$message"],fileProgress:["$file"],fileAdded:["$file","$event"],filesAdded:["$files","$event"],filesSubmitted:["$files","$event"],fileRetry:["$file"],fileRemoved:["$file"],fileError:["$file","$message"],uploadStart:[],complete:[],progress:[],error:["$message","$file"]};a.forEach(d,function(d,e){var f="flow"+b(e);"flowUploadStart"==f&&(f="flowUploadStarted"),c.directive(f,[function(){return{require:"^flowInit",controller:["$scope","$attrs",function(b,c){b.$on("flow::"+e,function(){var e=Array.prototype.slice.call(arguments),g=e.shift();if(b.$flow===e.shift()){var h={};a.forEach(d,function(a,b){h[a]=e[b]}),b.$eval(c[f],h)===!1&&g.preventDefault()}})}]}}])})}(angular),angular.module("flow.img",["flow.init"]).directive("flowImg",[function(){return{scope:!1,require:"^flowInit",link:function(a,b,c){var d=c.flowImg;a.$watch(d,function(b){if(b){var d=new FileReader;d.readAsDataURL(b.file),d.onload=function(b){a.$apply(function(){c.$set("src",b.target.result)})}}})}}}]),angular.module("flow.transfers",["flow.init"]).directive("flowTransfers",[function(){return{scope:!0,require:"^flowInit",link:function(a){a.transfers=a.$flow.files}}}]),angular.module("flow",["flow.provider","flow.init","flow.events","flow.btn","flow.drop","flow.transfers","flow.img","flow.dragEvents"]);
'use strict';

var GLClient = angular.module('GLClient', [
    'angular.filter',
    'ngAria',
    'ngRoute',
    'ui.bootstrap',
    'flow',
    'pascalprecht.translate',
    'GLServices',
    'GLDirectives',
    'GLFilters'
  ]).
  config(['$compileProvider', '$httpProvider', '$routeProvider', '$rootScopeProvider', '$translateProvider', '$uibTooltipProvider',
    function($compileProvider, $httpProvider, $routeProvider, $rootScopeProvider, $translateProvider, $uibTooltipProvider) {
    $compileProvider.debugInfoEnabled(false);

    $httpProvider.interceptors.push('globaleaksRequestInterceptor');

    $routeProvider.
      when('/wizard', {
        templateUrl: 'views/wizard/main.html',
        controller: 'WizardCtrl',
        header_title: 'Platform wizard',
        header_subtitle: 'Step-by-step setup'
      }).
      when('/submission', {
        templateUrl: 'views/submission/main.html',
        controller: 'SubmissionCtrl',
        header_title: '',
        header_subtitle: ''
      }).
      when('/receipt', {
        templateUrl: 'views/receipt.html',
        controller: 'ReceiptController',
        header_title: '',
        header_subtitle: ''
      }).
      when('/status/:tip_id', {
        templateUrl: 'views/receiver/tip.html',
        controller: 'TipCtrl',
        header_title: '',
        header_subtitle: ''
      }).
      when('/tiplog', {
        templateUrl: 'views/receiver/tiplog.html',
        header_title: 'Registro della segnalazione',
        header_subtitle: 'Receiver Interface'
      }).
      when('/custodian', {
        templateUrl: 'views/receiver/custodian.html',
        header_title: 'Custode delle identità',
        header_subtitle: 'Richieste di consultazione'
      }).
      when('/status', {
        templateUrl: 'views/whistleblower/tip.html',
        controller: 'TipCtrl',
        header_title: '',
        header_subtitle: ''
      }).
      when('/forcedpasswordchange', {
        templateUrl: 'views/forced_password_change.html',
        controller: 'ForcedPasswordChangeCtrl',
        header_title: 'Change your password',
        header_subtitle: ''
      }).
      when('/receiver/preferences', {
        templateUrl: 'views/receiver/preferences.html',
        controller: 'PreferencesCtrl',
        header_title: 'Recipient interface',
        header_subtitle: 'Preferences'
      }).
      when('/receiver/tips', {
        templateUrl: 'views/receiver/tips.html',
        controller: 'ReceiverTipsCtrl',
        header_title: 'Recipient interface',
        header_subtitle: 'List of submissions'
      }).
      when('/receiver/dashboard', {
        templateUrl: 'views/receiver/dashboard.html',
        controller: 'ReceiverTipsCtrl',
        header_title: 'Recipient interface',
        header_subtitle: 'List of submissions'
      }).
      when('/admin/landing', {
        templateUrl: 'views/admin/landing.html',
        controller: 'AdminCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'Landing page'
      }).
      when('/admin/content', {
        templateUrl: 'views/admin/content.html',
        controller: 'AdminCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'General settings'
      }).
      when('/admin/contexts', {
        templateUrl: 'views/admin/contexts.html',
        controller: 'AdminCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'Context configuration'
      }).
      when('/admin/questionnaires', {
        templateUrl: 'views/admin/questionnaires.html',
        controller: 'AdminCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'Questionnaire configuration'
      }).
      when('/admin/users', {
        templateUrl: 'views/admin/users.html',
        controller: 'AdminCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'User management'
      }).
      when('/admin/receivers', {
        templateUrl: 'views/admin/receivers.html',
        controller: 'AdminCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'Recipient configuration'
      }).
      when('/admin/mail', {
        templateUrl: 'views/admin/mail.html',
        controller: 'AdminCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'Notification settings'
      }).
      when('/admin/url_shortener', {
        templateUrl: 'views/admin/url_shortener.html',
        controller: 'AdminCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'URL shortener'
      }).
      when('/admin/advanced_settings', {
        templateUrl: 'views/admin/advanced.html',
        controller: 'AdminCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'Advanced settings'
      }).
      when('/user/preferences', {
        templateUrl: 'views/user/preferences.html',
        controller: 'PreferencesCtrl',
        header_title: 'User preferences',
        header_subtitle: ''
      }).
      when('/admin/overview/users', {
        templateUrl: 'views/admin/users_overview.html',
        controller: 'OverviewCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'User overview'
      }).
      when('/admin/overview/tips', {
        templateUrl: 'views/admin/tips_overview.html',
        controller: 'OverviewCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'Submission overview'
      }).
      when('/admin/overview/files', {
        templateUrl: 'views/admin/files_overview.html',
        controller: 'OverviewCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'File overview'
      }).
      when('/admin/anomalies', {
        templateUrl: 'views/admin/anomalies.html',
        controller: 'AnomaliesCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'Anomalies'
      }).
      when('/admin/stats', {
        templateUrl: 'views/admin/stats.html',
        controller: 'StatisticsCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'System stats'
      }).
      when('/admin/activities', {
        templateUrl: 'views/admin/activities.html',
        controller: 'ActivitiesCtrl',
        header_title: 'Administration interface',
        header_subtitle: 'Recent activities'
      }).
      when('/admin', {
        templateUrl: 'views/login.html',
        controller: 'LoginCtrl',
        header_title: 'Login',
        header_subtitle: ''
      }).
      when('/custodian', {
        templateUrl: 'views/login.html',
        controller: 'LoginCtrl',
        header_title: 'Login',
        header_subtitle: ''
      }).
      when('/custodian/identityaccessrequests', {
        templateUrl: 'views/custodian/identity_access_requests.html',
        header_title: 'Custodian of the identities',
        header_subtitle: 'List of access requests to whistleblowers\' identities'
      }).
      when('/login', {
        templateUrl: 'views/login.html',
        controller: 'LoginCtrl',
        header_title: 'Login',
        header_subtitle: ''
      }).
      when('/autologin', {
        templateUrl: 'views/autologin.html',
        controller: 'AutoLoginCtrl',
        header_title: 'Login',
        header_subtitle: ''
      }).
      when('/', {
        templateUrl: 'views/home.html',
        controller: 'HomeCtrl',
        header_title: '',
        header_subtitle: ''
      }).
      otherwise({
        redirectTo: '/'
      });

      // Raise the default digest loop limit to 30 because of the template recursion used by fields:
      // https://github.com/angular/angular.js/issues/6440
      $rootScopeProvider.digestTtl(30);

      $translateProvider.useStaticFilesLoader({
        prefix: 'l10n/',
        suffix: '.json'
      });

      $translateProvider.useSanitizeValueStrategy('escape');

      $uibTooltipProvider.options({appendToBody: true});
}]).
  config(['flowFactoryProvider', function (flowFactoryProvider) {
    flowFactoryProvider.factory = fustyFlowFactory;
    flowFactoryProvider.defaults = {
        chunkSize: 1024 * 1024,
        forceChunkSize: true,
        testChunks: false,
        simultaneousUploads: 1,
        generateUniqueIdentifier: function (file) {
          return Math.random() * 1000000 + 1000000;
        }
    };
}]).
  factory("stacktraceService", function() {
    return({
      fromError: StackTrace.fromError
    });
}).
  factory('globaleaksRequestInterceptor', ['$rootScope', function($rootScope) {
    return {
     'request': function(config) {
       angular.extend(config.headers, $rootScope.get_auth_headers());
       return config;
     }
   }
}]).
  config(exceptionConfig);

exceptionConfig.$inject = ['$provide'];

function exceptionConfig($provide) {
    $provide.decorator('$exceptionHandler', extendExceptionHandler);
}

extendExceptionHandler.$inject = ['$delegate', '$injector', '$window', 'stacktraceService'];

function extendExceptionHandler($delegate, $injector, $window, stacktraceService) {
    return function(exception, cause) {

        var $rootScope = $injector.get('$rootScope');

        if ($rootScope.exceptions_count === undefined) {
          $rootScope.exceptions_count = 0;
        }

        $rootScope.exceptions_count += 1;

        if ($rootScope.exceptions_count >= 3) {
          // Give each client the ability to forward only the first 3 exceptions
          // scattered; this is also important to avoid looping exceptions to
          // cause looping POST requests.
          return;
        }

        $delegate(exception, cause);

        var errorMessage = exception.toString();
        stacktraceService.fromError(exception).then(function(result) {
          var errorData = angular.toJson({
            errorUrl: $window.location.href,
            errorMessage: errorMessage,
            stackTrace: result,
            agent: navigator.userAgent
          });

          var $http = $injector.get('$http');

          $http.post('exception', errorData);
        });
    };
}

"use strict";

angular.module('GLServices', ['ngResource']).
  factory('GLCache',['$cacheFactory', function ($cacheFactory) {
    return $cacheFactory('GLCache');
  }]).
  factory('GLResource', ['$resource', 'GLCache', function($resource, GLCache) {
    return function(url, params, actions) {
      var defaults = {
        get:    {method: 'get'},
        query:  {method: 'get', isArray:true},
        update: {method: 'put'}
      };

      actions = angular.extend(defaults, actions);

      return $resource(url, params, actions);
    };
  }]).
  factory('Authentication',
    ['$http', '$location', '$routeParams', '$rootScope', '$timeout', 'UserPreferences', 'ReceiverPreferences',
    function($http, $location, $routeParams, $rootScope, $timeout, UserPreferences, ReceiverPreferences) {
      function Session(){
        var self = this;

        $rootScope.login = function(username, password, cb) {
          $rootScope.loginInProgress = true;

          var success_fn = function(response) {
            self.session = {
              'id': response.data.session_id,
              'user_id': response.data.user_id,
              'username': username,
              'role': response.data.role,
              'state': response.data.state,
              'password_change_needed': response.data.password_change_needed,
              'homepage': '',
              'auth_landing_page': ''
            };

            if (self.session.role === 'admin') {
              self.session.homepage = '#!/admin/landing';
              self.session.auth_landing_page = '/admin/landing';
              self.session.preferencespage = '#!/user/preferences';
              $rootScope.preferences = UserPreferences.get();
            } else if (self.session.role === 'custodian') {
              self.session.homepage = '#!/custodian/identityaccessrequests';
              self.session.auth_landing_page = '/custodian/identityaccessrequests';
              self.session.preferencespage = '#!/user/preferences';
              $rootScope.preferences = UserPreferences.get();
            } else if (self.session.role === 'receiver') {
              self.session.homepage = '#!/receiver/dashboard';
              self.session.auth_landing_page = '/receiver/dashboard';
              self.session.preferencespage = '#!/receiver/preferences';
              $rootScope.preferences = ReceiverPreferences.get();
            } else if (self.session.role === 'whistleblower') {
              self.session.auth_landing_page = '/status';
            }

            // reset login state before returning
            $rootScope.loginInProgress = false;

            if (cb){
              return cb(response);
            }

            if ($routeParams.src) {
              $location.path($routeParams.src);
            } else {
              // Override the auth_landing_page if a password change is needed
              if (self.session.password_change_needed) {
                $location.path('/forcedpasswordchange');
              } else {
                $location.path(self.session.auth_landing_page);
              }
            }

            $location.search('');
          };

          if (username === 'whistleblower') {
            return $http.post('receiptauth', {'receipt': password}).
            then(success_fn).
            catch(function(response) {
              $rootScope.loginInProgress = false;
            });
          } else {
            return $http.post('authentication', {'username': username, 'password': password}).
            then(success_fn).
            catch(function(response) {
              $rootScope.loginInProgress = false;
            });
          }
        };

        self.getLoginUri = function (role, path) {
          var loginUri = "/login";
          if (role === undefined ) {
            if (path === '/status') {
              // If we are whistleblowers on the status page, redirect to homepage
              loginUri = '/';
            } else if (path.indexOf('/admin') === 0) {
              // If we are admins on the /admin(/*) pages, redirect to /admin
              loginUri = '/admin';
            } else if (path.indexOf('/custodian') === 0) {
              // If we are custodians on the /custodian(/*) pages, redirect to /custodian
              loginUri = '/custodian';
            }
          } else if (role === 'whistleblower') {
            loginUri = ('/');
          } else if (role === 'admin') {
            loginUri = '/admin';
          } else if (role === 'custodian') {
            loginUri = '/custodian';
          }

          return loginUri;
        };

        self.keycode = '';

        $rootScope.logout = function() {
          // we use $http['delete'] in place of $http.delete due to
          // the magical IE7/IE8 that do not allow delete as identifier
          // https://github.com/globaleaks/GlobaLeaks/issues/943
          if (self.session.role === 'whistleblower') {
            $http['delete']('receiptauth').then($rootScope.logoutPerformed,
                                                $rootScope.logoutPerformed);
          } else {
            $http['delete']('authentication').then($rootScope.logoutPerformed,
                                                   $rootScope.logoutPerformed);
          }
        };

        $rootScope.loginRedirect = function(sessionExpired) {
          var role = self.session === undefined ? undefined : self.session.role;

          self.session = undefined;

          var source_path = $location.path();

          var redirect_path = self.getLoginUri(role, source_path);

          // Only redirect if we are not already on the login page
          if (source_path !== redirect_path) {
            $location.path(redirect_path);
            if (sessionExpired) {
              $location.search('src=' + source_path);
            }
          }
        };

        $rootScope.logoutPerformed = function() {
          $rootScope.loginRedirect(false);
        };

        self.get_auth_headers = function() {
          var h = {};

          if (self.session) {
            h['X-Session'] = self.session.id;
          }

          if ($rootScope.language) {
            h['GL-Language'] = $rootScope.language;
          }

          return h;
        };

      }

      return new Session();
}]).
  factory('globalInterceptor', ['$q', '$injector', '$rootScope', '$location',
  function($q, $injector, $rootScope, $location) {
    var $http = null;

    /* This interceptor is responsible for keeping track of the HTTP requests
     * that are sent and their result (error or not error) */
    return {
      request: function(config) {
        // A new request should display the loader overlay
        $rootScope.showLoadingPanel = true;
        return config;
      },

      response: function(response) {
        $http = $http || $injector.get('$http');

        $rootScope.pendingRequests = function () {
          return $http.pendingRequests.length;
        };

        // the last response should hide the loader overlay
        if ($http.pendingRequests.length < 1) {
          $rootScope.showLoadingPanel = false;
        }

        return response;
      },

      responseError: function(response) {
        /*
           When the response has failed write the rootScope
           errors array the error message.
        */
        $http = $http || $injector.get('$http');

        if (response.data !== null) {
          var error = {
            'url': response.config.url,
            'message': response.data.error_message,
            'code': response.data.error_code,
            'arguments': response.data.arguments
          };

          /* 30: Not Authenticated / 24: Wrong Authentication */
          if (error.code === 30 || error.code === 24) {
            $rootScope.loginRedirect(error.code === 30);
          }

          $rootScope.errors.push(error);
        }

        if ($http.pendingRequests.length < 1) {
          $rootScope.showLoadingPanel = false;
        }

        return $q.reject(response);
      }
    };
}]).
  factory('Node', ['GLResource', function(GLResource) {
    return new GLResource('node');
}]).
  factory('Contexts', ['GLResource', function(GLResource) {
    return new GLResource('contexts');
}]).
  factory('Receivers', ['GLResource', function(GLResource) {
    return new GLResource('receivers');
}]).
  factory('TokenResource', ['GLResource', function(GLResource) {
    return new GLResource('token/:id', {id: '@id'});
}]).
  factory('SubmissionResource', ['GLResource', function(GLResource) {
    return new GLResource('submission/:id', {id: '@token_id'});
}]).
  // In here we have all the functions that have to do with performing
  // submission requests to the backend
  factory('Submission', ['$q', 'GLResource', '$filter', '$location', '$rootScope', 'Authentication', 'TokenResource', 'SubmissionResource',
      function($q, GLResource, $filter, $location, $rootScope, Authentication, TokenResource, SubmissionResource) {

    return function(fn) {
      /**
       * This factory returns a Submission object that will call the fn
       * callback once all the information necessary for creating a submission
       * has been collected.
       *
       * This means getting the node information, the list of receivers and the
       * list of contexts.
       */
      var self = this;

      self._submission = null;
      self.context = undefined;
      self.receivers = [];
      self.receivers_selected = {};
      self.done = false;

      self.isDisabled = function() {
        return (self.count_selected_receivers() === 0 ||
                self.wait ||
                !self.pow ||
                self.done);
      };

      self.count_selected_receivers = function () {
        var count = 0;

        angular.forEach(self.receivers_selected, function (selected) {
          if (selected) {
            count += 1;
          }
        });

        return count;
      };

      var setCurrentContextReceivers = function(context_id, receivers_ids) {
        self.context = angular.copy($filter('filter')($rootScope.contexts, {"id": context_id})[0]);

        self.receivers_selected = {};
        self.receivers = [];
        angular.forEach($rootScope.receivers, function(receiver) {
          if (self.context.receivers.indexOf(receiver.id) !== -1) {
            self.receivers.push(receiver);

            self.receivers_selected[receiver.id] = false;

            if (receivers_ids.length) {
              if (receivers_ids.indexOf(receiver.id) !== -1) {
                if ((receiver.pgp_key_status === 'enabled' || $rootScope.node.allow_unencrypted) ||
                    receiver.configuration !== 'unselectable') {
                  self.receivers_selected[receiver.id] = true;
                }
              }
            } else {
              if (receiver.pgp_key_status === 'enabled' || $rootScope.node.allow_unencrypted) {
                if (receiver.configuration === 'default') {
                  self.receivers_selected[receiver.id] = self.context.select_all_receivers;
                } else if (receiver.configuration === 'forcefully_selected') {
                  self.receivers_selected[receiver.id] = true;
                }
              }
            }
          }
        });

        // temporary fix for contitions in which receiver selection step is disabled but
        // select_all_receivers is marked false and the admin has forgotten to mark at least
        // one receiver to automtically selected nor the user is coming from a link with
        // explicit receivers selection.
        // in all this conditions we select all receivers for which submission is allowed.
        if (!self.context.allow_recipients_selection) {
          if (self.count_selected_receivers() === 0 && !self.context.select_all_receivers) {
            angular.forEach($rootScope.receivers, function(receiver) {
              if (self.context.receivers.indexOf(receiver.id) !== -1) {
                if (receiver.pgp_key_status === 'enabled' || $rootScope.node.allow_unencrypted) {
                  if (receiver.configuration !== 'unselectable') {
                    self.receivers_selected[receiver.id] = true;
                  }
                }
              }
            });
          }
        }
      };

      /**
       * @name Submission.create
       * @description
       * Create a new submission based on the currently selected context.
       *
       * */
      self.create = function(context_id, receivers_ids, cb) {
        setCurrentContextReceivers(context_id, receivers_ids);

        self._submission = new SubmissionResource({
          context_id: self.context.id,
          receivers: [],
          identity_provided: false,
          answers: {},
          human_captcha_answer: 0,
          proof_of_work_answer: 0,
          graph_captcha_answer: "",
          total_score: 0
        });

        self._token = new TokenResource({'type': 'submission'}).$save(function(token) {
          self._token = token;
          self._submission.token_id = self._token.id;

          if (cb) {
            cb();
          }
        });
      };

      /**
       * @name Submission.submit
       * @description
       * Submit the currently configured submission.
       * This involves setting the receivers of the submission object to those
       * currently selected and setting up the submission fields entered by the
       * whistleblower.
       */
      self.submit = function() {
        if (!self._submission || !self.receivers_selected) {
          return;
        }

        self.done = true;

        self._submission.receivers = [];
        angular.forEach(self.receivers_selected, function(selected, id){
          if (selected) {
            self._submission.receivers.push(id);
          }
        });

        self._submission.$update(function(result){
          if (result) {
            Authentication.keycode = self._submission.receipt;
            $location.url("/receipt");
          }
        });

      };

      fn(self);
    };
}]).
  factory('RTipResource', ['GLResource', function(GLResource) {
    return new GLResource('rtip/:id', {id: '@id'});
}]).
  factory('RTipReceiverResource', ['GLResource', function(GLResource) {
    return new GLResource('rtip/:id/receivers', {id: '@id'});
}]).
  factory('RTipCommentResource', ['GLResource', function(GLResource) {
    return new GLResource('rtip/:id/comments', {id: '@id'});
}]).
factory('RTipStatusResource', ['GLResource', function(GLResource) {
  return new GLResource('rtip/:id/status', {id: '@id'});
}]).
  factory('RTipMessageResource', ['GLResource', function(GLResource) {
    return new GLResource('rtip/:id/messages', {id: '@id'});
}]).
  factory('RTipIdentityAccessRequestResource', ['GLResource', function(GLResource) {
    return new GLResource('rtip/:id/identityaccessrequests', {id: '@id'});
}]).
  factory('RTip', ['$http', '$q', '$filter', 'RTipResource', 'RTipReceiverResource', 'RTipMessageResource', 'RTipCommentResource', 'RTipIdentityAccessRequestResource', 'RTipStatusResource',
          function($http, $q, $filter, RTipResource, RTipReceiverResource, RTipMessageResource, RTipCommentResource, RTipIdentityAccessRequestResource, RTipStatusResource) {
    return function(tipID, fn) {
      var self = this;

      self.tip = RTipResource.get(tipID, function (tip) {
        tip.receivers = RTipReceiverResource.query(tipID);
        tip.comments = tip.enable_comments ? RTipCommentResource.query(tipID) : [];
        tip.messages = tip.enable_messages ? RTipMessageResource.query(tipID) : [];
        tip.status = RTipStatusResource.query(tipID);
        tip.iars = tip.identity_provided ? RTipIdentityAccessRequestResource.query(tipID) : [];

        $q.all([tip.receivers.$promise, tip.comments.$promise, tip.messages.$promise, tip.iars.$promise, tip.status.$promise]).then(function() {
          tip.iars = $filter('orderBy')(tip.iars, 'request_date');
          tip.last_iar = tip.iars.length > 0 ? tip.iars[tip.iars.length - 1] : null;

          tip.newComment = function(content) {
            var c = new RTipCommentResource(tipID);
            c.content = content;
            c.$save(function(newComment) {
              tip.comments.unshift(newComment);
            });
          };

          tip.newMessage = function(content) {
            var m = new RTipMessageResource(tipID);
            m.content = content;
            m.$save(function(newMessage) {
              tip.messages.unshift(newMessage);
            });
          };

          tip.newStatus = function(content) {
            var c = new RTipStatusResource(tipID);
            c.content = content;
            c.$save(function(newStatus) {
              tip.status.unshift(newStatus);
            });
          };

          tip.setVar = function(var_name, var_value) {
            var req = {
              'operation': 'set',
              'args': {
                'key': var_name,
                'value': var_value
              }
            };

            return $http({method: 'PUT', url: '/rtip/' + tip.id, data: req}).then(function (response) {
              tip[var_name] = var_value;
            });

          };

          tip.updateLabel = function(label) {
            return tip.setVar('label', label);
          };

          if (fn) {
            fn(tip);
          }
        });
      });
    };
}]).
  factory('WBTipResource', ['GLResource', function(GLResource) {
    return new GLResource('wbtip');
}]).
  factory('WBTipReceiverResource', ['GLResource', function(GLResource) {
    return new GLResource('wbtip/receivers');
}]).
  factory('WBTipCommentResource', ['GLResource', function(GLResource) {
    return new GLResource('wbtip/comments');
}]).
  factory('WBTipMessageResource', ['GLResource', function(GLResource) {
    return new GLResource('wbtip/messages/:id', {id: '@id'});
}]).
  factory('WBTip', ['$q', '$rootScope', 'WBTipResource', 'WBTipReceiverResource', 'WBTipCommentResource', 'WBTipMessageResource',
      function($q, $rootScope, WBTipResource, WBTipReceiverResource, WBTipCommentResource, WBTipMessageResource) {
    return function(fn) {
      var self = this;

      self.tip = WBTipResource.get(function (tip) {
        tip.receivers = WBTipReceiverResource.query();
        tip.comments = tip.enable_comments ? WBTipCommentResource.query() : [];
        tip.messages = [];

        $q.all([tip.receivers.$promise, tip.comments.$promise]).then(function() {
          tip.msg_receiver_selected = null;
          tip.msg_receivers_selector = [];

          angular.forEach(tip.receivers, function(r1) {
            angular.forEach($rootScope.receivers, function(r2) {
              if (r2.id === r1.id) {
                tip.msg_receivers_selector.push({
                  key: r2.id,
                  value: r2.name
                });
              }
            });
          });

          tip.newComment = function(content) {
            var c = new WBTipCommentResource();
            c.content = content;
            c.$save(function(newComment) {
              tip.comments.unshift(newComment);
            });
          };

          tip.newMessage = function(content) {
            var m = new WBTipMessageResource({id: tip.msg_receiver_selected});
            m.content = content;
            m.$save(function(newMessage) {
              tip.messages.unshift(newMessage);
            });
          };

          tip.updateMessages = function () {
            if (tip.msg_receiver_selected) {
              WBTipMessageResource.query({id: tip.msg_receiver_selected}, function (messageCollection) {
                tip.messages = messageCollection;
              });
            }
          };

          if (fn) {
            fn(tip);
          }
        });
      });
    };
}]).
  factory('WhistleblowerTip', ['$rootScope', function($rootScope){
    return function(keycode, fn) {
      $rootScope.login('whistleblower', keycode).then(function() {
        fn();
      });
    };
}]).
  factory('ReceiverPreferences', ['GLResource', function(GLResource) {
    return new GLResource('receiver/preferences');
}]).
  factory('ReceiverTips', ['GLResource', function(GLResource) {
    return new GLResource('receiver/tips');
}]).
  factory('IdentityAccessRequests', ['GLResource', function(GLResource) {
    return new GLResource('custodian/identityaccessrequests');
}]).
  factory('ReceiverOverview', ['GLResource', function(GLResource) {
    return new GLResource('admin/overview/users');
}]).
  factory('AdminContextResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/contexts/:id', {id: '@id'});
}]).
  factory('AdminQuestionnaireResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/questionnaires/:id', {id: '@id'});
}]).
  factory('AdminStepResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/steps/:id', {id: '@id'});
}]).
  factory('AdminFieldResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/fields/:id',{id: '@id'});
}]).
  factory('AdminFieldTemplateResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/fieldtemplates/:id', {id: '@id'});
}]).
  factory('AdminShorturlResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/shorturls/:id', {id: '@id'});
}]).
  factory('AdminUserResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/users/:id', {id: '@id'});
}]).
  factory('AdminReceiverResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/receivers/:id', {id: '@id'});
}]).
  factory('AdminNodeResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/node');
}]).
  factory('AdminNotificationResource', ['GLResource', function(GLResource) {
    return new GLResource('admin/notification');
}]).
  factory('Admin', ['GLResource', '$q', 'AdminContextResource', 'AdminQuestionnaireResource', 'AdminStepResource', 'AdminFieldResource', 'AdminFieldTemplateResource', 'AdminUserResource', 'AdminReceiverResource', 'AdminNodeResource', 'AdminNotificationResource', 'AdminShorturlResource',
    function(GLResource, $q, AdminContextResource, AdminQuestionnaireResource, AdminStepResource, AdminFieldResource, AdminFieldTemplateResource, AdminUserResource, AdminReceiverResource, AdminNodeResource, AdminNotificationResource, AdminShorturlResource) {
  return function(fn) {
      var self = this;

      self.node = AdminNodeResource.get();
      self.contexts = AdminContextResource.query();
      self.questionnaires = AdminQuestionnaireResource.query();
      self.fieldtemplates = AdminFieldTemplateResource.query();
      self.users = AdminUserResource.query();
      self.receivers = AdminReceiverResource.query();
      self.notification = AdminNotificationResource.get();
      self.shorturls = AdminShorturlResource.query();

      $q.all([self.node.$promise,
              self.contexts.$promise,
              self.questionnaires.$promise,
              self.fieldtemplates.$promise,
              self.receivers.$promise,
              self.notification.$promise,
              self.shorturls.$promise]).then(function() {

        self.new_context = function() {
          var context = new AdminContextResource();
          context.id = '';
          context.name = '';
          context.description = '';
          context.presentation_order = 0;
          context.tip_timetolive = 15;
          context.show_context = true;
          context.show_recipients_details = false;
          context.allow_recipients_selection = false;
          context.show_receivers_in_alphabetical_order = true;
          context.select_all_receivers = false;
          context.maximum_selectable_receivers = 0;
          context.show_small_cards = false;
          context.enable_comments = true;
          context.enable_messages = false;
          context.enable_two_way_comments = true;
          context.enable_two_way_messages = true;
          context.enable_attachments = true;
          context.status_page_message = '';
          context.questionnaire_id = '';
          context.custodians = [];
          context.receivers = [];
          return context;
        };

        self.new_questionnaire = function() {
          var questionnaire = new AdminQuestionnaireResource();
          questionnaire.id = '';
          questionnaire.key = '';
          questionnaire.name = '';
          questionnaire.show_steps_navigation_bar = true;
          questionnaire.steps_navigation_requires_completion = true;
          questionnaire.layout = 'horizontal';
          questionnaire.steps = [];
          questionnaire.editable = true;
          return questionnaire;
        };

        self.new_step = function(questionnaire_id) {
          var step = new AdminStepResource();
          step.id = '';
          step.label = '';
          step.description = '';
          step.presentation_order = 0;
          step.children = [];
          step.questionnaire_id = questionnaire_id;
          step.triggered_by_score = 0;
          return step;
        };

        self.field_attrs = {
          "inputbox": {
            "min_len": {"type": "int", "value": "-1"},
            "max_len": {"type": "int", "value": "-1"},
            "regexp": {"type": "unicode", "value": ""}
          },
          "textarea": {
            "min_len": {"type": "int", "value": "-1"},
            "max_len": {"type": "int", "value": "-1"},
            "regexp": {"type": "unicode", "value": ""}
          },
          "multichoice": {
            "layout_orientation": {"type": "unicode", "value": "vertical"}
          },
          "checkbox": {
            "layout_orientation": {"type": "unicode", "value": "vertical"}
          },
          "tos": {
            "clause": {"type": "unicode", "value": ""},
            "agreement_statement": {"type": "unicode", "value": ""}
          }
        };

        self.get_field_attrs = function(type) {
          if (type in self.field_attrs) {
            return self.field_attrs[type];
          } else {
            return {};
          }
        };

        self.new_field = function(step_id, fieldgroup_id) {
          var field = new AdminFieldResource();
          field.id = '';
          field.key = '';
          field.instance = 'instance';
          field.editable = true;
          field.descriptor_id = '';
          field.label = '';
          field.type = 'inputbox';
          field.description = '';
          field.hint = '';
          field.multi_entry = false;
          field.multi_entry_hint = '';
          field.required = false;
          field.preview = false;
          field.stats_enabled = false;
          field.attrs = {};
          field.options = [];
          field.x = 0;
          field.y = 0;
          field.width = 0;
          field.children = [];
          field.fieldgroup_id = fieldgroup_id;
          field.step_id = step_id;
          field.template_id = '';
          field.triggered_by_score = 0;
          return field;
        };

        self.new_field_from_template = function(template_id, step_id, fieldgroup_id) {
          var field = self.new_field(step_id, fieldgroup_id);
          field.template_id = template_id;
          field.instance = 'reference';
          return field;
        };

        self.new_field_template = function (fieldgroup_id) {
          var field = new AdminFieldTemplateResource();
          field.id = '';
          field.key = '';
          field.instance = 'template';
          field.editable = true;
          field.label = '';
          field.type = 'inputbox';
          field.description = '';
          field.hint = '';
          field.multi_entry = false;
          field.multi_entry_hint = '';
          field.required = false;
          field.preview = false;
          field.stats_enabled = false;
          field.attrs = {};
          field.options = [];
          field.x = 0;
          field.y = 0;
          field.width = 0;
          field.children = [];
          field.fieldgroup_id = fieldgroup_id;
          field.step_id = '';
          field.template_id = '';
          field.triggered_by_score = 0;
          return field;
        };

        self.new_user = function () {
          var user = new AdminUserResource();
          user.id = '';
          user.username = '';
          user.role = 'receiver';
          user.state = 'enable';
          user.deletable = 'true';
          user.password = 'globaleaks';
          user.old_password = '';
          user.password_change_needed = true;
          user.state = 'enabled';
          user.name = '';
          user.description = '';
          user.mail_address = '';
          user.pgp_key_info = '';
          user.pgp_key_fingerprint = '';
          user.pgp_key_remove = false;
          user.pgp_key_public = '';
          user.pgp_key_expiration = '';
          user.pgp_key_status = 'ignored';
          user.language = 'en';
          user.timezone = 0;
          return user;
        };

        self.new_receiver = function () {
          var receiver = new AdminReceiverResource();
          receiver.id = '';
          receiver.username = '';
          receiver.role = 'receiver';
          receiver.state = 'enable';
          receiver.deletable = 'true';
          receiver.configuration = 'default';
          receiver.password = 'globaleaks';
          receiver.old_password = '';
          receiver.password_change_needed = true;
          receiver.state = 'enabled';
          receiver.contexts = [];
          receiver.name = '';
          receiver.description = '';
          receiver.mail_address = '';
          receiver.can_delete_submission = false;
          receiver.can_postpone_expiration = false;
          receiver.tip_notification = true;
          receiver.pgp_key_info = '';
          receiver.pgp_key_fingerprint = '';
          receiver.pgp_key_remove = false;
          receiver.pgp_key_public = '';
          receiver.pgp_key_expiration = '';
          receiver.pgp_key_status = 'ignored';
          receiver.presentation_order = 0;
          receiver.language = 'en';
          receiver.timezone = 0;
          return receiver;
        };

        self.new_shorturl = function () {
          return new AdminShorturlResource();
        };

        fn(this);

      });
    };
}]).
  factory('UserPreferences', ['GLResource', function(GLResource) {
    return new GLResource('preferences', {}, {'update': {method: 'PUT'}});
}]).
  factory('TipOverview', ['GLResource', function(GLResource) {
    return new GLResource('admin/overview/tips');
}]).
  factory('FileOverview', ['GLResource', function(GLResource) {
    return new GLResource('admin/overview/files');
}]).
  factory('StatsCollection', ['GLResource', function(GLResource) {
    return new GLResource('admin/stats/:week_delta', {week_delta: '@week_delta'}, {});
}]).
  factory('AnomaliesCollection', ['GLResource', function(GLResource) {
    return new GLResource('admin/anomalies');
}]).
  factory('ActivitiesCollection', ['GLResource', function(GLResource) {
    return new GLResource('admin/activities/details');
}]).
  factory('StaticFiles', ['GLResource', function(GLResource) {
    return new GLResource('admin/staticfiles');
}]).
  factory('DefaultAppdata', ['GLResource', function(GLResource) {
    return new GLResource('data/appdata_l10n.json', {});
}]).
  factory('passwordWatcher', ['$parse', function($parse) {
    return function(scope, password) {
      /** This is used to watch the new password and check that is
       *  effectively the same. Sets a local variable mismatch_password.
       *
       *  @param {obj} scope the scope under which we should register watchers
       *                     and insert the mismatch_password field.
       *  @param {string} old_password the old password model name.
       *  @param {string} password the new password model name.
       *  @param {string} check_password need to be equal to the new password.
       **/
      scope.mismatch_password = false;
      scope.unsafe_password = false;
      scope.pwdValidLength = true;
      scope.pwdHasLetter = true;
      scope.pwdHasNumber = true;

      var validatePasswordChange = function () {
        if (scope.$eval(password) !== undefined && scope.$eval(password) !== '') {
          scope.pwdValidLength = ( scope.$eval(password)).length >= 8;
          scope.pwdHasLetter = ( /[A-z]/.test(scope.$eval(password))) ? true : false;
          scope.pwdHasNumber = ( /\d/.test(scope.$eval(password))) ? true : false;
          scope.unsafe_password = !(scope.pwdValidLength && scope.pwdHasLetter && scope.pwdHasNumber);
        } else {
          /*
           * This values permits to not show errors when
           * the user has not yed typed any password.
           */
          scope.unsafe_password = false;
          scope.pwdValidLength = true;
          scope.pwdHasLetter = true;
          scope.pwdHasNumber = true;
        }
      };

      scope.$watch(password, function(){
          validatePasswordChange();
      }, true);

    };
}]).
  factory('changePasswordWatcher', ['$parse', function($parse) {
    return function(scope, old_password, password, check_password) {
      /** This is used to watch the new password and check that is
       *  effectively the same. Sets a local variable mismatch_password.
       *
       *  @param {obj} scope the scope under which we should register watchers
       *                     and insert the mismatch_password field.
       *  @param {string} old_password the old password model name.
       *  @param {string} password the new password model name.
       *  @param {string} check_password need to be equal to the new password.
       **/
      scope.invalid = true;

      scope.mismatch_password = false;
      scope.missing_old_password = false;
      scope.unsafe_password = false;

      scope.pwdValidLength = true;
      scope.pwdHasLetter = true;
      scope.pwdHasNumber = true;

      var validatePasswordChange = function () {
        if (scope.$eval(password) !== undefined && scope.$eval(password) !== '') {
          scope.pwdValidLength = (scope.$eval(password)).length >= 8;
          scope.pwdHasLetter = (/[A-z]/.test(scope.$eval(password))) ? true : false;
          scope.pwdHasNumber = ( /\d/.test(scope.$eval(password))) ? true : false;
          scope.unsafe_password = !(scope.pwdValidLength && scope.pwdHasLetter && scope.pwdHasNumber);
        } else {
          /*
           * This values permits to not show errors when
           * the user has not yed typed any password.
           */
          scope.unsafe_password = false;
          scope.pwdValidLength = true;
          scope.pwdHasLetter = true;
          scope.pwdHasNumber = true;
        }

        if (((scope.$eval(password) === undefined || scope.$eval(password) === '') &&
             (scope.$eval(check_password) === undefined || scope.$eval(check_password === ''))) ||
            (scope.$eval(password) === scope.$eval(check_password))) {
          scope.mismatch_password = false;
        } else {
          scope.mismatch_password = true;
        }

        if (scope.$eval(old_password) !== undefined && (scope.$eval(old_password)).length >= 1) {
          scope.missing_old_password = false;
        } else {
          scope.missing_old_password = true;
        }

        scope.invalid = scope.$eval(password) === undefined ||
          scope.$eval(password) === '' ||
          scope.mismatch_password ||
          scope.unsafe_password ||
          scope.missing_old_password;
      };

      scope.$watch(password, function(){
          validatePasswordChange();
      }, true);

      scope.$watch(old_password, function(){
          validatePasswordChange();
      }, true);

      scope.$watch(check_password, function(){
          validatePasswordChange();
      }, true);

    };
}]).
  factory('fieldsUtilities', ['$filter', function($filter) {
      var minY = function(arr) {
        return $filter('min')($filter('map')(arr, 'y'));
      };

      var splitRows = function(fields) {
        var rows = $filter('groupBy')(fields, 'y');
        rows = $filter('toArray')(rows);
        rows = $filter('orderBy')(rows, minY);
        return rows;
      };

      var prepare_field_answers_structure = function(field) {
        if (field.answers_structure === undefined) {
          field.answer_structure = {};
          if (field.type === 'fieldgroup') {
            angular.forEach(field.children, function(child) {
              field.answer_structure[child.id] = [prepare_field_answers_structure(child)];
            });
          }
        }
        return field.answer_structure;
      };

      return {
        minY: minY,
        splitRows: splitRows,
        prepare_field_answers_structure: prepare_field_answers_structure
      };
}]).
  constant('CONSTANTS', {
     /* The email regexp restricts email addresses to less than 400 chars. See #1215 */
     "email_regexp": /^(([\w+-\.]){0,100}[\w]{1,100}@([\w+-\.]){0,100}[\w]{1,100})$/,
     "https_regexp": /^(https:\/\/([a-z0-9-]+)\.(.*)$|^)$/,
     "http_or_https_regexp": /^(http(s?):\/\/([a-z0-9-]+)\.(.*)$|^)$/,
     "tor_regexp": /^http(s?):\/\/[0-9a-z]{16}\.onion$/,
     "shortener_shorturl_regexp": /^\/s\/[a-z0-9]{1,100}$/,
     "shortener_longurl_regexp": /^\/[a-z0-9_\-%?\[\]\'\"]{1,100}$/,
     "timezones": [
        {"timezone": -12.0, "label": "(GMT -12:00) Eniwetok, Kwajalein"},
        {"timezone": -11.0, "label": "(GMT -11:00) Midway Island, Samoa"},
        {"timezone": -10.0, "label": "(GMT -10:00) Hawaii"},
        {"timezone": -9.0, "label": "(GMT -9:00) Alaska"},
        {"timezone": -8.0, "label": "(GMT -8:00) Pacific Time (US &amp; Canada)"},
        {"timezone": -7.0, "label": "(GMT -7:00) Mountain Time (US &amp; Canada)"},
        {"timezone": -6.0, "label": "(GMT -6:00) Central Time (US &amp; Canada), Mexico City"},
        {"timezone": -5.0, "label": "(GMT -5:00) Eastern Time (US &amp; Canada), Bogota, Lima"},
        {"timezone": -4.0, "label": "(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz"},
        {"timezone": -3.5, "label": "(GMT -3:30) Newfoundland"},
        {"timezone": -3.0, "label": "(GMT -3:00) Brazil, Buenos Aires, Georgetown"},
        {"timezone": -2.0, "label": "(GMT -2:00) Mid-Atlantic"},
        {"timezone": -1.0, "label": "(GMT -1:00 hour) Azores, Cape Verde Islands"},
        {"timezone": 0.0, "label": "(GMT) Western Europe Time, London, Lisbon, Casablanca"},
        {"timezone": 1.0, "label": "(GMT +1:00 hour) Brussels, Copenhagen, Madrid, Paris"},
        {"timezone": 2.0, "label": "(GMT +2:00) Kaliningrad, South Africa"},
        {"timezone": 3.0, "label": "(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg"},
        {"timezone": 3.5, "label": "(GMT +3:30) Tehran"},
        {"timezone": 4.0, "label": "(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi"},
        {"timezone": 4.5, "label": "(GMT +4:30) Kabul"},
        {"timezone": 5.0, "label": "(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent"},
        {"timezone": 5.5, "label": "(GMT +5:30) Bombay, Calcutta, Madras, New Delhi"},
        {"timezone": 5.75, "label": "(GMT +5:45) Kathmandu"},
        {"timezone": 6.0, "label": "(GMT +6:00) Almaty, Dhaka, Colombo"},
        {"timezone": 7.0, "label": "(GMT +7:00) Bangkok, Hanoi, Jakarta"},
        {"timezone": 8.0, "label": "(GMT +8:00) Beijing, Perth, Singapore, Hong Kong"},
        {"timezone": 9.0, "label": "(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk"},
        {"timezone": 9.5, "label": "(GMT +9:30) Adelaide, Darwin"},
        {"timezone": 10.0, "label": "(GMT +10:00) Eastern Australia, Guam, Vladivostok"},
        {"timezone": 11.0, "label": "(GMT +11:00) Magadan, Solomon Islands, New Caledonia"},
        {"timezone": 12.0, "label": "(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka"}
     ]
}).
  config(['$httpProvider', function($httpProvider) {
    $httpProvider.interceptors.push('globalInterceptor');
}]);

"use strict";

angular.module('GLDirectives', []).
  directive('spinner', function(){
    return function(scope, element, attrs) {
      var opts = {
        lines: 13, // The number of lines to draw
        length: 20, // The length of each line
        width: 10, // The line thickness
        radius: 30, // The radius of the inner circle
        corners: 1, // Corner roundness (0..1)
        rotate: 0, // The rotation offset
        direction: 1, // 1: clockwise, -1: counterclockwise
        color: '#000', // #rgb or #rrggbb or array of colors
        speed: 1, // Rounds per second
        trail: 60, // Afterglow percentage
        shadow: false, // Whether to render a shadow
        hwaccel: false, // Whether to use hardware acceleration
        className: 'spinner', // The CSS class to assign to the spinner
        zIndex: 2e9, // The z-index (defaults to 2000000000)
        top: '50%', // Top position relative to parent in px
        left: '50%' // Left position relative to parent in px
      }, spinner = new Spinner(opts).spin(element[0]);
  };
}).
  directive('fadeout', function(){
    return function(scope, element, attrs) {
      var fadeout_delay = 3000;

      element.mouseenter(function() {
        element.stop().animate({opacity:'100'});
      });
      element.mouseleave(function() {
        element.fadeOut(fadeout_delay);
      });

      element.fadeOut(fadeout_delay);
    };
}).
  directive('inputPrefix', [function() {
    return {
      require: 'ngModel',
      link: function(scope, elem, attrs, controller) {
        function inputPrefix(value) {
          var prefix = attrs.prefix;

          var result = prefix;

          if (value.length >= prefix.length) {
            if (value.slice(0, prefix.length) != prefix) {
              result = prefix + value;
            } else {
              result = value;
            }
          }

          controller.$setViewValue(result);
          controller.$render();

          return result;
        }

        controller.$formatters.push(inputPrefix);
        controller.$parsers.push(inputPrefix);
      }
    };
}]).
  directive('keycodevalidator', [function() {
    return {
      require: 'ngModel',
      link: function(scope, elem, attrs, ngModel) {
        ngModel.$setValidity('keycodevalidator', false);
        ngModel.$parsers.unshift(function(viewValue) {
          var result = '';
          ngModel.$setValidity('keycodevalidator', false);
          viewValue = viewValue.replace(/\D/g,'');
          while (viewValue.length > 0) {
            result += viewValue.substring(0, 4);
            if(viewValue.length >= 4) {
              if (result.length < 19) {
                result += ' ';
              }
              viewValue = viewValue.substring(4);
            } else {
              break;
            }
          }
          angular.element(elem).val(result);
          if (result.length === 19) {
            ngModel.$setValidity('keycodevalidator', true);
          }
          return result;
        });
      }
    };
}]).
  directive('creditCard', ['$filter', function($filter){
    return {
      scope: {
        "creditCard": "&"
      },
      link: function(scope, elem, attrs) {
        var svgItem = angular.element(elem)[0];
        svgItem.addEventListener("load",function() {
          var creditcard = svgItem.contentDocument.getElementById('credit_card');
          var yourname = svgItem.contentDocument.getElementById('your_name');
          var ccnumber = svgItem.contentDocument.getElementById('cc_number');
          creditcard.innerHTML =  $filter('translate')('CREDIT CARD');
          yourname.innerHTML =  $filter('translate')('YOUR NAME');
          ccnumber.innerHTML = scope.creditCard();
        });
      }
    };
}]).
 directive("fileread", [function () {
   return {
     scope: {
       fileread: "="
     },
     link: function (scope, element, attributes) {
       element.bind('click', function(){
         element.val('');
       });

       element.bind("change", function (changeEvent) {
         var reader = new FileReader();
         reader.onload = function (e) {
           scope.$apply(function () {
             scope.fileread(e.target.result);
           });
         };
         reader.readAsText(changeEvent.target.files[0]);
       });
     }
   };
}]);

angular.module('GLFilters', [])
  .filter('range', function() {
    return function(val, range) {
      range = parseInt(range);
      for (var i=0; i<range; i++) {
        val.push(i);
      }
      return val;
    };
}).
  filter('trimTo', function() {
    return function (value, max, wordwise, tail) {
        if (!value) {
          return '';
        }

        max = parseInt(max, 10);
        if (!max) {
          return value;
        }

        if (value.length <= max) {
          return value;
        }

        value = value.substr(0, max);
        if (wordwise) {
            var lastspace = value.lastIndexOf(' ');
            if (lastspace !== -1) {
                value = value.substr(0, lastspace);
            }
        }

        return value + (tail || ' …');
    };
}).
  filter('prettyBytes', function() {
    return function (bytes) {
        var ret;

        if      (bytes>=1000000000) {ret='' + Math.floor(bytes/1000000000) + 'GB';}
        else if (bytes>=1000000)    {ret='' + Math.floor(bytes/1000000) + 'MB';}
        else                        {ret='' + Math.floor(bytes/1000) + 'KB';}

        return ret;
    };
}).
  filter('weekNumber', function() {
    return function (value) {
      var date = new Date(value);
      date.setHours(0, 0, 0, 0);
      // Thursday in current week decides the year.
      date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);
      // January 4 is always in week 1.
      var week1 = new Date(date.getFullYear(), 0, 4);
      // Adjust to Thursday in week 1 and count number of weeks from date to week1.
      return 1 + Math.round(((date.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);
    };
}).
  filter('newExpirationDate', [function() {
    return function(tip) {
        return new Date((new Date()).getTime() + tip.timetolive * 1000);
    };
}]);

GLClient.controller('MainCtrl', ['$q', '$scope', '$rootScope', '$http', '$route', '$routeParams', '$location',  '$filter', '$translate', '$uibModal', '$timeout', 'Authentication', 'Node', 'Contexts', 'Receivers', 'WhistleblowerTip', 'GLCache',
  function($q, $scope, $rootScope, $http, $route, $routeParams, $location, $filter, $translate, $uibModal, $timeout, Authentication, Node, Contexts, Receivers, WhistleblowerTip, GLCache) {
    $rootScope.started = false;
    $rootScope.showLoadingPanel = false;
    $rootScope.successes = [];
    $rootScope.errors = [];

    $scope.rtl = false;
    $scope.app_logo = 's/logo.png';
    $scope.app_stylesheet = 'css/styles.css';

    $rootScope.language = $location.search().lang;

    $rootScope.workflow = 1;

    $rootScope.increaseWorkflow = function() {
      $rootScope.workflow += 1;
    }

    $rootScope.decreaseWorkflow = function() {
      $rootScope.workflow -= 1;
    } 

    $rootScope.embedded = $location.search().embedded === 'true' ? true : false;

    $rootScope.get_auth_headers = Authentication.get_auth_headers;

    $scope.iframeCheck = function() {
      try {
        return window.self !== window.top;
      } catch (e) {
        return true;
      }
    };

    $scope.requireLegacyUploadSupport = function() {
      // Implement the same check implemented but not exported by flowjs
      // https://github.com/flowjs/flow.js/blob/master/src/flow.js#L42
      var support = (
          typeof File !== 'undefined' &&
          typeof Blob !== 'undefined' &&
          typeof FileList !== 'undefined' &&
          (
            !!Blob.prototype.slice || !!Blob.prototype.webkitSlice || !!Blob.prototype.mozSlice ||
            false
          ) // slicing files support
      );

      return !support;
    };

    $scope.browserNotCompatible = function() {
      document.getElementById("BrowserSupported").style.display = "none";
      document.getElementById("BrowserNotSupported").style.display = "block";
    };

    $scope.update = function (model, cb, errcb) {
      var success = {};
      model.$update(function(result) {
        $rootScope.successes.push(success);
      }).then(
        function() { if (cb !== undefined){ cb(); } },
        function() { if (errcb !== undefined){ errcb(); } }
      );
    };

    $scope.go = function (hash) {
      $location.path(hash);
    };

    $scope.randomFluff = function () {
      return Math.random() * 1000000 + 1000000;
    };

    $scope.isWizard = function () {
      var path = $location.path();
      return path === '/wizard';
    };

    $scope.isHomepage = function () {
      var path = $location.path();
      return path === '/';
    };

    $scope.isLoginPage = function () {
      var path = $location.path();
      return (path === '/login' ||
              path === '/admin' ||
              path === '/receipt');
    };

    $scope.isAWhistleblowerPage = function() {
      var path = $location.path();
      return (path === '/' ||
              path === '/start' ||
              path === '/submission' ||
              path === '/receipt' ||
              path === '/status');
    };

    $scope.showLoginForm = function () {
      return (!$scope.isHomepage() &&
              !$scope.isLoginPage());
    };

    $scope.showPrivacyBadge = function() {
      return (!$rootScope.embedded &&
              !$rootScope.node.disable_privacy_badge &&
              $scope.isAWhistleblowerPage());
    };

    $scope.hasSubtitle = function () {
      return $scope.header_subtitle !== '';
    };

    $scope.open_intro = function () {
      if ($scope.intro_opened) {
        return;
      } else {
        $scope.intro_opened = true;
      }

      var modalInstance = $uibModal.open({
        templateUrl: 'views/partials/intro.html',
        controller: 'IntroCtrl',
        size: 'lg',
        scope: $scope
      });

    };

    $scope.set_title = function () {
      if ($rootScope.node) {
        var path = $location.path();
        var statuspage = '/status';
        if (path === '/') {
          $scope.ht = $rootScope.node.header_title_homepage;
        } else if (path === '/submission') {
          $scope.ht = $rootScope.node.header_title_submissionpage;
        } else if (path === '/receipt') {
          if (Authentication.keycode) {
            $scope.ht = $rootScope.node.header_title_receiptpage;
          } else {
            $scope.ht = $filter('translate')("Login");
          }
        } else if (path.substr(0, statuspage.length) === statuspage) {
          $scope.ht = $rootScope.node.header_title_tippage;
        } else {
          $scope.ht = $filter('translate')($scope.header_title);
        }
      }
    };

    $scope.route_check = function () {
      if ($rootScope.node) {
        if ($rootScope.node.wizard_done === false) {
          $location.path('/wizard');
        }

        if (($location.path() === '/') && ($rootScope.node.landing_page === 'submissionpage')) {
          $location.path('/submission');
        }

        if ($location.path() === '/submission' &&
            $scope.anonymous === false &&
            $rootScope.node.tor2web_whistleblower === false) {
          $location.path("/");
        }

        /* Feature implemented for amnesty and currently disabled */
        //$scope.open_intro();
      }
    };

    $scope.show_file_preview = function(content_type) {
      var content_types = [
        'image/gif',
        'image/jpeg',
        'image/png',
        'image/bmp'
      ];

      return content_types.indexOf(content_type) > -1;
    };

    $scope.getXOrderProperty = function(elem) {
      return 'x';
    };

    $scope.getYOrderProperty = function(elem) {
      var key = 'presentation_order';
      if (elem[key] === undefined) {
        key = 'y';
      }
      return key;
    };

    $scope.moveUp = function(elem) {
      var key = $scope.getYOrderProperty(elem);
      elem[key] -= 1;
    };

    $scope.moveDown = function(elem) {
      var key = $scope.getYOrderProperty(elem);
      elem[key] += 1;
    };

    $scope.moveLeft = function(elem) {
      var key = $scope.getXOrderProperty(elem);
      elem[key] -= 1;
    };

    $scope.moveRight = function(elem) {
      var key = $scope.getXOrderProperty(elem);
      elem[key] += 1;
    };

    $scope.deleteFromList = function(list, elem) {
      var idx = list.indexOf(elem);
      if (idx !== -1) {
        list.splice(idx, 1);
      }
    };

    $scope.assignUniqueOrderIndex = function(elements) {
      if (elements.length <= 0) {
        return;
      }

      var key = $scope.getYOrderProperty(elements[0]);
      if (elements.length) {
        var i = 0;
        elements = $filter('orderBy')(elements, key);
        angular.forEach(elements, function (element) {
          element[key] = i;
          i += 1;
        });
      }
    };

    $scope.closeAlert = function(list, index) {
      list.splice(index, 1);
    };

    $rootScope.getUploadUrl = function(url) {
      if ($scope.requireLegacyUploadSupport()) {
        url += '?session=' + $scope.session;
      }

      return url;
    };

    $rootScope.getUploadUrl_lang = function(lang) {
      return function() {
        return $scope.getUploadUrl('admin/l10n/' + lang + '.json');
      };
    };

    $scope.init = function () {
      var deferred = $q.defer();

      $scope.app_logo = 's/logo.png?' + $scope.randomFluff();
      $scope.app_stylesheet = "css/styles.css?" + $scope.randomFluff();

      Node.get(function(node, getResponseHeaders) {
        $rootScope.node = node;
        // Tor detection and enforcing of usage of HS if users are using Tor
        if (window.location.hostname.match(/^[a-z0-9]{16}\.onion$/)) {
          // A better check on this situation would be
          // to fetch https://check.torproject.org/api/ip
          $rootScope.anonymous = true;
        } else {
          if (window.location.protocol === 'https:') {
             var headers = getResponseHeaders();
             if (headers['x-check-tor'] !== undefined && headers['x-check-tor'] === 'true') {
               $rootScope.anonymous = true;
               if ($rootScope.node.hidden_service && !$scope.iframeCheck()) {
                 // the check on the iframe is in order to avoid redirects
                 // when the application is included inside iframes in order to not
                 // mix HTTPS resources with HTTP resources.
                 window.location.href = $rootScope.node.hidden_service + '/#!' + $location.url();
               }
             } else {
               $rootScope.anonymous = false;
             }
          } else {
            $rootScope.anonymous = false;
          }
        }

        $scope.route_check();

        $scope.languages_supported = {};
        $scope.languages_enabled = {};
        $scope.languages_enabled_selector = [];
        angular.forEach(node.languages_supported, function (lang) {
          var code = lang.code;
          var name = lang.name;
          $scope.languages_supported[code] = name;
          if (node.languages_enabled.indexOf(code) !== -1) {
            $scope.languages_enabled[code] = name;
            $scope.languages_enabled_selector.push({"name": name, "code": code});
          }
        });

        $scope.languages_enabled_selector = $filter('orderBy')($scope.languages_enabled_selector, 'name');

        $scope.languages_enabled_length = Object.keys(node.languages_enabled).length;

        $scope.show_language_selector = ($scope.languages_enabled_length > 1);

        $scope.set_title();

        var set_language = function(language) {
          if (language === undefined || $rootScope.node.languages_enabled.indexOf(language) === -1) {
            language = node.default_language;
            $rootScope.default_language = node.default_language;
          }

          $rootScope.language = language;

          $scope.rtl = ["ar", "he", "ur"].indexOf(language) !== -1;

          document.getElementsByTagName("html")[0].setAttribute('dir', $scope.rtl ? 'rtl' : 'ltr');

          $translate.use($rootScope.language);
        };

        set_language($rootScope.language);

        var q1 = Contexts.query(function (contexts) {
          $rootScope.contexts = contexts;
        });

        var q2 = Receivers.query(function (receivers) {
          $rootScope.receivers = receivers;
        });

        $q.all([q1.$promise, q2.$promise]).then(function() {
          $scope.started = true;
          deferred.resolve();
        });

      });

      return deferred.promise;
    };

    $scope.view_tip = function(keycode) {
      keycode = keycode.replace(/\D/g,'');
      new WhistleblowerTip(keycode, function() {
        $location.path('/status');
      });
    };

    $scope.orderByY = function(row) {
      return row[0].y;
    };

    $scope.remove = function(array, index){
      array.splice(index, 1);
    };

    $scope.exportJSON = function(data, filename) {
      var json = angular.toJson(data, 2);
      var blob = new Blob([json], {type: "application/json"});
      filename = filename === undefined ? 'data.json' : filename;
      saveAs(blob, filename);
    };

    $scope.reload = function(new_path) {
      $rootScope.started = false;
      $rootScope.successes = [];
      $rootScope.errors = [];
      GLCache.removeAll();
      $scope.init().then(function() {
        $route.reload();

        if (new_path) {
          $location.path(new_path).replace();
        }
      });
    };

    $scope.uploadedFiles = function(uploads) {
      var sum = 0;

      angular.forEach(uploads, function(flow, key) {
        if (flow !== undefined) {
          sum += flow.files.length;
        }
      });

      return sum;
    };

    $scope.getUploadStatus = function(uploads) {
      var error = false;

      for (var key in uploads) {
        if (uploads.hasOwnProperty(key)) {
          if(uploads[key].isUploading()) {
            return 'uploading';
          }

          for (var i=0; i<uploads[key].files.length; i++) {
            if (uploads[key].files[i].error) {
              error = true;
              break;
            }
          }
        }
      }

      if (error) {
        return 'error';
      } else {
        return 'finished';
      }
    };

    $scope.isUploading = function(uploads) {
      return $scope.getUploadStatus(uploads) === 'uploading';
    };

    $scope.remainingUploadTime = function(uploads) {
      var sum = 0;

      angular.forEach(uploads, function(flow, key) {
        var x = flow.timeRemaining();
        if (x === 'Infinity') {
          return 'Infinity';
        }
        sum += x;
      });

      return sum;
    };

    $scope.uploadProgress = function(uploads) {
      var sum = 0;
      var n = 0;

      angular.forEach(uploads, function(flow, key) {
        sum += flow.progress();
        n += 1;
      });

      if (n === 0 || sum === 0) {
        return 1;
      }

      return sum / n;
    };

    $scope.openConfirmableModalDialog = function(template, args) {
      args = args === undefined ? {} : args;

      return $uibModal.open({
        templateUrl: template,
        controller: 'ConfirmableDialogCtrl',
        backdrop: 'static',
        keyboard: false,
        scope: $scope,
        resolve: {
          args: function () {
            return args;
          }
        }
      });
    };

    //////////////////////////////////////////////////////////////////

    $scope.$on("$routeChangeStart", function(event, next, current) {
      $scope.route_check();

      var path = $location.path();
      var embedded = '/embedded/';

      if ($location.path().substr(0, embedded.length) === embedded) {
        $rootScope.embedded = true;
        var search = $location.search();
        if (Object.keys(search).length === 0) {
          $location.path(path.replace("/embedded/", "/"));
          $location.search("embedded=true");
        } else {
          $location.url($location.url().replace("/embedded/", "/") + "&embedded=true");
        }
      }
    });

    $rootScope.$on('$routeChangeSuccess', function (event, current, previous) {
      if (current.$$route) {
        $rootScope.successes = [];
        $rootScope.errors = [];
        $scope.header_title = current.$$route.header_title;
        $scope.header_subtitle = current.$$route.header_subtitle;
        $scope.set_title();
      }
    });

    $scope.$on("REFRESH", function() {
      $scope.reload();
    });

    $scope.$watch(function (scope) {
      return Authentication.session;
    }, function (newVal, oldVal) {
      $scope.session = Authentication.session;
    });

    $rootScope.$watch('language', function (newVal, oldVal) {
      if (newVal && newVal !== oldVal && oldVal !== undefined) {
        $scope.$emit("REFRESH");
      }
    });

    $rootScope.keypress = function(e) {
       if (((e.which || e.keyCode) === 116) || /* F5 */
           ((e.which || e.keyCode) === 82 && (e.ctrlKey || e.metaKey))) {  /* (ctrl or meta) + r */
         e.preventDefault();
         $scope.$emit("REFRESH");
       }
    };

    $scope.init();
  }

]);

GLClient.controller('ModalCtrl', ['$scope', 
  function($scope, $uibModalInstance, error) {
    $scope.error = error;
    $scope.seconds = error.arguments[0];
}]);

TabCtrl = ['$scope', function($scope) {
  /* Empty controller function used to implement TAB pages */
}];

GLClient.controller('DisableEncryptionCtrl', ['$scope', '$uibModalInstance', function($scope, $uibModalInstance){
    $scope.close = function() {
      $uibModalInstance.close(false);
    };

    $scope.no = function() {
      $uibModalInstance.close(false);
    };

    $scope.ok = function() {
      $uibModalInstance.close(true);
    };
}]);

GLClient.controller('IntroCtrl', ['$scope', '$rootScope', '$uibModalInstance', function ($scope, $rootScope, $uibModalInstance) {
  var steps = 3;

  var first_step = 0;

  if ($scope.languages_enabled_length <= 1) {
     first_step = 1;
  }

  $scope.step = first_step;

  $scope.proceed = function () {
    if ($scope.step < steps) {
      $scope.step += 1;
    }
  };

  $scope.back = function () {
    if ($scope.step > first_step) {
      $scope.step -= 1;
    }
  };

  $scope.cancel = function () {
    $uibModalInstance.close();
  };

  $scope.data = {
    'language': $scope.language
  };

  $scope.$watch("data.language", function (newVal, oldVal) {
    if (newVal && newVal !== oldVal) {
      $rootScope.language = $scope.data.language;
    }
  });
}]);

GLClient.controller('ConfirmableDialogCtrl', ['$scope', '$uibModalInstance', 'args', function($scope, $uibModalInstance, args) {
  $scope.args = args;

  $scope.ok = function (result) {
    result = result === undefined ? $scope.args : result;
    $uibModalInstance.close(result);
  };

  $scope.cancel = function () {
    $uibModalInstance.dismiss('cancel');
  };
}]);

GLClient.controller('PreferencesCtrl', ['$scope', '$rootScope', '$location', 'changePasswordWatcher', 'CONSTANTS',
  function($scope, $rootScope, $location, changePasswordWatcher, CONSTANTS) {
    if ($scope.session.role === 'receiver') {
      // Receivers currently are the only user that benefit of specialized preferences.
      $scope.tabs = [
        {
          title: "General preferences",
          template: "views/receiver/preferences/tab1.html",
          ctrl: TabCtrl
        },
        {
          title: "Password configuration",
          template: "views/receiver/preferences/tab2.html",
          ctrl: TabCtrl
        },
        {
          title: "Notification settings",
          template: "views/receiver/preferences/tab3.html",
          ctrl: TabCtrl
        },
        {
          title:"Encryption settings",
          template:"views/receiver/preferences/tab4.html",
          ctrl: TabCtrl
        }
      ];
    } else {
      $scope.tabs = [
        {
          title: "General preferences",
          template: "views/user/preferences/tab1.html",
          ctrl: TabCtrl
        },
        {
          title: "Password configuration",
          template: "views/user/preferences/tab2.html",
          ctrl: TabCtrl
        },
        {
          title:"Encryption settings",
          template:"views/user/preferences/tab3.html",
          ctrl: TabCtrl
        }
      ];
    }

    $scope.navType = 'pills';

    $scope.timezones = CONSTANTS.timezones;
    $scope.email_regexp = CONSTANTS.email_regexp;

    changePasswordWatcher($scope, "preferences.old_password",
        "preferences.password", "preferences.check_password");

    $scope.pass_save = function () {
      if ($scope.preferences.pgp_key_remove === undefined) {
        $scope.preferences.pgp_key_remove = false;
      }
      if ($scope.preferences.pgp_key_public === undefined) {
        $scope.preferences.pgp_key_public = '';
      }

      $scope.preferences.$update(function () {
        $rootScope.successes.push({message: 'Updated your password!'});
      });
    };

    $scope.pref_save = function() {
      $scope.preferences.password = '';
      $scope.preferences.old_password = '';

      if ($scope.preferences.pgp_key_remove === true) {
        $scope.preferences.pgp_key_public = '';
      }

      if ($scope.preferences.pgp_key_public !== undefined &&
          $scope.preferences.pgp_key_public !== '') {
        $scope.preferences.pgp_key_remove = false;
      }

      $scope.preferences.$update(function() {
        $rootScope.successes.push({message: 'Updated your preferences!'});
      });
    };
}]);

GLClient.controller('WBFileUploadCtrl', ['$scope', '$route', function($scope, $route) {
  $scope.disabled = false;

  if ($scope.session && $scope.session.role === 'receiver') { $scope.disabled = true; }

  $scope.onFileAdded = function($event, $file, $flow) {
    if ($file.size > $scope.node.maximum_filesize * 1024 * 1024) {
      $file.error = true;
      $file.error_msg = "This file exceeds the maximum upload size for this server.";
      $event.preventDefault();
    } else {
      if ($scope.field !== undefined && !$scope.field.multi_entry) {
        // if the field allows to load only one file disable the button
        // as soon as a file is loaded.
        $scope.disabled = true;
      }
    }
  };
}]);

GLClient.controller('WizardCtrl', ['$scope', '$rootScope', '$location', '$route', '$http', '$uibModal', 'Admin',
                    'DefaultAppdata', 'passwordWatcher', 'changePasswordWatcher', 'CONSTANTS',
                    function($scope, $rootScope, $location, $route, $http, $uibModal, Admin,
                             DefaultAppdata, passwordWatcher, changePasswordWatcher, CONSTANTS) {
    $scope.email_regexp = CONSTANTS.email_regexp;

    $scope.step = 1;

    var finished = false;

    $scope.open_modal_allow_unencrypted = function() {
      if (!$scope.admin.node.allow_unencrypted) {
        return;
      }

      var modalInstance = $uibModal.open({
        templateUrl: 'views/partials/disable_encryption.html',
        controller: 'DisableEncryptionCtrl'
      });

      modalInstance.result.then(function(result){
        $scope.admin.node.allow_unencrypted = result;
      });
    };


    $scope.finish = function() {
      if (!finished) {
        var admin = {
          'mail_address': $scope.admin_mail_address,
          'old_password': 'globaleaks',
          'password': $scope.admin_password
        };

        $scope.wizard = {
          'node': $scope.admin.node,
          'admin': admin,
          'receiver': $scope.receiver,
          'context': $scope.context
        };

        $http.post('admin/wizard', $scope.wizard).then(function(response) {
          $scope.reload("/admin/landing");
        });
      }
    };

    $scope.$watch("language", function (newVal, oldVal) {
      if (newVal && newVal !== oldVal) {
        $rootScope.language = $scope.language;
      }
    });

    if ($scope.node.wizard_done) {
      /* if the wizard has been already performed redirect to the homepage */
      $location.path('/');
    } else {
      $scope.login('admin', 'globaleaks', function(response){
        $scope.admin = new Admin(function() {
          $scope.receiver = new $scope.admin.new_receiver();
          $scope.receiver.username = 'receiver';
          $scope.receiver.password = ''; // this causes the system to set the default password
                                         // the system will then force the user to change the password
                                         // at first login
          $scope.context = $scope.admin.new_context();
          passwordWatcher($scope, 'admin_password');
          changePasswordWatcher($scope,
                                "globaleaks",
                                "admin_password",
                                "admin_check_password");
        });
      });
    }
  }
]);

GLClient.controller('HomeCtrl', ['$scope', '$location', '$uibModal',
                    'WhistleblowerTip',
  function ($scope, $location, $uibModal, WhistleblowerTip) {
    $scope.keycode = '';
    $scope.configured = false;
    $scope.step = 1;
    $scope.answer = {value: null};
    $scope.answered = false;
    $scope.correctAnswer = false;
    $scope.showQuestions = false;

    var open_quiz = function () {
      var modalInstance = $uibModal.open({
        templateUrl: 'views/partials/security_awareness_quiz.html',
        controller: 'QuizCtrl',
        size: 'lg',
        scope: $scope
      });
    };

    $scope.goToSubmission = function () {
      if (!$scope.anonymous && !$scope.node.tor2web_whistleblower) {
        return;
      }
      // Before showing the security awareness panel
      if ($scope.anonymous ||
          $scope.node.disable_security_awareness_badge) {
        $location.path("/submission");
      } else {
        open_quiz();
      }
    };
    
}]);


GLClient.controller('QuizCtrl', ['$scope', '$uibModalInstance', '$location',
                    function($scope, $uibModalInstance, $location) {
  $scope.goToSubmission = function() {
    // After showing the security awareness panel
    if ($scope.node.disable_security_awareness_questions ||
        $scope.answer.value === 'b') {
      $uibModalInstance.close();
      $location.path("/submission");
    }
  };

  $scope.cancel = function () {
    $uibModalInstance.close();
  };

}]);

GLClient.controller('ReceiverSidebarCtrl', ['$scope', '$location', function($scope, $location){
  var current_menu = $location.path().split('/').slice(-1);
  $scope.active = {};
  $scope.active[current_menu] = "active";
}]);


GLClient.controller('ReceiverTipsCtrl', ['$scope',  '$http', '$route', '$location', '$uibModal', 'ReceiverTips',
  function($scope, $http, $route, $location, $uibModal, ReceiverTips) {
  $scope.tips = ReceiverTips.query();

  $scope.selected_tips = [];

  $scope.select_all = function () {
    $scope.selected_tips = [];
    angular.forEach($scope.tips, function (tip) {
      $scope.selected_tips.push(tip.id);
    });
  };

  $scope.deselect_all = function () {
    $scope.selected_tips = [];
  };

  $scope.tip_switch = function (id) {
    var index = $scope.selected_tips.indexOf(id);
    if (index > -1) {
      $scope.selected_tips.splice(index, 1);
    } else {
      $scope.selected_tips.push(id);
    }
  };

  $scope.isSelected = function (id) {
    return $scope.selected_tips.indexOf(id) !== -1;
  };

  $scope.tip_delete_all = function () {
    var modalInstance = $uibModal.open({
      templateUrl: 'views/partials/tip_operation_delete_selected.html',
      controller: TipBulkOperationsCtrl,
      resolve: {
        selected_tips: function () {
          return $scope.selected_tips;
        },
        operation: function() {
          return 'delete';
        }
      }
    });
  };

  $scope.tip_postpone_all = function () {
    var modalInstance = $uibModal.open({
      templateUrl: 'views/partials/tip_operation_postpone_selected.html',
      controller: TipBulkOperationsCtrl,
      resolve: {
        selected_tips: function () {
          return $scope.selected_tips;
        },
        operation: function() {
          return 'postpone';
        }
      }
    });
  };
}]);

TipBulkOperationsCtrl = ['$scope', '$http', '$route', '$location', '$uibModalInstance', 'selected_tips', 'operation',
                        function ($scope, $http, $route, $location, $uibModalInstance, selected_tips, operation) {
  $scope.selected_tips = selected_tips;
  $scope.operation = operation;

  $scope.cancel = function () {
    $uibModalInstance.close();
  };

  $scope.ok = function () {
     $uibModalInstance.close();

    if (['postpone', 'delete'].indexOf(operation) === -1) {
      return;
    }

    return $http({method: 'PUT', url: '/rtip/operations', data:{
      'operation': $scope.operation,
      'rtips': $scope.selected_tips
    }}).then(function(data, status, headers, config){
      $scope.selected_tips = [];
      $route.reload();
    });
  };
}];

GLClient.controller('TipCtrl',
  ['$scope', '$rootScope', '$location', '$route', '$routeParams', '$uibModal', '$http', 'Authentication', 'RTip', 'WBTip', 'ReceiverPreferences', 'fieldsUtilities', 'RTipStatusResource','RTipReceiverResource',
  function($scope, $rootScope, $location, $route, $routeParams, $uibModal, $http, Authentication, RTip, WBTip, ReceiverPreferences, fieldsUtilities, RTipStatusResource, RTipReceiverResource) {
    $scope.tip_id = $routeParams.tip_id;
    $scope.target_file = '#';

    $scope.answers = {};
    $scope.uploads = {};

    $scope.tipStates = [];
    $scope.tipReceivers = [];

    $http.get('/tipstatus').then(function(data){
      $scope.tipStates = data.data;
    });

    $http.get('/receivers').then(function(data){
      $scope.tipReceivers = data.data;
    });


    $scope.showEditLabelInput = false;

    if (!$scope.session) {
      // FIXME: handle this applicationwide with somekind of state
      $scope.loginRedirect(true);
      return;
    }

    $scope.getAnswersEntries = function(entry) {
      if (entry === undefined) {
        return $scope.answers[$scope.field.id];
      }

      return entry[$scope.field.id];
    };

    $scope.extractSpecialTipFields = function(tip) {
      for (var i=0; i < tip.questionnaire.length; i++) {
        var step = tip.questionnaire[i];
        var j = step.children.length;
        while (j--) {
          if (step.children[j]['key'] === 'whistleblower_identity') {
            $scope.whistleblower_identity_field = step.children[j];
            step.children.splice(j, 1);
            $scope.fields = $scope.whistleblower_identity_field.children;
            $scope.rows = fieldsUtilities.splitRows($scope.fields);
            $scope.field = $scope.whistleblower_identity_field;
            angular.forEach($scope.field.children, function(child) {
              $scope.answers[child.id] = [angular.copy(fieldsUtilities.prepare_field_answers_structure(child))];
            });
            return;
          }
        }
      }
    };

    $scope.getFields = function(field) {
      if (field === undefined) {
        return $scope.tip.fields;
      } else {
        return field.children;
      }
    };

    $scope.hasMultipleEntries = function(field_answer) {
      if (field_answer !== undefined) {
        return field_answer.length > 1;
      }

      return false;
    };

    $scope.filterFields = function(field) {
      return field.type !== 'fileupload';
    };

    $scope.filterReceivers = function(receiver) {
      return receiver.configuration !== 'hidden';
    };

    $scope.fieldIsTriggered = function(field) {
      return true;
    };

    if ($scope.session.role === 'whistleblower') {
      $scope.fileupload_url = $scope.getUploadUrl('wbtip/upload');

      new WBTip(function(tip) {
        $scope.extractSpecialTipFields(tip);

        $scope.tip = tip;

        // FIXME: remove this variable that is now needed only to map wb_identity_field
        //$scope.submission = {
        //      _submission: tip
        //};
        $scope.provide_identity = tip.identity_provided;

        $scope.provideIdentityInformation = function(identity_field_id, identity_field_answers) {
          return $http.post('wbtip/' + $scope.tip.id + '/provideidentityinformation',
                            {'identity_field_id': identity_field_id, 'identity_field_answers': identity_field_answers}).
              then(function(data, status, headers, config){
                $route.reload();
              });
        };

        angular.forEach($scope.contexts, function(context, k){
          if (context.id === tip.context_id) {
            $scope.current_context = context;
          }
        });

        if (tip.receivers.length === 1 && tip.msg_receiver_selected === null) {
          tip.msg_receiver_selected = tip.msg_receivers_selector[0].key;
        }

        tip.updateMessages();

        $scope.$watch('tip.msg_receiver_selected', function (newVal, oldVal) {
          if (newVal && newVal !== oldVal) {
            if ($scope.tip) {
              $scope.tip.updateMessages();
            }
          }
        }, false);
      });

    } else if ($scope.session.role === 'receiver' || $scope.session.role === 'custodian') {
      $scope.preferences = ReceiverPreferences.get();

      $scope.file_description = "";
      $scope.interno = "segnalante";
      $scope.fileupload_url = "rtip/upload/" + $scope.tip_id + "?description=" + $scope.file_description;

      $scope.changeValue = function($flow) {
         var description = document.getElementById("descrizione-file").value;
         var selected = document.getElementById("select-destinatario").value;
         if (selected === 'interno'){
             $flow.opts.target = 'rtip/upload/'+$scope.tip_id+"?description="+description;
         } else {
             $flow.opts.target = 'wbtip/upload/'+$scope.tip_id+"?description="+description;
         }
         document.getElementById("fileupload").disabled = false;
      }


      new RTip({id: $scope.tip_id}, function(tip) {
        $scope.extractSpecialTipFields(tip);

        $scope.tip = tip;

        $scope.showEditLabelInput = $scope.tip.label === '';

        $scope.tip_unencrypted = false;
        angular.forEach(tip.receivers, function(receiver){
          if (receiver.pgp_key_status === 'disabled' && receiver.receiver_id !== tip.receiver_id) {
            $scope.tip_unencrypted = true;
          }
        });

        angular.forEach($scope.contexts, function(context, k){
          if (context.id === $scope.tip.context_id) {
            $scope.current_context = context;
          }
        });

        $scope.tip.status = tip.status.length ? tip.status[0] : null;
        $scope.tip.statusId = $scope.tip.status ? $scope.tip.status.status_id : 0;

        $scope.tip.receiver = tip.receivers.length ? tip.receivers[0] : null;
        $scope.tip.receiverId = $scope.tip.receiver ? $scope.tip.receiver.id : 0;
      });
    } else {
      if($location.path() === '/status') {
        // whistleblower
        $location.path('/');
      } else {
        // receiver
        var search = 'src=' + $location.path();
        $location.path('/login');
        $location.search(search);
      }
    }

    $scope.editLabel = function() {
      $scope.showEditLabelInput = true;
    };

    $scope.updateLabel = function(label) {
      $scope.tip.updateLabel(label);
      $scope.showEditLabelInput = false;
    };

    $scope.allowWhistleblowerToComment = function() {
      return $scope.tip.setVar('enable_two_way_comments', true);
    };

    $scope.denyWhistleblowerToComment = function() {
      return $scope.tip.setVar('enable_two_way_comments', false);
    };

    $scope.allowWhistleblowerToMessage = function() {
      return $scope.tip.setVar('enable_two_way_messages', true);
    };

    $scope.denyWhistleblowerToMessage = function() {
      return $scope.tip.setVar('enable_two_way_messages', false);
    };

    $scope.allowWhistleblowerToAttachFiles = function() {
      return $scope.tip.setVar('enable_attachments', true);
    };

    $scope.denyWhistleblowerToAttachFiles = function() {
      return $scope.tip.setVar('enable_attachments', false);
    };

    $scope.newComment = function() {
      $scope.tip.newComment($scope.tip.newCommentContent);
      $scope.tip.newCommentContent = '';
    };

    $scope.newMessage = function() {
      $scope.tip.newMessage($scope.tip.newMessageContent);
      $scope.tip.newMessageContent = '';
    };

    $scope.newStatus = function() {
      $scope.tip.newStatus($scope.tip.newStatusContent);
      $scope.tip.newStatusContent = '';
    };

    $scope.tip_delete = function () {
      var modalInstance = $uibModal.open({
        templateUrl: 'views/partials/tip_operation_delete.html',
        controller: 'TipOperationsCtrl',
        resolve: {
          tip: function () {
            return $scope.tip;
          },
          operation: function () {
            return 'delete';
          }
        }
      });
    };

    $scope.tip_postpone = function () {
      var modalInstance = $uibModal.open({
        templateUrl: 'views/partials/tip_operation_postpone.html',
        controller: 'TipOperationsCtrl',
        resolve: {
          tip: function () {
            return $scope.tip;
          },
          operation: function () {
            return 'postpone';
          }
        }
      });
    };

    $scope.file_identity_access_request = function () {
      var modalInstance = $uibModal.open({
        templateUrl: 'views/partials/tip_operation_file_identity_access_request.html',
        controller: 'IdentityAccessRequestCtrl',
        resolve: {
          tip: function () {
            return $scope.tip;
          }
        }
      });
    };

    $scope.tip_status_update = function () {
      return $http({method: 'PUT', url: '/rtip/' + $scope.tip.id + '/tipstatus', data: {'status_id': $scope.tipstatus}}).then(function (response) {
        return true;
      });
    };

     $scope.updateTipReceiver = function() {
/*
        if ($scope.tip.receiver) {
           $scope.tip.receiver.id = $scope.tip.receiverId;
           $scope.tip.receiver.$update();
        }
        else {
*/
                // var recResource = new RTipReceiverResource({id: $scope.tip.receiverId});
                var recResource = new RTipReceiverResource({id: $scope.tip.id});
                recResource.receiver_id = $scope.tip.receiverId;
                recResource.$save(function(newReceiver) {
                        $scope.tip.receiver = newReceiver;
                });
//      }
    };

    $scope.updateTipStatus = function() {
/*
        if ($scope.tip.status) {
           $scope.tip.status.update({
                status_id: $scope.tip.statusId
           });
        }

        else {
*/
                var statusResource = new RTipStatusResource({id: $scope.tip.id});
                statusResource.status_id = $scope.tip.statusId;
                statusResource.$save(function(newStatus) {
                        $scope.tip.status = newStatus;
                });
//      }
    };
}]);

GLClient.controller('TipOperationsCtrl',
  ['$scope', '$http', '$route', '$location', '$uibModalInstance', 'RTip', 'tip', 'operation',
   function ($scope, $http, $route, $location, $uibModalInstance, Tip, tip, operation) {
  $scope.tip = tip;
  $scope.operation = operation;

  $scope.cancel = function () {
    $uibModalInstance.close();
  };

  $scope.ok = function () {
    $uibModalInstance.close();

    if ($scope.operation === 'postpone') {
      var req = {
        'operation': 'postpone',
        'args': {}
      };

      return $http({method: 'PUT', url: '/rtip/' + tip.id, data: req}).then(function (response) {
        $route.reload();
      });
    } else if ($scope.operation === 'delete') {
      return $http({method: 'DELETE', url: '/rtip/' + $scope.tip.id, data:{}}).
        then(function(data, status, headers, config) {
          $location.url('/receiver/tips');
          $route.reload();
        });
    }
  };
}]);

GLClient.controller('IdentityAccessRequestCtrl',
  ['$scope', '$http', '$route', '$uibModalInstance', 'tip',
   function ($scope, $http, $route, $uibModalInstance, tip) {
  $scope.tip = tip;

  $scope.cancel = function () {
    $uibModalInstance.close();
  };

  $scope.ok = function () {
    $uibModalInstance.close();

    return $http.post('/rtip/' + tip.id + '/identityaccessrequests', {'request_motivation': $scope.request_motivation}).
        then(function(data, status, headers, config){
          $route.reload();
        });
  };
}]);

GLClient.controller('TipStatusRequestCtrl',
  ['$scope', '$http', '$route', '$uibModalInstance', 'tip',
   function ($scope, $http, $route, $uibModalInstance, tip) {
  $scope.tip = tip;

  $scope.cancel = function () {
    $uibModalInstance.close();
  };

  $scope.ok = function () {
    $uibModalInstance.close();

    return $http.post('/rtip/' + tip.id + '/tipstatus', {'status_id': $scope.status_id}).
        then(function(data, status, headers, config){
          $route.reload();
        });
  };
}]);

GLClient.controller('CustodianIdentityAccessRequestsCtrl', ['$scope',  '$http', '$route', '$location', '$uibModal', 'IdentityAccessRequests',
  function($scope, $http, $route, $location, $uibModal, IdentityAccessRequests) {
  $scope.iars = IdentityAccessRequests.query();

  $scope.authorize_identity_access_request = function (iar_id) {
    return $http.put('/custodian/identityaccessrequest/' + iar_id, {'reply': 'authorized', 'reply_motivation': ''}).
      then(function(data, status, headers, config){
        $route.reload();
      });
  };

  $scope.file_denied_identity_access_reply = function (iar_id) {
    var modalInstance = $uibModal.open({
      templateUrl: 'views/partials/tip_operation_file_identity_access_reply.html',
      controller: IdentityAccessReplyCtrl,
      resolve: {
        iar: function () {
          return iar_id;
        }
      }
    });
  };
}]);

IdentityAccessReplyCtrl = ['$scope', '$http', '$route', '$uibModalInstance', 'iar',
  function ($scope, $http, $route, $uibModalInstance, iar) {
    $scope.iar = iar;
    $scope.cancel = function () {
      $uibModalInstance.close();
    };

    $scope.ok = function () {
      $uibModalInstance.close();
      return $http.put('/custodian/identityaccessrequest/' + $scope.iar, {'reply': 'denied', 'reply_motivation': $scope.reply_motivation}).
        then(function(data, status, headers, config){
          $route.reload();
        });
    };
}];

GLClient.controller('AdminCtrl',
    ['$scope', '$http', '$route', '$location', '$filter', 'Admin', 'Node', 'GLCache', 'CONSTANTS',
    function($scope, $http, $route, $location, $filter, Admin, Node, GLCache, CONSTANTS) {
  $scope.email_regexp = CONSTANTS.email_regexp;
  $scope.https_regexp = CONSTANTS.https_regexp;
  $scope.tor_regexp = CONSTANTS.tor_regexp;
  $scope.timezones = CONSTANTS.timezones;

  // XXX convert this to a directive
  // This is used for setting the current menu in the sidebar
  var current_menu = $location.path().split('/').slice(-1);
  $scope.active = {};
  $scope.active[current_menu] = "active";

  $scope.admin = new Admin(function() {
    $scope.languages_enabled_edit = {};
    $scope.languages_enabled_selector = [];

    $scope.languages_supported = {};
    $scope.languages_enabled = [];
    $scope.languages_enabled_selector = [];
    angular.forEach($scope.admin.node.languages_supported, function(lang) {
      var code = lang.code;
      var name = lang.name;
      $scope.languages_supported[code] = name;
      if ($scope.admin.node.languages_enabled.indexOf(code) !== -1) {
        $scope.languages_enabled[code] = name;
        $scope.languages_enabled_selector.push({"name": name,"code": code});
      }
    });

    $scope.languages_enabled_selector = $filter('orderBy')($scope.languages_enabled_selector, 'name');

    $scope.$watch('languages_enabled', function() {
      if ($scope.languages_enabled) {
        $scope.languages_enabled_edit = {};
        angular.forEach($scope.languages_supported, function(lang, code){
          $scope.languages_enabled_edit[code] = code in $scope.languages_enabled;
        });
      }
    }, true);

    $scope.$watch('languages_enabled_edit', function() {
      if ($scope.languages_enabled) {
        var languages_enabled_selector = [];
        var change_default = false;
        var language_selected = $scope.admin.node.default_language;
        if (! $scope.languages_enabled_edit[$scope.admin.node.default_language]) {
          change_default = true;
        }

        angular.forEach($scope.languages_supported, function(lang, code) {
          if ($scope.languages_enabled_edit[code]) {
            languages_enabled_selector.push({'name': lang, 'code': code});

            if (change_default === true) {
              language_selected = code;
              change_default = false;
            }
          }
        });

        var languages_enabled = [];
        angular.forEach($scope.languages_enabled_edit, function(enabled, code) {
          if (enabled) {
            languages_enabled.push(code);
          }
        });

        $scope.admin.node.default_language = language_selected;
        $scope.admin.node.languages_enabled = languages_enabled;
  
        $scope.languages_enabled_selector = languages_enabled_selector;

      }
    }, true);
  });

  // We need to have a special function for updating the node since we need to add old_password and password attribute
  // if they are not present
  $scope.updateNode = function(node) {
    if (node.password === undefined) {
      node.password = "";
    }

    if (node.check_password === undefined) {
      node.password = "";
    }

    if (node.old_password === undefined) {
      node.old_password = "";
    }

    var cb = function() {
      $scope.$emit("REFRESH");
    };

    $scope.update(node, cb);
  };

  $scope.newItemOrder = function(objects, key) {
    if (objects.length === 0) {
      return 0;
    }

    var max = 0;
    angular.forEach(objects, function(object) {
      if (object[key] > max) {
        max = object[key];
      }
    });

    return max + 1;
  };
}]);

GLClient.controller('AdminPasswordCtrl', ['$scope', 'changePasswordWatcher',
                    function($scope, changePasswordWatcher) {
    changePasswordWatcher($scope, "admin.node.old_password",
        "admin.node.password", "admin.node.check_password");
}]);

GLClient.controller('AdminFileUploadCtrl', ['$scope', '$http', function($scope, $http){
    $scope.uploadfile = false;

    $scope.fileSelected = false;
    $scope.markFileSelected = function () {
      $scope.fileSelected = true;
    };

    $scope.openUploader = function () {
      $scope.uploadfile = true;
    };

    $scope.closeUploader = function () {
      $scope.uploadfile = $scope.fileSelected = false;
    };
}]);

GLClient.controller('AdminImgUploadCtrl', ['$scope', '$http', function($scope, $http){
    $scope.uploadfile = false;

    $scope.fileSelected = false;
    $scope.markFileSelected = function () {
      $scope.fileSelected = true;
    };

    $scope.openUploader = function () {
      $scope.uploadfile = true;
    };

    $scope.closeUploader = function () {
      $scope.uploadfile = $scope.fileSelected = false;
    };

    $scope.$on('flow::fileAdded', function (event, $flow, flowFile) {
      $scope.file_upload_error = undefined;
      if (flowFile.size > $scope.node.maximum_filesize * 1024 * 1024) {
        $scope.file_upload_error = "This file exceeds the maximum upload size for this server.";
      } else if(flowFile.file.type !== "image/png") {
        $scope.file_upload_error = "Only PNG files are currently supported.";
      }

      if ($scope.file_upload_error !== undefined)  {
        flowFile.error = true;
        flowFile.error_msg = $scope.file_upload_error;
        event.preventDefault();
      }
    });
}]);

GLClient.controller('AdminGeneralSettingsCtrl', ['$scope', '$http', 'StaticFiles',
  function($scope, $http, StaticFiles){
  $scope.tabs = [
    {
      title:"Main configuration",
      template: "views/admin/content/tab1.html",
      ctrl: TabCtrl
    },
    {
      title:"Theme customization",
      template: "views/admin/content/tab2.html",
      ctrl: TabCtrl
    },
    {
      title: "Translation customization",
      template: "views/admin/content/tab3.html",
      ctrl: TabCtrl
    }
  ];

  $scope.staticfiles = [];

  $scope.update_static_files = function () {
    var updated_staticfiles = StaticFiles.query(function () {
      $scope.staticfiles = updated_staticfiles;
    });
  };

  $scope.fileExists = function (filename) {
    for (var i=0; i<$scope.staticfiles.length; i++) {
      if ($scope.staticfiles[i].filename === filename) {
        return true;
      }
    }
    return false;
  };

  $scope.uploadfinished = function () {
    $scope.update_static_files();
  };

  $scope.perform_delete = function (url) {
    $http['delete'](url).then(function (response) {
      $scope.update_static_files();
    });
  };

  $scope.update_static_files();

}]);

GLClient.controller('AdminMailCtrl', ['$scope', function($scope){
  $scope.tabs = [
    {
      title:"Main configuration",
      template:"views/admin/mail/tab1.html",
      ctrl: TabCtrl
    },
    {
      title:"Admin notification templates",
      template:"views/admin/mail/tab2.html",
      ctrl: TabCtrl
    },
    {
      title:"Recipient notification templates",
      template:"views/admin/mail/tab3.html",
      ctrl: TabCtrl
    },
    {
      title:"Exception notification",
      template:"views/admin/mail/tab4.html",
      ctrl: TabCtrl
    }
  ];
}]);

GLClient.controller('AdminAdvancedCtrl', ['$scope', '$uibModal',
                    function($scope, $uibModal){
  $scope.tabs = [
    {
      title:"Main configuration",
      template:"views/admin/advanced/tab1.html",
      ctrl: TabCtrl
    },
    {
      title:"HTTPS settings",
      template:"views/admin/advanced/tab2.html",
      ctrl: TabCtrl
    },
    {
      title:"Anomaly detection thresholds",
      template:"views/admin/advanced/tab3.html",
      ctrl: TabCtrl
    }
  ];

  $scope.open_modal_allow_unencrypted = function() {
    if (!$scope.admin.node.allow_unencrypted) {
      return;
    }

    var modalInstance = $uibModal.open({
      templateUrl: 'views/partials/disable_encryption.html',
      controller: 'DisableEncryptionCtrl'
    });

    modalInstance.result.then(function(result){
      $scope.admin.node.allow_unencrypted = result;
    });
  };
}]);

GLClient.controller('AdminUsersCtrl', ['$scope', '$uibModal', 'AdminUserResource',
  function($scope, $uibModal, AdminUserResource) {

  $scope.save_user = function(user, cb) {
    if (user.pgp_key_remove === true) {
      user.pgp_key_public = '';
    }

    if (user.pgp_key_public !== undefined &&
        user.pgp_key_public !== '') {
      user.pgp_key_remove = false;
    }

    var updated_user = new AdminUserResource(user);

    return $scope.update(updated_user, cb);
  };

  $scope.perform_delete = function(user) {
    AdminUserResource['delete']({
      id: user.id
    }, function(){
      var idx = $scope.admin.users.indexOf(user);
      $scope.admin.users.splice(idx, 1);
    });
  };

  $scope.userDeleteDialog = function(user) {
    var modalInstance = $scope.openConfirmableModalDialog('views/partials/user_delete.html', user);

    modalInstance.result.then(
       function(result) { $scope.perform_delete(result); },
       function(result) { }
    );
  };
}]);

GLClient.controller('AdminUserEditorCtrl', ['$scope', 'passwordWatcher', 'CONSTANTS',
  function($scope, passwordWatcher, CONSTANTS) {

    $scope.editing = false;

    $scope.toggleEditing = function () {
      $scope.editing = $scope.editing ^ 1;
    };

    $scope.save = function() {
      $scope.save_user($scope.user, false);
    };

    $scope.timezones = CONSTANTS.timezones;

    passwordWatcher($scope, 'user.password');

    $scope.isSelected = function (context) {
      return $scope.user.contexts.indexOf(context.id) !== -1;
    };

    $scope.toggle = function (context) {
      var idx = $scope.user.contexts.indexOf(context.id);
      if (idx === -1) {
        $scope.user.contexts.push(context.id);
      } else {
        $scope.user.contexts.splice(idx, 1);
      }
      $scope.editUser.$dirty = true;
      $scope.editUser.$pristine = false;
    };

    $scope.updateUserImgUrl = function() {
      $scope.userImgUrl = "s/" + $scope.user.id + ".png?" + $scope.randomFluff();
    };

    $scope.updateUserImgUrl();
}]);

GLClient.controller('AdminUserAddCtrl', ['$scope',
  function($scope) {
    $scope.new_user = {};

    $scope.add_user = function() {
      var user = new $scope.admin.new_user();

      user.username = $scope.new_user.username;
      user.role = $scope.new_user.role;
      user.name = $scope.new_user.name;
      user.mail_address = $scope.new_user.email;
      user.presentation_order = $scope.newItemOrder($scope.admin.users, 'presentation_order');

      user.$save(function(new_user){
        $scope.admin.users.push(new_user);
        $scope.new_user = {};
      });
    };
}]);

GLClient.controller('AdminReceiversCtrl', ['$scope', '$uibModal', 'AdminReceiverResource',
  function($scope, $uibModal, AdminReceiverResource) {
  $scope.save_receiver = function(receiver, cb) {
    if (receiver.pgp_key_remove === true) {
      receiver.pgp_key_public = '';
    }

    if (receiver.pgp_key_public !== undefined &&
        receiver.pgp_key_public !== '') {
      receiver.pgp_key_remove = false;
    }

    var updated_receiver = new AdminReceiverResource(receiver);

    return $scope.update(updated_receiver, cb);
  };

  $scope.moveUpAndSave = function(elem) {
    $scope.moveUp(elem);
    $scope.save_receiver(elem);
  };

  $scope.moveDownAndSave = function(elem) {
    $scope.moveDown(elem);
    $scope.save_receiver(elem);
  };
}]);

GLClient.controller('AdminReceiverEditorCtrl', ['$scope', 'passwordWatcher', 'CONSTANTS',
  function($scope, passwordWatcher, CONSTANTS) {

    $scope.editing = false;

    $scope.toggleEditing = function () {
      $scope.editing = !$scope.editing;
    };

    $scope.save = function() {
      $scope.save_receiver($scope.receiver, false);
    };

    $scope.timezones = CONSTANTS.timezones;

    passwordWatcher($scope, 'receiver.password');

    $scope.isSelected = function (context) {
      return $scope.receiver.contexts.indexOf(context.id) !== -1;
    };

    $scope.toggle = function (context) {
      var idx = $scope.receiver.contexts.indexOf(context.id);
      if (idx === -1) {
        $scope.receiver.contexts.push(context.id);
      } else {
        $scope.receiver.contexts.splice(idx, 1);
      }
      $scope.editReceiver.$dirty = true;
      $scope.editReceiver.$pristine = false;
    };
}]);

GLClient.controller('AdminContextsCtrl',
  ['$scope', '$uibModal', 'AdminContextResource',
  function($scope, $uibModal, AdminContextResource) {

  $scope.save_context = function (context, cb) {
    var updated_context = new AdminContextResource(context);

    return $scope.update(updated_context, cb);
  };

  $scope.perform_delete = function(context) {
    AdminContextResource['delete']({
      id: context.id
    }, function(){
      var idx = $scope.admin.contexts.indexOf(context);
      $scope.admin.contexts.splice(idx, 1);
    });
  };

  $scope.contextDeleteDialog = function(context){
    var modalInstance = $scope.openConfirmableModalDialog('views/partials/context_delete.html', context);

    modalInstance.result.then(
       function(result) { $scope.perform_delete(result); },
       function(result) { }
    );
  };

  $scope.moveUpAndSave = function(elem) {
    $scope.moveUp(elem);
    $scope.save_context(elem);
  };

  $scope.moveDownAndSave = function(elem) {
    $scope.moveDown(elem);
    $scope.save_context(elem);
  };
}]);

GLClient.controller('AdminContextEditorCtrl', ['$scope', 'AdminStepResource',
  function($scope, AdminStepResource) {

  $scope.editing = false;

  $scope.toggleEditing = function () {
    $scope.editing = !$scope.editing;
  };

  $scope.isSelected = function (receiver) {
    return $scope.context.receivers.indexOf(receiver.id) !== -1;
  };

  $scope.toggle = function(receiver) {
    var idx = $scope.context.receivers.indexOf(receiver.id);
    if (idx === -1) {
      $scope.context.receivers.push(receiver.id);
    } else {
      $scope.context.receivers.splice(idx, 1);
    }
    $scope.editContext.$dirty = true;
    $scope.editContext.$pristine = false;
  };

  $scope.delStep = function(step) {
    AdminStepResource['delete']({
      id: step.id
    }, function() {
      $scope.context.steps.splice($scope.context.steps.indexOf(step), 1);
    });
  };

  $scope.delAllSteps = function() {
    angular.forEach($scope.context.steps, function(step) {
      $scope.delStep(step);
    });
  };
}]);

GLClient.controller('AdminContextAddCtrl', ['$scope', function($scope) {
  $scope.new_context = {};

  $scope.add_context = function() {
    var context = new $scope.admin.new_context();

    context.name = $scope.new_context.name;
    context.presentation_order = $scope.newItemOrder($scope.admin.contexts, 'presentation_order');

    context.$save(function(new_context){
      $scope.admin.contexts.push(new_context);
      $scope.new_context = {};
    });
  };

}]);

GLClient.controller('AdminFieldTemplatesCtrl', ['$scope', 'AdminFieldResource', 'AdminFieldTemplateResource',
  function($scope, AdminFieldResource, AdminFieldTemplateResource) {
    $scope.admin.fieldtemplates.$promise.then(function(fields) {
      $scope.fields = fields;
    });

    $scope.addField = function(new_field) {
      $scope.fields.push(new_field);
    };

    $scope.delField = function(fields, field) {
      AdminFieldTemplateResource['delete']({
        id: field.id
      }, function() {
        $scope.deleteFromList(fields, field);
      });
    };

    $scope.delAllFields = function() {
      angular.forEach($scope.fields, function(field) {
        $scope.delField($scope.fields, field);
      });
    };

    $scope.exportQuestionTemplates = function() {
      AdminFieldTemplateResource.query({export: true}).$promise.then(function(fields) {
        $scope.exportJSON(fields, 'question-templates.json');
      });
    };

    $scope.exportQuestion = function(id) {
      AdminFieldTemplateResource.get({export: true, id: id}).$promise.then(function(field) {
        $scope.exportJSON(field, 'question-' + id + '.json');
      });
    };

    $scope.importQuestions = function(fields) {
      var fields = JSON.parse(fields);

      if (Object.prototype.toString.call(fields) !== '[object Array]') {
        fields = [fields];
      }

      angular.forEach(fields, function(field) {
        var field = new AdminFieldTemplateResource(field);
        field.id = '';
        field.$save({import: true}, function(new_field) {
          $scope.reload();
        });

      });
    };
  }
]);

GLClient.controller('AdminFieldEditorCtrl', ['$scope', '$uibModal', 'AdminFieldResource', 'AdminFieldTemplateResource',
  function($scope, $uibModal, AdminFieldResource, AdminFieldTemplateResource) {
    $scope.editable = $scope.field.editable === true && $scope.field.instance !== 'reference';
    $scope.editing = false;
    $scope.new_field = {};
    $scope.siblings =  $scope.fields || [];
    $scope.fields = $scope.field.children;

    $scope.toggleEditing = function () {
      $scope.editing = !$scope.editing;
    };

    $scope.isMarkableRequired = function(field) {
      return (['fieldgroup', 'fileupload'].indexOf(field.type) === -1);
    };

    $scope.isMarkableMultiEntry = function(field) {
      return (['checkbox', 'selectbox', 'tos'].indexOf(field.type) === -1);
    };

    $scope.isMarkableSubjectToStats = function(field) {
      return (['inputbox', 'textarea', 'fieldgroup'].indexOf(field.type) === -1);
    };

    $scope.isMarkableSubjectToPreview = function(field) {
      return (['fieldgroup', 'fileupload'].indexOf(field.type) === -1);
    };

    $scope.typeSwitch = function (type) {
      if (['inputbox', 'textarea'].indexOf(type) !== -1) {
        return 'inputbox_or_textarea';
      }

      if (['checkbox', 'selectbox', 'multichoice'].indexOf(type) !== -1) {
        return 'checkbox_selectbox_multichoice';
      }

      return type;
    };

    $scope.showConfiguration = function(field) {
      if (['inputbox', 'textarea', 'checkbox', 'multichoice', 'tos'].indexOf(field.type) > -1) {
        return true;
      }

      if (field.instance == 'template' && (['whistleblower_identity'].indexOf(field.key) > -1)) {
        return true;
      }

      return false;
    };

    $scope.showOptions = function(field) {
      if (['checkbox', 'selectbox', 'multichoice'].indexOf(field.type) > -1) {
        return true;
      }

      return false;
    };

    $scope.addField = function(field) {
      $scope.field.children.push(field);
    };

    $scope.addOption = function (field) {
      var new_option = {
        'id': '',
        'label': '',
        'score_points': 0,
        'trigger_field': '',
        'trigger_step': ''
      };

      new_option.presentation_order = $scope.newItemOrder(field.options, 'presentation_order');

      field.options.push(new_option);
    };

    $scope.delOption = function(field, option) {
      var index = field.options.indexOf(option);
      field.options.splice(index, 1);
    };

    $scope.save_field = function(field) {
      $scope.assignUniqueOrderIndex(field.options);

      var updated_field;
      if (field.instance == 'template') {
        updated_field = new AdminFieldTemplateResource(field);
      } else {
        updated_field = new AdminFieldResource(field);
      }

      $scope.update(updated_field);
    };

    $scope.moveUpAndSave = function(elem) {
      $scope.moveUp(elem);
      $scope.save_field(elem);
    };

    $scope.moveDownAndSave = function(elem) {
      $scope.moveDown(elem);
      $scope.save_field(elem);
    };

    $scope.moveLeftAndSave = function(elem) {
      $scope.moveLeft(elem);
      $scope.save_field(elem);
    };

    $scope.moveRightAndSave = function(elem) {
      $scope.moveRight(elem);
      $scope.save_field(elem);
    };

    $scope.add_field = function() {
      var field = $scope.admin.new_field('', $scope.field.id);
      field.label = $scope.new_field.label;
      field.type = $scope.new_field.type;
      field.attrs = $scope.admin.get_field_attrs(field.type);
      field.y = $scope.newItemOrder($scope.field.children, 'y');

      field.instance = $scope.field.instance;

      if (field.type === 'fileupload') {
        field.multi_entry = true;
      }

      field.$save(function(new_field){
        $scope.addField(new_field);
        $scope.new_field = {};
      });
    };

    $scope.add_field_from_template = function(template_id) {
      var field = $scope.admin.new_field_from_template(template_id, '', $scope.field.id);

      if ($scope.$parent.field) {
        field.y = $scope.newItemOrder($scope.$parent.field.children, 'y');
      } else {
        field.y = $scope.newItemOrder($scope.step.children, 'y');
      }

      field.$save(function(new_field){
        $scope.field.children.push(new_field);
      });
    };

    $scope.fieldIsMarkableRequired = $scope.isMarkableRequired($scope.field);
    $scope.fieldIsMarkableMultiEntry = $scope.isMarkableMultiEntry($scope.field);
    $scope.fieldIsMarkableSubjectToStats = $scope.isMarkableSubjectToStats($scope.field);
    $scope.fieldIsMarkableSubjectToPreview = $scope.isMarkableSubjectToPreview($scope.field);

    $scope.triggerFieldDialog = function(option) {
      return $scope.openConfirmableModalDialog('views/partials/trigger_field.html', option);
    };

    $scope.triggerStepDialog = function(option) {
      return $scope.openConfirmableModalDialog('views/partials/trigger_step.html', option);
    };

    $scope.assignScorePointsDialog = function(option) {
      return $scope.openConfirmableModalDialog('views/partials/assign_score_points.html', option);
    };
  }
]);

GLClient.controller('AdminFieldTemplatesAddCtrl', ['$scope',
  function($scope) {
    $scope.new_field = {};

    $scope.add_field = function() {
      var field = $scope.admin.new_field_template($scope.field ? $scope.field.id : '');
      field.instance = 'template';
      field.label = $scope.new_field.label;
      field.type = $scope.new_field.type;
      field.attrs = $scope.admin.get_field_attrs(field.type);

      field.$save(function(new_field){
        $scope.addField(new_field);
        $scope.new_field = {};
      });
    };
  }
]);

GLClient.controller('AdminStepAddCtrl', ['$scope',
  function($scope) {
    $scope.new_step = {};

    $scope.add_step = function() {
      var step = new $scope.admin.new_step($scope.questionnaire.id);
      step.label = $scope.new_step.label;
      step.presentation_order = $scope.newItemOrder($scope.questionnaire.steps, 'presentation_order');

      step.$save(function(new_step){
        $scope.questionnaire.steps.push(new_step);
        $scope.new_step = {};
      });
    };
  }
]);

GLClient.controller('AdminStepEditorCtrl', ['$scope', '$uibModal', 'AdminStepResource', 'AdminFieldResource',
  function($scope, $uibModal, AdminStepResource, AdminFieldResource) {
    $scope.editing = false;
    $scope.new_field = {};
    $scope.fields = $scope.step.children;

    $scope.toggleEditing = function () {
      $scope.editing = $scope.editing ^ 1;
    };

    $scope.save_step = function(step) {
      var updated_step = new AdminStepResource(step);
      return $scope.update(updated_step);
    };

    $scope.addField = function(field) {
      $scope.step.children.push(field);
    };

    $scope.delField = function(fields, field) {
      AdminFieldResource['delete']({
        id: field.id
      }, function() {
        $scope.deleteFromList(fields, field);
      });
    };

    $scope.delAllFields = function() {
      angular.forEach($scope.step.children, function(field) {
        $scope.delField($scope.step.children, field);
      });
    };

    $scope.add_field = function() {
      var field = $scope.admin.new_field($scope.step.id, '');
      field.label = $scope.new_field.label;
      field.type = $scope.new_field.type;
      field.attrs = $scope.admin.get_field_attrs(field.type);
      field.y = $scope.newItemOrder($scope.step.children, 'y');

      field.$save(function(new_field){
        $scope.addField(new_field);
        $scope.new_field = {};
      });
    };

    $scope.add_field_from_template = function(template_id) {
      var field = $scope.admin.new_field_from_template(template_id, $scope.step.id, '');
      field.y = $scope.newItemOrder($scope.step.children, 'y');

      field.$save(function(new_field) {
        $scope.step.children.push(new_field);
      });
    };

    $scope.moveUpAndSave = function(elem) {
      $scope.moveUp(elem);
      $scope.save_step(elem);
    };

    $scope.moveDownAndSave = function(elem) {
      $scope.moveDown(elem);
      $scope.save_step(elem);
    };

    $scope.moveLeftAndSave = function(elem) {
      $scope.moveLeft(elem);
      $scope.save_step(elem);
    };

    $scope.moveRightAndSave = function(elem) {
      $scope.moveRight(elem);
      $scope.save_step(elem);
    };
  }
]);

GLClient.controller('AdminQuestionnaireCtrl', ['$scope', '$uibModal',
                    function($scope, $uibModal){
  $scope.tabs = [
    {
      title:"Questionnaire configuration",
      template:"views/admin/questionnaires/main.html",
      ctrl: TabCtrl
    },
    {
      title:"Question templates",
      template:"views/admin/questionnaires/questions.html",
      ctrl: TabCtrl
    }
  ];
}]);

GLClient.controller('AdminQuestionnairesCtrl',
  ['$scope', 'AdminQuestionnaireResource',
  function($scope, AdminQuestionnaireResource) {

  $scope.save_questionnaire = function(questionnaire, cb) {
    var updated_questionnaire = new AdminQuestionnaireResource(questionnaire);

    return $scope.update(updated_questionnaire, cb);
  };

  $scope.delete_questionnaire = function(questionnaire) {
    AdminQuestionnaireResource['delete']({
      id: questionnaire.id
    }, function(){
      var idx = $scope.admin.questionnaires.indexOf(questionnaire);
      $scope.admin.questionnaires.splice(idx, 1);
    });
  };
}]);

GLClient.controller('AdminQuestionnaireEditorCtrl', ['$scope', 'AdminStepResource',
  function($scope, AdminStepResource) {

  $scope.editing = false;

  $scope.toggleEditing = function () {
    $scope.editing = !$scope.editing;
  };

  $scope.delStep = function(step) {
    AdminStepResource['delete']({
      id: step.id
    }, function() {
      $scope.questionnaire.steps.splice($scope.questionnaire.steps.indexOf(step), 1);
    });
  };

  $scope.delAllSteps = function() {
    angular.forEach($scope.questionnaire.steps, function(step) {
      $scope.delStep(step);
    });
  };
}]);

GLClient.controller('AdminQuestionnaireAddCtrl', ['$scope', function($scope) {
  $scope.new_questionnaire = {};

  $scope.add_questionnaire = function() {
    var questionnaire = new $scope.admin.new_questionnaire();

    questionnaire.name = $scope.new_questionnaire.name;

    questionnaire.$save(function(new_questionnaire){
      $scope.admin.questionnaires.push(new_questionnaire);
      $scope.new_questionnaire = {};
    });
  };

}]);

GLClient.controller('OverviewCtrl', ['$scope', '$location', 'ReceiverOverview', 'TipOverview', 'FileOverview',
  function($scope, $location, ReceiverOverview, TipOverview, FileOverview) {

      $scope.receivers = ReceiverOverview.query();
      $scope.tips = TipOverview.query();
      $scope.files = FileOverview.query();

      var current_menu = $location.path().split('/').slice(-1);
      current_menu += "_overview";
      $scope.active = {};
      $scope.active[current_menu] = "active";
}]);

GLClient.controller('StatisticsCtrl', ['$scope', '$filter', 'Node', 'StatsCollection',
  function($scope, $filter, Node, StatsCollection) {

    $scope.week_delta = 0;
    $scope.blob = {};

    var margin = { top: 50, right: 0, bottom: 100, left: 30 },
      width = 960 - margin.left - margin.right,
      height = 430 - margin.top - margin.bottom,
      gridSize = Math.floor(width / 24),
      legendElementWidth = gridSize*2,
      buckets = 9,
      colors = ["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],
      days = ["Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"],
      times = ["1am", "2am", "3am", "4am", "5am", "6am", "7am", "8am", "9am", "10am", "11am", "12am",
               "1pm", "2pm", "3pm", "4pm", "5pm", "6pm", "7pm", "8pm", "9pm", "10pm", "11pm", "12pm"];

    var show_data = function(data) {

      /*
      {
          "hour": 19,
          "day": 6,
          "summary": {
              "login_failure": 28
          },
          "free_disk_space": 5627
          "valid": 0
      },
      valid is a status flag:
          A) 0 means that data is meaningful
          B) -1 missing result: node shut down
          C) -2 future hour, we can't have data
          D) -3 current hour
      */

      data.forEach(function(d) {
          if (d.valid === 0) {
            d.summary.failed_logins = + d.summary.failed_logins ? d.summary.failed_logins : 0;
            d.summary.successful_logins = +d.summary.successful_logins ? d.summary.successful_logins : 0;
            d.summary.started_submissions = +d.summary.started_submissions ? d.summary.started_submissions : 0;
            d.summary.completed_submissions = +d.summary.completed_submissions ? d.summary.completed_submissions : 0;
            d.summary.uploaded_files =  +d.summary.uploaded_files ?  d.summary.uploaded_files : 0;
            d.summary.appended_files = +d.summary.appended_files ? d.summary.appended_files : 0;
            d.summary.wb_comments = +d.summary.wb_comments ? d.summary.wb_comments : 0;
            d.summary.wb_messages = +d.summary.wb_messages ? d.summary.wb_messages : 0;
            d.summary.receiver_comments = +d.summary.receiver_comments ? d.summary.receiver_comments : 0;
            d.summary.receiver_messages = +d.summary.receiver_messages ? d.summary.receiver_messages : 0;
            /* d.summary.homepage_access = +d.summary.homepage_access ? d.summary.homepage_access : 0; 
             * -- remind: disabled, not recorded in the d.value below */

            d.value = 0;
            d.value += d.summary.failed_logins;
            d.value += d.summary.successful_logins;
            d.value += d.summary.started_submissions;
            d.value += d.summary.completed_submissions;
            d.value += d.summary.uploaded_files;
            d.value += d.summary.appended_files;
            d.value += d.summary.wb_comments;
            d.value += d.summary.wb_messages;
            d.value += d.summary.receiver_comments;
            d.value += d.summary.receiver_messages;
          }
      });

      var colorScale = d3.scale.quantile()
          .domain([0, buckets - 1, d3.max(data, function (d) { return d.value; })])
          .range(colors);

      d3.selectAll("#chart > *").remove();

      var svg = d3.select("#chart").append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
          .append("g")
          .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      var heatMap = svg.selectAll(".hour")
          .data(data)
          .enter().append("rect")
          .attr("x", function(d) { return (d.hour) * gridSize; })
          .attr("y", function(d) { return (d.day) * gridSize; })
          .attr("rx", 4)
          .attr("ry", 4)
          .attr("class", "hour bordered")
          .attr("width", gridSize)
          .attr("height", gridSize)
          .style("fill", function(d) {
              return colors[0];
          }).on("mouseenter", function(d) {
              if (d.valid === 0) {
                $scope.blob = d;
                $scope.$apply();
              }
          }).on("mouseleave", function(d) {
              $scope.blob = undefined;
              $scope.$apply();
          });

      heatMap.transition().duration(600)
          .style("fill", function(d) {
              if (d.valid === -1) {
                  return 'white';
              }

              if (d.valid === -2) {
                  return 'yellow';
              }

              if (d.valid === -3) {
                  return 'red';
              }

              return colorScale(d.value);
          });

      heatMap.append("title").text(function(d) {
          // if strings are updated here remember to update client/translation.html to push them on transifex
          if (d.valid === -1) {
              return $filter('translate')('Missing data') + ':\n' + $filter('translate')('no stats available for this hour.');
          } else if (d.valid === -2) {
              return $filter('translate')('Missing data') + ':\n' + $filter('translate')('no stats available for the future.');
          } else if (d.valid === -3) {
              return $filter('translate')('Missing data') + ':\n' + $filter('translate')('no stats available for current hour; check activities page.');
          } else {
              return $filter('translate')('Activities') + ': ' + d.value;
          }
      });

      var legend = svg.selectAll(".legend")
          .data([0].concat(colorScale.quantiles()), function(d) { return d; })
          .enter().append("g")
          .attr("class", "legend");

      legend.append("rect")
          .attr("x", function(d, i) { return legendElementWidth * i; })
          .attr("y", height)
          .attr("width", legendElementWidth)
          .attr("height", gridSize / 2)
          .style("fill", function(d, i) {
              return colors[i];
          });

      legend.append("text")
         .attr("class", "mono")
         .text(function(d) { return "≥ " + Math.round(d); })
         .attr("x", function(d, i) { return legendElementWidth * i; })
         .attr("y", height + gridSize);

    };

    $scope.show_stats = function(stats) {
      show_data(stats.heatmap);
      $scope.week = stats.week;
      $scope.complete = stats.complete;
    };

    $scope.update_week = function () {
        if ($scope.week_delta === undefined || $scope.week_delta > 0) {
            $scope.week_delta = 0;
        }

        var delta = Math.abs($scope.week_delta);

        $scope.stats = StatsCollection.get({week_delta: delta}, $scope.show_stats);
    };

    $scope.increment_week = function() {
      if ($scope.week_delta < 0) {
        $scope.week_delta += 1;
        $scope.update_week();
      }
    };

    $scope.decrement_week = function() {
      $scope.week_delta -= 1;
      $scope.update_week();
    };

    $scope.update_week();

}]);

GLClient.controller('AnomaliesCtrl', ['$scope', 'AnomaliesCollection',
  function($scope, AnomaliesCollection) {

    $scope.showLevel = true;
    $scope.anomalies = AnomaliesCollection.query();
}]);

GLClient.controller('ActivitiesCtrl', ['$scope', 'ActivitiesCollection',
  function($scope, ActivitiesCollection) {

    $scope.activities = ActivitiesCollection.query();
}]);

GLClient.controller('AdminShorturlAddCtrl', ['$scope', 'CONSTANTS', function($scope, CONSTANTS) {
    $scope.shortener_shorturl_regexp = CONSTANTS.shortener_shorturl_regexp;
    $scope.shortener_longurl_regexp = CONSTANTS.shortener_longurl_regexp;

    $scope.dummy_new_shorturl = {
      'shorturl': '/s/',
      'longurl': '/'
    };

    $scope.new_shorturl = angular.copy($scope.dummy_new_shorturl);

    $scope.add_shorturl = function() {
      var shorturl = new $scope.admin.new_shorturl();

      shorturl.shorturl = $scope.new_shorturl.shorturl;
      shorturl.longurl = $scope.new_shorturl.longurl;

      shorturl.$save(function(new_shorturl){
        $scope.admin.shorturls.push(new_shorturl);
        $scope.new_shorturl = angular.copy($scope.dummy_new_shorturl);
      });
    };
}]);

GLClient.controller('AdminShorturlEditCtrl', ['$scope', 'AdminShorturlResource',
  function($scope, AdminShorturlResource) {
    $scope.delete_shorturl = function(shorturl) {
      AdminShorturlResource['delete']({
        id: shorturl.id
      }, function(){
        var idx = $scope.admin.shorturls.indexOf(shorturl);
        $scope.admin.shorturls.splice(idx, 1);
      });
    };
}]);

GLClient.controller('SubmissionCtrl',
    ['$scope', '$rootScope', '$filter', '$location', '$timeout', '$uibModal', '$anchorScroll', 'Submission',
      function ($scope, $rootScope, $filter, $location, $timeout, $uibModal, $anchorScroll, Submission) {
  $scope.context_id = $location.search().context || undefined;
  $scope.receivers_ids = $location.search().receivers || [];
  $scope.contexts_selectable = $location.search().contexts_selectable;
  $scope.receivers_selectable = $location.search().receivers_selectable;

  $scope.problemToBeSolved = false;
  $scope.problemModal = undefined;

  $scope.problemSolved = function() {
    $scope.problemModal = undefined;
    $scope.submission._token.$update(function(token) {
      $scope.submission._token = token;
      $scope.problemToBeSolved = $scope.submission._token.human_captcha !== false;
      if ($scope.problemToBeSolved) {
        $scope.openProblemDialog($scope.submission);
      }
    });
  };

  $scope.openProblemDialog = function(submission){
    if ($scope.problemModal) {
      $scope.problemModal.dismiss();
    }

    var args = {
      submission: submission,
      problemSolved: $scope.problemSolved
    };

    $scope.problemModal = $scope.openConfirmableModalDialog('views/partials/captchas.html', args);

    $scope.problemModal.result.then(
       function(result) { $scope.problemSolved($scope.submission); },
       function(result) { }
    );
  };

  if ($scope.receivers_ids) {
    try {
      $scope.receivers_ids = JSON.parse($scope.receivers_ids);
    }
    catch(err) {
      $scope.receivers_ids = [];
    }
  }

  $scope.contexts_selectable = !($scope.contexts_selectable === "false" && $scope.context_id);

  $scope.receivers_selectable = !($scope.receivers_selectable === "false" && $scope.receivers_ids);

  if ($scope.node.show_contexts_in_alphabetical_order) {
    $scope.contextsOrderPredicate = 'name';
  } else {
    $scope.contextsOrderPredicate = 'presentation_order';
  }

  $scope.public_contexts = $filter('filter')($rootScope.contexts, {'show_context': true});
  $scope.public_contexts = $filter('orderBy')($scope.public_contexts, $scope.contextsOrderPredicate);

  var startCountdown = function() {
    $scope.submission.wait = true;
    $scope.submission.pow = false;

    $scope.submission.countdown = $scope.submission._token.start_validity_secs;

    var countDown = function () {
      $scope.submission.countdown -= 1;
      if ($scope.submission.countdown <= 0) {
        $scope.submission.wait = false;
      } else {
        $timeout(countDown, 1000);
      }
    };

    countDown();
  };

  $scope.selectable = function () {
    if ($scope.submission.context.maximum_selectable_receivers === 0) {
      return true;
    }

    return $scope.submission.count_selected_receivers() < $scope.submission.context.maximum_selectable_receivers;
  };

  $scope.switch_selection = function (receiver) {
    if (receiver.configuration !== 'default' || (!$scope.node.allow_unencrypted && receiver.pgp_key_status !== 'enabled')) {
      return;
    }

    if ($scope.submission.receivers_selected[receiver.id] || $scope.selectable()) {
      $scope.submission.receivers_selected[receiver.id] = !$scope.submission.receivers_selected[receiver.id];
    }
  };

  $scope.getCurrentStepIndex = function() {
    return $scope.selection;
  };

  $scope.goToStep = function(index) {
    $scope.selection = index;
  };

  $scope.firstStepIndex = function() {
    return $scope.skip_first_step ? 0 : -1;
  };

  $scope.lastStepIndex = function() {
    return $scope.selected_context.questionnaire.steps.length - 1;
  };

  $scope.hasNextStep = function(){
    if ($scope.selected_context === undefined) {
      return false;
    }

    return $scope.selection < $scope.lastStepIndex();
  };

  $scope.hasPreviousStep = function(){
    if ($scope.selected_context === undefined) {
      return false;
    }

    return $scope.selection > $scope.firstStepIndex();
  };

  $scope.checkForMandatoryFields = function() {
    try {
      // find the first invalid element
      var form = document.getElementById('step-' + $scope.selection);
      var firstInvalid = form.querySelector('.inputelem.ng-invalid');

      // if we find one, set focus
      if (firstInvalid) {
        firstInvalid.focus();
        return false;
      }
    } catch(err) { }

    return true;
  };

  $scope.incrementStep = function() {
    if ($scope.selection >=0 &&
        $scope.submission.context.questionnaire.steps_navigation_requires_completion &&
        !$scope.checkForMandatoryFields()) {
      return;
    }

    if ($scope.hasNextStep()) {
      for (var i = $scope.selection + 1; i <= $scope.lastStepIndex(); i++) {
        if ($scope.stepIsTriggered($scope.submission.context.questionnaire.steps[i])) {
          $scope.selection = i;
          $anchorScroll('top');
          break;
        }
      }
    }
  };

  $scope.decrementStep = function() {
    if ($scope.hasPreviousStep()) {
      for (var i = $scope.selection - 1; i >= $scope.firstStepIndex(); i--) {
        if (i === -1 || $scope.stepIsTriggered($scope.submission.context.questionnaire.steps[i])) {
          $scope.selection = i;
          $anchorScroll('top');
          break;
        }
      }
    }
  };

  $scope.fileupload_url = function() {
    if (!$scope.submission) {
      return;
    }

    return 'submission/' + $scope.submission._token.id + '/file';
  };

  $scope.calculateScoreRecursively = function(field, entry) {
    var score = 0;

    if (['selectbox', 'multichoice'].indexOf(field.type) !== -1) {
      for(var i=0; i<field.options.length; i++) {
        if (entry['value'] === field.options[i].id) {
          score += field.options[i].score_points;
        }
      }
    }

    if (field.type === 'checkbox') {
      for(var i=0; i<field.options.length; i++) {
        if (entry[field.options[i].id] === true) {
          score += field.options[i].score_points;
        }
      }
    }

    angular.forEach(field.children, function(child) {
      angular.forEach(entry[child.id], function(entry) {
        score += $scope.calculateScoreRecursively(child, entry);
      });
    });

    return score;
  };

  $scope.calculateScore = function() {
    if (!$scope.node.enable_experimental_features) {
      return 0;
    }

    var score = 0;

    angular.forEach($scope.submission.context.questionnaire.steps, function(step) {
      angular.forEach(step.children, function(field) {
        angular.forEach($scope.answers[field.id], function(entry) {
          score += $scope.calculateScoreRecursively(field, entry);
        });
      });
    });

    return score;
  };

  $scope.prepare_field_answers_structure = function(field) {
    if (field.answers_structure === undefined) {
      field.answer_structure = {};
      if (field.type === 'fieldgroup') {
        angular.forEach(field.children, function(child) {
          field.answer_structure[child.id] = [$scope.prepare_field_answers_structure(child)];
        });
      }
    }

    return field.answer_structure;
  };

  $scope.prepareSubmission = function(context, receivers_ids) {
    $scope.answers = {};
    $scope.uploads = {};

    // iterations over steps require the steps array to be ordered
    context.questionnaire.steps = $filter('orderBy')(context.questionnaire.steps, 'presentation_order');

    angular.forEach(context.questionnaire.steps, function(field) {
      angular.forEach(field.children, function(child) {
        $scope.answers[child.id] = [angular.copy($scope.prepare_field_answers_structure(child))];
      });
    });

    $scope.$watch('answers', function(){
      $scope.submission._submission.total_score = $scope.calculateScore();
    }, true);

    $scope.submission.create(context.id, receivers_ids, function () {
      startCountdown();

      $scope.problemToBeSolved = $scope.submission._token.human_captcha !== false;

      if ($scope.node.enable_proof_of_work) {
        if (typeof window.Worker === 'undefined') {
          $scope.browserNotCompatible();
          return;
        }

        var worker = new Worker('js/crypto/proof-of-work.worker.js');

        worker.onmessage = function(e) {
          $scope.submission._token.proof_of_work_answer = e.data;
          $scope.submission._token.$update(function(token) {
            $scope.submission._token = token;
            $scope.submission.pow = true;
          });

          worker.terminate();
        };

        worker.postMessage({
          pow: $scope.submission._token.proof_of_work
        });
      } else {
        $scope.submission.pow = true;
      }

      if ($scope.problemToBeSolved) {
        $scope.openProblemDialog($scope.submission);
      }

      if ($scope.submission.context.show_receivers_in_alphabetical_order) {
        $scope.receiversOrderPredicate = 'name';
      } else {
        $scope.receiversOrderPredicate = 'presentation_order';
      }

      if ((!$scope.receivers_selectable || !$scope.submission.context.allow_recipients_selection)) {
        $scope.skip_first_step = true;
        $scope.selection = 0;
      } else {
        $scope.skip_first_step = false;
        $scope.selection = -1;
      }
    });
  };

  $scope.completeSubmission = function() {
    $scope.submission._submission.answers = $scope.answers;
    $scope.submission.submit();
  };

  $scope.stepIsTriggered = function(step) {
    if (!$scope.node.enable_experimental_features) {
      return true;
    }

    if (step.triggered_by_score > $scope.submission._submission.total_score) {
      return false;
    }

    if (step.triggered_by_options.length === 0) {
      return true;
    }

    for (var i=0; i<step.triggered_by_options.length; i++) {
      if (step.triggered_by_options[i].option === $scope.answers[step.triggered_by_options[i].field][0]['value']) {
        return true;
      }
    }

    return false;
  };

  $scope.fieldIsTriggered = function(field) {
    if (!$scope.node.enable_experimental_features) {
      return true;
    }

    if (field.triggered_by_score > $scope.submission._submission.total_score) {
      return false;
    }

    if (field.triggered_by_options.length === 0) {
      return true;
    }

    for (var i=0; i<field.triggered_by_options.length; i++) {
      if (field.triggered_by_options[i].option === $scope.answers[field.triggered_by_options[i].field][0]['value']) {
        return true;
      }
    }

    return false;
  };

  new Submission(function(submission) {
    $scope.submission = submission;

    var context = null;

    if ($scope.context_id) {
      context = $filter('filter')($scope.contexts,
                                  {"id": $scope.context_id})[0];
    } else if ($scope.public_contexts.length == 1) {
      context = $scope.public_contexts[0];
    }

    if (context) {
      $scope.selected_context = context;
    }

    // Watch for changes in certain variables
    $scope.$watch('selected_context', function (newVal, oldVal) {
      if ($scope.submission && $scope.selected_context) {
        $scope.prepareSubmission($scope.selected_context, []);
      }
    });

  });
}]).
controller('SubmissionStepCtrl', ['$scope', '$filter', 'fieldsUtilities',
  function($scope, $filter, fieldsUtilities) {
  $scope.fields = $scope.step.children;

  $scope.rows = fieldsUtilities.splitRows($scope.fields);

  $scope.status = {
    opened: false
  };
}]).
controller('SubmissionFieldCtrl', ['$scope', 'fieldsUtilities', function ($scope, fieldsUtilities) {
  $scope.getClass = function(field, row_length) {
    if (field.width !== 0) {
      return "col-md-" + field.width;
    }

    return "col-md-" + ((row_length > 12) ? 1 : (12 / row_length));
  };

  $scope.getAnswersEntries = function(entry) {
    if (entry === undefined) {
      return $scope.answers[$scope.field.id];
    }

    return entry[$scope.field.id];
  };

  $scope.addAnswerEntry = function(entries) {
    entries.push(angular.copy($scope.field.answer_structure));
  };

  $scope.fields = $scope.field.children;
  $scope.rows = fieldsUtilities.splitRows($scope.fields);
  $scope.entries = $scope.getAnswersEntries($scope.entry);

  $scope.status = {
    opened: false
  };

  $scope.open = function() {
    $scope.status.opened = true;
  };

  $scope.validateRequiredCheckbox = function(field, entry) {
    if (!field.required) {
      return true;
    }

    for (var i=0; i<field.options.length; i++) {
      if (entry[field.options[i].id] && entry[field.options[i].id] === true) {
        return true;
      }
    }

    return false;
  };
}]);

GLClient.controller('ReceiptController', ['$scope', '$location', 'Authentication',
  function($scope, $location, Authentication) {
    var format_keycode = function(keycode) {
      var ret = keycode;
      if (keycode && keycode.length === 16) {
        ret =  keycode.substr(0, 4) + ' ' +
               keycode.substr(4, 4) + ' ' +
               keycode.substr(8, 4) + ' ' +
               keycode.substr(12, 4);
      }

      return ret;

    };

    $scope.keycode = format_keycode(Authentication.keycode);
    $scope.formatted_keycode = format_keycode($scope.keycode);
}]);

GLClient.controller('LoginCtrl', ['$scope', '$location', function($scope, $location) {
  // If already logged in, just go to the landing page.
  // If no longer authenticated on the server (server session expired or some form of malicious hack),
  // the API call will fail, clearing the client session and comming back to this controller without a landing page.
  if ($scope.session !== undefined && $scope.session.auth_landing_page) {
    $location.path($scope.session.auth_landing_page);
  }

  $scope.loginUsername = "";
  $scope.loginPassword = "";

  $scope.simplifiedLogin = !!($location.path() === '/login' && $scope.node.simplified_login);
}]);

GLClient.controller('AutoLoginCtrl', ['$scope', '$location', function($scope, $location) {
  function receiveMessage(event) {
    window.removeEventListener('message', this, false);
    var receipt = event.data.replace(/\s+/g, '');
    $scope.login('whistleblower', receipt);
  }

  window.addEventListener("message", receiveMessage, false);

  var arr = window.parent.location.href.split("/");
  var parent_domain = arr[0] + "//" + arr[2];
  window.parent.postMessage("Ready", parent_domain);
}]);

GLClient.controller('UserCtrl',
  ['$scope', '$rootScope', '$location', 'WhistleblowerTip',
  function($scope, $rootScope, $location, WhistleblowerTip) {

  $scope.$watch("language", function (newVal, oldVal) {
    if (newVal && newVal !== oldVal) {
      $rootScope.language = $scope.language;
    }
  });

  $scope.view_tip = function(keycode) {
    keycode = keycode.replace(/\D/g,'');
    new WhistleblowerTip(keycode, function() {
      $location.path('/status');
    });
  };
}]);

GLClient.controller('ForcedPasswordChangeCtrl', ['$scope', '$rootScope', '$location', 'changePasswordWatcher',
  function($scope, $rootScope, $location, changePasswordWatcher) {

    changePasswordWatcher($scope, "preferences.old_password",
        "preferences.password", "preferences.check_password");

    $scope.pass_save = function () {
      // avoid changing any PGP setting
      $scope.preferences.pgp_key_remove = false;
      $scope.preferences.pgp_key_public = '';

      $scope.preferences.$update(function () {
        $location.path($scope.session.auth_landing_page);
      });
    };
}]);

angular.module('GLClient').run(['$templateCache', function($templateCache) {
  'use strict';

  $templateCache.put('app.html',
    '<div id="BodyDefault" data-ng-if="!isHomepage() || !node.custom_homepage">\n' +
    '  <div id="PrivacyBadgeBox" data-ng-if="showPrivacyBadge()" data-ng-include="\'views/partials/privacybadge.html\'"></div>\n' +
    '  <div id="HeaderBox" data-ng-if="!embedded" data-ng-include="\'views/partials/header.html\'"></div>\n' +
    '  <div id="MessagesConsoleBox" data-ng-include="\'views/partials/messageconsole.html\'"></div>\n' +
    '\n' +
    '  <div id="ContentBox" class="container-fluid" data-ng-view=""></div>\n' +
    '\n' +
    '  <div id="FooterBox" data-ng-show="!embedded" data-ng-include="\'views/partials/footer.html\'"></div>\n' +
    '</div>\n' +
    '\n' +
    '<div id="BodyCustom" data-ng-if="isHomepage() && node.custom_homepage" data-ng-controller="HomeCtrl">\n' +
    '  <div data-ng-include="\'static/custom_homepage.html\'"></div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/activities.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="row">\n' +
    '      <div class="col-md-12">\n' +
    '        <table class="table table-condensed table-striped" id="RecentEventList" data-ng-init="sortKey = \'time\'; sortReverse=true;">\n' +
    '        <thead>\n' +
    '            <tr>\n' +
    '              <th class="col-md-2" data-ng-click="sortKey = \'event_id\'; sortReverse = !sortReverse">\n' +
    '                <span data-translate>Event ID</span>\n' +
    '                <span data-ng-show="sortKey == \'event_id\' && !sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortKey == \'event_id\' && sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </th>\n' +
    '              <th class="col-md-2" data-ng-click="sortKey = \'time\'; sortReverse = !sortReverse">\n' +
    '                <span data-translate>Time</span>\n' +
    '                <span data-ng-show="sortKey == \'time\' && !sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortKey == \'time\' && sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </th>\n' +
    '              <th class="col-md-2" data-ng-click="sortKey = \'event\'; sortReverse = !sortReverse">\n' +
    '                <span data-translate>Event</span>\n' +
    '                <span data-ng-show="sortKey == \'event\' && !sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortKey == \'event\' && sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </th>\n' +
    '              <th class="col-md-2" data-ng-click="sortKey = \'response_time\'; sortReverse = !sortReverse">\n' +
    '                <span data-translate>Response time</span>\n' +
    '                <span data-ng-show="sortKey == \'response_time\' && !sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortKey == \'response_time\' && sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </th>\n' +
    '            </tr>\n' +
    '          </thead>\n' +
    '          <tbody>\n' +
    '            <tr data-ng-repeat="activity in activities | orderBy:sortKey:sortReverse">\n' +
    '              <td class="col-md-2">{{activity.id}}</td>\n' +
    '              <td class="col-md-2">{{activity.creation_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '              <td class="col-md-2">{{activity.event}}</td>\n' +
    '              <td class="col-md-2">{{activity.duration}}</td>\n' +
    '            </tr>\n' +
    '          </tbody>\n' +
    '        </table>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/advanced.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="row">\n' +
    '      <form name="advancedForm" data-ng-controller="AdminAdvancedCtrl" novalidate>\n' +
    '        <uib-tabset class="tab-content">\n' +
    '          <uib-tab data-ng-repeat="tab in tabs" heading="{{tab.title | translate}}" active="tab.active" disable="tab.disabled">\n' +
    '          <div data-ng-include="tab.template" data-ng-controller="tab.ctrl"></div>\n' +
    '          </uib-tab>\n' +
    '        </uib-tabset>\n' +
    '\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-12">\n' +
    '            <div class="form-group">\n' +
    '              <button class="btn btn-success"\n' +
    '                      data-ng-disabled="advancedForm.$invalid"\n' +
    '                      data-ng-click="updateNode(admin.node)" type="submit">\n' +
    '                <i class="glyphicon glyphicon-ok"></i>\n' +
    '                <span data-translate>Save</span>\n' +
    '              </button>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '\n' +
    '      </form>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/advanced/tab1.html',
    '<div class="row">\n' +
    '  <div class="col-md-6">\n' +
    '    <label><span data-translate>Software version:</span> {{admin.node.version}}</label>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.disable_submissions" type="checkbox" />\n' +
    '        <span data-translate>Disable submissions</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.allow_unencrypted" data-ng-click="open_modal_allow_unencrypted()" type="checkbox" />\n' +
    '        <span data-translate>Enable insecure configuration without PGP encryption</span>\n' +
    '      </label>\n' +
    '      <div data-ng-if="admin.node.allow_unencrypted">\n' +
    '        <span class="label label-danger" data-translate>Danger!</span>\n' +
    '        <span data-translate>By enabling this option, the system will be storing the submitted files unencrypted on your server.</span>\n' +
    '        <span data-translate>This happens whenever encryption is unavailable.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.disable_encryption_warnings" type="checkbox" />\n' +
    '       <span data-translate>Disable the warning messages that are shown when encryption is not available</span>\n' +
    '      </label>\n' +
    '      <div data-ng-if="admin.node.disable_encryption_warnings">\n' +
    '        <span class="label label-danger" data-translate>Danger!</span>\n' +
    '        <span data-translate>This setting affects the security of the users and must not be used in production.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.allow_iframes_inclusion" type="checkbox" />\n' +
    '        <span data-translate>Allow other websites to include the platform inside iframes</span>\n' +
    '      </label>\n' +
    '      <div data-ng-if="admin.node.allow_iframes_inclusion">\n' +
    '        <span class="label label-danger" data-translate>Danger!</span>\n' +
    '        <span data-translate>By enabling this option, you are allowing other websites to include the platform inside iframes; this could potentially be used to endanger the platform or intercept users\' communications</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.can_postpone_expiration" type="checkbox" />\n' +
    '        <span data-translate>Allow recipients to postpone expiration date of the submission</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.can_delete_submission" type="checkbox" />\n' +
    '        <span data-translate>Allow recipients to delete submissions</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.can_grant_permissions" type="checkbox" />\n' +
    '        <span data-translate>Allow recipients to grant permissions to whistleblowers on specific submissions</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <!--\n' +
    '\n' +
    '    Commented out as the feature it is not implemented/merged in the backend.\n' +
    '    The code on the GLClient is complete and putted here in order to allow user to translate the feature texts on transifex\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.indexing" type="checkbox" />\n' +
    '        <span data-translate>Enable search engines indexing</span>\n' +
    '      </label>\n' +
    '      <div>\n' +
    '        <span class="label label-info" data-translate>Enabled</span>\n' +
    '        <span data-translate>Search engine spiders will be allowed to index the application.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    -->\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.ahmia" type="checkbox" />\n' +
    '        <span data-translate>Enable Ahmia publishing</span>\n' +
    '      </label>\n' +
    '      <div data-translate>By enabling this option, server metadata will be published using Ahmia JSON format.</div>\n' +
    '      <div data-ng-if="admin.node.ahmia">\n' +
    '        <span class="label label-info" data-translate>Enabled</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group" data-ng-if="!admin.node.disable_privacy_badge">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.enable_custom_privacy_badge" type="checkbox" />\n' +
    '        <span data-translate>Enable custom privacy panel</span>\n' +
    '      </label>\n' +
    '      <div data-ng-if="admin.node.enable_custom_privacy_badge">\n' +
    '        <span class="label label-info" data-translate>Enabled</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group" data-ng-if="!admin.node.disable_privacy_badge && admin.node.enable_custom_privacy_badge">\n' +
    '      <label data-translate>Custom privacy panel</label>\n' +
    '      <label>(<span data-translate>Text shown when the whistleblower is using Tor</span>)</label>\n' +
    '      <div>\n' +
    '        <input class="form-control" data-ng-model="admin.node.custom_privacy_badge_tor" type="text" />\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group" data-ng-if="!admin.node.disable_privacy_badge && admin.node.enable_custom_privacy_badge">\n' +
    '      <label data-translate>Custom privacy panel</label>\n' +
    '      <label>(<span data-translate>Text shown when the whistleblower is not using Tor</span>)</label>\n' +
    '      <div>\n' +
    '        <input class="form-control" data-ng-model="admin.node.custom_privacy_badge_none" type="text" />\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.disable_privacy_badge" type="checkbox" />\n' +
    '        <span data-translate>Disable the privacy panel</span>\n' +
    '      </label>\n' +
    '      <div data-translate>By checking this box the whistleblower will not be informed of their privacy level. This information is usually displayed on top of everypage and indicates how, and if, the identity of the whistleblower is\n' +
    'protected.</div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group" data-ng-if="!admin.node.disable_security_awareness_badge">\n' +
    '      <label data-translate>Security awareness panel title</label>\n' +
    '      <div>\n' +
    '        <input class="form-control" data-ng-model="admin.node.security_awareness_title" type="text" />\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group" data-ng-if="!admin.node.disable_security_awareness_badge">\n' +
    '      <label data-translate>Security awareness panel text</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.security_awareness_text"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group" data-ng-if="!admin.node.disable_security_awareness_badge">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.disable_security_awareness_questions" type="checkbox">\n' +
    '        <span data-translate>Disable the security awareness panel questions</span>\n' +
    '      </label>\n' +
    '      <div data-translate>When disabled, the panel can still provide a textual warning to the whistleblower. If non-anonymous submissions are permitted, this message could educate about what risks this entails.</div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.disable_security_awareness_badge" type="checkbox" />\n' +
    '        <span data-translate>Disable the security awareness panel</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.disable_key_code_hint" type="checkbox" />\n' +
    '        <span data-translate>Disable the key code hint</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.disable_donation_panel" type="checkbox" />\n' +
    '        <span data-translate>Disable the donation panel</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.enable_captcha" type="checkbox" />\n' +
    '        <span data-translate>Enable CAPTCHA mechanism</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.enable_proof_of_work" type="checkbox" />\n' +
    '        <span data-translate>Enable proof of work mechanism</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.simplified_login" type="checkbox" />\n' +
    '        <span data-translate>Enable simplified login for recipients</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Limit for single-line inputs, in characters</label>\n' +
    '      <input class="form-control" data-ng-model="admin.node.maximum_namesize" type="number" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Limit for multi-line inputs, in characters</label>\n' +
    '      <input class="form-control" data-ng-model="admin.node.maximum_textsize" type="number" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <span data-translate>Size limit for file attachments</span>\n' +
    '        <span data-translate>in megabytes</span>\n' +
    '      </label>\n' +
    '      <input class="form-control" data-ng-model="admin.node.maximum_filesize" type="number" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Minimum time before accepting a submission, in seconds</label>\n' +
    '      <input class="form-control" data-ng-model="admin.node.submission_minimum_delay" type="number" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Maximum submission duration, in seconds</label>\n' +
    '      <input class="form-control" data-ng-model="admin.node.submission_maximum_ttl" type="number" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.enable_experimental_features" type="checkbox" />\n' +
    '        <span data-translate>Enable experimental features</span>\n' +
    '      </label>\n' +
    '      <div data-ng-if="admin.node.enable_experimental_features">\n' +
    '        <span class="label label-danger" data-translate>Warning!</span>\n' +
    '        <span data-translate>The experimental features may be less stable or even not work at all; enable this option at your own risk. Support for these features may vary and they may be removed in the future.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/advanced/tab2.html',
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-model="admin.node.tor2web_admin" type="checkbox">\n' +
    '      <label data-translate>Allow admin access via HTTPS</label>\n' +
    '    </div>\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-model="admin.node.tor2web_custodian" type="checkbox">\n' +
    '      <label data-translate>Allow custodian access via HTTPS</label>\n' +
    '    </div>\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-model="admin.node.tor2web_receiver" type="checkbox">\n' +
    '      <label data-translate>Allow recipient access via HTTPS</label>\n' +
    '    </div>\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-model="admin.node.tor2web_whistleblower" type="checkbox">\n' +
    '      <label data-translate>Allow whistleblower submissions via HTTPS</label>\n' +
    '      <div data-ng-show="admin.node.tor2web_whistleblower">\n' +
    '        <span data-translate>This won\'t preserve whistleblower\'s anonymity while preserving submission confidentiality.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-init="admin.node.tor2web_unauth" data-ng-model="admin.node.tor2web_unauth" type="checkbox">\n' +
    '      <label data-translate>Allow access to public resources via HTTPS</label>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/advanced/tab3.html',
    '<div class="row">\n' +
    '  <div class="col-md-8">\n' +
    '    <table class="table">\n' +
    '      <thead>\n' +
    '        <tr>\n' +
    '          <th></th>\n' +
    '          <th class="col-md-2" data-translate>Low risk</th>\n' +
    '          <th class="col-md-2" data-translate>Medium risk</th>\n' +
    '          <th class="col-md-2" data-translate>High risk</th>\n' +
    '        </tr>\n' +
    '      </thead>\n' +
    '      <tbody>\n' +
    '        <tr>\n' +
    '          <td>\n' +
    '            <label>\n' +
    '              <span data-translate>Available disk space</span>\n' +
    '              <span>(</span><span data-translate>in megabytes</span><span>)</span>\n' +
    '            </label>\n' +
    '          </td>\n' +
    '          <td><input class="form-control" data-ng-model="admin.node.threshold_free_disk_megabytes_low" type="number" /></td>\n' +
    '          <td><input class="form-control" data-ng-model="admin.node.threshold_free_disk_megabytes_medium" type="number" /></td>\n' +
    '          <td><input class="form-control" data-ng-model="admin.node.threshold_free_disk_megabytes_high" type="number" /></td>\n' +
    '        </tr>\n' +
    '        <tr>\n' +
    '          <td>\n' +
    '            <label>\n' +
    '              <span data-translate>Available disk space</span>\n' +
    '              <span>(</span><span data-translate>in percentage</span><span>)</span>\n' +
    '            </label>\n' +
    '          </td>\n' +
    '          <td><input class="form-control" data-ng-model="admin.node.threshold_free_disk_percentage_low" type="number"  min="0" max="100" /></td>\n' +
    '          <td><input class="form-control" data-ng-model="admin.node.threshold_free_disk_percentage_medium" type="number"  min="0" max="100" /></td>\n' +
    '          <td><input class="form-control" data-ng-model="admin.node.threshold_free_disk_percentage_high" type="number"  min="0" max="100" /></td>\n' +
    '        </tr>\n' +
    '      </tbody>\n' +
    '    </table>\n' +
    '\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/anomalies.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="row">\n' +
    '      <div class="col-md-12">\n' +
    '        <div data-translate>This interface shows you the unusual behaviour the system has identified.</div>\n' +
    '        <div data-translate>Anomalies are automatically analysed to identify abuses or unusual usage spikes.</div>\n' +
    '        <div data-translate>Since the platform is not able to distinguish Tor users, it is not possible to perform anomaly detection based on user policies.</div>\n' +
    '        <div data-translate>The currently adopted policy is to check if some thresholds are reached within a 30 seconds observation window.</div>\n' +
    '        <div data-translate>These are the thresholds used to identify anomalous behaviour:</div>\n' +
    '\n' +
    '        <div id="AnomaliesThresholdsSummary" class="infoTable" data-ng-show="showLevel">\n' +
    '          <span class="col-md-3">\n' +
    '            <label data-translate>Failed logins</label>: <span class="label label-info">50</span><br />\n' +
    '            <label data-translate>Successful logins</label>: <span class="label label-info">70</span><br />\n' +
    '          </span>\n' +
    '          <span class="col-md-3">\n' +
    '            <label data-translate>Started submissions</label>: <span class="label label-info">100</span><br />\n' +
    '            <label data-translate>Completed submissions</label>: <span class="label label-info">50</span><br />\n' +
    '          </span>\n' +
    '          <span class="col-md-3">\n' +
    '            <label data-translate>Whistleblower comments</label>: <span class="label label-info">20</span><br />\n' +
    '            <label data-translate>Whistleblower messages</label>: <span class="label label-info">20</span><br />\n' +
    '          </span>\n' +
    '          <span class="col-md-3">\n' +
    '            <label data-translate>Recipient comments</label>: <span class="label label-info">30</span><br />\n' +
    '            <label data-translate>Recipient messages</label>: <span class="label label-info">30</span><br />\n' +
    '          </span>\n' +
    '        </div>\n' +
    '\n' +
    '        <br />\n' +
    '        <br />\n' +
    '\n' +
    '        <div id="AnomaliesHistoryTable">\n' +
    '          <table class="table table-condensed table-striped">\n' +
    '            <thead>\n' +
    '              <tr>\n' +
    '                <th class="col-md-2">\n' +
    '                  <span data-translate>Date</span>\n' +
    '                </th>\n' +
    '                <th class="col-md-1">\n' +
    '                  <span data-translate>Alarm level</span>\n' +
    '                </th>\n' +
    '                <th class="col-md-2">\n' +
    '                  <span data-translate>Events</span>\n' +
    '                </th>\n' +
    '              </tr>\n' +
    '            </thead>\n' +
    '            <tbody>\n' +
    '              <tr data-ng-repeat="anomaly in anomalies">\n' +
    '                <td class="col-md-2">{{anomaly.date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '                <td class="col-md-1">{{anomaly.alarm}}</td>\n' +
    '                <td class="col-md-2">\n' +
    '                  <span data-ng-repeat="single_event in anomaly.events">\n' +
    '                    <span class="label label-info">{{single_event.name}}</span> {{single_event.amount}}<br />\n' +
    '                  </span>\n' +
    '                </td>\n' +
    '              </tr>\n' +
    '            </tbody>\n' +
    '          </table>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/content.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="row">\n' +
    '      <form name="contentForm" data-ng-controller="AdminGeneralSettingsCtrl" novalidate>\n' +
    '\n' +
    '        <uib-tabset class="tab-content">\n' +
    '          <uib-tab data-ng-repeat="tab in tabs" heading="{{tab.title | translate}}" active="tab.active" disable="tab.disabled">\n' +
    '          <div data-ng-include="tab.template" data-ng-controller="tab.ctrl"></div>\n' +
    '          </uib-tab>\n' +
    '        </uib-tabset>\n' +
    '\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-6">\n' +
    '            <div class="form-group">\n' +
    '              <button class="btn btn-success"\n' +
    '                      data-ng-disabled="contentForm.$invalid"\n' +
    '                      data-ng-click="updateNode(admin.node)" type="submit">\n' +
    '                <i class="glyphicon glyphicon-ok"></i>\n' +
    '                <span data-translate>Save</span>\n' +
    '              </button>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '\n' +
    '      </form>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/content/tab1.html',
    '<div class="row">\n' +
    '  <div class="col-md-6">\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Project name</label>\n' +
    '      <input class="form-control" data-ng-model="admin.node.name" type="text" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Homepage title</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.header_title_homepage"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Presentation</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.presentation"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Description</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.description"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Footer</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.footer"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Landing page</label>\n' +
    '      <select name="type" class="form-control" data-ng-model="admin.node.landing_page" required>\n' +
    '        <option value="homepage" data-translate>Home Page</option>\n' +
    '        <option value="submissionpage" data-translate>Submission Page</option>\n' +
    '      </select>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Question to solicit possible whistleblowers</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.whistleblowing_question"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Whistleblowing button</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.whistleblowing_button"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Title of the submission page</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.header_title_submissionpage"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Title of the receipt page</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.header_title_receiptpage"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Title of the submission status page</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.header_title_tippage"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Title of the comments widget</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.widget_comments_title"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Title of the messages widget</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.widget_messages_title"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Title of the attachments widget</label>\n' +
    '      <div>\n' +
    '        <textarea class="form-control" data-ng-model="admin.node.widget_files_title"></textarea>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Text shown in front of the context selector</label>\n' +
    '      <input class="form-control" data-ng-model="admin.node.context_selector_label" type="text" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <input data-ng-model="admin.node.show_contexts_in_alphabetical_order" type="checkbox" />\n' +
    '        <span data-translate>Show contexts in alphabetical order</span>\n' +
    '      </label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Tor onion service (URL)</label>\n' +
    '      <input class="form-control" name="hidden_service" data-ng-model="admin.node.hidden_service" data-ng-pattern="tor_regexp" type="text">\n' +
    '      <p class="text-red" data-ng-show="contentForm.hidden_service.$error.pattern">\n' +
    '        <span data-translate>Invalid format for hidden service (similar to http://thirteenchars123.onion)</span>\n' +
    '      </p>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>HTTPS website (URL)</label>\n' +
    '      <input class="form-control" name="public_site" data-ng-model="admin.node.public_site" data-ng-pattern="https_regexp" type="url">\n' +
    '      <p class="text-red" data-ng-show="contentForm.public_site.$error.pattern">\n' +
    '        <span data-translate>Invalid format for public site (similar to https://thirteenchars123.tor2web.org)</span>\n' +
    '      </p>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/content/tab2.html',
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Current project logo</label>\n' +
    '      <div class="imageUpload"\n' +
    '           flow-init="{target: getUploadUrl(\'admin/staticfiles/logo\'), headers: get_auth_headers()}"\n' +
    '           flow-file-added="onFileAdded($event, $file, $flow)"\n' +
    '           flow-files-submitted="$flow.upload()"\n' +
    '           flow-file-success="reload()">\n' +
    '        <div data-ng-controller="AdminImgUploadCtrl">\n' +
    '          <div class="profile" data-ng-mouseenter="openUploader()" data-ng-mouseleave="closeUploader()">\n' +
    '            <div flow-btn>\n' +
    '              <span class="col-md-12 changePicture">\n' +
    '                <span data-translate>Change picture</span>\n' +
    '              </span>\n' +
    '              <img data-ng-src="{{app_logo}}" class="img-thumbnail baseimage">\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div data-ng-if="file_upload_error" class="text-red"><span data-translate>Error:</span> <span>{{file_upload_error}}</span></div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="form-group">\n' +
    '      <label>\n' +
    '        <span data-translate>Graphics customization</span>\n' +
    '        (<span data-translate>CSS</span>)\n' +
    '      </label>\n' +
    '      <div class="well well-large uploadfile" data-ng-controller="AdminFileUploadCtrl">\n' +
    '        <span flow-init="{target: getUploadUrl(\'admin/staticfiles/custom_stylesheet\'), headers: get_auth_headers()}"\n' +
    '              flow-files-submitted="$flow.upload()"\n' +
    '              flow-file-success="reload()">\n' +
    '          <div class="btn btn-success fileinput-button">\n' +
    '            <span class="uploadfile" flow-btn>\n' +
    '              <span class="glyphicon glyphicon-plus"></span>\n' +
    '              <span data-translate>Upload</span>\n' +
    '            </span>\n' +
    '          </div>\n' +
    '        </span>\n' +
    '        <span data-ng-if="fileExists(\'custom_stylesheet.css\')">\n' +
    '          <a class="btn btn-primary" href="s/custom_stylesheet.css" download="custom_stylesheet.css">\n' +
    '            <span class="glyphicon glyphicon-download"></span>\n' +
    '            <span data-translate>Download</span>\n' +
    '          </a>\n' +
    '          <a class="btn btn-danger" data-ng-click="perform_delete(\'admin/staticfiles/custom_stylesheet.css\')">\n' +
    '            <span class="glyphicon glyphicon-trash"></span>\n' +
    '            <span data-translate>Delete</span>\n' +
    '          </a>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '      <label>\n' +
    '        <span data-translate>Graphics customization</span>\n' +
    '        (<span data-translate>Home Page</span>)\n' +
    '      </label>\n' +
    '      <div class="well well-large uploadfile" data-ng-controller="AdminFileUploadCtrl">\n' +
    '        <span flow-init="{target: getUploadUrl(\'admin/staticfiles/custom_homepage\'), headers: get_auth_headers()}"\n' +
    '              flow-files-submitted="$flow.upload()"\n' +
    '              flow-file-success="reload()">\n' +
    '          <div class="btn btn-success fileinput-button">\n' +
    '            <span class="uploadfile" flow-btn>\n' +
    '              <span class="glyphicon glyphicon-plus"></span>\n' +
    '              <span data-translate>Upload</span>\n' +
    '            </span>\n' +
    '          </div>\n' +
    '        </span>\n' +
    '        <span data-ng-show="fileExists(\'custom_homepage.html\')">\n' +
    '          <a class="btn btn-primary" href="s/custom_homepage.html" download="custom_homepage.html">\n' +
    '            <span class="glyphicon glyphicon-download"></span>\n' +
    '            <span data-translate>Download</span>\n' +
    '          </a>\n' +
    '          <a class="btn btn-danger" data-ng-click="perform_delete(\'admin/staticfiles/custom_homepage.html\')">\n' +
    '            <span class="glyphicon glyphicon-trash"></span>\n' +
    '            <span data-translate>Delete</span>\n' +
    '          </a>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '      <label data-translate>Upload custom file</label>\n' +
    '      <br />\n' +
    '      <span data-translate>The file will be available at URL: /s/$filename</span>\n' +
    '      <div class="well well-large uploadfile" data-ng-controller="AdminFileUploadCtrl">\n' +
    '        <span flow-init="{target: getUploadUrl(\'admin/staticfiles/customization\'), headers: get_auth_headers()}"\n' +
    '              flow-files-submitted="$flow.upload()"\n' +
    '              flow-file-success="reload()">\n' +
    '          <div class="btn btn-success fileinput-button">\n' +
    '            <span class="uploadfile" flow-btn>\n' +
    '              <span class="glyphicon glyphicon-plus"></span>\n' +
    '              <span data-translate>Upload</span>\n' +
    '            </span>\n' +
    '          </div>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '      <label data-translate>Files</label>\n' +
    '      <br />\n' +
    '      <div class="table-container">\n' +
    '        <table data-ng-show="staticfiles" class="table table-striped" id="fileList">\n' +
    '          <tbody id="fileListBody" data-ng-repeat="file in staticfiles | orderBy:\'filename\'">\n' +
    '            <tr>\n' +
    '              <td>{{file.filename}}</td>\n' +
    '              <td>\n' +
    '                <a class="btn btn-primary" data-ng-href="s/{{file.filename}}" download="{{file.filename}}">\n' +
    '                  <span class="glyphicon glyphicon-download"></span>\n' +
    '                  <span data-translate>Download</span>\n' +
    '                </a>\n' +
    '                <a class="btn btn-danger" data-ng-click="perform_delete(\'admin/staticfiles/\' + file.filename)">\n' +
    '                  <span class="glyphicon glyphicon-trash"></span>\n' +
    '                  <span data-translate>Delete</span>\n' +
    '                </a>\n' +
    '              </td>\n' +
    '            </tr>\n' +
    '          </tbody>\n' +
    '        </table>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n'
  );


  $templateCache.put('views/admin/content/tab3.html',
    '<div class="row">\n' +
    '  <div class="col-md-6">\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Language configuration</label>\n' +
    '      <div data-ng-repeat="language in admin.node.languages_supported | orderBy:\'name\'">\n' +
    '        <div>\n' +
    '          <input data-ng-model="languages_enabled_edit[language.code]" type="checkbox">\n' +
    '          <label>{{language.name}} [{{language.code}}]</label>\n' +
    '          <a data-ng-init="isCollapsed = true" data-ng-click="isCollapsed = !isCollapsed">\n' +
    '            <i class="glyphicon glyphicon-plus-sign" data-ng-show="isCollapsed"></i>\n' +
    '            <i class="glyphicon glyphicon-minus-sign" data-ng-show="!isCollapsed"></i>\n' +
    '          </a>\n' +
    '        </div>\n' +
    '        <div data-ng-show="!isCollapsed">\n' +
    '          <div class="well well-large uploadfile" data-ng-controller="AdminFileUploadCtrl">\n' +
    '            <span flow-init="{target: getUploadUrl_lang(language.code), headers: get_auth_headers()}"\n' +
    '                flow-files-submitted="$flow.upload()"\n' +
    '                flow-file-success="updateReceiverImgReloadUrl()"\n' +
    '                flow-name="flowObj">\n' +
    '              <div class="btn btn-success fileinput-button">\n' +
    '                <span class="uploadfile" flow-btn>\n' +
    '                  <span class="glyphicon glyphicon-plus"></span>\n' +
    '                  <span data-translate>Upload</span>\n' +
    '                </span>\n' +
    '              </div>\n' +
    '            </span>\n' +
    '            <a class="btn btn-primary" data-ng-href="l10n/{{language.code}}.json" download="{{language.code}}.json">\n' +
    '              <span class="glyphicon glyphicon-download"></span>\n' +
    '              <span data-translate>Download</span>\n' +
    '            </a>\n' +
    '            <a class="btn btn-danger" data-ng-click="perform_delete(\'admin/l10n/{{language.code}}.json\')">\n' +
    '              <span class="glyphicon glyphicon-trash"></span>\n' +
    '              <span data-translate>Reset</span>\n' +
    '            </a>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Default language</label>\n' +
    '      <select class="form-control" data-ng-model="admin.node.default_language" data-ng-options="item.code as item.name for item in languages_enabled_selector"></select>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/contexts.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9" data-ng-controller="AdminContextsCtrl">\n' +
    '    <div class="adminConfigSection" data-ng-controller="AdminContextAddCtrl">\n' +
    '      <div class="row">\n' +
    '        <form name="newContext" class="addContext col-md-6" novalidate>\n' +
    '          <div class="editorTitle row">\n' +
    '            <span class="col-md-8">\n' +
    '              <span data-translate>Add new context</span>\n' +
    '            </span>\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Name</label>\n' +
    '            <input name="name" class="form-control" data-ng-model="new_context.name" maxlength="{{node.maximum_namesize}}" type="text" required>\n' +
    '            <div class="text-red" data-ng-show="newContext.name.$error.required">\n' +
    '              <span data-translate>This field is mandatory</span>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <button class="pull-left btn btn-primary" data-ng-disabled="newContext.$invalid" data-ng-click="add_context()" type="submit">\n' +
    '              <i class="glyphicon glyphicon-plus-sign"></i>\n' +
    '              <span data-translate>Add</span>\n' +
    '            </button>\n' +
    '          </div>\n' +
    '        </form>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="adminConfigSection" data-ng-show="admin.contexts.length > 0">\n' +
    '      <div class="editorTitle row">\n' +
    '        <span class="col-md-8">\n' +
    '          <span data-translate>Configured contexts:</span>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '      <div data-ng-repeat="context in admin.contexts | orderBy:\'presentation_order\'">\n' +
    '        <form id="context-{{$index}}" name="editContext" data-ng-controller="AdminContextEditorCtrl" novalidate>\n' +
    '          <div class="configItem contextItem">\n' +
    '            <div class="editorHeader row" data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '              <span class="col-md-7 editorHeaderTitle">\n' +
    '                <span>{{context.name}}</span>\n' +
    '              </span>\n' +
    '              <span class="col-md-5">\n' +
    '                <span class="pull-right">\n' +
    '                  <button\n' +
    '                    class="actionButton actionButtonContextEdit btn btn-xs btn-default"\n' +
    '                    data-ng-show="!editing"\n' +
    '                    data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                    <span data-translate>Edit</span>\n' +
    '                  </button>\n' +
    '                  <button\n' +
    '                    class="actionButton actionButtonContextSave btn btn-xs btn-success"\n' +
    '                    data-ng-show="editing"\n' +
    '                    data-ng-click="save_context(context)">\n' +
    '                    <span data-translate>Save</span>\n' +
    '                  </button>\n' +
    '                  <button\n' +
    '                    class="actionButton actionButtonContextCancel btn btn-xs btn-default"\n' +
    '                    data-ng-show="editing"\n' +
    '                    data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                    <span data-translate>Cancel</span>\n' +
    '                  </button>\n' +
    '                  <button\n' +
    '                    class="actionButton actionButtonContextDelete btn btn-xs btn-danger"\n' +
    '                    data-ng-click="contextDeleteDialog(context); $event.stopPropagation();"\n' +
    '                    popover-placement="right"\n' +
    '                    popover-trigger="mouseenter">\n' +
    '                    <span data-translate>Delete</span>\n' +
    '                  </button>\n' +
    '                  <span data-ng-if="admin.contexts.length > 1">\n' +
    '                    <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveUpAndSave(context); $event.stopPropagation();" uib-popover="{{\'Move up\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                      <i class="glyphicon glyphicon-menu-up"></i>\n' +
    '                    </button>\n' +
    '                    <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveDownAndSave(context); $event.stopPropagation();" uib-popover="{{\'Move down\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                      <i class="glyphicon glyphicon-menu-down"></i>\n' +
    '                    </button>\n' +
    '                  </span>\n' +
    '                </span>\n' +
    '              </span>\n' +
    '            </div>\n' +
    '            <div data-ng-if="editing">\n' +
    '              <hr />\n' +
    '              <div class="row">\n' +
    '                <div class="col-md-6">\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Name</label>\n' +
    '                    <input name="name" class="form-control" maxlength="{{node.maximum_namesize}}" data-ng-model="context.name" type="text" required>\n' +
    '                    <div class="text-red" data-ng-show="editContext.name.$error.required">\n' +
    '                      <span data-translate>This field is mandatory</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Description</label>\n' +
    '                    <div>\n' +
    '                      <textarea name="description" class="form-control" data-ng-model="context.description" maxlength="{{node.maximum_textsize}}"></textarea>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Text shown on top of the interface for selecting recipients</label>\n' +
    '                    <div>\n' +
    '                      <textarea name="description" class="form-control" data-ng-model="context.recipients_clarification" maxlength="{{node.maximum_textsize}}"></textarea>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '                <div class="col-md-6">\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Questionnaire</label>\n' +
    '                    <select class="form-control" data-ng-model="context.questionnaire_id" data-ng-options="item.id as item.name for item in admin.questionnaires"></select>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Recipients</label>\n' +
    '                    <div class="selectionList">\n' +
    '                      <div data-ng-repeat="receiver in admin.receivers"">\n' +
    '                        <div class="row" data-ng-click="toggle(receiver)">\n' +
    '                          <span class="col-md-1">\n' +
    '                            <span data-ng-show="isSelected(receiver)">\n' +
    '                              <i class="glyphicon glyphicon-check"></i>\n' +
    '                            </span>\n' +
    '                            <span data-ng-show="!isSelected(receiver)">\n' +
    '                              <i class="glyphicon glyphicon-unchecked"></i>\n' +
    '                            </span>\n' +
    '                          </span>\n' +
    '                          <span class="col-md-10">{{receiver.name}}</span>\n' +
    '                        </div>\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div>UUID: {{context.id}}</div>\n' +
    '                </div>\n' +
    '                <div class="col-md-12">\n' +
    '                  <a class="actionButton actionButtonAdvancedSettings btn btn-info" data-ng-click="show_advanced_settings = !show_advanced_settings" data-ng-init="show_advanced_settings=false">\n' +
    '                    <i data-ng-if="!show_advanced_settings" class="glyphicon glyphicon-plus"></i>\n' +
    '                    <i data-ng-if="show_advanced_settings" class="glyphicon glyphicon-minus"></i>\n' +
    '                    <span data-translate>Advanced settings</span>\n' +
    '                  </a>\n' +
    '                  <div id="ContextAdvancedSettingsBox">\n' +
    '                    <div class="row" data-ng-show="show_advanced_settings">\n' +
    '                      <div class="col-md-6">\n' +
    '                        <div class="form-group">\n' +
    '                          <input data-ng-model="context.show_context" type="checkbox" />\n' +
    '                          <label data-translate>Allow selection of this context through the context selector.</label>\n' +
    '                          <div data-translate>If disabled, submissions for this context will only be accessible through a direct link to it.</div>\n' +
    '                        </div>\n' +
    '                        <div class="form-group">\n' +
    '                          <input data-ng-model="context.allow_recipients_selection" type="checkbox" />\n' +
    '                          <label data-translate>Allow whistleblowers to select their recipients</label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group" data-ng-show="context.allow_recipients_selection">\n' +
    '                          <label>\n' +
    '                            <input data-ng-model="context.show_receivers_in_alphabetical_order" type="checkbox" />\n' +
    '                            <span data-translate>Show recipients in alphabetical order</span>\n' +
    '                          </label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group" data-ng-show="context.allow_recipients_selection">\n' +
    '                          <input data-ng-model="context.select_all_receivers" type="checkbox" />\n' +
    '                          <label data-translate>Select all recipients by default</label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group" data-ng-show="!context.select_all_receivers">\n' +
    '                          <label data-translate>Maximum number of selectable recipients:</label> <label data-translate>(0 = unlimited)</label>\n' +
    '                          <input class="form-control" data-ng-model="context.maximum_selectable_receivers" type="number" />\n' +
    '                        </div>\n' +
    '                        <div class="form-group" data-ng-show="context.show_receivers">\n' +
    '                          <input data-ng-model="context.show_small_cards" type="checkbox" />\n' +
    '                          <label data-translate>Show small recipient cards on submission interface</label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group">\n' +
    '                          <input data-ng-model="context.enable_comments" type="checkbox" />\n' +
    '                          <label data-translate>Enable comments</label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group" data-ng-if="context.enable_comments">\n' +
    '                          <input data-ng-model="context.enable_two_way_comments" type="checkbox" />\n' +
    '                          <label data-translate>Allow whistleblowers to write comments</label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group">\n' +
    '                          <input data-ng-model="context.enable_messages" type="checkbox" />\n' +
    '                          <label data-translate>Enable private messages</label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group" data-ng-if="context.enable_messages">\n' +
    '                          <input data-ng-model="context.enable_two_way_messages" type="checkbox" />\n' +
    '                          <label data-translate>Allow whistleblowers to send messages</label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group">\n' +
    '                          <input data-ng-model="context.enable_attachments" type="checkbox" />\n' +
    '                          <label data-translate>Allow whistleblowers to add attachments on existing submissions</label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group">\n' +
    '                          <input data-ng-model="context.show_recipients_details" type="checkbox" />\n' +
    '                          <label data-translate>Show recipient details on the status page of the submission</label>\n' +
    '                        </div>\n' +
    '                        <div class="form-group">\n' +
    '                          <label data-translate>Submission expiration, in days</label>\n' +
    '                          <input class="form-control" data-ng-model="context.tip_timetolive" type="number" />\n' +
    '                          <div data-translate>For security reasons, as a matter of data retention policy, the platform automatically deletes submissions and their data after a certain amount of time.</div>\n' +
    '                        </div>\n' +
    '                        <div class="form-group">\n' +
    '                          <label data-translate>Message shown on top of the status page of the submission</label>\n' +
    '                          <div>\n' +
    '                            <textarea name="description" class="form-control" data-ng-model="context.status_page_message" maxlength="{{node.maximum_textsize}}"></textarea>\n' +
    '                          </div>\n' +
    '                        </div>\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </form>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/files_overview.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div>\n' +
    '      <div data-translate>This interface may help you spot anomalies with your server.</div>\n' +
    '      <div data-translate>The table below shows the files present in the submission directory, and their relationship with the internal database.</div>\n' +
    '    </div>\n' +
    '    <div class="table-responsive" data-ng-controller="OverviewCtrl">\n' +
    '      <table class="table table-condensed table-striped" id="fileList">\n' +
    '        <thead>\n' +
    '          <tr>\n' +
    '            <th class="col-md-6">\n' +
    '              <span data-translate>File</span>\n' +
    '            </th>\n' +
    '            <th class="col-md-2">\n' +
    '              <span data-translate>Info</span>\n' +
    '            </th>\n' +
    '            <th class="col-md-2">\n' +
    '              <span data-translate>Size</span>\n' +
    '            </th>\n' +
    '            <th class="col-md-2">\n' +
    '              <span data-translate>References</span>\n' +
    '            </th>\n' +
    '          </tr>\n' +
    '        </thead>\n' +
    '        <tbody id="fileListBody">\n' +
    '          <tr data-ng-repeat="file in files">\n' +
    '            <td class="col-md-6">\n' +
    '               {{::file.name}}<br /><br />\n' +
    '               {{::file.creation_date | date:\'dd-MM-yyyy HH:mm\'}} <br /><br />\n' +
    '               {{::file.itip}} <br /><br />\n' +
    '               {{::file.path}}\n' +
    '            </td>\n' +
    '            <td class="col-md-2">{{::file.content_type}}</td>\n' +
    '            <td class="col-md-2">{{::file.size}}</td>\n' +
    '            <td class="col-md-2">#{{::file.rfiles}}</td>\n' +
    '          </tr>\n' +
    '        </tbody>\n' +
    '      </table>\n' +
    '    </div> \n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/landing.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="row">\n' +
    '      <div>\n' +
    '        <div class="title1" data-translate>Welcome to the administration interface!</div>\n' +
    '        <div data-translate>Clicking the \'admin\' link in the top-right corner of the page will bring you here.</div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/mail.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '\n' +
    '    <div class="row">\n' +
    '      <form name="notificationForm" data-ng-controller="AdminMailCtrl" novalidate>\n' +
    '\n' +
    '        <uib-tabset class="tab-content">\n' +
    '          <uib-tab data-ng-repeat="tab in tabs" heading="{{tab.title | translate}}" active="tab.active" disable="tab.disabled">\n' +
    '            <div data-ng-include="tab.template" data-ng-controller="tab.ctrl"></div>\n' +
    '          </uib-tab>\n' +
    '        </uib-tabset>\n' +
    '\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-6">\n' +
    '            <button class="btn btn-success" data-ng-disabled="notificationForm.$invalid" data-ng-click="update(admin.notification)" type="submit">\n' +
    '              <i class="glyphicon glyphicon-ok"></i>\n' +
    '              <span data-translate>Save</span>\n' +
    '            </button>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '\n' +
    '      </form>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/mail/tab1.html',
    '<div class="row">\n' +
    '  <div class="col-md-8">\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>SMTP name</label>\n' +
    '      <input class="form-control" data-ng-model="admin.notification.source_name" maxlength="{{node.maximum_namesize}}" type="text" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>SMTP email address</label>\n' +
    '      <input class="form-control" name="source_email" data-ng-model="admin.notification.source_email" data-ng-pattern="email_regexp" maxlength="{{node.maximum_namesize}}" type="text" />\n' +
    '    </div>\n' +
    '    <div class="text-red" data-ng-show="notificationForm.source_email.$error.pattern">\n' +
    '      <span data-translate>Invalid email address</span>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Username</label>\n' +
    '      <input class="form-control" data-ng-model="admin.notification.username" maxlength="{{node.maximum_namesize}}" type="text" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Password</label>\n' +
    '      <input class="form-control" data-ng-model="admin.notification.password" type="password" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>SMTP server address</label>\n' +
    '      <input class="form-control" data-ng-model="admin.notification.server" maxlength="{{node.maximum_namesize}}" type="text" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>SMTP server port</label>\n' +
    '      <input class="form-control" data-ng-model="admin.notification.port" maxlength="{{node.maximum_namesize}}" type="number" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Transport Security</label>\n' +
    '      <select class="form-control" data-ng-model="admin.notification.security">\n' +
    '        <option value="SSL">SMTPS</option>\n' +
    '        <option value="TLS">SMTP/TLS</option>\n' +
    '        <option value="PLAIN">SMTP Plain</option>\n' +
    '      </select>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-model="admin.notification.disable_admin_notification_emails" type="checkbox">\n' +
    '      <label data-translate>Disable notifications to administrators</label>\n' +
    '      <div data-ng-show="admin.notification.disable_admin_notification_emails">\n' +
    '        <span class="label label-warning" data-translate>Disabled</span>\n' +
    '        <span data-translate>When the option is re-enabled the spooled emails will be sent out.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-model="admin.notification.disable_custodians_notification_emails" type="checkbox">\n' +
    '      <label data-translate>Disable notifications to custodians</label>\n' +
    '      <div data-ng-show="admin.notification.disable_receiver_notification_emails">\n' +
    '        <span class="label label-warning" data-translate>Disabled</span>\n' +
    '        <span data-translate>When the option is re-enabled the spooled emails will be sent out.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-model="admin.notification.disable_receiver_notification_emails" type="checkbox">\n' +
    '      <label data-translate>Disable notifications to recipients</label>\n' +
    '      <div data-ng-show="admin.notification.disable_receiver_notification_emails">\n' +
    '        <span class="label label-warning" data-translate>Disabled</span>\n' +
    '        <span data-translate>When the option is re-enabled the spooled emails will be sent out.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-model="admin.notification.send_email_for_every_event" type="checkbox">\n' +
    '      <label data-translate>Send an email notification for every event</label>\n' +
    '      <div data-ng-show="admin.notification.send_email_for_every_event">\n' +
    '        <span class="label label-success" data-translate>Enabled</span>\n' +
    '        <span data-translate>An email notification will also always be sent in case the user viewed the related info through the platform.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <input data-ng-model="admin.notification.reset_templates" type="checkbox">\n' +
    '      <label data-translate>Reset notification templates to default</label>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Number of hours before sending a submission expiration alert</label>\n' +
    '      <input class="form-control" data-ng-model="admin.notification.tip_expiration_threshold" maxlength="{{node.maximum_namesize}}" type="number" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Maximum emails per hour before triggering email suspension</label> <label>(<span data-translate>this configuration only applies to recipients</span>)</label>\n' +
    '      <input class="form-control" data-ng-model="admin.notification.notification_threshold_per_hour" maxlength="{{node.maximum_namesize}}" type="number" />\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Email suspension duration after exceeding hourly limit, in seconds</label> <label>(<span data-translate>this configuration only applies to recipients</span>)</label>\n' +
    '      <input class="form-control" data-ng-model="admin.notification.notification_suspension_time" maxlength="{{node.maximum_namesize}}" type="number" />\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/mail/tab2.html',
    '<div class="row">\n' +
    '  <div class="col-md-8">\n' +
    '    <div data-translate>This interface allows configuration of the email templates used for notifying administrators.</div>\n' +
    '\n' +
    '    <br /><br />\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Template</label>\n' +
    '      <select name="type" class="form-control" data-ng-model="template">\n' +
    '        <option value="anomaly_notification" data-translate>Notification of anomaly</option>\n' +
    '        <option value="pgp_expiration" data-translate>Notification of PGP key expiration</option>\n' +
    '      </select>\n' +
    '    </div>\n' +
    '\n' +
    '    <br /><br />\n' +
    '\n' +
    '    <div class="row">\n' +
    '      <div class="col-md-offset-1 col-md-11" data-ng-switch="template">\n' +
    '        <div data-ng-switch-when="anomaly_notification">\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email subject</label>\n' +
    '            <input data-ng-model="admin.notification.admin_anomaly_mail_title" maxlength="{{node.maximum_namesize}}" class="form-control" type="text" />\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email body</label>\n' +
    '            <div>\n' +
    '              <textarea data-ng-model="admin.notification.admin_anomaly_mail_template" maxlength="{{node.maximum_textsize}}" class="form-control" rows="10"></textarea>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '\n' +
    '        <div data-ng-switch-when="pgp_expiration">\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email subject</label>\n' +
    '            <input data-ng-model="admin.notification.admin_pgp_alert_mail_title" maxlength="{{node.maximum_namesize}}" class="form-control" type="text" />\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email body</label>\n' +
    '            <div>\n' +
    '              <textarea data-ng-model="admin.notification.admin_pgp_alert_mail_template" maxlength="{{node.maximum_textsize}}" class="form-control" rows="10"></textarea>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/mail/tab3.html',
    '<div class="row">\n' +
    '  <div class="col-md-8">\n' +
    '    <div data-translate>This interface allows configuration of the email templates used for notifying recipients.</div>\n' +
    '\n' +
    '    <br /><br />\n' +
    '\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Template</label>\n' +
    '      <select name="type" class="form-control" data-ng-model="template">\n' +
    '        <option value="new_submission" data-translate>Notification of new submission</option>\n' +
    '        <option value="new_comment" data-translate>Notification of new comment</option>\n' +
    '        <option value="new_message" data-translate>Notification of new message</option>\n' +
    '        <option value="new_attachment" data-translate>Notification of new file attachment</option>\n' +
    '        <option value="pgp_expiration" data-translate>Notification of PGP key expiration</option>\n' +
    '        <option value="mail_suspension" data-translate>Notification of mailing system suspension after hourly limit excess</option>\n' +
    '        <option value="archive_description" data-translate>Template for summary of contents in submission archive</option>\n' +
    '      </select>\n' +
    '    </div>\n' +
    '\n' +
    '    <br /><br />\n' +
    '\n' +
    '    <div class="row">\n' +
    '      <div class="col-md-offset-1 col-md-11" data-ng-switch="template">\n' +
    '        <div data-ng-switch-when="new_submission">\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email subject</label>\n' +
    '            <input data-ng-model="admin.notification.tip_mail_title" maxlength="{{node.maximum_namesize}}" class="form-control" type="text" />\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email body</label>\n' +
    '            <div>\n' +
    '              <textarea data-ng-model="admin.notification.tip_mail_template" maxlength="{{node.maximum_textsize}}" class="form-control" rows="10"></textarea>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '\n' +
    '        <div data-ng-switch-when="new_attachment">\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email subject</label>\n' +
    '            <input data-ng-model="admin.notification.file_mail_title" maxlength="{{node.maximum_namesize}}" class="form-control" type="text" />\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email body</label>\n' +
    '            <div>\n' +
    '              <textarea data-ng-model="admin.notification.file_mail_template" maxlength="{{node.maximum_textsize}}" class="form-control" rows="10"></textarea>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '\n' +
    '        <div data-ng-switch-when="new_comment">\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email subject</label>\n' +
    '            <input data-ng-model="admin.notification.comment_mail_title" maxlength="{{node.maximum_namesize}}" class="form-control" type="text" />\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email body</label>\n' +
    '            <div>\n' +
    '              <textarea data-ng-model="admin.notification.comment_mail_template" maxlength="{{node.maximum_textsize}}" class="form-control" rows="10"></textarea>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '\n' +
    '        <div data-ng-switch-when="new_message">\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email subject</label>\n' +
    '            <input data-ng-model="admin.notification.message_mail_title" maxlength="{{node.maximum_namesize}}" class="form-control" type="text" />\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email body</label>\n' +
    '            <div>\n' +
    '              <textarea data-ng-model="admin.notification.message_mail_template" maxlength="{{node.maximum_textsize}}" class="form-control" rows="10"></textarea>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '\n' +
    '        <div data-ng-switch-when="mail_suspension">\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email subject</label>\n' +
    '            <div>\n' +
    '              <input data-ng-model="admin.notification.receiver_notification_limit_reached_mail_title" maxlength="{{node.maximum_namesize}}" class="form-control" type="text" />\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email body</label>\n' +
    '            <div>\n' +
    '              <textarea data-ng-model="admin.notification.receiver_notification_limit_reached_mail_template" maxlength="{{node.maximum_textsize}}" class="form-control" rows="10"></textarea>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '\n' +
    '        <div data-ng-switch-when="pgp_expiration">\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email subject</label>\n' +
    '            <div>\n' +
    '              <input data-ng-model="admin.notification.pgp_alert_mail_title" maxlength="{{node.maximum_namesize}}" class="form-control" type="text" />\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div class="form-group">\n' +
    '            <label data-translate>Email body</label>\n' +
    '            <div>\n' +
    '              <textarea data-ng-model="admin.notification.pgp_alert_mail_template" maxlength="{{node.maximum_textsize}}" class="form-control" rows="10"></textarea>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/mail/tab4.html',
    '<div class="row">\n' +
    '  <div class="col-md-8">\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Exception reporting email address</label>\n' +
    '      <input class="form-control" data-ng-model="admin.notification.exception_email_address" name="email" type="text" data-ng-pattern="email_regexp" />\n' +
    '      <p class="text-red" data-ng-if="notificationForm.email.$error.pattern">\n' +
    '        <span data-translate>Invalid email address</span>\n' +
    '      </p>\n' +
    '    </div>\n' +
    '\n' +
    '    <div data-ng-show="admin.notification.exception_email_pgp_key_info">\n' +
    '      <div class="alert alert-success">\n' +
    '        <span data-translate>Encryption is enabled!</span>\n' +
    '      </div>\n' +
    '\n' +
    '      <p>\n' +
    '        <span data-translate>PGP key details</span>\n' +
    '        <br />\n' +
    '        <span data-translate>The fingerprint is:</span>\n' +
    '        <b>{{admin.notification.exception_email_pgp_key_fingerprint}}</b>\n' +
    '      </p>\n' +
    '\n' +
    '      <div>\n' +
    '        <pre>{{admin.notification.exception_email_pgp_key_info}}</pre>\n' +
    '      </div>\n' +
    '\n' +
    '      <div class="form-group" data-ng-show="admin.notification.exception_email_pgp_key_fingerprint">\n' +
    '        <input data-ng-model="admin.notification.exception_email_pgp_key_remove" type="checkbox">\n' +
    '        <label data-translate>Remove the PGP key</label>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group" data-ng-hide="admin.notification.exception_email_pgp_key_fingerprint">\n' +
    '      <div class="alert alert-danger">\n' +
    '        <div data-translate>Encryption has not been enabled!</div>\n' +
    '        <div data-translate>Email notifications won\'t be encrypted.</div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '\n' +
    '    <div class="form-group" data-ng-hide="admin.notification.exception_email_pgp_key_fingerprint">\n' +
    '      <label data-translate>Set up encryption by providing a PGP public key</label>\n' +
    '      <textarea class="form-control" data-ng-attr-placeholder="{{\'Copy and paste the PGP public key here\' | translate}}" data-ng-model="admin.notification.exception_email_pgp_key_public"></textarea>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/password.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <form name="nodeConfigForm" data-ng-controller="AdminPasswordCtrl" novalidate>\n' +
    '      <div class="row">\n' +
    '        <div class="col-md-9">\n' +
    '          <div class="form-group col-md-8">\n' +
    '            <label><b><span data-translate>Current Password</span></b></label>\n' +
    '            <input class="form-control" data-ng-model="admin.node.old_password" type="password">\n' +
    '            <p class="text-red" data-ng-show="missing_old_password && admin.node.password">\n' +
    '            <span data-translate>Old password confirmation required</span></p>\n' +
    '          </div>\n' +
    '\n' +
    '          <div class="form-group col-md-8">\n' +
    '            <label><b><span data-translate>New Password</span></b></label>\n' +
    '            <input class="form-control" data-ng-model="admin.node.password" type="password">\n' +
    '            <p class="text-red" data-ng-show="unsafe_password">\n' +
    '              <span data-translate>The choosen password is unsafe, it should have</span>:\n' +
    '            </p>\n' +
    '            <ul>\n' +
    '              <li class="text-red" data-ng-hide="pwdHasLetter">\n' +
    '              <span data-translate>At least one letter</span></li>\n' +
    '              <li class="text-red" data-ng-hide="pwdHasNumber">\n' +
    '              <span data-translate>At least one number</span></li>\n' +
    '              <li class="text-red" data-ng-hide="pwdValidLength">\n' +
    '              <span data-translate>At least 8 characters</span></li>\n' +
    '            </ul>\n' +
    '          </div>\n' +
    '\n' +
    '          <div class="form-group col-md-8">\n' +
    '            <label><b><span data-translate>Type your new password again</span></b></label>\n' +
    '            <input class="form-control" data-ng-model="admin.node.check_password" type="password">\n' +
    '            <p class="text-red" data-ng-show="mismatch_password">\n' +
    '            <span data-translate>The two passwords do not match</span></p>\n' +
    '          </div>\n' +
    '\n' +
    '          <div class="form-group col-md-8">\n' +
    '            <button class="btn btn-success"\n' +
    '                    data-ng-disabled="nodeConfigForm.$invalid || nodeConfigForm.$pristine || mismatch_password || unsafe_password || missing_old_password"\n' +
    '                    data-ng-click="updateNode(admin.node)" type="submit">\n' +
    '              <i class="glyphicon glyphicon-ok"></i>\n' +
    '            <span data-translate>Save</span>\n' +
    '            </button>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </form>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/questionnaires.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '\n' +
    '    <div class="row">\n' +
    '      <form name="advancedForm" data-ng-controller="AdminQuestionnaireCtrl" novalidate>\n' +
    '        <uib-tabset class="tab-content">\n' +
    '          <uib-tab data-ng-repeat="tab in tabs" heading="{{tab.title | translate}}" active="tab.active" disable="tab.disabled">\n' +
    '          <div data-ng-include="tab.template" data-ng-controller="tab.ctrl"></div>\n' +
    '          </uib-tab>\n' +
    '        </uib-tabset>\n' +
    '      </form>\n' +
    '    </div>\n' +
    '\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/questionnaires/add_field.html',
    '<div class="addField">\n' +
    '  <div data-ng-form="newField">\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Label</label>\n' +
    '      <input name="label" class="form-control" data-ng-model="new_field.label" maxlength="{{node.maximum_namesize}}" type="text" required>\n' +
    '      <div class="text-red" data-ng-show="newField.label.$error.required">\n' +
    '        <span data-translate>This field is mandatory</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="form-group">\n' +
    '      <label data-translate>Type</label>\n' +
    '      <select name="type" class="form-control" data-ng-model="new_field.type" required>\n' +
    '        <option value="inputbox" data-translate>Single-line text input</option>\n' +
    '        <option value="textarea" data-translate>Multi-line text input</option>\n' +
    '        <option value="multichoice" data-translate>Multiple choice input</option>\n' +
    '        <option value="selectbox" data-translate>Selection box</option>\n' +
    '        <option value="checkbox" data-translate>Checkbox</option>\n' +
    '        <option value="fileupload" data-translate>Attachment</option>\n' +
    '        <option value="tos" data-translate>Terms of service</option>\n' +
    '        <option value="number" data-translate>Number</option>\n' +
    '        <option value="email" data-translate>Email address</option>\n' +
    '        <option value="date" data-translate>Date</option>\n' +
    '        <option value="fieldgroup" data-translate>Group of questions</option>\n' +
    '        <option value="radio" data-translate>Conditional</option>\n' +
    '        <!--\n' +
    '          Options commented out in stable release as not yet implemented\n' +
    '          <option value="boolean" data-translate>Boolean question</option>\n' +
    '          <option value="modal" data-translate>Time interval</option>\n' +
    '          <option value="modal" data-translate>Modal window</option>\n' +
    '          <option value="dialog" data-translate>Dialog window</option>\n' +
    '        -->\n' +
    '      </select>\n' +
    '      <div class="text-red" data-ng-show="newField.type.$error.required">\n' +
    '        <span data-translate>This field is mandatory</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="form-group">\n' +
    '      <button class="pull-left btn btn-primary" data-ng-disabled="newField.$invalid" data-ng-click="add_field()">\n' +
    '        <i class="glyphicon glyphicon-plus-sign"></i>\n' +
    '        <span data-translate>Add</span>\n' +
    '      </button>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/questionnaires/add_field_from_template.html',
    '<div class="addFieldFromTemplate">\n' +
    '  <div class="editorTitle" data-translate>Add question from template</div>\n' +
    '  <div class="form-inline">\n' +
    '    <div class="form-group">\n' +
    '      <div class="input-group">\n' +
    '        <select class="form-control" data-ng-model="template_id" data-ng-options="f.id as f.label for f in admin.fieldtemplates"></select>\n' +
    '        <span class="input-group-btn keybutton">\n' +
    '          <button data-ng-click="add_field_from_template(template_id)" class="btn btn-primary"\n' +
    '                  data-ng-disabled="template_id === undefined" type="submit">\n' +
    '            <i class="glyphicon glyphicon-plus-sign"></i>\n' +
    '            <span data-translate>Add</span>\n' +
    '          </button>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/questionnaires/fields.html',
    '<div id="field-{{$index}}" class="fieldBox"\n' +
    '  data-ng-init="editing=false" data-ng-controller="AdminFieldEditorCtrl">\n' +
    '  <div data-ng-form="editField">\n' +
    '    <div class="configItem configField">\n' +
    '      <div class="editorHeader" data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '        <div class="row">\n' +
    '          <span class="col-md-6">\n' +
    '            <span class="fieldIndex label label-default label-as-badge" data-ng-if="field.step_id !== \'\' || field.fieldgroup_id !== \'\'">\n' +
    '              <span data-translate>Row</span><span>: {{field.y}}</span>\n' +
    '              <span data-translate>Column</span><span>: {{field.x}}</span>\n' +
    '              <span data-translate>Width</span><span>: {{field.width}}</span>\n' +
    '            </span>\n' +
    '            <span class="fieldType label label-primary label-as-badge">\n' +
    '              <span data-translate>Type</span><span>:</span>\n' +
    '              <span data-ng-switch="" on="field.type">\n' +
    '                <span data-ng-switch-when="inputbox" data-translate>Single-line text input</span>\n' +
    '                <span data-ng-switch-when="textarea" data-translate>Multi-line text input</span>\n' +
    '                <span data-ng-switch-when="multichoice" data-translate>Multiple choice input</span>\n' +
    '                <span data-ng-switch-when="selectbox" data-translate>Selection box</span>\n' +
    '                <span data-ng-switch-when="checkbox" data-translate>Checkbox</span>\n' +
    '                <span data-ng-switch-when="fileupload" data-translate>Attachment</span>\n' +
    '                <span data-ng-switch-when="tos" data-translate>Terms of service</span>\n' +
    '                <span data-ng-switch-when="number" data-translate>Number</span>\n' +
    '                <span data-ng-switch-when="email" data-translate>Email address</span>\n' +
    '                <span data-ng-switch-when="date" data-translate>Date</span>\n' +
    '                <span data-ng-switch-when="fieldgroup" data-translate>Question group</span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '            <span data-ng-if="field.preview" class="badge alert-info">\n' +
    '              <span uib-popover="{{\'Preview\' | translate}}" popover-placement="top" popover-trigger="mouseenter"><i class="glyphicon glyphicon-list-alt"></i></span>\n' +
    '            </span>\n' +
    '            <span data-ng-if="field.multi_entry" class="badge alert-warning">\n' +
    '              <span data-ng-switch="" on="field.type">\n' +
    '                <span data-ng-switch-when="fileupload" uib-popover="{{\'Accept multiple file uploads\' | translate}}" popover-placement="top" popover-trigger="mouseenter"><i class="glyphicon glyphicon-option-horizontal"></i></span>\n' +
    '                <span data-ng-switch-default uib-popover="{{\'Accept multiple answers for the field\' | translate}}" popover-placement="top" popover-trigger="mouseenter"><i class="glyphicon glyphicon-option-horizontal"></i></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '            <span data-ng-if="field.stats_enabled" class="badge alert-success">\n' +
    '              <span uib-popover="{{\'Required\' | translate}}" popover-placement="top" popover-trigger="mouseenter"><i class="glyphicon glyphicon-stats"></i></span>\n' +
    '            </span>\n' +
    '            <span data-ng-if="field.required" class="badge alert-danger">\n' +
    '              <span uib-popover="{{\'Required\' | translate}}" popover-placement="top" popover-trigger="mouseenter"><i class="glyphicon glyphicon-asterisk"></i></span>\n' +
    '            </span>\n' +
    '          </span>\n' +
    '          <span class="col-md-6">\n' +
    '            <span class="pull-right">\n' +
    '              <!--\n' +
    '              <button class="actionButton btn btn-xs btn-primary"\n' +
    '                data-ng-click="exportQuestion(field.id); $event.stopPropagation();">\n' +
    '                <span data-translate>Export</span>\n' +
    '              </button>\n' +
    '              -->\n' +
    '              <button class="actionButton btn btn-xs btn-default"\n' +
    '                data-ng-show="!editing"\n' +
    '                data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                <span data-translate>Edit</span>\n' +
    '              </button>\n' +
    '              <button class="actionButton btn btn-xs btn-success"\n' +
    '                data-ng-show="editing"\n' +
    '                data-ng-click="save_field(field)">\n' +
    '                <span data-translate>Save</span>\n' +
    '              </button>\n' +
    '              <button\n' +
    '                class="actionButton btn btn-xs btn-default"\n' +
    '                data-ng-show="editing"\n' +
    '                data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                <span data-translate>Cancel</span>\n' +
    '              </button>\n' +
    '              <button class="btn btn-xs btn-danger"\n' +
    '                data-ng-show="editable"\n' +
    '                data-ng-click="delField($parent.fields, field); $event.stopPropagation();"\n' +
    '                popover-placement="right"\n' +
    '                popover-trigger="mouseenter">\n' +
    '                <span data-translate>Delete</span>\n' +
    '              </button>\n' +
    '              <span data-ng-if="field.step_id !== \'\' || field.fieldgroup_id !== \'\'">\n' +
    '                <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveLeftAndSave(field); $event.stopPropagation();" uib-popover="{{\'Move left\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                  <i class="glyphicon glyphicon-menu-left"></i>\n' +
    '                </button>\n' +
    '                <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveRightAndSave(field); $event.stopPropagation();" uib-popover="{{\'Move right\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                  <i class="glyphicon glyphicon-menu-right"></i>\n' +
    '                </button>\n' +
    '                <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveUpAndSave(field); $event.stopPropagation();" uib-popover="{{\'Move up\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                  <i class="glyphicon glyphicon-menu-up"></i>\n' +
    '                </button>\n' +
    '                <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveDownAndSave(field); $event.stopPropagation();" uib-popover="{{\'Move down\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                  <i class="glyphicon glyphicon-menu-down"></i>\n' +
    '                </button>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </span>\n' +
    '        </div>\n' +
    '        <div class="row">\n' +
    '          <span class="col-md-12">\n' +
    '            <div class="fieldLabel">{{field.label}}</div>\n' +
    '          </span>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div class="fieldEditor" data-ng-if="editing">\n' +
    '        <hr />\n' +
    '        <div class="row">\n' +
    '          <fieldset class="col-md-6" data-ng-if="editable">\n' +
    '            <div class="form-group">\n' +
    '              <label data-translate>Name</label>\n' +
    '              <input name="label" class="form-control" maxlength="{{node.maximum_namesize}}" data-ng-model="field.label" type="text" required />\n' +
    '              <div class="text-red" data-ng-show="editField.label.$error.required">\n' +
    '                <span data-translate>This field is mandatory</span>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="form-group">\n' +
    '              <label data-translate>Hint</label>\n' +
    '              <input name="hint" class="form-control" maxlength="{{node.maximum_namesize}}" data-ng-model="field.hint" type="text">\n' +
    '            </div>\n' +
    '            <div class="form-group">\n' +
    '              <label data-translate>Description</label>\n' +
    '              <textarea name="description" class="form-control" maxlength="{{node.maximum_textsize}}" data-ng-model="field.description"></textarea>\n' +
    '            </div>\n' +
    '            <div class="form-group" data-ng-if="::fieldIsMarkableRequired">\n' +
    '              <input data-ng-model="field.required" type="checkbox">\n' +
    '              <label data-translate>Required</label>\n' +
    '            </div>\n' +
    '            <div class="form-group" data-ng-if="::fieldIsMarkableMultiEntry">\n' +
    '              <div data-ng-switch="" on="typeSwitch(field.type)">\n' +
    '                <input data-ng-model="field.multi_entry" type="checkbox">\n' +
    '                <label data-ng-switch-when="fileupload" data-translate>Accept multiple file uploads</label>\n' +
    '                <label data-ng-switch-default data-translate>Accept multiple answers for the field</label>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="form-group" data-ng-if="field.multi_entry && field.type !== \'fileupload\'">\n' +
    '              <label data-translate>Hint shown on the button for adding an additional answer</label>\n' +
    '              <input name="multi_entry_hint" class="form-control" maxlength="{{node.maximum_namesize}}" data-ng-model="field.multi_entry_hint" type="text" data-ng-disabled="!editable" >\n' +
    '            </div>\n' +
    '            <div class="form-group" data-ng-if="::fieldIsMarkableSubjectToPreview">\n' +
    '              <input data-ng-model="field.preview" type="checkbox">\n' +
    '              <label data-translate>Preview</label>\n' +
    '            </div>\n' +
    '            <div class="form-group" data-ng-if="::fieldIsMarkableSubjectToStats">\n' +
    '              <input data-ng-model="field.stats_enabled" type="checkbox">\n' +
    '              <label data-translate>Enable statistics for this field</label>\n' +
    '            </div>\n' +
    '            <div class="form-group">\n' +
    '              <label>\n' +
    '                <span data-translate>Width</span>\n' +
    '                <span>(</span><span data-translate>0 = auto</span><span>)</span>\n' +
    '               </label>\n' +
    '              <input class="form-control" data-ng-model="field.width" type="number" min="0" max="12">\n' +
    '            </div>\n' +
    '            <div class="form-group" data-ng-if="admin.node.enable_experimental_features">\n' +
    '              <label data-translate>Triggered by a score higher than:</label>\n' +
    '              <input class="form-control" data-ng-model="field.triggered_by_score" type="number" min="0" max="1000">\n' +
    '            </div>\n' +
    '          </fieldset>\n' +
    '          <div class="col-md-6">\n' +
    '            <div class="form-group" data-ng-if="showConfiguration(field)">\n' +
    '              <label data-translate>Configuration</label>\n' +
    '              <div class="col-md-12">\n' +
    '                <div data-ng-if="field.type == \'inputbox\' || field.type == \'textarea\'">\n' +
    '                  <div class="row">\n' +
    '                    <div class="form-group">\n' +
    '                      <label data-translate>Minimum number of input characters</label>\n' +
    '                      <div>\n' +
    '                        <input data-ng-model="field.attrs.min_len.value" type="text" class="form-control" data-ng-disabled="!editable" />\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                    <div class="form-group">\n' +
    '                      <label>\n' +
    '                        <span data-translate>Maximum number of input characters</span>\n' +
    '                        <span>(<span data-translate>-1 = unlimited</span>)</span>\n' +
    '                      </label>\n' +
    '                      <div>\n' +
    '                        <input data-ng-model="field.attrs.max_len.value" type="text" class="form-control" data-ng-disabled="!editable" />\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                    <div class="form-group">\n' +
    '                      <label data-translate>Regular expression validator</label>\n' +
    '                      <div>\n' +
    '                        <input data-ng-model="field.attrs.regexp.value" type="text" class="form-control" data-ng-disabled="!editable" />\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '                <div data-ng-if="field.type == \'tos\'">\n' +
    '                  <div class="row">\n' +
    '                    <div class="form-group">\n' +
    '                      <label data-translate>Agreement Text</label>\n' +
    '                      <textarea data-ng-model="field.attrs.agreement_statement.value" maxlength="{{node.maximum_textsize}}" class="form-control" data-ng-disabled="!editable"></textarea>\n' +
    '                    </div>\n' +
    '                    <div class="form-group">\n' +
    '                      <label data-translate>Clause</label>\n' +
    '                      <div>\n' +
    '                        <input data-ng-model="field.attrs.clause.value" type="text" class="form-control" data-ng-disabled="!editable" />\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '                <div data-ng-if="field.type == \'checkbox\' || field.type == \'multichoice\'">\n' +
    '                  <div class="row" data-ng-disabled="!editable">\n' +
    '                    <label data-translate>Layout orientation</label>\n' +
    '                    <select name="type" class="form-control" data-ng-model="field.attrs.layout_orientation.value" required>\n' +
    '                      <option value="vertical" data-translate>vertical</option>\n' +
    '                      <option value="horizontal" data-translate>horizontal</option>\n' +
    '                    </select>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '                <div data-ng-if="field.instance == \'template\'" data-ng-switch="field.key" class="col-md-offset-1 col-md-11">\n' +
    '                  <div data-ng-switch-when="whistleblower_identity">\n' +
    '                    <div class="row">\n' +
    '                      <div class="form-group">\n' +
    '                        <input data-ng-model="field.attrs.visibility_subject_to_authorization.value" type="checkbox">\n' +
    '                        <label data-translate>Subject answer visibility to custodian authorization</label>\n' +
    '                      </div>\n' +
    '                      <div class="form-group">\n' +
    '                        <input data-ng-model="field.attrs.prompt_confirmation_upon_negative_answer.value" type="checkbox">\n' +
    '                        <label data-translate>Prompt confirmation upon negative answer</label>\n' +
    '                      </div>\n' +
    '                      <div class="form-group" data-ng-show="field.attrs.prompt_confirmation_upon_negative_answer.value">\n' +
    '                        <label data-translate>Title of the confirmation question upon negative answer</label>\n' +
    '                        <div>\n' +
    '                          <textarea class="form-control" maxlength="{{node.maximum_textsize}}" data-ng-model="field.attrs.title_of_confirmation_question_upon_negative_answer.value"></textarea>\n' +
    '                        </div>\n' +
    '                      </div>\n' +
    '                      <div class="form-group" data-ng-show="field.attrs.prompt_confirmation_upon_negative_answer.value">\n' +
    '                        <label data-translate>Body of the confirmation question upon negative answer</label>\n' +
    '                        <div>\n' +
    '                          <textarea class="form-control" maxlength="{{node.maximum_textsize}}" data-ng-model="field.attrs.text_of_confirmation_question_upon_negative_answer.value"></textarea>\n' +
    '                        </div>\n' +
    '                      </div>\n' +
    '                      <div class="form-group" data-ng-show="field.attrs.prompt_confirmation_upon_negative_answer.value">\n' +
    '                        <label>Text of the final statement upon negative answer</label>\n' +
    '                        <div>\n' +
    '                          <textarea class="form-control" maxlength="{{node.maximum_textsize}}" data-ng-model="field.attrs.text_of_final_statement_upon_negative_answer.value"></textarea>\n' +
    '                        </div>\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="form-group" data-ng-if="showOptions(field)">\n' +
    '              <label data-translate>Options</label>\n' +
    '              <div class="col-md-12">\n' +
    '                <div class="fieldOption" data-ng-repeat="option in field.options | orderBy:\'presentation_order\'">\n' +
    '                  <div class="row">\n' +
    '                    <div class="col-md-6">\n' +
    '                      <input class="form-control" data-ng-model="option.label" data-ng-attr-placeholder="{{\'Name\' | translate }}" type="text" data-ng-disabled="!editable" required />\n' +
    '                    </div>\n' +
    '                    <div class="col-md-6">\n' +
    '                      <button class="actionButton btn btn-xs btn-danger" data-ng-click="delOption(field, option)">\n' +
    '                        <i class="glyphicon glyphicon-remove"></i>\n' +
    '                      </button>\n' +
    '                      <span data-ng-if="field.options.length > 1">\n' +
    '                        <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveUp(option);" uib-popover="{{\'Move up\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                          <i class="glyphicon glyphicon-menu-up"></i>\n' +
    '                        </button>\n' +
    '                        <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveDown(option);" uib-popover="{{\'Move down\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                          <i class="glyphicon glyphicon-menu-down"></i>\n' +
    '                        </button>\n' +
    '                      </span>\n' +
    '                      <span data-ng-if="node.enable_experimental_features">\n' +
    '                        <button class="actionButton btn btn-xs" data-ng-class="option.trigger_field != \'\' ? \'btn-primary\' : \'btn-default\'" data-ng-click="triggerFieldDialog(option)" uib-popover="{{\'Trigger question\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                          <i class="glyphicon glyphicon-asterisk"></i>\n' +
    '                        </button>\n' +
    '                        <button class="actionButton btn btn-xs" data-ng-class="option.trigger_step != \'\' ? \'btn-primary\' : \'btn-default\'" data-ng-click="triggerStepDialog(option)" uib-popover="{{\'Trigger step\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                          <i class="glyphicon glyphicon-th"></i>\n' +
    '                        </button>\n' +
    '                        <button class="actionButton btn btn-xs" data-ng-class="option.score_points != \'0\' ? \'btn-warning\' : \'btn-default\'" data-ng-click="assignScorePointsDialog(option)" uib-popover="{{\'Assign score points\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                          <span>{{option.score_points}}</span>\n' +
    '                          <i class="glyphicon glyphicon-flash"></i>\n' +
    '                        </button>\n' +
    '                      </span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '                <div>\n' +
    '                  <a data-ng-click="addOption(field)">\n' +
    '                    <i class="glyphicon glyphicon-plus-sign"></i>\n' +
    '                    <span data-translate>Add option</span>\n' +
    '                  </a>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="row adminConfigSection" data-ng-if="editable && field.type === \'fieldgroup\'">\n' +
    '          <div class="col-md-6">\n' +
    '            <div class="nested">\n' +
    '              <div class="editorTitle">\n' +
    '                <span data-translate>Add new question</span>\n' +
    '              </div>\n' +
    '              <div data-ng-include="\'views/admin/questionnnaires/add_field.html\'"></div>\n' +
    '              <div data-ng-if="(field.step_id !== \'\' || field.fieldgroup_id !== \'\') && admin.fieldtemplates.length > 0">\n' +
    '                <div data-ng-include="\'views/admin/questionnaires/add_field_from_template.html\'"></div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="row adminConfigSection" data-ng-if="editable && field.type === \'radio\'">\n' +
    '          <div class="col-md-6">\n' +
    '            <div class="nested">\n' +
    '              <div class="editorTitle">\n' +
    '                <span data-translate>Select if-true questions</span>\n' +
    '              </div>\n' +
    '              <div data-ng-include="\'views/admin/questionnnaires/add_field.html\'"></div>\n' +
    '              <div data-ng-if="(field.step_id !== \'\' || field.fieldgroup_id !== \'\') && admin.fieldtemplates.length > 0">\n' +
    '                <div data-ng-include="\'views/admin/questionnaires/add_field_from_template.html\'"></div>\n' +
    '              </div>\n' +
    '              <div class="editorTitle">\n' +
    '                <span data-translate>Select if-false questions</span>\n' +
    '              </div>\n' +
    '              <div data-ng-include="\'views/admin/questionnnaires/add_field.html\'"></div>\n' +
    '              <div data-ng-if="(field.step_id !== \'\' || field.fieldgroup_id !== \'\') && admin.fieldtemplates.length > 0">\n' +
    '                <div data-ng-include="\'views/admin/questionnaires/add_field_from_template.html\'"></div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-12">\n' +
    '            <div class="form-group" data-ng-if="(field.instance !== \'reference\' && fields.length > 0)">\n' +
    '              <div class="editorTitle" data-translate>Configured questions:</div>\n' +
    '              <div class="configuredFields">\n' +
    '                <div data-ng-repeat="field in fields | orderBy:[\'y\', \'x\']">\n' +
    '                  <div data-ng-include="\'views/admin/questionnaires/fields.html\'"></div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/questionnaires/main.html',
    '<div class="row" data-ng-controller="AdminQuestionnairesCtrl">\n' +
    '  <div class="adminConfigSection col-md-6" data-ng-controller="AdminQuestionnaireAddCtrl">\n' +
    '    <form name="newQuestionnaire" class="addQuestionnaire" novalidate>\n' +
    '      <div class="editorTitle">\n' +
    '        <span data-translate>Add new questionnaire</span>\n' +
    '      </div>\n' +
    '      <div class="form-group">\n' +
    '        <label data-translate>Name</label>\n' +
    '        <input name="name" class="form-control" data-ng-model="new_questionnaire.name" maxlength="{{node.maximum_namesize}}" type="text" required>\n' +
    '        <div class="text-red" data-ng-show="newQuestionnaire.name.$error.required">\n' +
    '          <span data-translate>This field is mandatory</span>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div class="form-group">\n' +
    '        <button class="pull-left btn btn-primary" data-ng-disabled="newQuestionnaire.$invalid" data-ng-click="add_questionnaire()" type="submit">\n' +
    '          <i class="glyphicon glyphicon-plus-sign"></i>\n' +
    '          <span data-translate>Add</span>\n' +
    '        </button>\n' +
    '      </div>\n' +
    '    </form>\n' +
    '  </div>\n' +
    '  <div class="adminConfigSection col-md-12" data-ng-show="admin.questionnaires.length > 0">\n' +
    '    <div class="editorTitle" data-translate>Configured questionnaires:</div>\n' +
    '    <div data-ng-repeat="questionnaire in admin.questionnaires | orderBy:\'presentation_order\'">\n' +
    '      <form id="questionnaire-{{$index}}" name="editQuestionnaire" data-ng-controller="AdminQuestionnaireEditorCtrl" novalidate>\n' +
    '        <fieldset class="configItem questionnaireItem" data-ng-disabled="!questionnaire.editable">\n' +
    '          <div class="editorHeader row" data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '            <span class="col-md-7 editorHeaderTitle">\n' +
    '              <span>{{questionnaire.name}}</span>\n' +
    '            </span>\n' +
    '            <span class="col-md-5">\n' +
    '              <span class="pull-right">\n' +
    '                <button\n' +
    '                  class="actionButton actionButtonQuestionnaireEdit btn btn-xs btn-default"\n' +
    '                  data-ng-show="!editing"\n' +
    '                  data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                  <span data-translate>Edit</span>\n' +
    '                </button>\n' +
    '                <button\n' +
    '                  class="actionButton actionButtonQuestionnaireSave btn btn-xs btn-success"\n' +
    '                  data-ng-show="editing"\n' +
    '                  data-ng-if="questionnaire.editable"\n' +
    '                  data-ng-click="save_questionnaire(questionnaire)">\n' +
    '                  <span data-translate>Save</span>\n' +
    '                </button>\n' +
    '                <button\n' +
    '                  class="actionButton actionButtonQuestionnaireCancel btn btn-xs btn-default"\n' +
    '                  data-ng-show="editing"\n' +
    '                  data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                  <span data-translate>Cancel</span>\n' +
    '                </button>\n' +
    '                <button\n' +
    '                  class="actionButton actionButtonQuestionnaireDelete btn btn-xs btn-danger"\n' +
    '                  data-ng-if="questionnaire.editable"\n' +
    '                  data-ng-click="delete_questionnaire(questionnaire); $event.stopPropagation();"\n' +
    '                  popover-placement="right"\n' +
    '                  popover-trigger="mouseenter">\n' +
    '                  <span data-translate>Delete</span>\n' +
    '                </button>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </div>\n' +
    '          <div data-ng-if="editing">\n' +
    '            <hr />\n' +
    '            <div class="row">\n' +
    '              <div class="col-md-6">\n' +
    '                <div class="form-group">\n' +
    '                  <label data-translate>Name</label>\n' +
    '                  <input name="name" class="form-control" maxlength="{{node.maximum_namesize}}" data-ng-model="questionnaire.name" type="text" required>\n' +
    '                  <div class="text-red" data-ng-show="editQuestionnaire.name.$error.required">\n' +
    '                    <span data-translate>This field is mandatory</span>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '              <div class="col-md-12">\n' +
    '                <a class="actionButton actionButtonAdvancedSettings btn btn-info" data-ng-click="show_advanced_settings = !show_advanced_settings" data-ng-init="show_advanced_settings=false">\n' +
    '                  <i data-ng-if="!show_advanced_settings" class="glyphicon glyphicon-plus"></i>\n' +
    '                  <i data-ng-if="show_advanced_settings" class="glyphicon glyphicon-minus"></i>\n' +
    '                  <span data-translate>Advanced settings</span>\n' +
    '                </a>\n' +
    '                <div id="QuestionnaireAdvancedSettingsBox">\n' +
    '                  <div class="row" data-ng-show="show_advanced_settings">\n' +
    '                    <div class="col-md-6">\n' +
    '                      <div class="form-group">\n' +
    '                        <label data-translate>Questionnaire layout</label>\n' +
    '                        <select name="type" class="form-control" data-ng-model="questionnaire.layout" required>\n' +
    '                          <option value="vertical" data-translate>vertical</option>\n' +
    '                          <option value="horizontal" data-translate>horizontal</option>\n' +
    '                        </select>\n' +
    '                      </div>\n' +
    '                      <div class="form-group">\n' +
    '                        <input data-ng-model="questionnaire.show_steps_navigation_bar" type="checkbox" />\n' +
    '                        <label data-translate>Show steps navigation bar</label>\n' +
    '                      </div>\n' +
    '                      <div class="form-group">\n' +
    '                        <input data-ng-model="questionnaire.steps_navigation_requires_completion" type="checkbox" />\n' +
    '                        <label data-translate>Allow to advance through submission steps only when current step is completed</label>\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '              <div class="col-md-12">\n' +
    '                <div data-ng-include="\'views/admin/questionnaires/steps.html\'"></div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </fieldset>\n' +
    '      </form>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/questionnaires/questions.html',
    '<div data-ng-controller="AdminFieldTemplatesCtrl">\n' +
    '  <div class="adminConfigSection row">\n' +
    '    <div class="addField col-md-6">\n' +
    '      <form name="newField" class="addField" novalidate>\n' +
    '        <div class="editorTitle row">\n' +
    '          <span class="col-md-8">\n' +
    '            <span data-translate>Add new question template</span>\n' +
    '          </span>\n' +
    '          <span class="col-md-4 text-align-right">\n' +
    '            <label class="actionButton btn btn-xs btn-primary" for="import_questions">\n' +
    '              <span data-translate>Import</span>\n' +
    '            </label>\n' +
    '            <span class="hiddenButton">\n' +
    '              <input type="file" id="import_questions" fileread="importQuestions">\n' +
    '            </span>\n' +
    '          </span>\n' +
    '        </div>\n' +
    '        <div data-ng-controller="AdminFieldTemplatesAddCtrl" data-ng-include="\'views/admin/questionnaires/add_field.html\'"></div>\n' +
    '      </form>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="adminConfigSection row" data-ng-init="fields = admin.fieldtemplates" data-ng-show="fields.length > 0">\n' +
    '    <div class="col-md-12">\n' +
    '      <div class="editorTitle row">\n' +
    '        <span class="col-md-8">\n' +
    '          <span data-translate>Configured question templates:</span>\n' +
    '        </span>\n' +
    '        <span class="col-md-4 text-align-right">\n' +
    '          <!--\n' +
    '          <button class="actionButton btn btn-xs btn-primary"\n' +
    '                  data-ng-click="exportQuestionTemplates()">\n' +
    '            <span data-translate>Export all</span>\n' +
    '          </button>\n' +
    '          -->\n' +
    '        </span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="col-md-12" data-ng-repeat="field in fields | orderBy:\'label\'">\n' +
    '      <div data-ng-include="\'views/admin/questionnaires/fields.html\'"></div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/questionnaires/steps.html',
    '<div id="StepAddBox" data-ng-controller="AdminStepAddCtrl">\n' +
    '  <div class="row">\n' +
    '    <div class="col-md-6">\n' +
    '      <div class="editorTitle row">\n' +
    '        <span class="col-md-8">\n' +
    '          <span data-translate>Add new step</span>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '      <div data-ng-form="" name="newStep">\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-12">\n' +
    '            <div class="form-group">\n' +
    '              <label data-translate>Label</label>\n' +
    '              <input name="label" class="form-control" data-ng-model="new_step.label" type="text" required>\n' +
    '              <div class="text-red" data-ng-show="newStep.label.$error.required">\n' +
    '                <span data-translate>This field is mandatory</span>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-12">\n' +
    '            <div class="form-group">\n' +
    '              <button class="pull-left btn btn-primary" data-ng-disabled="newStep.$invalid" data-ng-click="add_step()">\n' +
    '                <i class="glyphicon glyphicon-plus-sign"></i>\n' +
    '                <span data-translate>Add</span>\n' +
    '              </button>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div id="StepsEditBox" data-ng-show="questionnaire.steps.length > 0">\n' +
    '  <div class="editorTitle row">\n' +
    '    <span class="col-md-8">\n' +
    '      <span data-translate>Configured steps:</span>\n' +
    '    </span>\n' +
    '    <span class="col-md-4 text-align-right">\n' +
    '      <button class="btn btn-xs btn-danger"\n' +
    '              data-ng-show="questionnaire.steps.length > 0"\n' +
    '              data-ng-click="delAllSteps()"\n' +
    '              popover-placement="right"\n' +
    '              popover-trigger="mouseenter">\n' +
    '        <span data-translate>Delete all</span>\n' +
    '      </button>\n' +
    '    </span>\n' +
    '  </div>\n' +
    '  <div class="row">\n' +
    '    <div data-ng-repeat="step in questionnaire.steps | orderBy:\'presentation_order\'">\n' +
    '      <div class="col-md-12"\n' +
    '           data-ng-controller="AdminStepEditorCtrl">\n' +
    '        <div class="configItem configStep">\n' +
    '          <div class="editorHeader row" data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '            <span class="col-md-7">\n' +
    '              <span class="stepIndex badge">{{$index + 1}}</span>\n' +
    '              <span class="stepLabel">{{step.label}}</span>\n' +
    '            </span>\n' +
    '            <span class="col-md-5">\n' +
    '              <span class="pull-right">\n' +
    '                <button\n' +
    '                  class="actionButton btn btn-xs btn-default"\n' +
    '                  data-ng-show="!editing"\n' +
    '                  data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                  <span data-translate>Edit</span>\n' +
    '                </button>\n' +
    '                <button\n' +
    '                  class="actionButton btn btn-xs btn-success"\n' +
    '                  data-ng-show="editing"\n' +
    '                  data-ng-click="save_step(step);">\n' +
    '                  <span data-translate>Save</span>\n' +
    '                </button>\n' +
    '                <button\n' +
    '                  class="actionButton btn btn-xs btn-default"\n' +
    '                  data-ng-show="editing"\n' +
    '                  data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                  <span data-translate>Cancel</span>\n' +
    '                </button>\n' +
    '                <button\n' +
    '                  class="actionButton btn btn-xs btn-danger"\n' +
    '                  data-ng-click="delStep(step); $event.stopPropagation();"\n' +
    '                  uib-popover="{{Delete | translate}}"\n' +
    '                  popover-placement="right"\n' +
    '                  popover-trigger="mouseenter">\n' +
    '                  <span data-translate>Delete</span>\n' +
    '                </button>\n' +
    '                <span data-ng-if="questionnaire.steps.length > 1">\n' +
    '                  <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveUpAndSave(step); $event.stopPropagation();" uib-popover="{{\'Move up\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                    <i class="glyphicon glyphicon-menu-up"></i>\n' +
    '                  </button>\n' +
    '                  <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveDownAndSave(step); $event.stopPropagation();" uib-popover="{{\'Move down\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                    <i class="glyphicon glyphicon-menu-down"></i>\n' +
    '                  </button>\n' +
    '                </span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </div>\n' +
    '          <div data-ng-form="" name="editStep" data-ng-show="editing">\n' +
    '            <hr />\n' +
    '            <div class="row">\n' +
    '              <div class="form-group">\n' +
    '                <div class="col-md-6">\n' +
    '                  <label data-translate>Label</label>\n' +
    '                  <input class="form-control" data-ng-model="step.label" type="text" required />\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="row">\n' +
    '              <div class="form-group col-md-6">\n' +
    '                <label data-translate>Hint</label>\n' +
    '                <input class="form-control" data-ng-model="step.hint" type="text" />\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="row">\n' +
    '              <div class="form-group col-md-6">\n' +
    '                <label data-translate>Description</label>\n' +
    '                <div>\n' +
    '                  <textarea class="form-control" data-ng-model="step.description"></textarea>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="row" data-ng-if="admin.node.enable_experimental_features">\n' +
    '              <div class="form-group col-md-6">\n' +
    '                <label data-translate>Triggered by a score higher than:</label>\n' +
    '                <input class="form-control" data-ng-model="step.triggered_by_score" type="number" min="0" max="1000">\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="row adminConfigSection">\n' +
    '              <div class="col-md-6">\n' +
    '                <div class="editorTitle row">\n' +
    '                  <span class="col-md-8">\n' +
    '                    <span data-translate>Add new question</span>\n' +
    '                  </span>\n' +
    '                  <span class="col-md-4 text-align-right">\n' +
    '                    <button class="btn btn-xs btn-danger"\n' +
    '                            data-ng-show="step.children.length > 0"\n' +
    '                            data-ng-click="delAllFields()"\n' +
    '                            popover-placement="right"\n' +
    '                            popover-trigger="mouseenter">\n' +
    '                      <span data-translate>Delete all</span>\n' +
    '                    </button>\n' +
    '                  </span>\n' +
    '                </div>\n' +
    '                <div class="nested">\n' +
    '                  <div data-ng-include="\'views/admin/questionnaires/add_field.html\'"></div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="row adminConfigSection" data-ng-if="admin.node.enable_experimental_features">\n' +
    '              <div class="col-md-6">\n' +
    '                <div data-ng-include="\'views/admin/questionnaires/add_field_from_template.html\'"></div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div id="FieldsEditBox" class="form-group" data-ng-show="step.children.length > 0">\n' +
    '              <div class="editorTitle row">\n' +
    '                <span class="col-md-12">\n' +
    '                  <span data-translate>Configured questions:</span>\n' +
    '                </span>\n' +
    '              </div>\n' +
    '              <div class="configuredFields">\n' +
    '                <div data-ng-repeat="field in step.children | orderBy:[\'y\', \'x\']">\n' +
    '                  <div data-ng-include="\'views/admin/questionnaires/fields.html\'"></div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/receivers.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="adminConfigSection" data-ng-controller="AdminReceiversCtrl" data-ng-show="admin.receivers.length > 0">\n' +
    '      <div class="editorTitle">\n' +
    '        <span data-translate>Configured recipients:</span>\n' +
    '      </div>\n' +
    '      <div class="receiverList" data-ng-repeat="receiver in admin.receivers | orderBy:\'presentation_order\'">\n' +
    '        <form id="receiver-{{$index}}" name="editReceiver" data-ng-controller="AdminReceiverEditorCtrl" novalidate>\n' +
    '          <div class="configItem receiverItem">\n' +
    '            <div class="editorHeader row" data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '              <span class="col-md-7 editorHeaderTitle">\n' +
    '                <span>{{receiver.name}}</span>\n' +
    '              </span>\n' +
    '              <span class="col-md-5">\n' +
    '                <span class="pull-right">\n' +
    '                  <button\n' +
    '                    class="actionButton actionButtonReceiverEdit btn btn-xs btn-default"\n' +
    '                    data-ng-show="!editing"\n' +
    '                    data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                    <span data-translate>Edit</span>\n' +
    '                  </button>\n' +
    '                  <button\n' +
    '                    class="actionButton actionButtonReceiverSave btn btn-xs btn-success"\n' +
    '                    data-ng-show="editing"\n' +
    '                    data-ng-click="save_receiver(receiver)">\n' +
    '                    <span data-translate>Save</span>\n' +
    '                  </button>\n' +
    '                  <button\n' +
    '                    class="actionButton actionButtonReceiverCancel btn btn-xs btn-default"\n' +
    '                    data-ng-show="editing"\n' +
    '                    data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                    <span data-translate>Cancel</span>\n' +
    '                  </button>\n' +
    '                  <span data-ng-if="admin.receivers.length > 1">\n' +
    '                    <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveUpAndSave(receiver); $event.stopPropagation();" uib-popover="{{\'Move up\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                      <i class="glyphicon glyphicon-menu-up"></i>\n' +
    '                    </button>\n' +
    '                    <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveDownAndSave(receiver); $event.stopPropagation();" uib-popover="{{\'Move down\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                      <i class="glyphicon glyphicon-menu-down"></i>\n' +
    '                    </button>\n' +
    '                  </span>\n' +
    '                </span>\n' +
    '              </span>\n' +
    '            </div>\n' +
    '            <div class="editor" data-ng-if="editing">\n' +
    '              <hr />\n' +
    '              <div class="row">\n' +
    '                <div class="col-md-6">\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Configuration</label>\n' +
    '                    <select class="form-control" data-ng-model="receiver.configuration">\n' +
    '                      <option value="default" data-translate>Default</option>\n' +
    '                      <option value="forcefully_selected" data-translate>Forcefully selected</option>\n' +
    '                      <option value="unselectable" data-translate>Unselectable</option>\n' +
    '                    </select>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '                <div class="col-md-6">\n' +
    '                  <label data-translate>Contexts</label>\n' +
    '                  <div class="selectionList">\n' +
    '                    <div data-ng-repeat="context in admin.contexts">\n' +
    '                      <div class="row" data-ng-click="toggle(context)">\n' +
    '                        <span class="col-md-1">\n' +
    '                          <span data-ng-show="isSelected(context)">\n' +
    '                            <i class="glyphicon glyphicon-check"></i>\n' +
    '                          </span>\n' +
    '                          <span data-ng-show="!isSelected(context)">\n' +
    '                            <i class="glyphicon glyphicon-unchecked"></i>\n' +
    '                          </span>\n' +
    '                        </span>\n' +
    '                        <span class="col-md-10">{{context.name}}</span>\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div>UUID: {{receiver.id}}</div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '              <div class="row">\n' +
    '                <div class="col-md-6">\n' +
    '                  <div class="form-group">\n' +
    '                    <input data-ng-model="receiver.can_postpone_expiration" type="checkbox" data-ng-disabled="node.can_postpone_expiration" />\n' +
    '                    <label data-translate>Allow the recipient to postpone the submission expiration date</label>\n' +
    '                    <div data-ng-show="node.can_postpone_expiration">\n' +
    '                      <span class="label label-info" data-translate>Enabled</span>\n' +
    '                      <span data-translate>The setting is enabled at a global level.</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <input data-ng-model="receiver.can_delete_submission" type="checkbox" data-ng-disabled="node.can_delete_submission" />\n' +
    '                    <label data-translate>Allow the recipient to delete submissions</label>\n' +
    '                    <div data-ng-show="node.can_delete_submission">\n' +
    '                      <span class="label label-info" data-translate>Enabled</span>\n' +
    '                      <span data-translate>The setting is enabled at a global level.</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <input data-ng-model="receiver.can_grant_permissions" type="checkbox" data-ng-disabled="can_grant_permissions" />\n' +
    '                    <label data-translate>Allow the recipient to grant permissions to whistleblowers on specific submissions</label>\n' +
    '                    <div data-ng-show="node.can_grant_permissions">\n' +
    '                      <span class="label label-info" data-translate>Enabled</span>\n' +
    '                      <span data-translate>The setting is enabled at a global level.</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </form>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/sidebar.html',
    '<ul class="nav nav-pills nav-stacked">\n' +
    '  <li data-ng-class="active.content">\n' +
    '    <a href="#!/admin/content">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>General settings</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.users">\n' +
    '    <a href="#!/admin/users">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>User management</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.receivers">\n' +
    '    <a href="#!/admin/receivers">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>Recipient configuration</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.contexts">\n' +
    '    <a href="#!/admin/contexts">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>Context configuration</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.questionaires">\n' +
    '    <a href="#!/admin/questionnaires">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>Questionnaire configuration</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.mail">\n' +
    '    <a href="#!/admin/mail">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>Notification settings</span>\n' +
    '   </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.url_shortener">\n' +
    '    <a href="#!/admin/url_shortener">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>URL shortener</span>\n' +
    '   </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.advanced_settings">\n' +
    '    <a href="#!/admin/advanced_settings">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>Advanced settings</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <br />\n' +
    '\n' +
    '  <li data-ng-class="active.activities">\n' +
    '    <a href="#!/admin/activities">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>Recent activities</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.stats">\n' +
    '    <a href="#!/admin/stats">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>System stats</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.anomalies">\n' +
    '    <a href="#!/admin/anomalies">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>Anomalies</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <br />\n' +
    '\n' +
    '  <li data-ng-class="active.users_overview">\n' +
    '    <a href="#!/admin/overview/users">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>User overview</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.tips_overview">\n' +
    '    <a href="#!/admin/overview/tips">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>Submission overview</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '\n' +
    '  <li data-ng-class="active.files_overview">\n' +
    '    <a href="#!/admin/overview/files">\n' +
    '      <i class="glyphicon glyphicon-chevron-right"></i>\n' +
    '      <span data-translate>File overview</span>\n' +
    '    </a>\n' +
    '  </li>\n' +
    '</ul>\n'
  );


  $templateCache.put('views/admin/stats.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="row">\n' +
    '      <div class="col-md-12">\n' +
    '        <span data-translate>Stats of the week:</span>\n' +
    '        <a data-ng-click="decrement_week()"><span class="glyphicon glyphicon-chevron-left"></span></a>\n' +
    '        <span>{{week | weekNumber}} {{date | date: \'yyyy\'}}</span>\n' +
    '        <a data-ng-click="increment_week()"><span class="glyphicon glyphicon-chevron-right"></span></a>\n' +
    '      </div>\n' +
    '\n' +
    '      <br /><br />\n' +
    '\n' +
    '      <div id="chart"></div>\n' +
    '\n' +
    '      <div id="StatsInfoTable" class="col-md-12" data-ng-if="blob">\n' +
    '        <div class="col-md-3">\n' +
    '          <div>\n' +
    '            <label data-translate>Started submissions</label>\n' +
    '            {{blob.summary.started_submissions}}\n' +
    '          </div>\n' +
    '          <div>\n' +
    '            <label data-translate>Completed submissions</label>\n' +
    '            {{blob.summary.completed_submissions}}\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="col-md-3">\n' +
    '          <div>\n' +
    '            <label data-translate>Failed logins</label>\n' +
    '            {{blob.summary.failed_logins}}\n' +
    '          </div>\n' +
    '          <div>\n' +
    '            <label data-translate>Successful logins</label>\n' +
    '            {{blob.summary.successful_logins}}\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="col-md-3">\n' +
    '          <div>\n' +
    '            <label data-translate>Uploaded files</label>\n' +
    '            {{blob.summary.uploaded_files}}\n' +
    '          </div>\n' +
    '          <div>\n' +
    '            <label data-translate>Appended files</label>\n' +
    '            {{blob.summary.appended_files}}\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="col-md-3">\n' +
    '          <div>\n' +
    '            <label data-translate>Free disk space</label>\n' +
    '            {{blob.free_disk_space | prettyBytes}}\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/tips_overview.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <p>\n' +
    '    <span data-translate>This interface may help you understand how the server is used by the whistleblower. It displays the submissions currently on the server and a few statistics on the kind of usage (activity, files, comments).</span>\n' +
    '    </p>\n' +
    '    <div class="row">\n' +
    '      <div class="col-md-12">\n' +
    '        <div class="form-horizontal">\n' +
    '          <span class="form-group col-md-6" data-ng-init="orderProp=\'creation_date\'">\n' +
    '            <label class="control-label col-md-4">\n' +
    '              <span data-translate>Order by:</span>\n' +
    '            </label>\n' +
    '            <div class="col-md-6">\n' +
    '              <select data-ng-model="orderProp" class="form-control">\n' +
    '                <option value="status" data-translate>Status</option>\n' +
    '                <option value="creation_date" data-translate>Creation date</option>\n' +
    '                <option value="expiration_date" data-translate>Expiration date</option>\n' +
    '                <option value="wb_last_access" data-translate>WB Last Access</option>\n' +
    '                <option value="context_name" data-translate>Context Name</option>\n' +
    '              </select>\n' +
    '            </div>\n' +
    '          </span>\n' +
    '          <span class="form-group col-md-6" data-ng-init="reverse=\'true\'">\n' +
    '            <label class="control-label col-md-4">\n' +
    '              <span data-translate>Order:</span>\n' +
    '            </label>\n' +
    '            <div class="col-md-4">\n' +
    '              <select data-ng-model="reverse" class="form-control">\n' +
    '                <option value="true" data-translate>Desc</option>\n' +
    '                <option value="false" data-translate>Asc</option>\n' +
    '              </select>\n' +
    '            </div>\n' +
    '          </span>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div>\n' +
    '      <table class="table table-condensed table-striped" id="tipList">\n' +
    '        <thead>\n' +
    '          <tr>\n' +
    '            <th class="col-md-6">\n' +
    '              <span data-translate>Date</span>\n' +
    '            </th>\n' +
    '            <th class="col-md-6">\n' +
    '              <span data-translate>Info</span>\n' +
    '            </th>\n' +
    '          </tr>\n' +
    '        </thead>\n' +
    '\n' +
    '        <tbody id="tipListBody">\n' +
    '          <tr data-ng-repeat="tip in tips | orderBy:orderProp:reverse">\n' +
    '            <td class="col-md-6">\n' +
    '              <div class="row">\n' +
    '                <span class="col-md-6">\n' +
    '                  <b><span data-translate>Creation date</span></b>\n' +
    '                </span>\n' +
    '                <span class="col-md-6">\n' +
    '                  {{::tip.creation_date | date:\'dd-MM-yyyy HH:mm\'}}\n' +
    '                </span>\n' +
    '              </div>\n' +
    '              <div class="row">\n' +
    '                <span class="col-md-6">\n' +
    '                  <b><span data-translate>Expiration date</span></b>\n' +
    '                </span>\n' +
    '                <span class="col-md-6">\n' +
    '                  {{::tip.expiration_date | date:\'dd-MM-yyyy HH:mm\'}}\n' +
    '                </span>\n' +
    '              </div>\n' +
    '              <div class="row">\n' +
    '                <span class="col-md-6">\n' +
    '                  <b><span data-translate>WB Last Access</span></b>\n' +
    '                </span>\n' +
    '                <span class="col-md-6">\n' +
    '                  {{::tip.wb_last_access | date:\'dd-MM-yyyy HH:mm\'}} ({{::tip.wb_access_counter}})\n' +
    '                </span>\n' +
    '              </div>\n' +
    '            </td>\n' +
    '            <td class="col-md-6">\n' +
    '              <div class="row">\n' +
    '                <div class="col-md-12">\n' +
    '                  <b><span data-translate>Context</span>:</b>\n' +
    '                  <a href="/#!/admin/contexts">{{::tip.context_name}}</a>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '              <br />\n' +
    '              <a data-ng-click="show_details = !show_details" data-ng-init="show_details=false" data-ng-show="!show_details">\n' +
    '                <p data-translate>Show details</p>\n' +
    '              </a>\n' +
    '              <a data-ng-click="show_details = !show_details" data-ng-show="show_details">\n' +
    '                <p data-translate>Hide details</p>\n' +
    '              </a>\n' +
    '              <div data-ng-show="show_details">\n' +
    '                <div class="row">\n' +
    '                  <div class="col-md-12">\n' +
    '                    <b><span data-translate>Submissions</span></b>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '                <div class="row">\n' +
    '                  <div class="col-sm-offset-1 col-md-11">\n' +
    '                    <div data-ng-repeat="rtip in tip.receivertips">\n' +
    '                      <span class="glyphicon glyphicon-info-sign"></span>\n' +
    '                      {{::rtip.status}} ({{::rtip.access_counter}})\n' +
    '                      <a href="/#!/admin/receivers">{{::rtip.receiver_name}}</a>\n' +
    '                      {{::rtip.receiver_username}}\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '                <br />\n' +
    '                <div class="row">\n' +
    '                  <div class="col-md-12">\n' +
    '                    <b><span data-translate>Files</span>:</b>\n' +
    '                  </div>\n' +
    '                  <div class="col-sm-offset-1 col-md-11">\n' +
    '                    <div data-ng-repeat="ifile in tip.internalfiles">\n' +
    '                       <span class="glyphicon glyphicon-file"></span>\n' +
    '                       <span>{{::ifile.name}} ({{::ifile.size}}) {{::ifile.content_type}}</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '                <br />\n' +
    '                <div class="row">\n' +
    '                  <div class="col-md-12">\n' +
    '                    <b><span data-translate>Comments</span>:</b>\n' +
    '                  </div>\n' +
    '                  <div class="col-sm-offset-1 col-md-11">\n' +
    '                    <div data-ng-repeat="comment in tip.comments">\n' +
    '                      <span class="glyphicon glyphicon-comment"></span>\n' +
    '                      <span>{{::comment.type}} ({{::comment.lifetime | date:\'dd-MM-yyyy HH:mm\'}})</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </td>\n' +
    '          </tr>\n' +
    '        </tbody>\n' +
    '      </table>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/url_shortener.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="row">\n' +
    '      <form name="shorturlAddForm" class="form-inline" data-ng-controller="AdminShorturlAddCtrl" novalidate>\n' +
    '        <div class="form-group">\n' +
    '          <input type="text" class="form-control" name="short_url" data-ng-model="new_shorturl.shorturl" data-ng-pattern="shortener_shorturl_regexp" input-prefix prefix="/s/">\n' +
    '        </div>\n' +
    '        <div class="form-group">\n' +
    '          <input type="text" class="form-control" name="long_url" data-ng-model="new_shorturl.longurl" data-ng-pattern="shortener_longurl_regexp" input-prefix prefix="/">\n' +
    '        </div>\n' +
    '        <button type="submit"\n' +
    '                class="btn btn-primary"\n' +
    '                data-ng-disabled="shorturlAddForm.$invalid"\n' +
    '                data-ng-click="add_shorturl()">\n' +
    '          <i class="glyphicon glyphicon-plus-sign"></i>\n' +
    '          <span data-translate>Add</span>\n' +
    '        </button>\n' +
    '      </form>\n' +
    '      <br />\n' +
    '      <table class="table">\n' +
    '        <thead>\n' +
    '          <tr>\n' +
    '            <th class="col-md-3" data-translate>Short URL</th>\n' +
    '            <th class="col-md-9" data-translate>Long URL</th>\n' +
    '            <th class="col-md-1"></th>\n' +
    '          </tr>\n' +
    '        </thead>\n' +
    '        <tbody>\n' +
    '          <tr data-ng-repeat="shorturl in admin.shorturls | orderBy:\'shorturl\'" data-ng-controller="AdminShorturlEditCtrl">\n' +
    '            <td>{{shorturl.shorturl}}</td>\n' +
    '            <td>{{shorturl.longurl}}</td>\n' +
    '            <td>\n' +
    '              <button class="btn btn-xs btn-danger"\n' +
    '                      data-ng-click="delete_shorturl(shorturl)">\n' +
    '                <i class="glyphicon glyphicon-trash"></i>\n' +
    '                <span data-translate>Delete</span>\n' +
    '              </button>\n' +
    '            </td>\n' +
    '          </tr>\n' +
    '        </tbody>\n' +
    '      </table>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/users.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="adminConfigSection" data-ng-controller="AdminUserAddCtrl">\n' +
    '      <div class="row">\n' +
    '        <form name="newUser" novalidate>\n' +
    '          <div class="addUser col-md-6">\n' +
    '            <div class="editorTitle">\n' +
    '              <span data-translate>Add new user</span>\n' +
    '            </div>\n' +
    '            <div class="form-group">\n' +
    '              <label data-translate>Username</label>\n' +
    '              <input class="form-control" name="username" maxlength="{{node.maximum_namesize}}" data-ng-model="new_user.username" type="text" required />\n' +
    '              <div class="text-red" data-ng-show="newUser.username.$error.required">\n' +
    '                <span data-translate>This field is mandatory</span>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="form-group">\n' +
    '              <label data-translate>Name</label>\n' +
    '              <input class="form-control" name="name" maxlength="{{node.maximum_namesize}}" data-ng-model="new_user.name" type="text" required />\n' +
    '              <div class="text-red" data-ng-show="newUser.name.$error.required">\n' +
    '                <span data-translate>This field is mandatory</span>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="form-group">\n' +
    '              <label data-translate>Role</label>\n' +
    '              <select name="role" class="form-control" data-ng-model="new_user.role" required>\n' +
    '                <option value="admin" data-translate>Admin</option>\n' +
    '                <option value="receiver" data-translate>Recipient</option>\n' +
    '                <option value="custodian" data-translate>Custodian</option>\n' +
    '              </select>\n' +
    '              <div class="text-red" data-ng-show="newUser.role.$error.required">\n' +
    '                <span data-translate>This field is mandatory</span>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="form-group">\n' +
    '              <label data-translate>Email address</label>\n' +
    '              <input class="form-control" name="email" data-ng-model="new_user.email" maxlength="{{node.maximum_namesize}}" data-ng-pattern="email_regexp" type="text" required />\n' +
    '              <div class="text-red" data-ng-show="newUser.email.$error.pattern">\n' +
    '                <span data-translate>Invalid email address</span>\n' +
    '              </div>\n' +
    '              <div class="text-red" data-ng-show="newUser.email.$error.required">\n' +
    '                <span data-translate>This field is mandatory</span>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div class="form-group">\n' +
    '              <label data-translate>Password</label>\n' +
    '              <div>\n' +
    '                <span data-translate>Default user password is:</span>\n' +
    '                <span class="label label-primary">globaleaks</span>\n' +
    '              </div>\n' +
    '              <div data-translate>The system forces users to change the password at first login.</div>\n' +
    '            </div>\n' +
    '            <div class="form-group">\n' +
    '              <button class="pull-left btn btn-primary" data-ng-disabled="newUser.$invalid" data-ng-click="add_user()" type="submit">\n' +
    '                <i class="glyphicon glyphicon-plus-sign"></i>\n' +
    '                <span data-translate>Add</span>\n' +
    '              </button>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </form>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="adminConfigSection" data-ng-controller="AdminUsersCtrl" data-ng-show="admin.users.length > 0">\n' +
    '      <div class="editorTitle">\n' +
    '        <span data-translate>Configured users:</span>\n' +
    '      </div>\n' +
    '      <div class="userList" data-ng-repeat="user in admin.users | orderBy:\'name\'">\n' +
    '        <form id="user-{{$index}}" name="editUser" data-ng-controller="AdminUserEditorCtrl" novalidate>\n' +
    '          <div class="configItem userItem">\n' +
    '            <div class="editorHeader row" data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '              <span class="col-md-7 editorHeaderTitle">\n' +
    '                <span>{{user.name}}</span>\n' +
    '                <span class="label label-primary label-as-badge">\n' +
    '                  <span data-translate>Role</span><span>:</span>\n' +
    '                    <span data-ng-switch="user.role">\n' +
    '                      <span data-ng-switch-when="admin" data-translate>Admin</span>\n' +
    '                      <span data-ng-switch-when="receiver" data-translate>Recipient</span>\n' +
    '                      <span data-ng-switch-when="custodian" data-translate>Custodian</span>\n' +
    '                    </span>\n' +
    '                  </span>\n' +
    '                </span>\n' +
    '              </span>\n' +
    '              <span class="col-md-5">\n' +
    '                <span class="pull-right">\n' +
    '                  <button class="actionButton btn btn-xs btn-default"\n' +
    '                    data-ng-show="!editing"\n' +
    '                    data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                    <span data-translate>Edit</span>\n' +
    '                  </button>\n' +
    '                  <button class="actionButton btn btn-xs btn-success"\n' +
    '                    data-ng-show="editing"\n' +
    '                    data-ng-click="save_user(user)">\n' +
    '                    <span data-translate>Save</span>\n' +
    '                  </button>\n' +
    '                  <button \n' +
    '                    class="actionButton btn btn-xs btn-default"\n' +
    '                    data-ng-show="editing"\n' +
    '                    data-ng-click="toggleEditing(); $event.stopPropagation();">\n' +
    '                    <span data-translate>Cancel</span>\n' +
    '                  </button>\n' +
    '                  <button class="actionButton btn btn-xs btn-danger"\n' +
    '                    data-ng-show="user.deletable"\n' +
    '                    data-ng-click="userDeleteDialog(user); $event.stopPropagation();"\n' +
    '                    popover-placement="right"\n' +
    '                    popover-trigger="mouseenter">\n' +
    '                    <span data-translate>Delete</span>\n' +
    '                  </button>\n' +
    '                  <span data-ng-if="admin.users.length > 1">\n' +
    '                    <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveUpAndSave(user); $event.stopPropagation();" uib-popover="{{\'Move up\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                      <i class="glyphicon glyphicon-menu-up"></i>\n' +
    '                    </button>\n' +
    '                    <button class="actionButton btn btn-xs btn-primary" data-ng-click="moveDownAndSave(user); $event.stopPropagation();" uib-popover="{{\'Move down\' | translate}}" popover-placement="left" popover-trigger="mouseenter">\n' +
    '                      <i class="glyphicon glyphicon-menu-down"></i>\n' +
    '                    </button>\n' +
    '                  </span>\n' +
    '                </span>\n' +
    '              </span>\n' +
    '            </div>\n' +
    '            <div class="editor" data-ng-if="editing">\n' +
    '              <hr />\n' +
    '              <div class="row">\n' +
    '                <div class="col-md-12 uploadfile"\n' +
    '                     flow-init="{target: \'admin/staticfiles/\' + user.id, headers: get_auth_headers()}"\n' +
    '                     flow-files-submitted="$flow.upload()"\n' +
    '                     flow-file-success="updateUserImgUrl()"\n' +
    '                     flow-name="flowObj">\n' +
    '                  <div class="imageUpload" data-ng-controller="AdminImgUploadCtrl">\n' +
    '                    <div class="profile" data-ng-mouseenter="openUploader()" data-ng-mouseleave="closeUploader()">\n' +
    '                      <div flow-btn>\n' +
    '                        <span class="col-md-12 changePicture">\n' +
    '                          <span data-translate>Change picture</span>\n' +
    '                        </span>\n' +
    '                        <img data-ng-src="{{userImgUrl}}" class="img-thumbnail baseimage">\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                    <div data-ng-if="file_upload_error" class="text-red"><span data-translate>Error:</span> <span>{{file_upload_error}}</span></div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Username</label>\n' +
    '                    <input class="form-control" name="username" maxlength="{{node.maximum_namesize}}" data-ng-model="user.username" type="text" required />\n' +
    '                    <div class="text-red" data-ng-show="editUser.name.$error.required">\n' +
    '                      <span data-translate>This field is mandatory</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Name</label>\n' +
    '                    <input class="form-control" name="name" maxlength="{{node.maximum_namesize}}" data-ng-model="user.name" type="text" required />\n' +
    '                    <div class="text-red" data-ng-show="editUser.name.$error.required">\n' +
    '                      <span data-translate>This field is mandatory</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Email address</label>\n' +
    '                    <input class="form-control" name="email" data-ng-model="user.mail_address" type="text" maxlength="{{node.maximum_namesize}}" data-ng-pattern="email_regexp" required />\n' +
    '                    <div class="text-red" data-ng-show="editUser.email.$error.required">\n' +
    '                      <span data-translate>This field is mandatory</span>\n' +
    '                    </div>\n' +
    '                    <div class="text-red" data-ng-show="editUser.email.$error.pattern">\n' +
    '                      <span data-translate>Invalid email address</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Password</label>\n' +
    '                    <input name="password" class="form-control" data-ng-model="user.password" maxlength="{{node.maximum_namesize}}" type="password" />\n' +
    '                    <p class="text-red" data-ng-show="unsafe_password">\n' +
    '                      <span data-translate>The choosen password is unsafe, it should have</span>:\n' +
    '                    </p>\n' +
    '                    <ul>\n' +
    '                      <li class="text-red" data-ng-hide="pwdHasLetter">\n' +
    '                        <span data-translate>At least one letter</span>\n' +
    '                      </li>\n' +
    '                      <li class="text-red" data-ng-hide="pwdHasNumber">\n' +
    '                        <span data-translate>At least one number</span>\n' +
    '                      </li>\n' +
    '                      <li class="text-red" data-ng-hide="pwdValidLength">\n' +
    '                        <span data-translate>At least 8 characters</span>\n' +
    '                      </li>\n' +
    '                    </ul>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <input data-ng-model="user.password_change_needed" type="checkbox" />\n' +
    '                    <label data-translate>Force password change</label>\n' +
    '                    <div data-ng-show="user.password_change_needed">\n' +
    '                      <span class="label label-info" data-translate>Enabled</span>\n' +
    '                      <span data-translate>The user will be forced to change its password on next login.</span>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Description</label>\n' +
    '                    <div>\n' +
    '                      <textarea name="description" class="form-control" data-ng-model="user.description" maxlength="{{node.maximum_textsize}}"></textarea>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Status</label>\n' +
    '                    <select class="form-control" data-ng-model="user.state">\n' +
    '                      <option value="disabled" data-translate>Disabled</option>\n' +
    '                      <option value="enabled" data-translate>Enabled</option>\n' +
    '                    </select>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Language</label>\n' +
    '                    <select class="form-control" data-ng-model="user.language" data-ng-options="item.code as item.name for item in languages_enabled_selector | orderBy:\'name\'"></select>\n' +
    '                  </div>\n' +
    '                  <div class="form-group">\n' +
    '                    <label data-translate>Timezone</label>\n' +
    '                    <select class="form-control" data-ng-model="user.timezone" data-ng-options="item.timezone as item.label for item in timezones"></select>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '              <div class="row">\n' +
    '                <div class="col-md-12">\n' +
    '                  <div class="form-group" data-ng-show="user.pgp_key_status === \'enabled\'">\n' +
    '                    <div class="alert alert-success">\n' +
    '                      <div data-translate>Encryption is enabled!</div>\n' +
    '                      <div data-translate>Email notifications will be encrypted.</div>\n' +
    '                    </div>\n' +
    '                    <div>\n' +
    '                      <div data-translate>Details of the PGP key:</div>\n' +
    '                      <div>\n' +
    '                        <span data-translate>The fingerprint is:</span>\n' +
    '                        <b>{{user.pgp_key_fingerprint}}</b>\n' +
    '                      </div>\n' +
    '                    </div>\n' +
    '                    <div class="preformatted">{{user.pgp_key_info}}</div>\n' +
    '                    <div class="form-group">\n' +
    '                      <input data-ng-model="user.pgp_key_remove" type="checkbox" />\n' +
    '                      <label data-translate>Remove the PGP key</label>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                  <div class="form-group" data-ng-hide="user.pgp_key_status === \'enabled\'">\n' +
    '                    <div class="alert alert-danger">\n' +
    '                      <div data-translate>Encryption is not enabled!</div>\n' +
    '                      <div data-translate>Email notifications won\'t be encrypted.</div>\n' +
    '                    </div>\n' +
    '                    <div>\n' +
    '                      <label data-translate>Set up encryption by providing a PGP public key</label>\n' +
    '                      <textarea class="form-control" data-ng-attr-placeholder="{{\'Copy and paste the PGP public key here\' | translate}}" data-ng-model="user.pgp_key_public"></textarea>\n' +
    '                    </div>\n' +
    '                  </div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </form>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/admin/users_overview.html',
    '<div class="row">\n' +
    '  <div id="ConfigSidebarBox" class="col-md-3" data-ng-include="\'views/admin/sidebar.html\'"></div>\n' +
    '  <div class="col-md-9">\n' +
    '    <span data-translate>This interface shows user activity on your server. It may be helpful in detecting anomalies and providing support to the recipients using your server.</span>\n' +
    '    <div data-ng-if="receivers.length">\n' +
    '      <div class="row">\n' +
    '        <div class="col-md-12">\n' +
    '          <div class="form-horizontal">\n' +
    '            <span class="form-group col-md-12" data-ng-init="search.id = receivers.length ? receivers[0].id : \'\'">\n' +
    '              <label class="control-label col-md-4">\n' +
    '                <span data-translate>Recipient</span>:\n' +
    '              </label>\n' +
    '              <div class="col-md-6">\n' +
    '                <select data-ng-model="search.id" class="form-control">\n' +
    '                  <option data-ng-repeat="receiver in receivers" value="{{::receiver.id}}">{{::receiver.name}}</option>\n' +
    '                </select>\n' +
    '              </div>\n' +
    '            </span>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div class="table-responsive">\n' +
    '        <table class="table table-condensed table-striped" id="receiverList">\n' +
    '          <thead>\n' +
    '            <tr>\n' +
    '              <th class="col-md-6">\n' +
    '                <span data-translate>Submissions</span>\n' +
    '              </th>\n' +
    '              <th class="col-md-6">\n' +
    '                <span data-translate>Files and downloads</span>\n' +
    '              </th>\n' +
    '            </tr>\n' +
    '          </thead>\n' +
    '          <tbody id="receiverListBody">\n' +
    '            <tr data-ng-repeat="receiver in receivers | filter:search">\n' +
    '              <td class="col-md-4">\n' +
    '                <div data-ng-repeat="rtip in receiver.receivertips">\n' +
    '                  <span class="glyphicon glyphicon-book"></span>\n' +
    '                  <span>{{::rtip.status}} {{::rtip.last_access | date:\'dd-MM-yyyy HH:mm\'}} ({{::rtip.access_counter}})</span>\n' +
    '                </div>\n' +
    '              </td>\n' +
    '              <td class="col-md-4">\n' +
    '                <div data-ng-repeat="rfile in receiver.receiverfiles">\n' +
    '                  <span class="glyphicon glyphicon-file"></span>\n' +
    '                  <span>{{::rfile.file_name}} ({{::rfile.downloads}}), {{::rfile.last_access | date:\'dd-MM-yyyy HH:mm\'}}</span>\n' +
    '                </div>\n' +
    '              </td>\n' +
    '            </tr>\n' +
    '          </tbody>\n' +
    '        </table>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/autologin.html',
    ""
  );


  $templateCache.put('views/custodian/identity_access_requests.html',
    '<div data-ng-controller="CustodianIdentityAccessRequestsCtrl">\n' +
    '  <div class="row">\n' +
    '    <div class="col-md-12">\n' +
    '      <span class="pull-left">\n' +
    '        <span id="link-reload"\n' +
    '              data-ng-click="reload()"\n' +
    '              uib-popover="{{\'Refresh page\' | translate}}"\n' +
    '              popover-placement="top"\n' +
    '              popover-trigger="mouseenter"\n' +
    '              class="btn btn-default">\n' +
    '          <span class="glyphicon glyphicon-refresh"></span>\n' +
    '        </span>\n' +
    '      </span>\n' +
    '      <span class="pull-right">\n' +
    '        <a id="receiver-link-preferences"\n' +
    '           href="#!/receiver/preferences"\n' +
    '           uib-popover="{{\'Preferences\' | translate}}"\n' +
    '           popover-placement="top"\n' +
    '           popover-trigger="mouseenter"\n' +
    '           class="btn btn-default">\n' +
    '            <span class="glyphicon glyphicon-cog"></span>\n' +
    '        </a>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <br />\n' +
    '  <div class="row">\n' +
    '    <div class="col-md-12">\n' +
    '      <table class="table table-condensed table-striped">\n' +
    '        <thead>\n' +
    '          <tr>\n' +
    '            <th data-translate>Request date</th>\n' +
    '            <th data-translate>Submission date</th>\n' +
    '            <th data-translate>User</th>\n' +
    '            <th data-translate>Request motivation</th>\n' +
    '            <th data-translate>Authorization</th>\n' +
    '            <th data-translate>Link</th>\n' +
    '          </tr>\n' +
    '        </thead>\n' +
    '        <tbody>\n' +
    '          <tr id="iar-{{$index}}" data-ng-repeat="iar in iars | filter:search" >\n' +
    '            <td>{{iar.request_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '            <td>{{iar.submission_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '            <td>{{iar.request_user_name | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '            <td>{{iar.request_motivation | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '            <td>\n' +
    '              <button class="btn btn-xs btn-primary" data-ng-click="authorize_identity_access_request(iar.id)" data-translate>Authorize</button>&nbsp;\n' +
    '              <button class="btn btn-xs btn-danger" data-ng-click="file_denied_identity_access_reply(iar.id)" data-translate>Deny</button>\n' +
    '            </td>\n' +
    '            <td>\n' +
    '              <button class="btn btn-xs btn-success" data-ng-click="go(\'/status/\' + iar.receivertip_id)">Vai alla segnalazione</button>\n' +
    '            </td>\n' +
    '          </tr>\n' +
    '        </tbody>\n' +
    '      </table>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/forced_password_change.html',
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <span data-translate>Before proceeding, please change your password.</span>\n' +
    '    <br /><br />\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="row">\n' +
    '  <div class="col-md-4">\n' +
    '    <form name="preferencesForm" novalidate>\n' +
    '      <div data-ng-include="\'views/partials/preferences/password.html\'"></div>\n' +
    '    </form>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/home.html',
    '<div id="HomePageBox">\n' +
    '  <div id="HomePageBoxHeader">\n' +
    '    <div id="HomePageBoxNodePresentation" data-ng-if="node.presentation">{{::node.presentation}}</div>\n' +
    '    <div id="HomePageBoxNodeDescription" data-ng-if="node.description">{{::node.description}}</div>\n' +
    '  </div>\n' +
    '\n' +
    '  <div id="WhistleblowerBox" class="row">\n' +
    '    <div data-ng-show="node.configured">\n' +
    '      <div id="WhistleblowerSubmitBoxButtonDisabled" class="row" data-ng-show="node.disable_submissions || !node.accept_submissions || (!node.tor2web_whistleblower && !anonymous)">\n' +
    '        <button class="btn btn-danger" disable="disabled">\n' +
    '          <i class="glyphicon glyphicon-ban-circle"></i>\n' +
    '          <span data-translate>Whistleblowing disabled</span>\n' +
    '        </button>\n' +
    '      </div>\n' +
    '      <div class="row" data-ng-show="!node.tor2web_whistleblower && !anonymous">\n' +
    '        <p class="text-red">\n' +
    '          <span data-translate>You are connecting to the server without anonymity and this server supports only anonymous submissions</span>\n' +
    '        </p>\n' +
    '      </div>\n' +
    '      <div class="row" data-ng-show="!node.accept_submissions">\n' +
    '        <p class="text-red">\n' +
    '          <span data-translate>Server temporarly unusable due to resource exhaustion; advise the Admin if you can.</span>\n' +
    '        </p>\n' +
    '      </div>\n' +
    '      <div class="row" data-ng-show="!node.disable_submissions && node.accept_submissions && (node.tor2web_whistleblower || anonymous)">\n' +
    '        <div id="WhistleblowerSubmitBox">\n' +
    '          <div id="WhistleblowerSubmitBoxHeader">\n' +
    '            <span>{{::node.whistleblowing_question}}</span>\n' +
    '          </div>\n' +
    '          <div id="WhistleblowerSubmitBoxButton">\n' +
    '            <a data-ng-click="goToSubmission()" class="btn btn-primary">\n' +
    '              <i class="glyphicon glyphicon-bullhorn"></i>\n' +
    '              <span>{{::node.whistleblowing_button}}</span>\n' +
    '            </a>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="center-block">\n' +
    '          <span data-ng-include="\'views/partials/wb_login_box.html\'"></span>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div data-ng-hide="node.configured">\n' +
    '      <div class="title2" data-translate>This server is not configured.</div>\n' +
    '      <div class="title3" data-translate>You will not be able to send a submission.</div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '\n' +
    '  <div id="GlobaleaksInfoBox" class="row" data-ng-if="!node.disable_donation_panel">\n' +
    '    <div class="col-md-12">\n' +
    '      <span data-translate>This platform makes use of GlobaLeaks software specifically designed to protect the identity of the submitter and of the recipient in the exchange of leaked materials.</span><br />\n' +
    '      <span data-translate>The software is developed by the non-profit Hermes Center for Transparency and Digital Human Rights.</span>\n' +
    '      <a href="http://logioshermes.org/home/about-mission/support-us/" target="_blank" rel="noreferrer"><span data-translate>Please support Hermes through their donation page.</span></a>\n' +
    '      </p>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/login.html',
    '<div class="row" data-ng-show="errors[0].code == 29">\n' +
    '  <div class="col-md-9">\n' +
    '    <div class="alert alert-danger">\n' +
    '      <strong><span data-translate>Authentication failed</span></strong>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="row">\n' +
    '  <div class="col-md-4">\n' +
    '    <form name="loginForm" novalidate>\n' +
    '      <div data-ng-if="::!simplifiedLogin">\n' +
    '        <div class="form-group">\n' +
    '          <label data-translate>Username</label>\n' +
    '          <input class="form-control" name="username" data-ng-model="loginUsername" type="text" autocomplete="off">\n' +
    '        </div>\n' +
    '\n' +
    '        <div class="form-group">\n' +
    '          <label data-translate>Password</label>\n' +
    '          <input class="form-control" name="password" data-ng-model="loginPassword" type="password" autocomplete="off">\n' +
    '        </div>\n' +
    '\n' +
    '        <button class="btn btn-success" data-ng-disabled="loginInProgress || loginForm.$invalid" data-ng-click="login(loginUsername, loginPassword)" type="submit">\n' +
    '          <i class="glyphicon glyphicon-log-in"></i>\n' +
    '          <span data-translate>Log in</span>\n' +
    '        </button>\n' +
    '      </div>\n' +
    '      <div data-ng-if="::simplifiedLogin">\n' +
    '        <div class="form-group">\n' +
    '          <label data-translate>Please select your account:</label>\n' +
    '          <select class="form-control" data-ng-model="loginUsername" data-ng-options="item.username as item.name for item in receivers | filter:filterReceivers | orderBy:\'name\'" required></select>\n' +
    '        </div>\n' +
    '\n' +
    '        <div class="form-group" data-ng-show="loginUsername">\n' +
    '          <label data-translate>Now type your password, then click \'Log in\':</label>\n' +
    '          <input class="form-control" name="password" data-ng-model="loginPassword" type="password" autocomplete="off" required />\n' +
    '        </div>\n' +
    '\n' +
    '        <div class="form-group" data-ng-show="loginUsername">\n' +
    '          <button class="btn btn-success" data-ng-disabled="loginInProgress || loginForm.$invalid" data-ng-click="login(loginUsername, loginPassword)" type="submit">\n' +
    '            <i class="glyphicon glyphicon-log-in"></i>\n' +
    '            <span data-translate>Log in</span>\n' +
    '          </button>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </form>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/assign_score_points.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Assign score points</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <span class="alert alert-default">\n' +
    '    <span data-translate>Enter the number of score points to be assigned when this option is selected:</span>\n' +
    '    <input id="score_points" class="form-control" data-ng-model="args.score_points" type="number" />\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <a id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </a>\n' +
    '  <a id="modal-action-ok" class="btn btn-danger" data-ng-click="args.score_points = \'0\'; cancel()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Reset</span>\n' +
    '  </a>\n' +
    '  <a id="modal-action-ok" class="btn btn-primary" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Confirm</span>\n' +
    '  </a>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/captchas.html',
    '<div class="modal-header">\n' +
    '  <div class="modal-title" data-translate>Are you human?</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div id="HumanCaptcha" data-ng-if="args.submission._token.human_captcha">\n' +
    '    <div class="alert alert-warning">\n' +
    '      <div data-translate>We do not discriminate based on race and gender, but we do against computers :)</div>\n' +
    '      <br />\n' +
    '      <div>\n' +
    '        <span data-translate>Just to prove you are human, please answer the following math challenge:</span>\n' +
    '        <span>{{args.submission._token.human_captcha}}</span>\n' +
    '      </div>\n' +
    '      <br />\n' +
    '      <div class="form-group" style="width: 100%; text-align: center">\n' +
    '        <div class="col-xs-4">\n' +
    '          <input id="human_captcha_answer" class="form-control" data-ng-model="args.submission._token.human_captcha_answer" type="number" autocomplete="off" />\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <br />\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <a id="modal-action-ok" class="btn btn-success" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>I\'ve solved the math challenge, hide this thing now!</span>\n' +
    '  </a>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/context_delete.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Are you sure?</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div class="alert alert-danger">\n' +
    '    <span data-translate>Are you sure that you want to delete the context?</span>\n' +
    '    <br />\n' +
    '    <span data-translate>Please take care that all associated data is properly deleted.</span>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <a id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </a>\n' +
    '  <a id="modal-action-ok" class="btn btn-danger" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Delete</span>\n' +
    '  </a>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/credit_card.html',
    '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 749.1 467.8" enable-background="new 0 0 749.1 467.8" xml:space="preserve">\n' +
    '  <g font-size="20">\n' +
    '    <path fill="#428bca" d="M55.7,0h637.7c30.6,0,55.7,25.1,55.7,55.7v356.4c0,30.6-25.1,55.7-55.7,55.7H55.7 C25.1,467.8,0,442.7,0,412.1V55.7C0,25.1,25.1,0,55.7,0z"></path>\n' +
    '    <g>\n' +
    '      <path fill="#DEDEDE" d="M124,75.7h30.3c26.2,0,47.6,21.4,47.6,47.6v11.9c0,26.2-21.4,47.6-47.6,47.6H124 c-26.2,0-47.6-21.4-47.6-47.6v-11.9C76.4,97.1,97.8,75.7,124,75.7z"></path>\n' +
    '      <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="199.1" y1="108.3" x2="79.1" y2="108.3"></line>\n' +
    '      <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="79.1" y1="151.3" x2="199.1" y2="151.3"></line>\n' +
    '      <circle fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" cx="139.1" cy="129.2" r="20.7"></circle>\n' +
    '    </g>\n' +
    '    <text id="credit_card" transform="matrix(1 0 0 1 300 120)" class="cc-text-1">{{\'CREDIT CARD\' | translate}}</text>\n' +
    '    <text id="cc_number" transform="matrix(1 0 0 1 75 260)" fill="#FFFFFF" font-family="\'OCRAExtended\'" class="cc-text-1">{{formatted_keycode}}</text>\n' +
    '    <text id="valid_from" transform="matrix(1 0 0 1 320 306)" class="cc-text-2">{{\'VALID FROM\' | translate}}</text>\n' +
    '    <text transform="matrix(1 0 0 1 320 345)" fill="#FFFFFF" font-family="\'sans-serif\'" class="cc-text-2">12/13</text>\n' +
    '    <text id="expires_end" transform="matrix(1 0 0 1 535 306)" class="cc-text-2">{{\'EXPIRES END\' | translate}}</text>\n' +
    '    <text transform="matrix(1 0 0 1 535 345)" fill="#FFFFFF" font-family="\'sans-serif\'" class="cc-text-2">12/18</text>\n' +
    '    <text id="your_name" transform="matrix(1 0 0 1 75 420)" font-family="\'sans-serif\'" class="cc-text-1">{{\'YOUR NAME\' | translate}}</text>\n' +
    '  </g>\n' +
    '</svg>\n'
  );


  $templateCache.put('views/partials/disable_encryption.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" data-ng-click="close()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Danger ahead!</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <p data-translate>Enabling this option makes the system store submission files unencrypted.\n' +
    '  \n' +
    '  <p data-translate>This means that if the server running the platform were to be seized, it would be possible to extract the files that have been submitted.</p>\n' +
    '\n' +
    '  <p data-translate>Are you sure that you wish to continue?</p>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <button type="button" class="btn btn-primary" data-ng-click="no()">\n' +
    '    <span data-translate>No</span>\n' +
    '  </button>\n' +
    '  <button type="button" class="btn btn-primary" data-ng-click="ok()">\n' +
    '    <span data-translate>Yes</span>\n' +
    '  </button>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/fileupload_button.html',
    '<div data-ng-controller="WBFileUploadCtrl" data-ng-init="fileinput = field ? field.id : \'status_page\'; uploads[fileinput] = {}">\n' +
    '  <div flow-init="{target: fileupload_url, headers: get_auth_headers}" flow-file-added="onFileAdded($event, $file, $flow)" flow-files-submitted="$flow.pause()" flow-name="uploads[fileinput]">\n' +
    '    <span data-ng-if="field === undefined || field.multi_entry">\n' +
    '      <button id="fileupload" class="btn btn-success fileinput-button" data-ng-disabled="disabled" flow-btn>\n' +
    '        <i class="glyphicon glyphicon-paperclip"></i>\n' +
    '        <span data-translate>Add file</span>\n' +
    '      </button>\n' +
    '    </span>\n' +
    '    <span data-ng-if="field !== undefined && !field.multi_entry && (session === null || session.role !== \'receiver\')">\n' +
    '      <button id="fileupload" class="btn btn-success fileinput-button" data-ng-disabled="disabled" flow-btn flow-single-file>\n' +
    '        <i class="glyphicon glyphicon-paperclip"></i>\n' +
    '        <span data-translate>Add file</span>\n' +
    '      </button>\n' +
    '    </span>\n' +
    '    <span data-ng-if="session !== null && session.role === \'receiver\'">\n' +
    '      <br>\n' +
    '      <label>\n' +
    '          Descrizione\n' +
    '        </label><br>\n' +
    '        <textarea class="form-control" id="descrizione-file" ng-model="file_description" ng-change="changeValue($flow)"></textarea>\n' +
    '      <br>\n' +
    '      <b>Destinatario:</b><br>\n' +
    '      <select data-ng-model="interno" id="select-destinatario" ng-change="changeValue($flow)">\n' +
    '        <option value="segnalante">Segnalante</option>\n' +
    '        <option value="interno">Interno</option>\n' +
    '      </select>\n' +
    '      <!--\n' +
    '      <label>\n' +
    '        <input type="radio" id="interno" data-ng-model="$flow.opts.target" data-ng-value="\'rtip/upload/\'+tip_id+\'?description=\'+file_description"> Interno\n' +
    '      </label><br>\n' +
    '      <label>\n' +
    '        <input type="radio" id="segnalante" data-ng-model="$flow.opts.target" data-ng-value="\'wbtip/upload/\'+tip_id+\'?description=\'+file_description"> Segnalante\n' +
    '      </label>\n' +
    '      -->\n' +
    '      <br>\n' +
    '      <br>\n' +
    '      <button id="fileupload" class="btn btn-success fileinput-button" data-ng-disabled="disabled" flow-btn flow-single-file>\n' +
    '        <i class="glyphicon glyphicon-paperclip"></i>\n' +
    '        <span data-translate>Add file</span>\n' +
    '      </button>\n' +
    '    </span>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/fileupload_status.html',
    '<div class="uploadingBox" data-ng-if="uploadedFiles(uploads)" flow-init>\n' +
    '  <div id="FileUploadsHeader">\n' +
    '    <div data-ng-switch="getUploadStatus(uploads)">\n' +
    '      <div data-ng-switch-when="uploading" data-translate>Uploading files...</div>\n' +
    '      <div data-ng-switch-when="finished" data-translate>Upload completed successfully!</div>\n' +
    '      <div data-ng-switch-when="error" data-translate>Error while uploading files; check below for details.</div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div id="FileUpoloadsInfo">\n' +
    '    <div data-ng-show="isUploading(uploads)">\n' +
    '      <span data-translate>Estimated upload time:</span> <span>{{remainingUploadTime(uploads)}} </span><span data-translate>seconds</span>\n' +
    '      <div class="progress progress-striped" data-ng-class="active">\n' +
    '        <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" data-ng-style="{width: (uploadProgress(uploads) * 100) + \'%\'}"></div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div data-ng-repeat="flow in uploads" flow-name="flow">\n' +
    '    <div data-ng-repeat="file in flow.files" data-ng-hide="hideUploadWhenFinished === true && file.isComplete() && !file.error">\n' +
    '      <div class="fileUploadBox">\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-4">\n' +
    '            <div class="filePreview">\n' +
    '              <div class="imgPreview">\n' +
    '                <img flow-img="file" data-ng-if="show_file_preview(file.file.type)" />\n' +
    '              </div>\n' +
    '              <div class="fileUploadProgress">\n' +
    '                <div class="fileUploadProgressOverlay"></div>\n' +
    '                <div class="fileUploadIcon" data-ng-show="file.error">\n' +
    '                  <i class="glyphicon glyphicon-ban-circle"></i>\n' +
    '                </div>\n' +
    '                <div class="fileUploadIcon" data-ng-show="!file.error && !file.isComplete()">\n' +
    '                  <i class="glyphicon glyphicon-time"></i>\n' +
    '                </div>\n' +
    '                <div class="fileUploadIcon" data-ng-show="!file.error && file.isComplete()">\n' +
    '                  <i class="glyphicon glyphicon-ok"></i>\n' +
    '                </div>\n' +
    '                <div class="progress progress-striped fileuploadprogress" data-ng-class="{active: file.isUploading()}" data-ng-show="file.isUploading()">\n' +
    '                  <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" data-ng-style="{\'width\': (uploadProgress() * 100) + \'px\'}"></div>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div class="col-md-offset-1 col-md-7 fileDetails">\n' +
    '            <div>\n' +
    '              <label class="fileName">{{file.name}}</label>\n' +
    '            </div>\n' +
    '            <div>\n' +
    '              <label class="fileSize">\n' +
    '                <span data-translate>Size</span>:<span>{{file.size | prettyBytes}}</span>\n' +
    '              </label>\n' +
    '            </div>\n' +
    '            <div data-ng-if="!file.isComplete();">\n' +
    '      				<div>\n' +
    '      					<a class="btn btn-danger btn-sm" ng-click="file.cancel();">Cancella</a>\n' +
    '      				</div>\n' +
    '      				<br>\n' +
    '              <div data-ng-if="session.role !== \'receiver\'">\n' +
    '        				<div>\n' +
    '        					<a class="btn btn-success btn-sm" ng-click="file.resume();">Conferma</a>\n' +
    '        				</div>\n' +
    '              </div>\n' +
    '              <div data-ng-if="session !== null && session.role === \'receiver\'">\n' +
    '                <div>\n' +
    '                  <a class="btn btn-success btn-sm" ng-click="file.resume();">Conferma</a>\n' +
    '                </div>\n' +
    '              </div>\n' +
    '      			</div>\n' +
    '            <br />\n' +
    '            <div data-ng-hide="file.error">\n' +
    '              <div data-ng-repeat="option in file.value">\n' +
    '                <textarea class="form-control" data-ng-model="option.value" data-ng-attr-placeholder="{{option[\'attrs\'][\'name\']}}"></textarea>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div data-ng-show="file.error && file.error_msg" class="text-red">\n' +
    '              <span data-translate="Error:"></span> <span>{{file.error_msg}}</span>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/footer.html',
    '<div class="vcenter preformatted">{{node.footer}}</div>\n'
  );


  $templateCache.put('views/partials/header.html',
    '<div id="HeaderBoxContent">\n' +
    '  <div id="HeaderBoxContentLeft">\n' +
    '    <div id="LogoBox">\n' +
    '      <a href="#!/"><img data-ng-src="{{app_logo}}"></a>\n' +
    '    </div>\n' +
    '    <div id="TitleBox">\n' +
    '      <div id="titleboxdefault">\n' +
    '        <div id="{{hasSubtitle() ? \'PageTitleWithSubtitle\' : \'PageTitle\'}}">{{ht}}</div>\n' +
    '        <div id="PageSubtitle" data-ng-if="hasSubtitle()">{{header_subtitle | translate}}</div>\n' +
    '      </div>\n' +
    '      <div id="titleboxoneline">\n' +
    '        <span id="{{hasSubtitle() ? \'PageTitleWithSubtitle\' : \'PageTitle\'}}">{{ht}}</span>\n' +
    '        <span id="PageSubtitle" data-ng-if="hasSubtitle()">- <span>{{header_subtitle | translate}}</span></span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div id="HeaderBoxContentRight">\n' +
    '    <span id="UserBox" class="pull-right" data-ng-if="!isWizard()" data-ng-include="\'views/partials/user.html\'"></span>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/intro.html',
    '<div id="IntroBox" data-ng-switch="" on="step">\n' +
    '  <div data-ng-switch-when="0">\n' +
    '    <div class="modal-header">\n' +
    '      <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '        <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '      </button>\n' +
    '      <div>&nbsp;</div>\n' +
    '    </div>\n' +
    '    <div class="modal-body IntroBoxBody">\n' +
    '      <div class="IntroModalTitle" data-translate>Select language</div>\n' +
    '      <div data-translate>Please select which language you wish to use.</div>\n' +
    '      <br />\n' +
    '      <div id="LanguagePreselectorBox" class="row">\n' +
    '        <div data-ng-show="languages_enabled_length <= 3">\n' +
    '          <span action="" data-ng-repeat="(lang_key, lang_name) in languages_enabled">\n' +
    '            <span class="LanguagePreselectorBoxElem" data-ng-class="{LanguageSelected: data.language == lang_key}">\n' +
    '              <div class="LanguagePreselectorBoxElemText">\n' +
    '                <span>\n' +
    '                  <input data-ng-model="data.language" type="radio" name="language" value="{{lang_key}}"><br />\n' +
    '                  <span>{{lang_name}}</span>\n' +
    '                </span>\n' +
    '              </div>\n' +
    '            </span>\n' +
    '          </span>\n' +
    '        </div>\n' +
    '        <div data-ng-show="languages_enabled_length > 3">\n' +
    '          <select data-ng-model="data.language" data-ng-options="item.code as item.name for item in languages_enabled_selector"></select>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="modal-footer">\n' +
    '      <div class="pull-right">\n' +
    '        <button class="btn btn-default actionButton" data-ng-click="proceed()">\n' +
    '          <span data-translate>Proceed</span>\n' +
    '        </button>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div data-ng-switch-when="1">\n' +
    '    <div class="modal-header">\n' +
    '      <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '        <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '      </button>\n' +
    '      <div>&nbsp;</div>\n' +
    '    </div>\n' +
    '    <div class="modal-body IntroBoxBody">\n' +
    '      <div class="IntroModalTitle">Be Secure</div>\n' +
    '      <div>While using the Tor Browser will protect your anonymity, it is not foolproof.</div>\n' +
    '      <div>Remember to always follow <a href="">recommended security advices</a>.</div>\n' +
    '    </div>\n' +
    '    <div class="modal-footer">\n' +
    '      <div class="pull-left">\n' +
    '        <a data-ng-click="back()" data-translate>Back</a>\n' +
    '      </div>\n' +
    '      <div class="pull-right">\n' +
    '        <button class="btn btn-default actionButton" data-ng-click="proceed()">\n' +
    '          <span data-translate>Next</span>\n' +
    '        </button>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div data-ng-switch-when="2">\n' +
    '    <div class="modal-header">\n' +
    '      <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '        <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '      </button>\n' +
    '      <div>&nbsp;</div>\n' +
    '    </div>\n' +
    '    <div class="modal-body IntroBoxBody">\n' +
    '      <div class="IntroModalTitle">Sharing Information</div>\n' +
    '      <div>In order for the information you provide to be acted on, please be as specific as possible i.e. add location, names and dates where possible.</div>\n' +
    '    </div>\n' +
    '    <div class="modal-footer">\n' +
    '      <div class="pull-left">\n' +
    '        <a data-ng-click="back()" data-translate>Back</a>\n' +
    '      </div>\n' +
    '      <div class="pull-right">\n' +
    '        <button class="btn btn-default actionButton" data-ng-click="cancel()">\n' +
    '          <span data-translate>Proceed</span>\n' +
    '        </button>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/messageconsole.html',
    '<div data-ng-repeat="error in errors" data-ng-show="error.code != 29 && error.code != 60">\n' +
    '  <uib-alert fadeout="" type="danger" close="closeAlert(errors, $index)">\n' +
    '    <!--\n' +
    '      Currently we skip authentication errors (29) and TipMessagesNotFound Error (60):\n' +
    '        The first has a special handling, the latter need to not be shown as it happens\n' +
    '        when a Whistleblower access the Tip page before ReceiverTips are created.\n' +
    '    -->\n' +
    '    <div>\n' +
    '      <div data-ng-switch="" on="error.code">\n' +
    '        <div data-translate>Error!</div>\n' +
    '\n' +
    '          <div data-ng-switch-when="35">\n' +
    '            <span data-translate>The specified comment was not found</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="12">\n' +
    '            <span data-translate>No context was found for the specified ID</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="17">\n' +
    '            <span data-translate>A query on the database resulted in an integrity error:</span> ({{error.arguments[0]}})\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="26">\n' +
    '            <span data-translate>No file was found for the specified ID</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="25">\n' +
    '            <span data-translate>Operation Forbidden</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="0">\n' +
    '            <span data-translate>GLTypesError not set</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="40">\n' +
    '            <span data-translate>The proposed PGP key can\'t be imported</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="39">\n' +
    '            <span data-translate>The upload request exceeds the size limit</span> ({{error.arguments[0]}} MB)\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="31">\n' +
    '            <span data-translate>Internal Server Error</span> ({{error.arguments[0]}})\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="36">\n' +
    '            <span data-translate>The specified host does not match any configured one</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="10">\n' +
    '            <span data-translate>Invalid Input Format</span> [{{error.arguments[0]}}]\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="34">\n' +
    '            <span data-translate>The specified old password is not valid</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="30">\n' +
    '            <span data-translate>Not authenticated</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="20">\n' +
    '            <span data-translate>No Recipient was found for the specified ID</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="38">\n' +
    '            <span data-translate>The uploaded file has a reserved name</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="22">\n' +
    '            <span data-translate>Submission does not pass the field validation</span> [{{error.arguments[0]}}]\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="21">\n' +
    '            <span data-translate>No Submission was found for the specified ID</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="13">\n' +
    '            <span data-translate>No submission was found for the specified ID</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="14">\n' +
    '            <span data-translate>No Recipient was found for the specified ID</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="37">\n' +
    '            <span data-translate>Resource can only be accessed via the Tor network</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="49">\n' +
    '            <span data-translate>A file attachment is required to complete the submission</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="100">\n' +
    '            <span data-translate>Request timed out</span>\n' +
    '          </div>\n' +
    '\n' +
    '          <div data-ng-switch-when="401">\n' +
    '            <span data-translate>Session expired</span>\n' +
    '          </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </uib-alert>\n' +
    '</div>\n' +
    '<div data-ng-repeat="success in successes">\n' +
    '  <uib-alert fadeout="" type="success" close="closeAlert(successes, $index)">\n' +
    '    <div>\n' +
    '      <div>\n' +
    '        <div data-translate>Success!</div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </uib-alert>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/preferences/general.html',
    '<div class="form-group">\n' +
    '  <label data-translate>Language</label>\n' +
    '  <select class="form-control" data-ng-model="preferences.language" data-ng-options="item.code as item.name for item in languages_enabled_selector | orderBy:\'name\'"></select>\n' +
    '</div>\n' +
    '\n' +
    '<div class="form-group">\n' +
    '  <label data-translate>Timezone</label>\n' +
    '  <select class="form-control" data-ng-model="preferences.timezone" data-ng-options="item.timezone as item.label for item in timezones"></select>\n' +
    '</div>\n' +
    '\n' +
    '<button type="submit" class="btn btn-success" data-ng-click="pref_save()">\n' +
    '  <i class="glyphicon glyphicon-ok"></i>\n' +
    '  <span data-translate>Save</span>\n' +
    '</button>\n'
  );


  $templateCache.put('views/partials/preferences/password.html',
    '<div class="form-group" data-ng-class="{\'has-error\': preferencesForm.oldpassword.$error.required}">\n' +
    '  <label>\n' +
    '    <span data-translate>Current Password</span>\n' +
    '    <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '  </label>\n' +
    '  <input class="form-control" name="oldpassword" data-ng-model="preferences.old_password" type="password" required>\n' +
    '  <p class="text-red" data-ng-show="preferencesForm.oldpassword.$error.required">\n' +
    '    <span data-translate>Old password confirmation required</span>\n' +
    '  </p>\n' +
    '</div>\n' +
    '\n' +
    '<div class="form-group" data-ng-class="{\'has-error\': (preferencesForm.password.$error.required || unsafe_password)}">\n' +
    '  <label>\n' +
    '    <span data-translate>New Password</span>\n' +
    '    <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '  </label>\n' +
    '  <input class="form-control" name="password" data-ng-model="preferences.password" type="password" required>\n' +
    '  <p class="text-red" data-ng-show="unsafe_password">\n' +
    '    <span data-translate>The choosen password is unsafe, it should have</span>:\n' +
    '  </p>\n' +
    '  <ul>\n' +
    '    <li class="text-red" data-ng-hide="pwdHasLetter">\n' +
    '      <span data-translate>At least one letter</span>\n' +
    '    </li>\n' +
    '    <li class="text-red" data-ng-hide="pwdHasNumber">\n' +
    '      <span data-translate>At least one number</span>\n' +
    '    </li>\n' +
    '    <li class="text-red" data-ng-hide="pwdValidLength">\n' +
    '      <span data-translate>At least 8 characters</span>\n' +
    '    </li>\n' +
    '  </ul>\n' +
    '</div>\n' +
    '\n' +
    '<div class="form-group" data-ng-class="{\'has-error\': (preferencesForm.checkpassword.$error.required || mismatch_password)}">\n' +
    '  <label>\n' +
    '    <span data-translate>Type your new password again</span>\n' +
    '    <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '  </label>\n' +
    '  <input class="form-control" name="checkpassword" data-ng-model="preferences.check_password" type="password" required>\n' +
    '  <p class="text-red" data-ng-show="mismatch_password">\n' +
    '    <span data-translate>The two passwords do not match</span>\n' +
    '  </p>\n' +
    '</div>\n' +
    '\n' +
    '<button type="submit" class="btn btn-success" data-ng-disabled="invalid" data-ng-click="pass_save()">\n' +
    '  <i class="glyphicon glyphicon-ok"></i>\n' +
    '  <span data-translate>Save</span>\n' +
    '</button>\n'
  );


  $templateCache.put('views/partials/preferences/pgpkey.html',
    '<div data-ng-show="preferences.pgp_key_status === \'enabled\'">\n' +
    '  <div class="alert alert-success">\n' +
    '    <span data-translate>Encryption is enabled!</span>\n' +
    '    <span data-translate>Email notifications will be encrypted.</span>\n' +
    '  </div>\n' +
    '\n' +
    '  <div>\n' +
    '    <label data-translate>Details of the PGP key:</label>\n' +
    '    <div>\n' +
    '      <span data-translate>The fingerprint is:</span>\n' +
    '      <b>{{preferences.pgp_key_fingerprint}}</b>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '\n' +
    '  <div class="preformatted">{{preferences.pgp_key_info}}</div>\n' +
    '\n' +
    '  <div class="form-group">\n' +
    '    <input data-ng-model="preferences.pgp_key_remove" type="checkbox">\n' +
    '    <label data-translate>Remove the PGP key</label>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="form-group" data-ng-hide="preferences.pgp_key_status === \'enabled\'">\n' +
    '  <div class="alert alert-danger">\n' +
    '    <div data-translate>Encryption has not been enabled!</div>\n' +
    '    <div data-translate>Email notifications won\'t be encrypted.</div>\n' +
    '  </div>\n' +
    '  <div>\n' +
    '    <label data-translate>Set a PGP key for email notifications encryption</label>\n' +
    '    <textarea class="form-control" data-ng-attr-placeholder="{{\'Copy and paste the PGP public key here\' | translate}}" data-ng-model="preferences.pgp_key_public"></textarea>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="form-group">\n' +
    '  <button type="submit" class="btn btn-success" data-ng-click="pref_save()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Update notification and encryption settings</span>\n' +
    '  </button>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/privacybadge.html',
    '<div id="PrivacyBadge" data-ng-init="open = true" data-ng-mouseenter="open = true" data-ng-if="!node.enable_custom_privacy_badge">\n' +
    '  <div data-ng-switch="" on="anonymous" id="PrivacyBadgeTextBox" class="pull-left">\n' +
    '    <div data-ng-switch-when="true">\n' +
    '      <div>\n' +
    '        <span class="label label-success">\n' +
    '          <i class="glyphicon glyphicon-ok-circle"></i>\n' +
    '          <span data-translate>Congratulations!</span>\n' +
    '        </span>\n' +
    '        <div data-ng-show="open">\n' +
    '          <div data-translate>It appears that you are using Tor. To better protect your identity, be sure that you are using the Tor Browser.</div>\n' +
    '          <div data-translate>The Tor Browser includes various privacy and security enhancements not present in other browsers.</div>\n' +
    '          <a href="https://www.torproject.org/download/download" target="_blank" rel="noreferrer">\n' +
    '            [ <span data-translate>Download the Tor Browser</span> ]\n' +
    '          </a>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div data-ng-switch-when="false">\n' +
    '      <div>\n' +
    '        <span class="label label-danger">\n' +
    '          <i class="glyphicon glyphicon-warning-sign"></i>\n' +
    '          <span data-translate>Danger!</span>\n' +
    '        </span>\n' +
    '        <div data-ng-show="open">\n' +
    '          <div data-translate>It appears that you are browsing this site without any extra privacy and security!</div>\n' +
    '          <div data-translate>You are strongly advised to visit this site using the desktop app called Tor Browser, that protects your identity.</div>\n' +
    '          <a href="https://www.torproject.org/download/download" target="_blank" rel="noreferrer">\n' +
    '            [ <span data-translate>Download the Tor Browser</span> ]\n' +
    '          </a>\n' +
    '          <div data-ng-show="node.hidden_service != \'\'">\n' +
    '            <span data-translate>Then, copy and paste the following address into the Tor Browser:</span>\n' +
    '            <span>{{node.hidden_service}}</span>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div id="PrivacyBoxCloseButton" class="pull-right">\n' +
    '    <a data-ng-show="open" type="button" data-ng-click="open = false">\n' +
    '      <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '    </a>\n' +
    '  </div>\n' +
    '  <div class="clearfix"></div>\n' +
    '</div>\n' +
    '<div id="PrivacyBadgeCustom" data-ng-if="node.enable_custom_privacy_badge">\n' +
    '  <div data-ng-switch="" on="anonymous" id="PrivacyBoxTextBox">\n' +
    '    <div data-ng-switch-when="true">\n' +
    '      <span id="PrivacyBadgeCustomIconTor"></span>\n' +
    '      <span id="PrivacyBadgeCustomTextTor">{{node.custom_privacy_badge_tor}}</span>\n' +
    '    </div>\n' +
    '    <div data-ng-switch-when="false">\n' +
    '      <span id="PrivacyBadgeCustomIconNone"></span>\n' +
    '      <span id="PrivacyBadgeCustomTextNone">{{node.custom_privacy_badge_none}}</span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div id="PrivacyBoxCloseButton" class="pull-right">\n' +
    '    <a data-ng-show="open" type="button" data-ng-click="open = false">\n' +
    '      <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '    </a>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/security_awareness_quiz.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title">{{node.security_awareness_title}}</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div class="preformatted">{{node.security_awareness_text}}</div>\n' +
    '\n' +
    '  <div data-ng-show="!node.disable_security_awareness_questions">\n' +
    '    <br /><br />\n' +
    '    <p class="lead">\n' +
    '      <span data-translate>Which of the following statements is true?</span>\n' +
    '    </p>\n' +
    '\n' +
    '    <input data-ng-model="answer.value" value="a" type="radio">\n' +
    '    <span data-ng-class="{\'bg-danger\': (answer.value && answer.value == \'a\')}" data-translate>HTTPS protects my identity, but not the content of my leak</span><br />\n' +
    '    <input data-ng-model="answer.value" value="b" type="radio">\n' +
    '    <span data-ng-class="{\'bg-success\': (answer.value && answer.value == \'b\')}" data-translate>HTTPS protects the content of my leak but not my identity</span><br />\n' +
    '    <input data-ng-model="answer.value" value="c" type="radio">\n' +
    '    <span data-ng-class="{\'bg-danger\': (answer.value && answer.value == \'c\')}" data-translate>HTTPS does not protect the content of my leak nor my identity</span><br />\n' +
    '    <input data-ng-model="answer.value" value="d" type="radio">\n' +
    '    <span data-ng-class="{\'bg-danger\': (answer.value && answer.value == \'d\')}" data-translate>HTTPS does protect both my identity and the content of my leak</span><br />\n' +
    '\n' +
    '    <br /><br />\n' +
    '\n' +
    '    <div data-ng-show="(answer.value && answer.value == \'b\')">\n' +
    '      <div class="bg-warning">\n' +
    '        <span data-translate>You are aware of the risks involved. Go ahead, but consider yourself warned.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div data-ng-show="!answer.value">\n' +
    '      <div>\n' +
    '        <span>&nbsp;</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div data-ng-show="(answer.value && answer.value != \'b\')">\n' +
    '      <div class="bg-danger">\n' +
    '        <span data-translate>Wrong Answer!</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <a data-ng-click="goToSubmission()"\n' +
    '      data-ng-disabled="!node.disable_security_awareness_questions && (!answer.value || answer.value != \'b\')"\n' +
    '      class="btn btn-warning">\n' +
    '    <span data-translate>Proceed to submission</span>\n' +
    '  </a>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_comments.html',
    '<div id="TipCommunicationComments" class="panel panel-default" data-ng-init="collapsed = false">\n' +
    '  <div class="panel-heading" data-ng-click="collapsed = !collapsed; $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span>{{node.widget_comments_title}}</span>\n' +
    '      <span class="pull-right">\n' +
    '        <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <div data-ng-if="session.role !== \'whistleblower\' || tip.enable_two_way_comments" class="row">\n' +
    '      <div class="col-md-12">\n' +
    '        <textarea id="TipCommunicationCommentsInput" data-ng-model="tip.newCommentContent" maxlength="{{::node.maximum_textsize}}" class="form-control"></textarea>\n' +
    '        <div data-translate-values="{available_characters_count: node.maximum_textsize - tip.newCommentContent.length}"\n' +
    '             data-translate>FIELD_INPUT_AVAILABLE_CHARS</div>\n' +
    '      </div>\n' +
    '      <div class="col-md-12">\n' +
    '        <span class="pull-left">\n' +
    '          <a id="comment-action-send" class="btn btn-success" data-ng-click="newComment()" data-ng-disabled="!tip.newCommentContent || tip.newCommentContent == \'\' || session.role === \'custodian\'">\n' +
    '            <i class="glyphicon glyphicon-comment"></i>\n' +
    '            <span data-translate>Send</span>\n' +
    '          </a>\n' +
    '        </span>\n' +
    '        <span data-ng-if="session.role === \'receiver\' && preferences.can_grant_permissions" data-ng-switch="tip.enable_two_way_comments" class="pull-right">\n' +
    '          <span data-ng-switch-when="false">\n' +
    '            <a id="button-enable-whistleblower-comments" class="btn btn-primary" data-ng-click="allowWhistleblowerToComment()">\n' +
    '              <i class="glyphicon glyphicon-ok-circle"></i>\n' +
    '              <span>Allow the whistleblower to comment</span>\n' +
    '            </a>\n' +
    '          </span>\n' +
    '          <span data-ng-switch-when="true">\n' +
    '            <a id="button-enable-whistleblower-comments" class="btn btn-danger" data-ng-click="denyWhistleblowerToComment()">\n' +
    '              <i class="glyphicon glyphicon-ban-circle"></i>\n' +
    '              <span>Deny the whistleblower to comment</span>\n' +
    '            </a>\n' +
    '          </span>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div data-ng-if="session.role === \'whistleblower\' && !tip.enable_two_way_comments">\n' +
    '      <span data-translate>You are not allowed to write comments.</span>\n' +
    '    </div>\n' +
    '    <div id="SubmissionComments" data-ng-if="tip.comments.length > 0" data-ng-repeat="comment in tip.comments | orderBy:\'creation_date\':true">\n' +
    '      <div id="comment-{{$index}}" data-ng-switch="" on="comment.type">\n' +
    '        <div data-ng-switch-when="whistleblower" class="alert alert-info">\n' +
    '          <div class="row">\n' +
    '            <div class="col-md-6">\n' +
    '              <div data-translate class="WbNameInMessages">Whistleblower</div>\n' +
    '            </div>\n' +
    '            <div class="pull-right" style="margin-right:20px">\n' +
    '              <div>{{::comment.creation_date | date:\'dd-MM-yyyy HH:mm\'}}</div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div class="preformatted">{{::comment.content}}</div>\n' +
    '        </div>\n' +
    '        <div data-ng-switch-when="receiver" class="alert alert-success">\n' +
    '          <div class="row">\n' +
    '            <div class="col-md-6">\n' +
    '              <div class="ReceiverNameInMessages">{{::comment.author}}</div>\n' +
    '            </div>\n' +
    '            <div class="pull-right" style="margin-right:20px">\n' +
    '              <div>{{::comment.creation_date | date:\'dd-MM-yyyy HH:mm\'}}</div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div class="preformatted">{{::comment.content}}</div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_field.html',
    '<div data-ng-class="{\'nested\': !preview}" class="fieldAnswer">\n' +
    '  <div class="fieldTitle">\n' +
    '    <span data-ng-if="!$parent.field && !preview">{{$index + 1}}) {{field.label}}:</span>\n' +
    '    <span data-ng-if="$parent.field || preview">{{field.label}}:</span>\n' +
    '  </div>\n' +
    '  <div data-ng-if="!hasMultipleEntries(fieldAnswers[field.id])">\n' +
    '    <div data-ng-init="entry = fieldAnswers[field.id][0]" data-ng-include="\'views/partials/tip_field_answer_entry.html\'"></div>\n' +
    '  </div>\n' +
    '  <div data-ng-if="hasMultipleEntries(fieldAnswers[field.id])">\n' +
    '    <div data-ng-repeat="entry in fieldAnswers[field.id]">\n' +
    '      <div class="nested"><span class="text-gray">#{{$index + 1}}</span></div>\n' +
    '      <div class="nested" data-ng-include="\'views/partials/tip_field_answer_entry.html\'"></div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_field_answer_entry.html',
    '<div data-ng-switch="" on="field.type" class="nested">\n' +
    '  <span data-ng-switch-when="checkbox">\n' +
    '    <ul data-ng-repeat="(k, v) in entry">\n' +
    '      <div data-ng-repeat="option in field.options">\n' +
    '        <div data-ng-if="k == option.id && v == \'True\'">\n' +
    '          <i class="glyphicon glyphicon-check"></i>\n' +
    '          <span>{{option.label}}</span>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </ul>\n' +
    '  </span>\n' +
    '\n' +
    '  <span data-ng-switch-when="selectbox">\n' +
    '    <div data-ng-repeat="option in field.options">\n' +
    '      <span data-ng-if="entry[\'value\'] == option.id">{{option.label}}</span>\n' +
    '    </div>\n' +
    '  </span>\n' +
    '\n' +
    '  <span data-ng-switch-when="multichoice">\n' +
    '    <div data-ng-repeat="option in field.options">\n' +
    '      <span data-ng-if="entry[\'value\'] == option.id">{{option.label}}</span>\n' +
    '    </div>\n' +
    '  </span>\n' +
    '\n' +
    '  <span data-ng-switch-when="date">{{entry[\'value\'] | date:\'dd-MM-yyyy\'}}</span>\n' +
    '\n' +
    '  <span data-ng-switch-when="tos">\n' +
    '    <span data-ng-if="entry[\'value\'] == \'True\'" data-translate>Accepted</span>\n' +
    '    <span data-ng-if="entry[\'value\'] == \'False\'" data-translate>Not accepted</span>\n' +
    '  </span>\n' +
    '\n' +
    '  <span data-ng-switch-when="fieldgroup">\n' +
    '    <div data-ng-repeat="field in field.children | orderBy:[\'y\', \'x\'] | filter:{ type: \'!fileupload\'}">\n' +
    '      <div data-ng-init="fieldAnswers=entry" data-ng-include="\'views/partials/tip_field.html\'"></div>\n' +
    '    </div>\n' +
    '  </span>\n' +
    '\n' +
    '  <span data-ng-switch-default class="preformatted">{{entry[\'value\']}}</span>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_files_receiver.html',
    '<div id="TipPageFilesInfoBox" class="panel panel-default" data-ng-init="collapsed = false">\n' +
    '  <div class="panel-heading" data-ng-click="collapsed = !collapsed; $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span>{{node.widget_files_title}}</span>\n' +
    '      <span class="pull-right">\n' +
    '        <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <div data-ng-show="tip.files.length">\n' +
    '      <div class="table-container">\n' +
    '        <table class="table table-striped" id="fileList">\n' +
    '          <thead>\n' +
    '            <tr>\n' +
    '              <th class="FileTableName">\n' +
    '                <span data-translate>Filename</span>\n' +
    '              </th>\n' +
    '              <th class="FileTableInfo">\n' +
    '                <span data-translate>Download</span>\n' +
    '              </th>\n' +
    '              <th class="FileTableInfo">\n' +
    '                <span data-translate>Upload date</span>\n' +
    '              </th>\n' +
    '              <th class="FileTableInfo">\n' +
    '                <span data-translate>Content Type</span>\n' +
    '              </th>\n' +
    '              <th class="FileTableInfo">\n' +
    '                <span data-translate>File size</span>\n' +
    '              </th>\n' +
    '              <th class="FileTableInfo">\n' +
    '                <span>Descrizione</span>\n' +
    '              </th>\n' +
    '              <th class="FileTableInfo">\n' +
    '                <span>Visibilità</span>\n' +
    '              </th>\n' +
    '              <th class="FileTableInfo">\n' +
    '                <span>Data visualizzazione segnalante</span>\n' +
    '              </th>\n' +
    '            </tr>\n' +
    '          </thead>\n' +
    '          <tbody id="fileListBody">\n' +
    '            <tr id="file-{{$index}}" data-ng-repeat="file in tip.files">\n' +
    '              <td>\n' +
    '                <span>{{::file.name}}</span>\n' +
    '              </td>\n' +
    '              <td data-ng-show="file.status != \'unavailable\'">\n' +
    '                <form id="fileDownload" method="POST" action="{{::file.href}}" novalidate>\n' +
    '                  <input type="hidden" name="session" value="{{session.id}}">\n' +
    '                  <button class="btn btn-xs btn-default">\n' +
    '                    <i class="glyphicon glyphicon-download"></i>\n' +
    '                    <span data-translate>download</span>\n' +
    '                  </button>\n' +
    '                </form>\n' +
    '              </td>\n' +
    '              <td data-ng-show="file.status == \'unavailable\'">\n' +
    '                <div class="label label-warning" uib-popover="{{\'The file is unavailable due to an internal error.\' | translate}}" popover-placement="bottom" popover-trigger="mouseenter" data-translate>file unavailable</div>\n' +
    '              </td>\n' +
    '              <td data-ng-show="file.status == \'nokey\'">\n' +
    '                <div class="label label-warning" uib-popover="{{\'The file is unavailable due to missing pgp key.\' | translate}}" popover-placement="bottom" popover-trigger="mouseenter" data-translate>file unavailable</div>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span>{{::file.creation_date | date:\'dd-MM-yyyy\'}}</span>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span>{{::file.content_type}}</span>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span>{{::file.size | prettyBytes}}</span>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span data-ng-if="file.description">\n' +
    '                  {{::file.description}}\n' +
    '                </span>\n' +
    '                <span data-ng-if="file.description === \'\' || file.description === null">\n' +
    '                  \n' +
    '                </span>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span data-ng-if="file.is_visible">\n' +
    '                  Segnalante\n' +
    '                </span>\n' +
    '                <span data-ng-if="!file.is_visible">\n' +
    '                  Interna\n' +
    '                </span>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span ng-if="file.wb_download_date">\n' +
    '                  {{::file.wb_download_date | date: \'dd-MM-yyyy\'}}\n' +
    '                </span>\n' +
    '                <span ng-if="!file.wb_download_date">\n' +
    '                  Non ancora visualizzato.\n' +
    '                </span>\n' +
    '              </td>\n' +
    '            </tr>\n' +
    '          </tbody>\n' +
    '        </table>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div data-ng-hide="tip.files.length">\n' +
    '      <span data-translate>No files have been uploaded!</span>\n' +
    '    </div>\n' +
    '    <hr>\n' +
    '    <div data-ng-if="session.role === \'receiver\'">\n' +
    '        <div data-ng-include="\'views/partials/fileupload_button.html\'"></div>\n' +
    '        <br />\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-6" data-ng-include="\'views/partials/fileupload_status.html\'"></div>\n' +
    '        </div>\n' +
    '    </div>\n' +
    '      <div data-ng-if="session.role === \'receiver\' && preferences.can_grant_permissions" data-ng-switch="tip.enable_attachments" class="pull-right">\n' +
    '        <span data-ng-switch-when="false">\n' +
    '          <a id="button-enable-whistleblower-files" class="btn btn-primary" data-ng-click="allowWhistleblowerToAttachFiles()">\n' +
    '            <i class="glyphicon glyphicon-ok-circle"></i>\n' +
    '            <span>Allow the whistleblower to add attachments to the submission</span>\n' +
    '          </a>\n' +
    '        </span>\n' +
    '        <span data-ng-switch-when="true">\n' +
    '          <a id="button-enable-whistleblower-files" class="btn btn-danger" data-ng-click="denyWhistleblowerToAttachFiles()">\n' +
    '            <i class="glyphicon glyphicon-ban-circle"></i>\n' +
    '            <span>Deny the whistleblower to add attachments to the submission</span>\n' +
    '          </a>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_files_whistleblower.html',
    '<div id="TipPageFilesInfoBox" class="panel panel-default" data-ng-init="collapsed = false">\n' +
    '  <div class="panel-heading" data-ng-click="collapsed = !collapsed" data-ng-keypress="eventDismiss(); $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span>{{node.widget_files_title}}</span>\n' +
    '      <span class="pull-right">\n' +
    '        <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <div data-ng-show="tip.files.length">\n' +
    '      <div class="table-container">\n' +
    '        <table class="table table-striped" id="fileList">\n' +
    '          <thead>\n' +
    '            <tr>\n' +
    '              <th>\n' +
    '                <span data-translate>Filename</span>\n' +
    '              </th>\n' +
    '              <th>\n' +
    '                <span data-translate>Download</span>\n' +
    '              </th>\n' +
    '              <th>\n' +
    '                <span data-translate>Upload date</span>\n' +
    '              </th>\n' +
    '              <th>\n' +
    '                <span data-translate>Content Type</span>\n' +
    '              </th>\n' +
    '              <th>\n' +
    '                <span data-translate>File size</span>\n' +
    '              </th>\n' +
    '              <th>\n' +
    '                <span>Descrizione</span>\n' +
    '              </th>\n' +
    '            </tr>\n' +
    '          </thead>\n' +
    '          <tbody id="fileListBody">\n' +
    '            <tr id="file-{{$index}}" data-ng-repeat="file in tip.files | orderBy:\'creation_date\'" data-ng-if="file.is_visible">\n' +
    '              <td>\n' +
    '                <span>{{::file.name}}</span>\n' +
    '              </td>\n' +
    '              <td data-ng-show="file.status != \'unavailable\' && file.path != \'\'">\n' +
    '                <form id="fileDownload" method="POST" action="{{::file.href}}" novalidate>\n' +
    '                  <input type="hidden" name="session" value="{{session.id}}">\n' +
    '                  <button class="btn btn-xs btn-default">\n' +
    '                    <i class="glyphicon glyphicon-download"></i>\n' +
    '                    <span data-translate>download</span>\n' +
    '                  </button>\n' +
    '                </form>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span>{{::file.creation_date | date:\'dd-MM-yyyy\'}}</span>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span>{{::file.content_type}}</span>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span>{{::file.size | prettyBytes }}</span>\n' +
    '              </td>\n' +
    '              <td>\n' +
    '                <span>{{::file.description }}</span>\n' +
    '              </td>\n' +
    '            </tr>\n' +
    '          </tbody>\n' +
    '        </table>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div data-ng-hide="tip.files.length || uploads[\'status_page\'][\'files\'].length">\n' +
    '      <span data-translate>No files have been uploaded!</span>\n' +
    '    </div>\n' +
    '    <br />\n' +
    '    <div data-ng-switch="tip.enable_attachments">\n' +
    '      <div data-ng-switch-when="true">\n' +
    '        <div data-ng-include="\'views/partials/fileupload_button.html\'"></div>\n' +
    '        <br />\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-6" data-ng-include="\'views/partials/fileupload_status.html\'"></div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-when="false">\n' +
    '        <span data-translate>You are not allowed to attach new files.</span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_info.html',
    '<div id="TipInfoBox" class="panel panel-default" data-ng-init="collapsed = false">\n' +
    '  <div class="panel-heading" data-ng-click="collapsed = !collapsed; $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span data-translate>Submission</span><span data-ng-if="::session.role == \'receiver\'">:</span>\n' +
    '      <span data-ng-if="::session.role == \'receiver\'">\n' +
    '        <span data-ng-if="tip.label && !showEditLabelInput" class="TipLabel" data-ng-click="editLabel(); $event.stopPropagation();"\n' +
    '              uib-popover="{{\'Assign a label to the submission\' | translate}}" popover-placement="right" popover-trigger="mouseenter">\n' +
    '          <span>{{::tip.label}}</span>\n' +
    '          <i class="glyphicon glyphicon-tag"></i>\n' +
    '        </span>\n' +
    '\n' +
    '        <span data-ng-if="showEditLabelInput" class="form-inline">\n' +
    '          <div class="form-group">\n' +
    '            <span id="AssignLabelInput" class="input-group">\n' +
    '              <input type="text" class="form-control" data-ng-attr-placeholder="{{\'Label\' | translate}}" data-ng-click="$event.stopPropagation();" data-ng-model="tip.label" />\n' +
    '              <span class="input-group-addon" data-ng-click="updateLabel(tip.label); $event.stopPropagation();"\n' +
    '                   uib-popover="{{\'Assign a label to the submission\' | translate}}" popover-placement="right" popover-trigger="mouseenter">\n' +
    '                <i class="glyphicon glyphicon-tag"></i>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </div>\n' +
    '        </span>\n' +
    '      </span>\n' +
    '      <span class="pull-right">\n' +
    '        <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '\n' +
    '  <div class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <table class="table table-condensed table-striped">\n' +
    '      <thead>\n' +
    '        <tr>\n' +
    '          <th data-ng-if="::session.role == \'receiver\'">\n' +
    '            <i class="glyphicon glyphicon-barcode"></i>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <i class="glyphicon glyphicon-inbox"></i>\n' +
    '            <span data-translate>Context</span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <i class="glyphicon glyphicon-time"></i>\n' +
    '            <span data-translate>Creation date</span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <i class="glyphicon glyphicon-time"></i>\n' +
    '            <span data-translate>Last update</span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <i class="glyphicon glyphicon-hourglass"></i>\n' +
    '            <span data-translate>Expiration date</span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <i class="glyphicon glyphicon-send"></i>\n' +
    '            <span data-translate>Connection</span>\n' +
    '          </th>\n' +
    '          <th data-ng-if="::session.role == \'receiver\' && node.enable_experimental_features">\n' +
    '            <i class="glyphicon glyphicon-flash"></i>\n' +
    '            <span data-translate>Score</span>\n' +
    '          </th>\n' +
    '        </tr>\n' +
    '      </thead>\n' +
    '      <tbody>\n' +
    '        <tr>\n' +
    '          <td data-ng-if="::session.role == \'receiver\'">{{::tip.creation_date | date:\'yyyyMMdd\'}}-{{::tip.progressive}}</td>\n' +
    '          <td>{{::tip.context_name}}</td>\n' +
    '          <td>{{::tip.creation_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '          <td>{{::tip.update_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '          <td>{{::tip.expiration_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '          <td>\n' +
    '            <span data-ng-if="!tip.tor2web"\n' +
    '                class="label label-warning"\n' +
    '                uib-popover="{{\'The connection used to send this submission has been secured with HTTPS ensuring confidentiality.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"\n' +
    '                data-translate>HTTPS</span>\n' +
    '            <span data-ng-if="tip.tor2web"\n' +
    '                class="label label-success"\n' +
    '                uib-popover="{{\'The connection used to send this submission has been secured with Tor ensuring confidentiality and anonymity.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"\n' +
    '                data-translate>Tor</span>\n' +
    '          </td>\n' +
    '          <td data-ng-if="::session.role == \'receiver\' && node.enable_experimental_features">{{::tip.total_score}}</td>\n' +
    '        </tr>\n' +
    '      </tbody>\n' +
    '    </table>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_messages.html',
    '<div id="TipCommunicationMessages" class="panel panel-default" data-ng-init="collapsed = false">\n' +
    '  <div class="panel-heading" data-ng-click="collapsed = !collapsed; $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span>{{node.widget_messages_title}}</span>\n' +
    '      <span class="pull-right">\n' +
    '        <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <div data-ng-if="session.role !== \'whistleblower\' || tip.enable_two_way_messages" class="row">\n' +
    '      <div class="col-md-12">\n' +
    '        <div class="form-inline">\n' +
    '          <span data-ng-if="session.role === \'whistleblower\'">\n' +
    '            <label><span data-translate>Recipient</span>:<span>&nbsp;</span></label>\n' +
    '            <select id="message-recipient-selector" data-ng-model="tip.msg_receiver_selected" data-ng-options="obj.key as obj.value for obj in tip.msg_receivers_selector | orderBy:\'value\'" class="form-control"></select>\n' +
    '          </span>\n' +
    '        </div>\n' +
    '        <br />\n' +
    '        <textarea id="TipCommunicationMessagesInput" data-ng-model="tip.newMessageContent" maxlength="{{::node.maximum_textsize}}" class="form-control"></textarea>\n' +
    '        <div data-translate-values="{available_characters_count: node.maximum_textsize - tip.newMessageContent.length}"\n' +
    '             data-translate>FIELD_INPUT_AVAILABLE_CHARS</div>\n' +
    '      </div>\n' +
    '      <div class="col-md-12">\n' +
    '        <span class="pull-left">\n' +
    '          <a id="message-action-send" class="btn btn-success" data-ng-click="newMessage()" data-ng-disabled="!tip.newMessageContent || (session.role === \'whistleblower\' && !tip.msg_receiver_selected) || session.role === \'custodian\'">\n' +
    '            <i class="glyphicon glyphicon-envelope"></i>\n' +
    '            <span data-translate>Send</span>\n' +
    '          </a>\n' +
    '        </span>\n' +
    '        <span data-ng-if="session.role === \'receiver\' && preferences.can_grant_permissions" data-ng-switch="tip.enable_two_way_messages" class="pull-right">\n' +
    '          <span data-ng-switch-when="false">\n' +
    '            <a id="button-enable-whistleblower-messages" class="btn btn-primary" data-ng-click="allowWhistleblowerToMessage()">\n' +
    '              <i class="glyphicon glyphicon-ok-circle"></i>\n' +
    '              <span>Allow the whistleblower to send messages</span>\n' +
    '            </a>\n' +
    '          </span>\n' +
    '          <span data-ng-switch-when="true">\n' +
    '            <a id="button-enable-whistleblower-messages" class="btn btn-danger" data-ng-click="denyWhistleblowerToMessage()">\n' +
    '              <i class="glyphicon glyphicon-ban-circle"></i>\n' +
    '              <span>Deny the whistleblower to send messages</span>\n' +
    '            </a>\n' +
    '          </span>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div data-ng-if="session.role === \'whistleblower\' && !tip.enable_two_way_messages">\n' +
    '      <span data-translate>You are not allowed to send messages.</span>\n' +
    '    </div>\n' +
    '    <div id="SubmissionMessages" data-ng-if="tip.messages.length > 0" data-ng-repeat="message in tip.messages | orderBy:\'creation_date\':true">\n' +
    '      <div id="message-{{$index}}" data-ng-switch="" on="message.type">\n' +
    '         <div data-ng-switch-when="whistleblower" class="alert alert-info">\n' +
    '          <div class="row">\n' +
    '            <div class="col-md-6">\n' +
    '              <div data-translate class="WbNameInMessages">Whistleblower</div>\n' +
    '            </div>\n' +
    '            <div class="pull-right" style="margin-right:20px">\n' +
    '              <div>{{::message.creation_date | date:\'dd-MM-yyyy HH:mm\'}}</div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div class="preformatted">{{::message.content}}</div>\n' +
    '        </div>\n' +
    '        <div data-ng-switch-when="receiver" class="alert alert-success">\n' +
    '          <div class="row">\n' +
    '            <div class="col-md-6">\n' +
    '              <div class="WbNameInMessages">{{::message.author}}</div>\n' +
    '            </div>\n' +
    '            <div class="pull-right" style="margin-right:20px">\n' +
    '              <div>{{::message.creation_date | date:\'dd-MM-yyyy HH:mm\'}}</div>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div class="preformatted">{{::message.content}}</div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_operation_delete.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Are you sure?</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div class="alert alert-danger">\n' +
    '    <span data-translate>Are you sure that you want to delete the submission?</span>\n' +
    '    <br />\n' +
    '    <span data-translate>Please make sure that all related data is properly deleted so that the recipients won\'t be able to further access to it.</span>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <span id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </span>\n' +
    '  <span id="modal-action-ok" class="btn btn-danger" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Delete</span>\n' +
    '  </span>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_operation_delete_selected.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Are you sure?</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div class="alert alert-danger">\n' +
    '    <span data-translate>Are you sure that you want to delete all the selected submissions?</span>\n' +
    '    <br />\n' +
    '    <span data-translate>Please make sure that all related data is properly deleted so that the recipients won\'t be able to further access to it.</span>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <span id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </span>\n' +
    '  <span id="modal-action-ok" class="btn btn-danger" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Delete</span>\n' +
    '  </span>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_operation_file_identity_access_reply.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Deny access to the whistleblower\'s identity</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <label data-translate>Please write a motivation for the reply</label>\n' +
    '  <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '  <textarea class="form-control" data-ng-model="reply_motivation" data-ng-attr-placeholder="{{\'Reply motivation\' | translate}}"></textarea>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <span id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </span>\n' +
    '  <span id="modal-action-ok" class="btn btn-danger" data-ng-disabled="reply_motivation == undefined || reply_motivation == \'\'" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-data-translate>Send</span>\n' +
    '  </span>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_operation_file_identity_access_request.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Request access to the whistleblower\'s identity</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <label data-translate>Please write a motivation</label>\n' +
    '  <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '  <textarea class="form-control" data-ng-model="request_motivation" data-ng-attr-placeholder="{{\'Request motivation\' | translate}}"></textarea>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <span id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </span>\n' +
    '  <span id="modal-action-ok" class="btn btn-danger" data-ng-disabled="request_motivation == undefined || request_motivation == \'\'" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Send</span>\n' +
    '  </span>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_operation_postpone.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '     <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Are you sure?</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div class="alert alert-danger">\n' +
    '    <span data-translate>Are you sure that you want to postpone the submission expiration date?</span>\n' +
    '    <br />\n' +
    '    <span data-translate>By confirming, you will postpone the expiration date to:</span>\n' +
    '    <span>{{tip | newExpirationDate | date:\'dd-MM-yyyy HH:mm\'}}</span>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <span id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </span>\n' +
    '  <span id="modal-action-ok" class="btn btn-danger" data-ng-click="ok()" data-ng-disabled="!tip">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Confirm</span>\n' +
    '  </span>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_operation_postpone_selected.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '     <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Are you sure?</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div class="alert alert-danger">\n' +
    '    <span data-translate>Are you sure that you want to postpone the expiration date for all selected submissions?</span>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <span id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </span>\n' +
    '  <span id="modal-action-ok" class="btn btn-danger" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Confirm</span>\n' +
    '  </span>\n' +
    '</div>'
  );


  $templateCache.put('views/partials/tip_questionnaire_answers.html',
    '<div id="TipQuestionnaireAnswersBox" class="panel panel-default" data-ng-init="collapsed = false">\n' +
    '  <div class="panel-heading" data-ng-click="collapsed = !collapsed; $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span data-translate>Questionnaire answers</span>\n' +
    '      <span class="pull-right">\n' +
    '        <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <div data-ng-repeat="step in tip.questionnaire | orderBy:\'presentation_order\'">\n' +
    '      <dt id="step={{$index}}">\n' +
    '        <span data-translate>Step</span>\n' +
    '        <span>{{$index + 1}}: {{::step.label}}</span>\n' +
    '      </dt>\n' +
    '      <dd>\n' +
    '        <div div data-ng-repeat="field in step.children | orderBy:[\'y\', \'x\'] | filter:{ type: \'!fileupload\'}">\n' +
    '          <span data-ng-init="fieldAnswers=tip.answers" data-ng-include="\'views/partials/tip_field.html\'"></span>\n' +
    '        </div>\n' +
    '      <dd>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/tip_receiver_list.html',
    '<div id="TipPageReceiversInfoBox" class="panel panel-default" data-ng-init="collapsed = false">\n' +
    '  <div class="panel-heading" data-ng-click="collapsed = !collapsed" data-ng-keypress="eventDismiss(); $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span data-translate>Recipient list</span>\n' +
    '      <span class="pull-right">\n' +
    '        <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <div>\n' +
    '      <span data-ng-repeat="receiver in tip.receivers | orderBy:\'name\'">\n' +
    '        <span id="receiver-{{$index}}">\n' +
    '          <span class="label label-primary" data-ng-show="receiver.last_access > tip.update_date" uib-popover="{{\'The recipient has already read the latest update\' | translate}}" popover-placement="top" popover-trigger="mouseenter">\n' +
    '            <i class="glyphicon glyphicon-ok"></i>\n' +
    '            <span>{{::receiver.name}}</span>\n' +
    '          </span>\n' +
    '          <span class="label label-warning" data-ng-show="receiver.last_access <= tip.update_date" uib-popover="{{\'The recipient has not read the latest update yet\' | translate}}" popover-placement="top" popover-trigger="mouseenter">\n' +
    '            <span>{{::receiver.name}}</span>\n' +
    '          </span>\n' +
    '        </span>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/trigger_field.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Trigger question</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div class="alert alert-default">\n' +
    '    <div data-translate>Select the question to be triggered when this option is selected</div>\n' +
    '    <select class="form-control" data-ng-model="args.trigger_field" data-ng-options="field.id as field.label for field in siblings | orderBy:\'label\'"></select>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <a id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </a>\n' +
    '  <a id="modal-action-ok" class="btn btn-danger" data-ng-click="args.trigger_field = \'\'; cancel()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Reset</span>\n' +
    '  </a>\n' +
    '  <a id="modal-action-ok" class="btn btn-primary" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Confirm</span>\n' +
    '  </a>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/trigger_step.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Trigger step</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div class="alert alert-default">\n' +
    '    <div data-translate>Select the step to be triggered when this option is selected</div>\n' +
    '    <select class="form-control" data-ng-model="args.trigger_step" data-ng-options="step.id as step.label for step in context.steps | orderBy:\'label\'"></select>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <a id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </a>\n' +
    '  <a id="modal-action-ok" class="btn btn-danger" data-ng-click="args.trigger_step = \'\'; cancel()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Reset</span>\n' +
    '  </a>\n' +
    '  <a id="modal-action-ok" class="btn btn-primary" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Confirm</span>\n' +
    '  </a>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/user.html',
    '<div data-ng-controller="UserCtrl">\n' +
    '  <div id="LanguagePickerBox" class="languagePick row" data-ng-show="show_language_selector">\n' +
    '    <div class="pull-right">\n' +
    '      <select class="form-control" data-ng-model="language" data-ng-options="item.code as item.name for item in languages_enabled_selector"></select>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div id="LoginStatusBox" class="row" data-ng-if="showLoginForm() || session">\n' +
    '    <div data-ng-show="session" class="pull-right">\n' +
    '      <span id="LoginRoleText">\n' +
    '        <label>\n' +
    '          <span data-translate>Currently logged in</span>\n' +
    '          (<a data-ng-href="{{session.homepage}}">{{session.role}}</a>)\n' +
    '        </label>\n' +
    '      </span>\n' +
    '     <span id="PreferencesLinkBox" data-ng-if="session.role != \'whistleblower\'">\n' +
    '       <span class="text-separator">|</span>\n' +
    '       <span>\n' +
    '         <a id="PreferencesLink" data-ng-href="{{session.preferencespage}}" data-translate>Preferences</a>\n' +
    '       </span>\n' +
    '      </span>\n' +
    '      <span id="LogoutLinkBox">\n' +
    '        <span class="text-separator">|</span>\n' +
    '        <span>\n' +
    '          <a id="LogoutLink" href="" data-ng-click="logout()" data-translate>Logout</a>\n' +
    '        </span>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '    <div data-ng-if="showLoginForm() && !session" class="pull-right">\n' +
    '      <div data-translate>Have you already filed a submission? Enter your key code.</div>\n' +
    '      <div data-ng-include="\'views/partials/wb_login.html\'"></div>\n' +
    '      <div class="row LoginErrorBox" data-ng-show="errors[0].code == 29">\n' +
    '        <div class="col-md-12">\n' +
    '          <div class="alert alert-danger">\n' +
    '            <div data-translate>The key code is either invalid or the submission has expired.</div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/user_delete.html',
    '<div class="modal-header">\n' +
    '  <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon glyphicon-remove-circle"></i>\n' +
    '  </button>\n' +
    '  <div class="modal-title" data-translate>Are you sure?</div>\n' +
    '</div>\n' +
    '<div class="modal-body">\n' +
    '  <div class="alert alert-danger">\n' +
    '    <span data-translate>Are you sure that you want to delete the user?</span>\n' +
    '    <br />\n' +
    '    <span data-translate>Please take care that all associated data is properly deleted.</span>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="modal-footer">\n' +
    '  <a id="modal-action-cancel" class="btn btn-default" data-ng-click="cancel()">\n' +
    '    <i class="glyphicon glyphicon-remove"></i>\n' +
    '    <span data-translate>Cancel</span>\n' +
    '  </a>\n' +
    '  <a id="modal-action-ok" class="btn btn-danger" data-ng-click="ok()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Delete</span>\n' +
    '  </a>\n' +
    '</div>\n'
  );


  $templateCache.put('views/partials/wb_login.html',
    '<form name="wbLoginForm" class="form-inline" novalidate>\n' +
    '  <div class="form-group">\n' +
    '    <div class="input-group">\n' +
    '      <input class="form-control keyinput" type="text" placeholder="XXXX XXXX XXXX XXXX" maxlength="19" size="19" data-ng-model="formatted_keycode" name="keycode" autocomplete="off" keycodevalidator>\n' +
    '      <span class="input-group-btn keybutton">\n' +
    '        <button data-ng-click="view_tip(formatted_keycode)" class="btn btn-primary"\n' +
    '                data-ng-disabled="loginInProgress || wbLoginForm.keycode.$error.keycodevalidator" type="submit">\n' +
    '          <span data-translate>Log in</span>\n' +
    '        </button>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</form>\n'
  );


  $templateCache.put('views/partials/wb_login_box.html',
    '<div id="WhistleblowerLoginBox">\n' +
    '  <div data-translate>Have you already filed a submission? Enter your key code.</div>\n' +
    '  <div data-ng-include="\'views/partials/wb_login.html\'"></div>\n' +
    '  <div class="LoginErrorBoxHomepage row" data-ng-show="errors[0].code == 29">\n' +
    '    <div class="col-md-12">\n' +
    '      <div class="alert alert-danger">\n' +
    '        <div>\n' +
    '          <span data-translate>Cannot log in</span>:\n' +
    '          <span data-translate>The key code is either invalid or the submission has expired.</span>\n' +
    '        </div>\n' +
    '        <div data-translate>Please check your key code and try again or make a new submission.</div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receipt.html',
    '<div id="ReceiptOutputBox" data-ng-if="formatted_keycode">\n' +
    '  <div class="row">\n' +
    '    <p id="KeyCodeThanks1" data-translate>Thank you!</p>\n' +
    '    <p id="KeyCodeThanks2" data-translate>Your submission was successful.</p>\n' +
    '  </div>\n' +
    '  <div class="row">\n' +
    '    <div id="KeyCodeBox" class="col-md-6">\n' +
    '      <div>\n' +
    '        <div class="col-md-2">\n' +
    '          <img width="64" height="64" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEFUlEQVR4Ae1aXYRVURSeqURERETM0xAxRE+lRPTaU0SJiCEihp6GYdLrEPOQKPcpekhERJRJKdFDopTJTSmlRJk0hkZ9X1qcs2ffuWudc+7+mbmLzzl337XXXt/a//vsgYG+9COwqiMwmDD7HfBtLzAMbAKGgI/AIvASeAvcA34CK0Z2gck08A74o8ACdG4Do8AGIFvZCc/vAhrSnXS+If8YsBbISibh7W+gEzFr+nPYYrdJXjbCwxuAlaBGn63hYMoR2ALnWFMaMlV12KpOphiE9XDqQY/JS9AYhORawqVA5CUI7A7JjAlHA5OXIDxFudFnBzZ97fwujjf5PIHyo8oZlN4kIastBp+VEEVY8BfA6nTT+qMu+0E3oUe/D8HuzYq2HyLffeA1wD0Bl8uHAa4jrPIYGfZYMzWh34IRa21+Rx4Omj7ZhkTuAaw2qc81SHBpo0SLs3PQH1F4ec1olz6w9QQVNlULeeqeVXrILsF53mL/fNH2muKPHr1zH2+ReShfVGb4Ab0rSl1RK/kTIgCbpWTl8w30LIccz5R2Ra3kT4gAWFdgFvIkZdUvrQVCBIBN2iKlJqrIaNUvBSxEAL4qSBRVOMVxrtcK1xgW+WxRbkKXXeAXYBmpOcdrZD+ULHapO6Yx3LTODAxaHZ1CnlJ/dZziOWKV5fVux06Qn+MoxRoA6vPUyHWYozjn8irniFwzWAdlZKkv22GiSgAkzwLyc09fdzvdqk+lugX2ayEU68luE0U4ss8CsYizXO4bokgK5DlesBsGlxTIs/ZLG6BQUUiFfNWDmFpxIvk2ELPPs2xOo9wyB5VUyD8C661BmaOwVMi34Mtyq8iexCUF8h/A7HhP2HUx2gR5jhl3gCrjBpe4/O4Q5ZJEU+RphzIMTAK8MMElcKeAMGBXAW6Hgzd3lPlPNOTpJAm9AnxkSETI43WJkBzPBwRDSzQiJWjIk7CQ4y5sHCjWajfykah1L1ZLngFwP25we8s+my15NkE672vOvjTqup+x2M+lZeA1H7GSl4BczodiZ0+rkpcgaL/2dPYg4j8a8hztqceFiG/En0V6lHka5dYSDXnW8kShFBKdBqT223innexES55EXwDuguQ00ljzK5681PQEyLriBsX9P8nflpoX8nxykXMgSUYGpzTkedDwCSiSl3fe7BgBopy/o9za8gQWhIzvyRFe5Ahe3K8zPLvPss8LKdauj7ikkXCxdnnnZuZ/nuzJg4fqHu8pKhaEA90FIOuaFz6aLzhzK4Ws735A6QKBRMV5cnNzC+CJa7E7OGrp/6waADLjSD+VPsXlPfQFgDevNPIeSueARY1yqjq+AGi6AMnvA/jMWtZ5vL+ONPbt4hKWn5Wlr8/j/RiQPXlw6Es/Av0IrPII/AW+DTcH8Te3CQAAAABJRU5ErkJggg==" />\n' +
    '        </div>\n' +
    '        <div class="col-md-10">\n' +
    '          <span data-translate>Remember your key code for this submission.</span>\n' +
    '          <div id="KeyCode">{{formatted_keycode}}</div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div>\n' +
    '        <p data-translate>We will try to get back to you as soon as possible!</p>\n' +
    '        <p data-translate>Use the 16 digit key code to log in. It will allow you to view any messages we sent you, and also to add extra info.</p>\n' +
    '      </div>\n' +
    '      <div>\n' +
    '        <a id="ReceiptButton" class="btn btn-default pull-right" data-ng-click="view_tip(keycode)" data-translate>View your submission</a>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="col-md-6" data-ng-if="!node.disable_key_code_hint">\n' +
    '      <div id="KeyCodeHintBox">\n' +
    '        <p data-translate>Hint: How to hide your key code</p>\n' +
    '        <p data-translate>A useful way to hide your key code is to write it down like a credit card number, i.e. by also including an expiration date.</p>\n' +
    '        <p data-translate>Example:</p>\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-5">\n' +
    '            <div data-ng-include="\'views/partials/credit_card.html\'"></div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div id="ReceiptInputBox" data-ng-if="!formatted_keycode">\n' +
    '  <div data-ng-if="!embedded">\n' +
    '    <label data-translate>Have you already filed a submission? Enter your key code.</label>\n' +
    '  </div>\n' +
    '  <div data-ng-include="\'views/partials/wb_login.html\'"></div>\n' +
    '  <div class="LoginErrorBoxHomepage row" data-ng-show="errors[0].code == 29">\n' +
    '    <div class="col-md-12">\n' +
    '      <div class="alert alert-danger">\n' +
    '        <div>\n' +
    '          <span data-translate>Cannot log in</span>:\n' +
    '          <span data-translate>The key code is either invalid or the submission has expired.</span>\n' +
    '        </div>\n' +
    '        <div data-translate>Please check your key code and try again or make a new submission.</div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/custodian.html',
    '<div data-ng-controller="TipCtrl" data-ng-init="workflow=1">\n' +
    '    <div class="row">\n' +
    '        <div class="col-md-12">\n' +
    '            <div class="pull-left">\n' +
    '                <a id="link-tiplist" \n' +
    '                    href="#!/receiver/tips" \n' +
    '                    popover="{{\'Tips\' | translate}}" \n' +
    '                    popover-placement="top" \n' +
    '                    popover-trigger="mouseenter"\n' +
    '                    class="btn btn-default">\n' +
    '                    <span class="glyphicon glyphicon-th-list"></span>\n' +
    '                </a>\n' +
    '\n' +
    '                <span id="tip-action-postpone" \n' +
    '                    data-ng-if="preferences.can_postpone_expiration" \n' +
    '                    data-ng-click="tip_postpone()" \n' +
    '                    popover="{{\'Postpone tip expiration date\' | translate}}"\n' +
    '                    popover-placement="top" \n' +
    '                    popover-trigger="mouseenter" \n' +
    '                    class="btn btn-default">\n' +
    '                    <i class="glyphicon glyphicon-time"></i>\n' +
    '                </span>\n' +
    '\n' +
    '                <span id="tip-action-delete" \n' +
    '                    data-ng-if="preferences.can_delete_submission" \n' +
    '                    data-ng-click="tip_delete()" \n' +
    '                    popover="{{\'Delete tip\' | translate}}"\n' +
    '                    popover-placement="top" \n' +
    '                    popover-trigger="mouseenter" \n' +
    '                    class="btn btn-default">\n' +
    '                    <span class="glyphicon glyphicon-trash"></span>\n' +
    '                </span>\n' +
    '\n' +
    '                <span id="link-reload" \n' +
    '                    data-ng-click="reload()" \n' +
    '                    popover="{{\'Refresh page\' | translate}}" \n' +
    '                    popover-placement="top" \n' +
    '                    popover-trigger="mouseenter"\n' +
    '                    class="btn btn-default">\n' +
    '                    <span class="glyphicon glyphicon-refresh"></span>\n' +
    '                </span>\n' +
    '            </div>\n' +
    '\n' +
    '            <div class="pull-right">\n' +
    '                <a id="link-preferences" \n' +
    '                    data-ng-click="workflow=workflow==4?4:workflow+1" \n' +
    '                    class="btn btn-default">\n' +
    '                    <span class="glyphicon glyphicon-cog"></span>\n' +
    '                </a>\n' +
    '            </div>\n' +
    '        </div>\n' +
    '    </div>\n' +
    '    <br />\n' +
    '    <div class="row">\n' +
    '        <div class="col-md-12">\n' +
    '            <table class="table table-condensed table-striped">\n' +
    '                <thead>\n' +
    '                    <tr>\n' +
    '                        <th class="col-md-2">Data Richiesta</th>\n' +
    '                        <th class="col-md-2">Utente Richiedente</th>\n' +
    '                        <th class="col-md-5">Motivazione Richiesta</th>\n' +
    '                        <th class="col-md-3">Stato Autorizzazione</th>\n' +
    '                    </tr>\n' +
    '                    </tr>\n' +
    '                </thead>\n' +
    '                <tbody>\n' +
    '                    <tr>\n' +
    '                        <td class="col-md-2">03/07/2015</td>\n' +
    '                        <td class="col-md-2">Utente2</td>\n' +
    '                        <td class="col-md-5">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer faucibus ipsum eu ex congue congue. Nullam quis lacus bibendum, posuere eros non, convallis felis. Pellentesque egestas ut elit eget ultricies. Pellentesque venenatis massa in enim malesuada aliquam mattis nec urna. Aliquam tempor eu erat volutpat aliquam. Aliquam blandit pulvinar sem, ac auctor augue egestas ut. Aliquam quis ligula ut dolor tincidunt maximus vitae ut nibh. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Pellentesque malesuada mauris ligula, eu ultrices nisl aliquet quis. Sed tempus tortor id urna hendrerit aliquet. Fusce ac ultrices risus. Mauris velit mauris, fringilla quis ultricies id, tempor a tortor. Sed tempor porta fringilla. Nam nec iaculis risus, non congue enim. Nulla nec quam id velit aliquet euismod.</td>\n' +
    '                        <td class="col-md-3">Pendente:&nbsp;<button class="btn btn-xs btn-primary">Autorizza</button>&nbsp;<button class="btn btn-xs btn-danger">Nega</button></td>\n' +
    '                    </tr>\n' +
    '                    <tr>\n' +
    '                        <td class="col-md-2">03/07/2015</td>\n' +
    '                        <td class="col-md-2">Utente2</td>\n' +
    '                        <td class="col-md-5">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tincidunt erat eget ex fringilla, vel rutrum velit scelerisque. Maecenas eleifend vitae tortor vel blandit. Vestibulum magna enim, mattis a nibh eget, sodales volutpat dui. Morbi at rutrum magna. Mauris ut hendrerit ex, vitae mollis urna. Nam interdum diam eu ante bibendum imperdiet. Quisque congue dictum neque vitae pellentesque.</td>\n' +
    '                        <td class="col-md-3">Non Autorizzata</td>\n' +
    '                    </tr>\n' +
    '                    <tr>\n' +
    '                        <td class="col-md-2">02/07/2015</td>\n' +
    '                        <td class="col-md-2">Utente1</td>\n' +
    '                        <td class="col-md-5">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sed aliquet elit. Etiam condimentum leo ac congue sagittis. Nullam non elit libero. Integer rhoncus tortor arcu, id lobortis sem euismod eu. Integer pellentesque pulvinar lacus, eu scelerisque ante posuere at. Quisque velit justo, consectetur nec hendrerit et, fermentum in nunc. Pellentesque nec lectus ultrices felis tincidunt facilisis.</td>\n' +
    '                        <td class="col-md-3">Autorizzata</td>\n' +
    '                    </tr>\n' +
    '                </tbody>\n' +
    '            </table>\n' +
    '        </div>\n' +
    '    </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/dashboard.html',
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <table class="table table-condensed table-striped" id="tipList" data-ng-init="sortKey = \'creation_date\'; sortReverse=true;">\n' +
    '      <thead>\n' +
    '        <tr>\n' +
    '          <th data-ng-if="preferences.can_postpone_expiration || preferences.can_delete_submission"></th>\n' +
    '          <th>\n' +
    '            <span>\n' +
    '              <i class="glyphicon glyphicon-barcode"></i>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th data-ng-if="contexts.length > 1">\n' +
    '            <span data-ng-click="sortKey = \'context\'; sortReverse = !sortReverse">\n' +
    '              <span data-translate>Context</span>\n' +
    '              <i class="glyphicon glyphicon-inbox"></i>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'context\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'label\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-tag"></i>\n' +
    '              <span data-translate>Label</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'label\'">\n' +
    '                 <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                 <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'creation_date\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-time"></i>\n' +
    '              <span data-translate>Submission date</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'creation_date\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'update_date\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-time"></i>\n' +
    '              <span data-translate>Last update</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'update_date\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'expiration_date\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-hourglass"></i>\n' +
    '              <span data-translate>Expiration date</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'expiration_date\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>Stato</th>\n' +
    '          <th>Generalità</th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'files\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-file"></i>\n' +
    '              <span data-translate>Files</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'files\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'comments\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-comment"></i>\n' +
    '              <span data-translate>Comments</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'comments\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'messages\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-envelope"></i>\n' +
    '              <span data-translate>Messages</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'messages\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span>\n' +
    '              <i class="glyphicon glyphicon-send"></i>\n' +
    '              <span data-translate>Connection</span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <!-- <th>\n' +
    '            <span>\n' +
    '              <i class="glyphicon glyphicon-list-alt"></i>\n' +
    '              <span data-translate>Preview</span>\n' +
    '            </span>\n' +
    '          </th> -->\n' +
    '          <th data-ng-if="::node.enable_experimental_features">\n' +
    '            <span data-ng-click="sortKey = \'score\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-flash"></i>\n' +
    '              <span data-translate>Score</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'score\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '        </tr>\n' +
    '      </thead>\n' +
    '      <tbody id="tipListTableBody">\n' +
    '        <tr id="tip-{{$index}}" data-ng-repeat="tip in tips | orderBy:sortKey:sortReverse | filter:search" data-ng-class="{\'newTip\': !tip.access_counter, \'selectedTip\': isSelected(tip.id)}" class="tip-action-open" data-ng-click="go(\'/status/\' + tip.id)">\n' +
    '          <td data-ng-if="preferences.can_postpone_expiration || preferences.can_delete_submission">\n' +
    '            <span class="btn btn-xs" data-ng-if="isSelected(tip.id)" data-ng-click="tip_switch(tip.id); $event.stopPropagation();">\n' +
    '              <i class="glyphicon glyphicon-check"></i>\n' +
    '            </span>\n' +
    '            <span class="btn btn-xs" data-ng-if="!isSelected(tip.id)" data-ng-click="tip_switch(tip.id); $event.stopPropagation();">\n' +
    '              <i class="glyphicon glyphicon-unchecked"></i>\n' +
    '            </span>\n' +
    '          </td>\n' +
    '          <td>{{::tip.creation_date | date:\'yyyyMMdd\'}}-{{::tip.progressive}}</td>\n' +
    '          <td data-ng-if="contexts.length > 1">{{::tip.context_name}}</td>\n' +
    '          <td>{{::tip.label}}</td>\n' +
    '          <td>{{::tip.creation_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '          <td>{{::tip.update_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '          <td>{{::tip.expiration_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '          <td><span>{{::tip.status}}</span></td>\n' +
    '          <td><span>{{tip.identity_provided ? "Fornite" : "Non fornite"}}</span></td>\n' +
    '          <td>{{::tip.file_counter}}</td>\n' +
    '          <td>{{::tip.comment_counter}}</td>\n' +
    '          <td>{{::tip.message_counter}}</td>\n' +
    '          <td>\n' +
    '            <span data-ng-if="!tip.tor2web"\n' +
    '                  class="label label-warning"\n' +
    '                  uib-popover="{{\'The connection used to send this submission has been secured with HTTPS ensuring confidentiality.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"\n' +
    '                  data-translate>HTTPS</span>\n' +
    '            <span data-ng-if="tip.tor2web"\n' +
    '                  class="label label-success"\n' +
    '                  uib-popover="{{\'The connection used to send this submission has been secured with Tor ensuring confidentiality and anonymity.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"\n' +
    '                  data-translate>Tor</span>\n' +
    '          </td>\n' +
    '          <!-- <td>\n' +
    '            <div data-ng-repeat="field in tip.preview_schema" data-ng-init="fieldAnswers = tip.preview; preview=true" data-ng-include="\'views/partials/tip_field.html\'"></div>\n' +
    '          </td> -->\n' +
    '          <td data-ng-if="::node.enable_experimental_features">{{::tip.total_score}}</td>\n' +
    '        </tr>\n' +
    '      </tbody>\n' +
    '    </table>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '    </div>\n'
  );


  $templateCache.put('views/receiver/preferences.html',
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '\n' +
    '    <form class="row tab-content" name="preferencesForm" novalidate>\n' +
    '      <uib-tabset>\n' +
    '        <uib-tab data-ng-repeat="tab in tabs" heading="{{tab.title | translate}}" active="tab.active" disable="tab.disabled">\n' +
    '          <div data-ng-include="tab.template" data-ng-controller="tab.ctrl"></div>\n' +
    '        </uib-tab>\n' +
    '      </uib-tabset>\n' +
    '    </form>\n' +
    '\n' +
    '  </div> \n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/preferences/tab1.html',
    '<div class="col-md-8">\n' +
    '  <div data-ng-include="\'views/partials/preferences/general.html\'"></div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/preferences/tab2.html',
    '<div class="col-md-8">\n' +
    '  <div data-ng-include="\'views/partials/preferences/password.html\'"></div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/preferences/tab3.html',
    '<div class="col-md-8">\n' +
    '  <div class="form-group">\n' +
    '    <input data-ng-model="preferences.tip_notification" type="checkbox">\n' +
    '    <label>\n' +
    '      <span data-translate>Enable submission notification</span>\n' +
    '    </label>\n' +
    '    <div data-ng-show="preferences.tip_notification">\n' +
    '      <span class="btn-info">\n' +
    '        <span data-translate>Enabled</span>\n' +
    '      </span>\n' +
    '      <span data-translate>Every event related to a new or updated submission will trigger an email with a link to it.</span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '\n' +
    '  <button type="submit" class="btn btn-success" data-ng-click="pref_save()">\n' +
    '    <i class="glyphicon glyphicon-ok"></i>\n' +
    '    <span data-translate>Update notification settings</span>\n' +
    '  </button>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/preferences/tab4.html',
    '<div class="col-md-8">\n' +
    '  <div data-ng-include="\'views/partials/preferences/pgpkey.html\'"></div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/tip.html',
    '<div id="ReceiverToolbar" class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <a id="link-tiplist"\n' +
    '       data-ng-if="session.role === \'receiver\'"\n' +
    '       href="#!/receiver/dashboard"\n' +
    '       uib-popover="{{\'List of the submissions\' | translate}}"\n' +
    '       popover-placement="top"\n' +
    '       popover-trigger="mouseenter"\n' +
    '       class="btn btn-default">\n' +
    '      <span class="glyphicon glyphicon-th-list"></span>\n' +
    '    </a>\n' +
    '\n' +
    '    <a id="link-tiplist"\n' +
    '       data-ng-if="session.role === \'custodian\'"\n' +
    '       href="#!/custodian/identityaccessrequests"\n' +
    '       uib-popover="{{ \'Identity access requests\' | translate }}"\n' +
    '       popover-placement="top"\n' +
    '       popover-trigger="mouseenter"\n' +
    '       class="btn btn-default">\n' +
    '      <span class="glyphicon glyphicon-th-list"></span>\n' +
    '    </a>\n' +
    '\n' +
    '    <form id="TipExportForm" data-ng-if="session.role === \'receiver\'"  method="POST" action="{{::tip.export}}" novalidate>\n' +
    '      <input type="hidden" name="session" value="{{session.id}}">\n' +
    '      <button id="tip-action-export"\n' +
    '              uib-popover="{{\'Export\' | translate}}"\n' +
    '              popover-placement="top"\n' +
    '              popover-trigger="mouseenter"\n' +
    '              class="btn btn-default">\n' +
    '        <i class="glyphicon glyphicon-save"></i>\n' +
    '      </button>\n' +
    '    </form>\n' +
    '\n' +
    '    <span id="tip-action-postpone" data-ng-if="session.role === \'receiver\'"\n' +
    '          data-ng-if="preferences.can_postpone_expiration"\n' +
    '          data-ng-click="tip_postpone()"\n' +
    '          uib-popover="{{\'Postpone submission expiration date\' | translate}}"\n' +
    '          popover-placement="top"\n' +
    '          popover-trigger="mouseenter"\n' +
    '          class="btn btn-default">\n' +
    '      <i class="glyphicon glyphicon-time"></i>\n' +
    '    </span>\n' +
    '\n' +
    '    <span id="tip-action-delete" data-ng-if="session.role === \'receiver\'"\n' +
    '          data-ng-if="preferences.can_delete_submission"\n' +
    '          data-ng-click="tip_delete()"\n' +
    '          uib-popover="{{\'Delete tip\' | translate}}"\n' +
    '          popover-placement="top"\n' +
    '          popover-trigger="mouseenter"\n' +
    '          class="btn btn-default">\n' +
    '      <span class="glyphicon glyphicon-trash"></span>\n' +
    '    </span>\n' +
    '\n' +
    '    <span id="link-reload" data-ng-if="session.role === \'receiver\'"\n' +
    '          data-ng-click="reload()"\n' +
    '          uib-popover="{{\'Refresh page\' | translate}}"\n' +
    '          popover-placement="top"\n' +
    '          popover-trigger="mouseenter"\n' +
    '          class="btn btn-default">\n' +
    '      <span class="glyphicon glyphicon-refresh"></span>\n' +
    '    </span>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row" data-ng-if="!node.disable_encryption_warning && preferences.pgp_key_status !== \'enabled\'">\n' +
    '  <div class="col-md-12">\n' +
    '    <div class="alert alert-warning">\n' +
    '      <i class="glyphicon glyphicon-warning-sign"></i>\n' +
    '      <strong><span data-translate>Warning!</span></strong>\n' +
    '      <span data-translate>You have not set up your encryption key, so the files will not be encrypted prior to being stored on the server.</span>\n' +
    '      <span data-translate>This may lead to unintended access to the files by the server administrator or others in case the server is compromised.</span>\n' +
    '      <span data-translate>Please configure your PGP keys in the recipient preferences page.</span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '<div class="row" data-ng-if="!node.disable_encryption_warning && tip_unencrypted">\n' +
    '  <div class="col-md-12">\n' +
    '    <div class="alert alert-warning">\n' +
    '      <i class="glyphicon glyphicon-warning-sign"></i>\n' +
    '      <strong><span data-translate>Warning!</span></strong>\n' +
    '      <span data-translate>One or more of the recipients of this submission has not configured a PGP key.</span>\n' +
    '      <span data-translate>This means that the submitted files will be stored in plaintext on the server.</span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <div data-ng-include="\'views/partials/tip_info.html\'"></div>\n' +
    '    <div data-ng-if="tip.show_recipients_details" data-ng-include="\'views/partials/tip_receiver_list.html\'"></div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row">\n' +
    '  <div class="col-md-6">\n' +
    '    <div data-ng-include="\'views/partials/tip_questionnaire_answers.html\'"></div>\n' +
    '  </div>\n' +
    '  <div class="col-md-6">\n' +
    '    <div data-ng-include="\'views/submission/tip_status.html\'"></div>\n' +
    '    <div data-ng-if="tip.enable_whistleblower_identity" data-ng-include="\'views/receiver/whistleblower_identity.html\'"></div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <div data-ng-include="\'views/partials/tip_files_receiver.html\'"></div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row">\n' +
    '  <div class="col-md-6" data-ng-if="tip.enable_comments">\n' +
    '    <div data-ng-include="\'views/partials/tip_comments.html\'"></div>\n' +
    '  </div>\n' +
    '  <div class="col-md-6" data-ng-if="tip.enable_messages">\n' +
    '    <div data-ng-include="\'views/partials/tip_messages.html\'"></div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/tiplog.html',
    '<div data-ng-controller="TipCtrl" data-ng-init="workflow=1">\n' +
    '        <div class="row">\n' +
    '                <div class="col-md-12">\n' +
    '                        <div class="pull-left">\n' +
    '                                <a id="link-tiplist" \n' +
    '                                        href="#!/receiver/tips" \n' +
    '                                        popover="{{\'Tips\' | translate}}" \n' +
    '                                        popover-placement="top" \n' +
    '                                        popover-trigger="mouseenter"\n' +
    '                                        class="btn btn-default">\n' +
    '                                        <span class="glyphicon glyphicon-th-list"></span>\n' +
    '                                </a>\n' +
    '                                <span id="tip-action-postpone" \n' +
    '                                        data-ng-if="preferences.can_postpone_expiration"\n' +
    '                                        data-ng-click="tip_postpone()" \n' +
    '                                        popover="{{\'Postpone tip expiration date\' | translate}}"\n' +
    '                                        popover-placement="top" \n' +
    '                                        popover-trigger="mouseenter" \n' +
    '                                        class="btn btn-default">\n' +
    '                                        <i class="glyphicon glyphicon-time"></i>\n' +
    '                                </span>\n' +
    '                                <span id="tip-action-delete" \n' +
    '                                        data-ng-if="preferences.can_delete_submission"\n' +
    '                                        data-ng-click="tip_delete()" \n' +
    '                                        popover="{{\'Delete tip\' | translate}}"\n' +
    '                                        popover-placement="top" \n' +
    '                                        popover-trigger="mouseenter" \n' +
    '                                        class="btn btn-default">\n' +
    '                                        <span class="glyphicon glyphicon-trash"></span>\n' +
    '                                </span>\n' +
    '                                <span id="link-reload" \n' +
    '                                        data-ng-click="reload()" \n' +
    '                                        popover="{{\'Refresh page\' | translate}}" \n' +
    '                                        popover-placement="top" \n' +
    '                                        popover-trigger="mouseenter"\n' +
    '                                        class="btn btn-default">\n' +
    '                                        <span class="glyphicon glyphicon-refresh"></span>\n' +
    '                                </span>\n' +
    '                        </div>\n' +
    '                        <div class="pull-right">\n' +
    '                                <a id="link-preferences" \n' +
    '                                data-ng-click="workflow=workflow==4?4:workflow+1" \n' +
    '                                class="btn btn-default">\n' +
    '                                        <span class="glyphicon glyphicon-cog"></span>\n' +
    '                                </a>\n' +
    '                        </div>\n' +
    '                </div>\n' +
    '        </div>\n' +
    '        <br />\n' +
    '        <div class="row">\n' +
    '                <div class="col-md-12">\n' +
    '                        <table class="table table-condensed table-striped">\n' +
    '                                <thead>\n' +
    '                                        <tr>\n' +
    '                                                <th class="col-md-2">Data</th>\n' +
    '                                                <th class="col-md-2">ID Segnalazione</th>\n' +
    '                                                <th class="col-md-2">Soggetto</th>\n' +
    '                                                <th class="col-md-6">Evento</th>\n' +
    '                                        </tr>\n' +
    '                                        </tr>\n' +
    '                                </thead>\n' +
    '                                <tbody>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">01/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Segnalante</td>\n' +
    '                                                <td class="col-md-6">Inserimento segnalazione</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">01/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Capo Istruttore</td>\n' +
    '                                                <td class="col-md-6">Notifica email ricezione segnalazione</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">03/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Capo Istruttore</td>\n' +
    '                                                <td class="col-md-6">Assegnazione a istruttore</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">03/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Notifica email assegnazione a istruttore</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">04/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Presa in carico</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">04/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Invio messaggio a segnalante di richiesta chiarimento</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">04/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Segnalante</td>\n' +
    '                                                <td class="col-md-6">Accesso e Lettura messaggi</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">05/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Segnalante</td>\n' +
    '                                                <td class="col-md-6">Invio ulteriori evidenze</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">05/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Segnalante</td>\n' +
    '                                                <td class="col-md-6">Invio messaggi</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">05/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Notifica email ricezione evidenze e messaggi</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">06/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Ricezione messaggi e ulteriori evidenze</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">06/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Consultazione evidenze</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">06/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Invio messaggio di richiesta chiarimento</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">07/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Segnalante</td>\n' +
    '                                                <td class="col-md-6">Comunicazione Identità</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">07/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Notifica email comunicazione identità</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">08/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Richiesta accesso a identità</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">08/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Custode Identità</td>\n' +
    '                                                <td class="col-md-6">Notifica richiesta accesso identità</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">09/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Custode Identità</td>\n' +
    '                                                <td class="col-md-6">Autorizzazione visualizzazione identità</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">09/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Notifica accesso identità autorizzata</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">10/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Accesso e lettura identità whistleblower</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">12/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Istruttore</td>\n' +
    '                                                <td class="col-md-6">Proposta esito segnalazione: inoltrata autorità competente / archiviazione</td>\n' +
    '                                        </tr>\n' +
    '                                        <tr>\n' +
    '                                                <td class="col-md-2">15/07/2015</td>\n' +
    '                                                <td class="col-md-2">20150701-01</td>\n' +
    '                                                <td class="col-md-2">Capo Istruttore</td>\n' +
    '                                                <td class="col-md-6">Esito finale segnalazione (nd: delibera consiglio):</td>\n' +
    '                                        </tr>\n' +
    '                                </tbody>\n' +
    '                        </table>\n' +
    '                </div>\n' +
    '        </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/tips.html',
    '<div id="ReceiverToolbar" class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <span data-ng-if="preferences.can_postpone_expiration || preferences.can_delete_submission" class="pull-left">\n' +
    '      <span id="tip-action-select-all"\n' +
    '            data-ng-if="selected_tips.length !== tips.length"\n' +
    '            data-ng-click="select_all()"\n' +
    '            uib-popover="{{\'Select all\' | translate}}"\n' +
    '            popover-placement="top"\n' +
    '            popover-trigger="mouseenter"\n' +
    '            class="btn btn-default">\n' +
    '        <i class="glyphicon glyphicon glyphicon-unchecked"></i>\n' +
    '      </span>\n' +
    '\n' +
    '      <span id="tip-action-select-all"\n' +
    '            data-ng-if="selected_tips.length === tips.length"\n' +
    '            data-ng-click="deselect_all()"\n' +
    '            uib-popover="{{\'Deselect all\' | translate}}"\n' +
    '            popover-placement="top"\n' +
    '            popover-trigger="mouseenter"\n' +
    '            class="btn btn-default">\n' +
    '        <i class="glyphicon glyphicon-check"></i>\n' +
    '      </span>\n' +
    '\n' +
    '      <span id="tip-action-postpone-selected"\n' +
    '          data-ng-if="selected_tips.length && preferences.can_postpone_expiration"\n' +
    '          data-ng-click="tip_postpone_all()"\n' +
    '          uib-popover="{{\'Postpone the expiration date\' | translate}}"\n' +
    '          popover-placement="top"\n' +
    '          popover-trigger="mouseenter"\n' +
    '          class="btn btn-default">\n' +
    '        <i class="glyphicon glyphicon-time"></i>\n' +
    '      </span>\n' +
    '\n' +
    '      <span id="tip-action-delete-selected"\n' +
    '            data-ng-if="selected_tips.length && preferences.can_delete_submission"\n' +
    '            data-ng-click="tip_delete_all()"\n' +
    '            uib-popover="{{\'Delete tips\' | translate}}"\n' +
    '            popover-placement="top"\n' +
    '            popover-trigger="mouseenter"\n' +
    '            class="btn btn-default">\n' +
    '        <span class="glyphicon glyphicon-trash"></span>\n' +
    '      </span>\n' +
    '    </span>\n' +
    '    <span>\n' +
    '      <span id="tip-action-reload"\n' +
    '            data-ng-click="reload()"\n' +
    '            uib-popover="{{\'Refresh page\' | translate}}"\n' +
    '            popover-placement="top"\n' +
    '            popover-trigger="mouseenter"\n' +
    '            class="btn btn-default">\n' +
    '        <span class="glyphicon glyphicon-refresh"></span>\n' +
    '      </span>\n' +
    '    </span>\n' +
    '    <span class="pull-left form-group">\n' +
    '      <input id="search-filter" type="text" class="form-control" data-ng-attr-placeholder="{{\'Search\' | translate}}" data-ng-model="search">\n' +
    '    </span>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <table class="table table-condensed table-striped" id="tipList" data-ng-init="sortKey = \'creation_date\'; sortReverse=true;">\n' +
    '      <thead>\n' +
    '        <tr>\n' +
    '          <th data-ng-if="preferences.can_postpone_expiration || preferences.can_delete_submission"></th>\n' +
    '          <th>\n' +
    '            <span>\n' +
    '              <i class="glyphicon glyphicon-barcode"></i>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th data-ng-if="contexts.length > 1">\n' +
    '            <span data-ng-click="sortKey = \'context\'; sortReverse = !sortReverse">\n' +
    '              <span data-translate>Context</span>\n' +
    '              <i class="glyphicon glyphicon-inbox"></i>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'context\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'label\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-tag"></i>\n' +
    '              <span data-translate>Label</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'label\'">\n' +
    '                 <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                 <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'creation_date\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-time"></i>\n' +
    '              <span data-translate>Submission date</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'creation_date\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'update_date\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-time"></i>\n' +
    '              <span data-translate>Last update</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'update_date\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'expiration_date\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-hourglass"></i>\n' +
    '              <span data-translate>Expiration date</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'expiration_date\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>Stato</th>\n' +
    '          <th>Generalità</th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'files\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-file"></i>\n' +
    '              <span data-translate>Files</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'files\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'comments\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-comment"></i>\n' +
    '              <span data-translate>Comments</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'comments\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span data-ng-click="sortKey = \'messages\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-envelope"></i>\n' +
    '              <span data-translate>Messages</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'messages\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span>\n' +
    '              <i class="glyphicon glyphicon-send"></i>\n' +
    '              <span data-translate>Connection</span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th>\n' +
    '            <span>\n' +
    '              <i class="glyphicon glyphicon-list-alt"></i>\n' +
    '              <span data-translate>Preview</span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '          <th data-ng-if="::node.enable_experimental_features">\n' +
    '            <span data-ng-click="sortKey = \'score\'; sortReverse = !sortReverse">\n' +
    '              <i class="glyphicon glyphicon-flash"></i>\n' +
    '              <span data-translate>Score</span>\n' +
    '              <span class="btn btn-xs" data-ng-show="sortKey == \'score\'">\n' +
    '                <span data-ng-show="!sortReverse" class="glyphicon glyphicon-triangle-bottom"></span>\n' +
    '                <span data-ng-show="sortReverse" class="glyphicon glyphicon-triangle-top"></span>\n' +
    '              </span>\n' +
    '            </span>\n' +
    '          </th>\n' +
    '        </tr>\n' +
    '      </thead>\n' +
    '      <tbody id="tipListTableBody">\n' +
    '        <tr id="tip-{{$index}}" data-ng-repeat="tip in tips | orderBy:sortKey:sortReverse | filter:search" data-ng-class="{\'newTip\': !tip.access_counter, \'selectedTip\': isSelected(tip.id)}" class="tip-action-open" data-ng-click="go(\'/status/\' + tip.id)">\n' +
    '          <td data-ng-if="preferences.can_postpone_expiration || preferences.can_delete_submission">\n' +
    '            <span class="btn btn-xs" data-ng-if="isSelected(tip.id)" data-ng-click="tip_switch(tip.id); $event.stopPropagation();">\n' +
    '              <i class="glyphicon glyphicon-check"></i>\n' +
    '            </span>\n' +
    '            <span class="btn btn-xs" data-ng-if="!isSelected(tip.id)" data-ng-click="tip_switch(tip.id); $event.stopPropagation();">\n' +
    '              <i class="glyphicon glyphicon-unchecked"></i>\n' +
    '            </span>\n' +
    '          </td>\n' +
    '          <td>{{::tip.creation_date | date:\'yyyyMMdd\'}}-{{::tip.progressive}}</td>\n' +
    '          <td data-ng-if="contexts.length > 1">{{::tip.context_name}}</td>\n' +
    '          <td>{{::tip.label}}</td>\n' +
    '          <td>{{::tip.creation_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '          <td>{{::tip.update_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '          <td>{{::tip.expiration_date | date:\'dd-MM-yyyy HH:mm\'}}</td>\n' +
    '          <td><span>{{::tip.status}}</span></td>\n' +
    '          <td><span>{{tip.identity_provided ? "Fornite" : "Non fornite"}}</span></td>\n' +
    '          <td>{{::tip.file_counter}}</td>\n' +
    '          <td>{{::tip.comment_counter}}</td>\n' +
    '          <td>{{::tip.message_counter}}</td>\n' +
    '          <td>\n' +
    '            <span data-ng-if="!tip.tor2web"\n' +
    '                  class="label label-warning"\n' +
    '                  uib-popover="{{\'The connection used to send this submission has been secured with HTTPS ensuring confidentiality.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"\n' +
    '                  data-translate>HTTPS</span>\n' +
    '            <span data-ng-if="tip.tor2web"\n' +
    '                  class="label label-success"\n' +
    '                  uib-popover="{{\'The connection used to send this submission has been secured with Tor ensuring confidentiality and anonymity.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"\n' +
    '                  data-translate>Tor</span>\n' +
    '          </td>\n' +
    '          <td>\n' +
    '            <div data-ng-repeat="field in tip.preview_schema" data-ng-init="fieldAnswers = tip.preview; preview=true" data-ng-include="\'views/partials/tip_field.html\'"></div>\n' +
    '          </td>\n' +
    '          <td data-ng-if="::node.enable_experimental_features">{{::tip.total_score}}</td>\n' +
    '        </tr>\n' +
    '      </tbody>\n' +
    '    </table>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/receiver/whistleblower_identity.html',
    '<div id="TipInfoBox" class="panel panel-default" data-ng-init="collapsed = false">\n' +
    '  <div ng-if="!tip.identity_provided" class="panel-heading">\n' +
    '    <div>\n' +
    '      <span>\n' +
    '        <span data-translate>Identity</span><span>:</span>\n' +
    '        <span data-translate>Not available</span>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div ng-if="tip.identity_provided" class="panel-heading" data-ng-click="collapsed = !collapsed; $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span>\n' +
    '        <span data-translate>Identity</span><span>:</span>\n' +
    '        <span data-translate>Available</span>\n' +
    '        <span class="pull-right">\n' +
    '          <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '          <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        </span>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div ng-if="tip.identity_provided" class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <div data-ng-if="tip.last_iar && tip.last_iar.reply != \'authorized\'">\n' +
    '      <div>\n' +
    '        <label data-translate>Access to the whistleblower\'s identity has been requested to the custodian.</label>\n' +
    '      </div>\n' +
    '      <div>\n' +
    '        <label data-translate>Date of the request</label><span>:</span>\n' +
    '        <span>{{tip.last_iar.request_date | date:\'dd-MM-yyyy HH:mm\'}}</span>\n' +
    '      </div>\n' +
    '      <div>\n' +
    '        <label data-translate>Request status</label><span>:</span>\n' +
    '        <span data-ng-switch="" on="tip.last_iar.reply">\n' +
    '          <span data-ng-switch-when="pending" data-translate>Waiting for authorization</span>\n' +
    '          <span data-ng-switch-when="denied" data-translate>Denied</span>\n' +
    '        </span>\n' +
    '      </div>\n' +
    '      <div data-ng-if="iar.reply == \'denied\'"><label data-translate>Reply motivation</label>:<span>{{tip.last_iarl.reply_motivation}}</span></div>\n' +
    '    </div>\n' +
    '    <div data-ng-if="!whistleblower_identity_field.attrs.visibility_subject_to_authorization.value || (tip.last_iar && tip.last_iar.reply == \'authorized\')">\n' +
    '      <dd data-ng-repeat="field in whistleblower_identity_field.children | orderBy:[\'y\', \'x\']">\n' +
    '        <span data-ng-init="fieldAnswers=tip.answers[whistleblower_identity_field.id][0]" data-ng-include="\'views/partials/tip_field.html\'"></span>\n' +
    '      <dd>\n' +
    '    </div>\n' +
    '    <div data-ng-if="whistleblower_identity_field.attrs.visibility_subject_to_authorization.value && (!tip.last_iar || tip.last_iar.reply == \'denied\')">\n' +
    '      <a class="btn btn-primary" data-ng-click="file_identity_access_request()">\n' +
    '        <span data-translate>Request access to the whistleblower\'s identity</span>\n' +
    '      </a>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/simplified_login.html',
    '<div id="LoginBox">\n' +
    '  <div class="row" data-ng-show="errors[0].code == 29">\n' +
    '    <div class="col-md-9">\n' +
    '      <div class="alert alert-danger">\n' +
    '        <strong><span data-translate>Authentication failed</span></strong>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="row">\n' +
    '    <div class="col-md-4">\n' +
    '      <form name="loginForm" novalidate>\n' +
    '        <div class="form-group">\n' +
    '          <label data-translate>Please select your account:</label>\n' +
    '          <select class="form-control" data-ng-model="loginUsername" data-ng-options="item.username as item.name for item in receivers | filter:filterReceivers | orderBy:\'name\'" required></select>\n' +
    '        </div>\n' +
    '\n' +
    '        <div class="form-group" data-ng-show="loginUsername">\n' +
    '          <label data-translate>Now type your password, then click \'Log in\':</label>\n' +
    '          <input class="form-control" name="password" data-ng-model="loginPassword" type="password" required />\n' +
    '        </div>\n' +
    '\n' +
    '        <div class="form-group" data-ng-show="loginUsername">\n' +
    '          <button class="btn btn-success" data-ng-disabled="loginInProgress || loginForm.$invalid" data-ng-click="login(loginUsername, loginPassword, loginRole)" type="submit">\n' +
    '            <i class="glyphicon glyphicon-log-in"></i>\n' +
    '            <span data-translate>Log in</span>\n' +
    '          </button>\n' +
    '        </div>\n' +
    '      </form>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/submission/fields/whistleblower_identity.html',
    '<div data-ng-init="submission._submission.identity_provided = true; vars={}">\n' +
    '  <div data-ng-class="{\'has-error\': f[\'whistleblower_identity_radio_1\'].$error.required}">\n' +
    '    <label class="radio-inline"><input class="inputelem" type="radio" name="whistleblower_identity_radio_1" data-ng-model="submission._submission.identity_provided" data-ng-value="true" data-ng-change="vars.confirmation_upon_negative_answer=unspecified" /><span data-translate>Yes</span></label>\n' +
    '    <label class="radio-inline"><input class="inputelem" type="radio" name="whistleblober_identity_radio_1" data-ng-model="submission._submission.identity_provided" data-ng-value="false" data-ng-change="vars.confirmation_upon_negative_answer=unspecified" /><span data-translate>No</span></label>\n' +
    '  </div>\n' +
    '  <br /><br />\n' +
    '  <div data-ng-if="field.attrs.prompt_confirmation_upon_negative_answer.value">\n' +
    '    <div data-ng-if="submission._submission.identity_provided === false && vars.confirmation_upon_negative_answer === unspecified" class="alert alert-warning" data-ng-class="{\'has-error\': f[\'whistleblower_identity_radio_2\'].$error.required}">\n' +
    '      <div>\n' +
    '        <span class="fieldLabel">{{field.attrs.title_of_confirmation_question_upon_negative_answer.value}}</span>\n' +
    '        <span class="text-red"\n' +
    '              uib-popover="{{\'This field is mandatory\' | translate}}"\n' +
    '              popover-placement="right"\n' +
    '              popover-trigger="mouseenter">*</span>\n' +
    '      </div>\n' +
    '      <div>{{field.attrs.text_of_confirmation_question_upon_negative_answer.value}}</div>\n' +
    '      <div data-ng-class="{\'has-error\': f[\'whistleblower_identity_radio_2\'].$error.required}">\n' +
    '        <label class="radio-inline"><input class="inputelem" type="radio" name="whistleblower_identity_radio_2" data-ng-value="true" data-ng-model="vars.confirmation_upon_negative_answer" data-ng-change="submission._submission.identity_provided = false" /><span data-translate>Yes</span></label>\n' +
    '        <label class="radio-inline"><input class="inputelem" type="radio" name="whistleblower_identity_radio_2" data-ng-value="false" data-ng-model="vars.confirmation_upon_negative_answer" data-ng-change="submission._submission.identity_provided = true" /><span data-translate>No</span></label>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div data-ng-if="vars.confirmation_upon_negative_answer === true" class="alert alert-warning">\n' +
    '    <label>{{field.attrs.text_of_final_statement_upon_negative_answer.value}}</label>\n' +
    '  </div>\n' +
    '  <div data-ng-if="submission._submission.identity_provided === true">\n' +
    '    <div data-ng-include="\'views/submission/form.html\'"></div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/submission/form.html',
    '<div data-ng-repeat="row in rows" data-ng-init="fieldRow=$index" class="fieldsRow row">\n' +
    '  <div data-ng-repeat="field in row | orderBy:\'x\'" data-ng-init="fieldCol=$index">\n' +
    '    <div data-ng-controller="SubmissionFieldCtrl" data-ng-class="getClass(field, row.length)">\n' +
    '      <div id="{{stepId}}-field-{{fieldRow}}-{{fieldCol}}" class="panel panel-default" data-ng-show="fieldIsTriggered(field)">\n' +
    '        <div class="panel-heading">\n' +
    '          <label>\n' +
    '            <span class="fieldLabel">{{::field.label}}</span>\n' +
    '            <a href="" data-ng-show="::field.hint" data-content="::field.hint" uib-popover="{{::field.hint}}" popover-placement="right" popover-trigger="mouseenter">\n' +
    '              <i class="glyphicon glyphicon-question-sign"></i>\n' +
    '            </a>\n' +
    '          </label>\n' +
    '          <span class="text-red"\n' +
    '                data-ng-if="::field.required"\n' +
    '                uib-popover="{{\'This field is mandatory\' | translate}}"\n' +
    '                popover-placement="right"\n' +
    '                popover-trigger="mouseenter">*</span>\n' +
    '        </div>\n' +
    '        <div class="panel-body">\n' +
    '          <div class="FieldDescription">{{::field.description}}</div>\n' +
    '          <div class="submissionFieldInput form-group">\n' +
    '            <div data-ng-include="\'views/submission/form_field_inputs.html\'"></div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/submission/form_field_input.html',
    '<div data-ng-form="f" class="submissionFieldInput">\n' +
    '  <div data-ng-switch="field.key">\n' +
    '    <div data-ng-switch-when="whistleblower_identity">\n' +
    '      <div data-ng-include="\'views/submission/fields/whistleblower_identity.html\'"></div>\n' +
    '    </div>\n' +
    '    <div data-ng-switch-default data-ng-switch="field.type">\n' +
    '      <div data-ng-switch-when="textarea" data-ng-class="{\'has-error\': f[\'input-\' + entryIndex].$error.required || f[\'input-\' + entryIndex].$error.minlength}">\n' +
    '        <textarea id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}"\n' +
    '                  data-ng-init="maxlength = field.attrs.max_len.value > 0 ? field.attrs.max_len.value : node.maximum_textsize"\n' +
    '                  name="input-{{entryIndex}}"\n' +
    '                  class="form-control inputelem"\n' +
    '                  data-ng-model="entry[\'value\']"\n' +
    '                  data-ng-minlength="field.attrs.min_len.value"\n' +
    '                  maxlength="{{maxlength}}"\n' +
    '                  rows="3"\n' +
    '                  data-ng-required="field.required"\n' +
    '                  data-ng-attr-placeholder="{{field.placeholder}}"></textarea>\n' +
    '        <div>\n' +
    '          <div data-ng-if="maxlength >= 0 && (maxlength - entry[\'value\'].length) <= 50"\n' +
    '               data-translate-values="{available_characters_count: maxlength - entry[\'value\'].length}"\n' +
    '               data-translate>FIELD_INPUT_AVAILABLE_CHARS</div>\n' +
    '          <div class="text-red"\n' +
    '               data-ng-if="field.attrs.min_len.value > 0 && (f[\'input-\' + entryIndex].$error.minlength || (field.required && entry[\'value\'].length == undefined))"\n' +
    '               data-translate-values="{min_characters_limit: field.attrs.min_len.value}"\n' +
    '               data-translate>FIELD_INPUT_MIN_CHARS</div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-when="multichoice" data-ng-class="{\'has-error\': f[\'input-\' + entryIndex].$error.required}">\n' +
    '        <div data-ng-class="{\'radio\': (field.attrs.layout_orientation.value != \'horizontal\')}">\n' +
    '          <label data-ng-class="{\'radio-inline\': (field.attrs.layout_orientation.value == \'horizontal\')}" data-ng-repeat="option in field.options | orderBy:\'presentation_order\'" id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}" name="{{\'input-\' +  entryIndex}}">\n' +
    '            <input class="inputelem" type="radio" id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}-option-{{$index}}" data-ng-model="entry[\'value\']" value="{{option.id}}" data-ng-required="field.required" />\n' +
    '            <span>{{::option.label}}</span>\n' +
    '          </label>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-when="selectbox" data-ng-class="{\'has-error\': f[\'input-\' + entryIndex].$error.required}">\n' +
    '        <select id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}" name="{{\'input-\' +  entryIndex}}" class="form-control inputelem" data-ng-model="entry[\'value\']" data-ng-required="field.required">\n' +
    '          <option style="display:none" value=""></option>\n' +
    '          <option data-ng-repeat="option in field.options | orderBy:\'presentation_order\'" id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}-option-{{$index}}" value="{{option.id}}">{{::option.label}}</option>\n' +
    '        </select>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-when="checkbox" data-ng-class="{\'has-error\': field.required_check}">\n' +
    '        <div data-ng-class="{\'checkbox\': (field.attrs.layout_orientation.value != \'horizontal\')}">\n' +
    '          <label data-ng-repeat="option in field.options | orderBy:\'presentation_order\'" data-ng-class="{\'checkbox-inline\': (field.attrs.layout_orientation.value == \'horizontal\'), \'has-error\': f[\'input-\' + $parent.entryIndex + \'-option-\' + entryIndex].$error.required}">\n' +
    '            <input id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}"\n' +
    '                   name="{{\'input-\' + $parent.entryIndex + \'-option-\' + entryIndex}}"\n' +
    '                   class="inputelem"\n' +
    '                   data-ng-init="field.required_check = !validateRequiredCheckbox(field, entry)"\n' +
    '                   data-ng-model="entry[option.id]"\n' +
    '                   data-ng-required="field.required_check"\n' +
    '                   data-ng-change="field.required_check = !validateRequiredCheckbox(field, entry)"\n' +
    '                   data-ng-attr-placeholder="{{field.placeholder || \'false\'}}"\n' +
    '                   type="checkbox" />\n' +
    '            {{::option.label}}\n' +
    '          </label>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-when="date" data-ng-class="{\'has-error\': f[\'input-\' + entryIndex].$error.required || f[\'input-\' + entryIndex].$invalid}">\n' +
    '        <div class="input-group">\n' +
    '          <input id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}"\n' +
    '                 name="input-{{entryIndex}}"\n' +
    '                 class="form-control inputelem"\n' +
    '                 data-ng-model="entry[\'value\']"\n' +
    '                 maxlength="{{node.maximum_namesize}}"\n' +
    '                 data-ng-required="field.required"\n' +
    '                 data-ng-attr-placeholder="{{field.placeholder}}"\n' +
    '                 type="text"\n' +
    '                 uib-datepicker-popup=""\n' +
    '                 is-open="status.opened"\n' +
    '                 readonly="readonly"\n' +
    '                 show-button-bar="false" />\n' +
    '          <span class="input-group-btn">\n' +
    '            <button type="button" class="btn btn-default" data-ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button>\n' +
    '          </span>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-when="tos">\n' +
    '        <div class="form-group preformatted" data-ng-click="entry[\'value\'] = !entry[\'value\']">{{field.attrs.clause.value}}</div>\n' +
    '        <div class="checkbox" data-ng-class="{\'has-error\': f[\'input-\' + entryIndex].$error.required}">\n' +
    '          <label>\n' +
    '            <input id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}"\n' +
    '                   name="input-{{entryIndex}}"\n' +
    '                   class="inputelem"\n' +
    '                   data-ng-model="entry[\'value\']"\n' +
    '                   data-ng-required="field.required"\n' +
    '                   value="{{field.value}}"\n' +
    '                   data-ng-attr-placeholder="{{field.placeholder || \'false\'}}"\n' +
    '                   type="checkbox" />\n' +
    '            <span class="TOS">{{field.attrs.agreement_statement.value}}</span>\n' +
    '          </label>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-when="fileupload">\n' +
    '        <div id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}" data-ng-include="\'views/partials/fileupload_button.html\'"></div>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-when="fieldgroup">\n' +
    '        <div data-ng-include="\'views/submission/form.html\'"></div>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-default data-ng-class="{\'has-error\': f[\'input-\' + entryIndex].$error.required || f[\'input-\' + entryIndex].$error.minlength}">\n' +
    '        <input id="{{::stepId}}-field-{{fieldRow}}-{{fieldCol}}-input-{{entryIndex}}"\n' +
    '               name="input-{{entryIndex}}"\n' +
    '               class="form-control inputelem"\n' +
    '               data-ng-init="maxlength = field.attrs.max_len.value > 0 ? field.attrs.max_len.value : node.maximum_namesize"\n' +
    '               data-ng-model="entry[\'value\']"\n' +
    '               data-ng-minlength="field.attrs.min_len.value"\n' +
    '               maxlength="{{maxlength}}"\n' +
    '               data-ng-required="field.required"\n' +
    '               data-ng-attr-placeholder="{{field.placeholder}}"\n' +
    '               type="text" />\n' +
    '        <div>\n' +
    '          <div data-ng-if="maxlength >= 0 && (maxlength- entry[\'value\'].length) <= 50"\n' +
    '               data-translate-values="{available_characters_count: maxlength - entry[\'value\'].length}"\n' +
    '               data-translate>FIELD_INPUT_AVAILABLE_CHARS</div>\n' +
    '          <div class="text-red"\n' +
    '               data-ng-if="field.attrs.min_len.value > 0 && (f[\'input-\' + entryIndex].$error.minlength || (field.required && entry[\'value\'].length == undefined))"\n' +
    '               data-translate-values="{min_characters_limit: field.attrs.min_len.value}"\n' +
    '               data-translate>FIELD_INPUT_MIN_CHARS</div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/submission/form_field_inputs.html',
    '<div class="fieldAnswerEntry" data-ng-repeat="entry in entries" data-ng-class="{\'fieldAnserEntryFirst\': $first, \'fieldAnswerEntryLast\': $last}" data-ng-init="entryIndex=$index">\n' +
    '  <div class="fieldAnswerEntryLabel" data-ng-if="entries.length > 1">\n' +
    '    <span class="pull-left">\n' +
    '      <label class="text-gray">\n' +
    '        <span>#{{entryIndex + 1}}</span>\n' +
    '      </label>\n' +
    '    </span>\n' +
    '    <span class="pull-right">\n' +
    '      <span class="text-red" href="" uib-popover="{{\'Remove\' | translate}}" popover-placement="right" popover-trigger="mouseenter" data-ng-click="remove(entries, entryIndex)">\n' +
    '        <i class="glyphicon glyphicon-remove"></i>\n' +
    '      </span>\n' +
    '    </span>\n' +
    '  </div>\n' +
    '  <div data-ng-include="\'views/submission/form_field_input.html\'"></div>\n' +
    '</div>\n' +
    '<div data-ng-if="::field.multi_entry && field.type != \'fileupload\'" class="pull-right">\n' +
    '  <button class="btn btn-primary" data-ng-click="addAnswerEntry(entries, field.id)">\n' +
    '    <i class="glyphicon glyphicon-plus"></i>\n' +
    '    <span>{{::field.multi_entry_hint}}</span>\n' +
    '  </button>\n' +
    '</div>\n'
  );


  $templateCache.put('views/submission/main.html',
    '<div id="ContextSelectorBox" data-ng-show="context_id == undefined && contexts_selectable && public_contexts.length > 1" class="form-inline">\n' +
    '  <label id="ContextSelectorLabel">{{node.context_selector_label}}</label>\n' +
    '  <select id="ContextSelectorPick" class="form-control" data-ng-options="context as context.name for context in public_contexts" data-ng-model="selected_context"></select>\n' +
    '</div>\n' +
    '\n' +
    '<div id="ContextDescription">{{submission.context.description}}</div>\n' +
    '\n' +
    '<form id="submissionForm" name="submissionForm" data-ng-if="submission.context.questionnaire" data-ng-switch="submission.context.questionnaire.layout" novalidate>\n' +
    '  <div data-ng-switch-when="vertical">\n' +
    '    <div data-ng-include="\'views/submission/main_vertical.html\'"></div>\n' +
    '  </div>\n' +
    '  <div data-ng-switch-when="horizontal">\n' +
    '    <div data-ng-include="\'views/submission/main_horizontal.html\'"></div>\n' +
    '  </div>\n' +
    '</form>\n'
  );


  $templateCache.put('views/submission/main_horizontal.html',
    '<a id="top"></a>\n' +
    '\n' +
    '<div class="tabbable tabs-below">\n' +
    '  <ul id="SubmissionTabsNavigationBox" class="nav nav-tabs" data-ng-if="submission.context.questionnaire.show_steps_navigation_bar">\n' +
    '    <li data-ng-if="!skip_first_step" data-ng-class="{active: selection === -1, disabled: uploading}">\n' +
    '      <a id="receiver-selection-link" href="javascript:void(0)" data-ng-click="goToStep(-1)" data-ng-disabled="uploading">\n' +
    '        1 - <span data-translate>Recipient selection</span>\n' +
    '      </a>\n' +
    '    </li>\n' +
    '    <li data-ng-repeat="step in submission.context.questionnaire.steps | orderBy:\'presentation_order\'" data-ng-class="{active: selection === $index, disabled: uploading}" data-ng-if="stepIsTriggered(step)">\n' +
    '      <a id="step-{{$index}}-link" href="javascript:void(0)" data-ng-click="goToStep($index)" data-ng-disabled="uploading">\n' +
    '        <span data-ng-if="skip_first_step">{{$index + 1}} - </span>\n' +
    '        <span data-ng-if="!skip_first_step">{{$index + 2}} - </span>\n' +
    '        <span>{{::step.label}}</span>\n' +
    '      </a>\n' +
    '    </li>\n' +
    '  </ul>\n' +
    '\n' +
    '  <div id="SubmissionTabsContentBox" class="tab-content">\n' +
    '    <div id="step-receiver-selection" data-ng-if="!skip_first_step && selection === -1">\n' +
    '      <div id="StepTitle" data-ng-if="::!submission.context.questionnaire.show_steps_navigation_bar" data-translate>Recipient selection</div>\n' +
    '      <div data-ng-show="selection === -1" data-ng-include="\'views/submission/receiver_selection.html\'"></div>\n' +
    '    </div>\n' +
    '\n' +
    '    <!-- Configured Context Steps -->\n' +
    '    <div data-ng-repeat="step in submission.context.questionnaire.steps | orderBy:\'presentation_order\'" data-ng-controller="SubmissionStepCtrl" data-ng-init="stepId = \'step-\' + $index" data-ng-if="stepIsTriggered(step)">\n' +
    '      <div id="{{stepId}}" class="SubmissionStep" data-ng-show="selection === $index">\n' +
    '        <div id="StepTitle" data-ng-if="::!submission.context.questionnaire.show_steps_navigation_bar">{{::step.label}}</div>\n' +
    '        <div id="StepDescription" class="preformatted" data-ng-if="step.description">{{step.description}}</div>\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-7">\n' +
    '            <div data-ng-include="\'views/submission/form.html\'"></div>\n' +
    '          </div>\n' +
    '          <div class="col-md-offset-1 col-md-4">\n' +
    '            <div data-ng-include="\'views/partials/fileupload_status.html\'"></div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <!-- / Configured Context Steps -->\n' +
    '\n' +
    '  </div>\n' +
    '\n' +
    '  <!-- END steps -->\n' +
    '\n' +
    '  <div class="clearfix"></div>\n' +
    '\n' +
    '  <div id="StepsNavBar" class="pull-left">\n' +
    '    <ul class="pager">\n' +
    '      <li data-ng-class="{disabled: uploading}" class="SubmissionNavButton previous" data-ng-if="hasPreviousStep()">\n' +
    '        <a id="PreviousStepButton" data-ng-click="decrementStep()">\n' +
    '          <i class="glyphicon glyphicon-circle-arrow-left"></i>\n' +
    '          <span data-translate>previous step</span>\n' +
    '        </a>\n' +
    '      </li>\n' +
    '      <li data-ng-class="{disabled: uploading}" class="SubmissionNavButton next" data-ng-if="hasNextStep()">\n' +
    '        <a id="NextStepButton" data-ng-click="incrementStep()">\n' +
    '          <span data-translate>next step</span>\n' +
    '          <i class="glyphicon glyphicon-circle-arrow-right"></i>\n' +
    '        </a>\n' +
    '      </li>\n' +
    '    </ul>\n' +
    '  </div>\n' +
    '  <div id="SubmitBox" class="pager pull-left" style="margin-left: 20px" data-ng-show="!hasNextStep()">\n' +
    '    <button id="SubmitButton" class="btn btn-success" data-ng-click="completeSubmission()" data-ng-disabled="submission.isDisabled() || submissionForm.$pristine || submissionForm.$invalid || isUploading(uploads)" type="submit">\n' +
    '      <i data-ng-show="submission.wait || !submission.pow" id="SubmitIconWait" class="glyphicon glyphicon-time"></i>\n' +
    '      <i data-ng-hide="submission.wait || !submission.pow" id="SubmitIconOK" class="glyphicon glyphicon-ok"></i>\n' +
    '      <span data-translate>Submit</span>\n' +
    '      <span data-ng-show="submission.wait">({{submission.countdown}})</span>\n' +
    '    </button>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/submission/main_vertical.html',
    '<div id="SubmissionTabsContentBox">\n' +
    '  <div class="row" data-ng-if="!skip_first_step">\n' +
    '    <div id="step-receiver-selection" class="col-md-12">\n' +
    '      <div id="StepTitle" data-translate>Recipient selection</div>\n' +
    '      <div class="row">\n' +
    '         <div class="col-md-12" data-ng-include="\'views/submission/receiver_selection.html\'"></div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="row">\n' +
    '    <div class="col-md-12" data-ng-controller="SubmissionStepCtrl" data-ng-repeat="step in submission.context.steps" data-ng-init="stepId = \'step-\' + $index" data-ng-if="stepIsTriggered(step)">\n' +
    '      <div id="{{stepId}}">\n' +
    '        <div id="StepTitle">{{::step.label}}</div>\n' +
    '        <div id="StepDescription">{{::step.description}}</div>\n' +
    '        <div data-ng-init="submission = submission._submission" class="row">\n' +
    '          <div class="col-md-7">\n' +
    '            <div data-ng-include="\'views/submission/form.html\'"></div>\n' +
    '          </div>\n' +
    '          <div class="col-md-offset-1 col-md-4">\n' +
    '            <div data-ng-include="\'views/partials/fileupload_status.html\'"></div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="row">\n' +
    '    <div class="col-md-12">\n' +
    '      <div id="SubmitBox">\n' +
    '         <button id="SubmitButton" class="btn btn-success" data-ng-click="completeSubmission()" data-ng-disabled="submission.isDisabled() || submissionForm.$pristine || submissionForm.$invalid || isUploading(uploads)" type="submit">\n' +
    '          <i data-ng-show="submission.wait" id="SubmitIconWait" class="glyphicon glyphicon-time"></i>\n' +
    '          <i data-ng-hide="submission.wait" id="SubmitIconOK" class="glyphicon glyphicon-ok"></i>\n' +
    '          <span data-translate>Submit</span>\n' +
    '          <span data-ng-show="submission.wait">({{submission.countdown}})</span>\n' +
    '         </button>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/submission/receiver_selection.html',
    '<div id="SubmissionStepReceiver" class="receiverCards">\n' +
    '  <div id="StepTitle" data-ng-if="::submission.context.layout==\'horirzontal\' && !submission.context.show_steps_navigation_bar" data-translate>Recipient selection</div>\n' +
    '  <div id="StepsDescription">{{submission.context.recipients_clarification}}</div>\n' +
    '  <div data-ng-if="submission.context.maximum_selectable_receivers !== 0 && !submission.context.select_all_receivers" id="MaxSelectableReceiverBox" class="clearfix">\n' +
    '    <div><span data-translate>Maximum number of selectable recipients:</span> {{::submission.context.maximum_selectable_receivers}}</div>\n' +
    '    <div><span data-translate>Recipients selected:</span> {{submission.count_selected_receivers()}}</div>\n' +
    '  </div>\n' +
    '  <div id="ReceiverSelectionBoxBig" data-ng-repeat="receiver in submission.receivers | filter:filterReceivers | orderBy:receiversOrderPredicate" data-ng-if="!submission.context.show_small_cards">\n' +
    '    <div id="receiver-{{$index}}" class="{{[\'receiverCard col-md-5\', \'receiverCard col-md-5 col-md-offset-1\'][$index % 2]}}" data-ng-class="{selected: submission.receivers_selected[receiver.id], disabled: receiver.configuration === \'unselectable\' || (!node.allow_unencrypted && receiver.pgp_key_status === \'disabled\')}" data-ng-click="switch_selection(receiver)">\n' +
    '      <div class="row receiverCardTitle">\n' +
    '        <div class="col-md-10">\n' +
    '          <label>\n' +
    '            <span data-ng-if="receiver.configuration !== \'unselectable\' && receiver.pgp_key_status === \'enabled\'">\n' +
    '              <i class="glyphicon glyphicon-certificate" uib-popover="{{\'This recipient has configured the encryption key.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '            </span>\n' +
    '            <span data-ng-if="receiver.configuration !== \'unselectable\' && receiver.pgp_key_status === \'disabled\'">\n' +
    '              <i class="glyphicon glyphicon-warning-sign" uib-popover="{{\'This recipent has not configured the encryption key.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '            </span>\n' +
    '            <span data-ng-if="receiver.configuration === \'unselectable\'">\n' +
    '              <i class="glyphicon glyphicon-ban-circle" uib-popover="{{\'This recipient cannot be selected.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '            </span>\n' +
    '            <span>&nbsp;{{::receiver.name}}</span>\n' +
    '          </label>\n' +
    '        </div>\n' +
    '        <div class="col-md-1" data-ng-if="receiver.pgp_key_status === \'enabled\' || node.allow_unencrypted">\n' +
    '          <div data-ng-if="submission.receivers_selected[receiver.id]">\n' +
    '            <div data-ng-if="receiver.configuration === \'default\'">\n' +
    '              <i class="glyphicon glyphicon-check" uib-popover="{{\'Unselect this receiver\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '            </div>\n' +
    '            <div data-ng-if="receiver.configuration === \'forcefully_selected\'">\n' +
    '                <i class="glyphicon glyphicon-check" uib-popover="{{\'This recipent cannot be deselected.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '          <div data-ng-if="!submission.receivers_selected[receiver.id]">\n' +
    '            <div data-ng-if="receiver.configuration === \'default\'">\n' +
    '              <i class="glyphicon glyphicon-unchecked" uib-popover="{{\'Select this receiver\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '            </div>\n' +
    '            <div data-ng-if="receiver.configuration === \'unselectable\'">\n' +
    '              <i class="glyphicon glyphicon-unchecked" uib-popover="{{\'This recipient cannot be selected.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div class="row">\n' +
    '        <div class="col-md-5">\n' +
    '          <img data-ng-src="s/{{::receiver.id}}.png" class="img-thumbnail">\n' +
    '        </div>\n' +
    '        <div class="col-md-offset-1 col-md-6">\n' +
    '          <p>{{::receiver.description}}</p>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="clearfix" data-ng-if="$index % 2"></div>\n' +
    '  </div>\n' +
    '  <div id="ReceiverSelectionBoxSmall" data-ng-repeat="receiver in submission.receivers | filter:filterReceivers | orderBy:receiversOrderPredicate" data-ng-if="submission.context.show_small_cards">\n' +
    '    <div class="form-group col-md-3">\n' +
    '      <div id="receiver-{{$index}}" class="receiverCard" data-ng-class="{selected: submission.receivers_selected[receiver.id], disabled: receiver.configuration === \'unselectable\' || (!node.allow_unencrypted && receiver.pgp_key_status === \'disabled\')}" data-ng-click="switch_selection(receiver)">\n' +
    '        <div class="row receiverCardTitle">\n' +
    '          <div class="col-md-9">\n' +
    '            <label>\n' +
    '              <span data-ng-if="receiver.configuration !== \'unselectable\' && receiver.pgp_key_status === \'enabled\'">\n' +
    '                <i class="glyphicon glyphicon-certificate" uib-popover="{{\'This recipient has configured the encryption key.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '              </span>\n' +
    '              <span data-ng-if="receiver.configuration !== \'unselectable\' && receiver.pgp_key_status === \'disabled\'">\n' +
    '                <i class="glyphicon glyphicon-warning-sign" uib-popover="{{\'This receiver has not configured the encryption key.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '              </span>\n' +
    '              <span data-ng-if="receiver.configuration === \'unselectable\'">\n' +
    '                <i class="glyphicon glyphicon-ban-circle" uib-popover="{{\'This recipient cannot be selected.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '              </span>\n' +
    '              <span>&nbsp;{{::receiver.name}}</span>\n' +
    '            </label>\n' +
    '          </div>\n' +
    '          <div class="col-md-1" data-ng-if="receiver.pgp_key_status === \'enabled\' || node.allow_unencrypted">\n' +
    '            <div data-ng-if="submission.receivers_selected[receiver.id]">\n' +
    '              <div data-ng-if="receiver.configuration === \'default\'">\n' +
    '                <i class="glyphicon glyphicon-check" uib-popover="{{\'Unselect this receiver\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '              </div>\n' +
    '              <div data-ng-if="receiver.configuration === \'forcefully_selected\'">\n' +
    '                <i class="glyphicon glyphicon-check" uib-popover="{{\'This recipient cannot be deselected.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '            <div data-ng-if="!submission.receivers_selected[receiver.id]">\n' +
    '              <div data-ng-if="receiver.configuration === \'default\'">\n' +
    '                <i class="glyphicon glyphicon-unchecked" uib-popover="{{\'Select this receiver\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '              </div>\n' +
    '              <div data-ng-if="receiver.configuration === \'unselectable\'">\n' +
    '                <i class="glyphicon glyphicon-unchecked" uib-popover="{{\'This recipient cannot be selected.\' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '              </div>\n' +
    '            </div>\n' +
    '        <div class="row">\n' +
    '          <div class="col-md-12">\n' +
    '            <img data-ng-src="s/{{::receiver.id}}.png" class="img-thumbnail">\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="clearfix" data-ng-if="!(($index + 1) % 4)"></div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/submission/tip_identity_tip_whistleblower.html',
    '<div id="TipQuestionnaireAnswersBox" class="TipPageSection" data-ng-init="collapsed = false">\n' +
    '    <div class="TipPageSectionTitle" data-ng-click="collapsed = !collapsed" data-ng-keypress="eventDismiss($event)">\n' +
    '        <div>\n' +
    '            <span data-translate>Generalità</span>\n' +
    '            <span class="pull-right">\n' +
    '                <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '                <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '            </span>\n' +
    '        </div>\n' +
    '    </div>\n' +
    '    <div class="TipPageSectionContent" data-ng-show="!collapsed">\n' +
    '        <div data-ng-include="\'views/submission/identity_tip_whistleblower.html\'"></div>\n' +
    '    </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/submission/tip_status.html',
    '<div id="TipPageReceiversInfoBox" class="panel panel-default" data-ng-init="collapsed = false">\n' +
    '  <div class="panel-heading" data-ng-click="collapsed = !collapsed" data-ng-keypress="eventDismiss(); $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span>Stato della segnalazione</span>\n' +
    '      <span class="pull-right">\n' +
    '        <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <div class="submissionField">\n' +
    '       <label>Stato:</label>&nbsp;\n' +
    '       <select class="form-control" data-ng-disabled="session.role === \'custodian\'" ng-model="tip.statusId" ng-change="updateTipStatus()">\n' +
    '          <option data-ng-repeat="status in tipStates" value="{{status.id}}">{{::status.description}}</option>\n' +
    '       </select>\n' +
    '     </div>\n' +
    '     <div class="submissionField">\n' +
    '       <label>Data presa in carico:</label>&nbsp; \n' +
    '       {{::tip.working_date | date:\'dd-MM-yyyy\'}}\n' +
    '     </div>\n' +
    '     <div class="submissionField">\n' +
    '        <label>Assegnato a:</label>\n' +
    '        <select class="form-control" data-ng-disabled="session.role === \'custodian\'" ng-model="tip.receiverId" ng-change="updateTipReceiver()">\n' +
    '          <option data-ng-repeat="receiver in tipReceivers" value="{{receiver.id}}">{{::receiver.name}}</option>\n' +
    '        </select>\n' +
    '       </div>\n' +
    '     <div class="submissionField">\n' +
    '       <label>Data assegnazione:</label>&nbsp;\n' +
    '         {{::tip.assigned_date | date:\'dd-MM-yyyy\'}}\n' +
    '     </div>\n' +
    '   </div>\n' +
    ' </div>\n'
  );


  $templateCache.put('views/user/preferences.html',
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <form class="row tab-content" name="preferencesForm" novalidate>\n' +
    '      <uib-tabset>\n' +
    '        <uib-tab data-ng-repeat="tab in tabs" heading="{{tab.title | translate}}" active="tab.active" disable="tab.disabled">\n' +
    '          <div data-ng-include="tab.template" data-ng-controller="tab.ctrl"></div>\n' +
    '        </uib-tab>\n' +
    '      </uib-tabset>\n' +
    '    </form>\n' +
    '  </div> \n' +
    '</div>\n'
  );


  $templateCache.put('views/user/preferences/tab1.html',
    '<div class="col-md-8">\n' +
    '  <div data-ng-include="\'views/partials/preferences/general.html\'"></div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/user/preferences/tab2.html',
    '<div class="col-md-8">\n' +
    '  <div data-ng-include="\'views/partials/preferences/password.html\'"></div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/user/preferences/tab3.html',
    '<div class="col-md-8">\n' +
    '  <div data-ng-include="\'views/partials/preferences/pgpkey.html\'"></div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/whistleblower/tip.html',
    '<div class="row" data-ng-if="tip.status_page_message !== \'\'">\n' +
    '  <div class="col-md-12">\n' +
    '    <span id="StatusPageMessage">{{tip.status_page_message}}</span>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row" data-ng-if="!node.disable_encryption_warning && tip_unencrypted">\n' +
    '  <div class="col-md-12">\n' +
    '    <div class="alert alert-warning">\n' +
    '      <i class="glyphicon glyphicon-warning-sign"></i>\n' +
    '      <strong><span data-translate>Warning!</span></strong>\n' +
    '      <span data-translate>One or more of the recipients of this submission has not configured a PGP key.</span>\n' +
    '      <span data-translate>This means that the submitted files will be stored in plaintext on the server.</span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <div data-ng-include="\'views/partials/tip_info.html\'"></div>\n' +
    '    <div data-ng-if="tip.show_recipients_details" data-ng-include="\'views/partials/tip_receiver_list.html\'"></div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row">\n' +
    '  <div class="col-md-6">\n' +
    '    <div data-ng-include="\'views/partials/tip_questionnaire_answers.html\'"></div>\n' +
    '  </div>\n' +
    '  <div class="col-md-6" data-ng-if="tip.enable_whistleblower_identity">\n' +
    '    <div data-ng-include="\'views/whistleblower/whistleblower_identity.html\'"></div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row">\n' +
    '  <div class="col-md-12">\n' +
    '    <div data-ng-include="\'views/partials/tip_files_whistleblower.html\'"></div>\n' +
    '  </div>\n' +
    '</div>\n' +
    '\n' +
    '<div class="row">\n' +
    '  <div class="col-md-6" data-ng-if="tip.enable_comments">\n' +
    '    <div data-ng-include="\'views/partials/tip_comments.html\'"></div>\n' +
    '  </div>\n' +
    '  <div class="col-md-6" data-ng-if="tip.enable_messages">\n' +
    '    <div data-ng-include="\'views/partials/tip_messages.html\'"></div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/whistleblower/whistleblower_identity.html',
    '<div ng-if="!tip.identity_provided" id="TipInfoBox" class="panel panel-default" data-ng-init="collapsed = false; submission = {}">\n' +
    '  <div class="panel-heading" data-ng-click="collapsed = !collapsed; $event.stopPropagation();">\n' +
    '    <div>\n' +
    '      <span>\n' +
    '        <span data-ng-switch="tip.identity_provided">\n' +
    '          <span data-ng-switch-when="true">Identity</span>\n' +
    '          <span data-ng-switch-when="false">{{whistleblower_identity_field.label}}</span>\n' +
    '        </span>\n' +
    '        <span class="pull-right">\n' +
    '          <i data-ng-if="!collapsed" class="glyphicon glyphicon-collapse-down" uib-popover="{{\'Collapse\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '          <i data-ng-if="collapsed" class="glyphicon glyphicon-fullscreen" uib-popover="{{\'Expand\' | translate}}" popover-placement="left" popover-trigger="mouseenter"></i>\n' +
    '        </span>\n' +
    '      </span>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div class="TipPageSectionContent panel-body" data-ng-show="!collapsed">\n' +
    '    <div data-ng-switch="tip.identity_provided">\n' +
    '      <div data-ng-switch-when="true">\n' +
    '        <dd data-ng-repeat="field in whistleblower_identity_field.children | orderBy:[\'y\', \'x\']">\n' +
    '          <span data-ng-init="fieldAnswers=tip.answers[whistleblower_identity_field.id][0]" data-ng-include="\'views/partials/tip_field.html\'"></span>\n' +
    '        <dd>\n' +
    '      </div>\n' +
    '      <div data-ng-switch-when="false">\n' +
    '        <div data-ng-form="f" class="submissionFieldInput">\n' +
    '          <!--div data-ng-include="\'views/submission/fields/whistleblower_identity.html\'"></div-->\n' +
    '          <div>\n' +
    '            <label class="radio-inline"><input class="inputelem" type="radio" name="whistleblower_identity_radio_1" data-ng-model="provide_identity" data-ng-value="true" /><span data-translate>Yes</span></label>\n' +
    '            <label class="radio-inline"><input class="inputelem" type="radio" name="whistleblober_identity_radio_1" data-ng-model="provide_identity" data-ng-value="false" /><span data-translate>No</span></label>\n' +
    '          </div>\n' +
    '          <div ng-if="provide_identity">\n' +
    '            <div data-ng-include="\'views/submission/form.html\'"></div>\n' +
    '            <div id="SubmitBox">\n' +
    '              <button id="SubmitButton" class="btn btn-success pull-right" data-ng-click="provideIdentityInformation(whistleblower_identity_field.id, answers);" data-ng-disabled="f.$invalid" type="submit">\n' +
    '                <i id="SubmitIconOK" class="glyphicon glyphicon-ok"></i>\n' +
    '                <span data-translate>Submit</span>\n' +
    '              </button>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</div>\n'
  );


  $templateCache.put('views/wizard/main.html',
    '<form name="wizardForm" novalidate>\n' +
    '  <div id="WizardStep1" data-ng-show="step == 1">\n' +
    '    <div class="title1" data-translate>Welcome to GlobaLeaks!</div>\n' +
    '    <div data-translate>The following step by step wizard will guide you through configuring your whistleblowing site.</div>\n' +
    '    <div class="row wizard-block">\n' +
    '      <div class="title3" data-translate>Please choose the primary language of the site:</div>\n' +
    '      <div id="LanguagePickerBox" class="languagePick alert alert-warning">\n' +
    '        <select data-ng-model="language" data-ng-options="item.code as item.name for item in languages_enabled_selector | orderBy:\'name\'" class="form-control"></select>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="pager pull-right">\n' +
    '      <a id="ButtonNext1" class="btn btn-success btn-large" data-ng-click="step=step+1">\n' +
    '        <span data-translate>next step</span>\n' +
    '        <i class="glyphicon glyphicon-circle-arrow-right"></i>\n' +
    '      </a>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div id="WizardStep2" data-ng-show="step == 2">\n' +
    '    <div class="row wizard-block">\n' +
    '      <div class="title" data-translate>General</div>\n' +
    '      <div class="col-md-6">\n' +
    '        <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>Project name</span>\n' +
    '            <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8" data-ng-class="{\'has-error\': wizardForm.node_name.$error.required}">\n' +
    '            <input name="node_name" class="form-control" data-ng-model="admin.node.name" data-ng-attr-placeholder="{{\'Enter the name for your whistleblowing project\' | translate}}" maxlength="{{node.maximum_namesize}}" type="text" required>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>Project description</span>\n' +
    '            <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8"  data-ng-class="{\'has-error\': wizardForm.node_description.$error.required}">\n' +
    '            <textarea name="node_description" class="form-control" data-ng-model="admin.node.description" data-ng-attr-placeholder="{{\'Give a concise description of your project\' | translate}}" maxlength="{{node.maximum_textsize}}" required></textarea>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div class="col-md-6">\n' +
    '        <p class="wizard-help-hint">\n' +
    '          <span data-translate>Give your whistleblowing project a good name and description to invite whistleblowers to submit. Be sure to make the goals of your project clear.</span>\n' +
    '        </p>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="row wizard-block">\n' +
    '      <div class="title" data-translate>Admin</div>\n' +
    '       <div class="col-md-6">\n' +
    '         <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>Email address</span>\n' +
    '            <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8" data-ng-class="{\'has-error\': wizardForm.admin_email.$error.required}">\n' +
    '            <input name="admin_email" class="form-control" data-ng-model="admin_mail_address" data-ng-attr-placeholder="{{\'Enter an email address for the administrator\' | translate}}" maxlength="{{node.maximum_namesize}}" data-ng-pattern="email_regexp" type="text" required>\n' +
    '            <div class="text-red" data-ng-show="wizardForm.admin_email.$error.pattern">\n' +
    '              <span data-translate>Invalid email address</span>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '         <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>Password</span>\n' +
    '            <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8" data-ng-class="{\'has-error\': wizardForm.password.$error.required}">\n' +
    '            <input name="password" class="form-control" data-ng-model="admin_password" type="password" data-ng-attr-placeholder="{{\'Enter a password for the administrator\' | translate}}" required>\n' +
    '            <div class="text-red" data-ng-show="unsafe_password">\n' +
    '              <span data-translate>The choosen password is unsafe, it should have</span>:\n' +
    '            </div>\n' +
    '            <ul>\n' +
    '              <li class="text-red" data-ng-hide="pwdHasLetter">\n' +
    '                <span data-translate>At least one letter</span>\n' +
    '              </li>\n' +
    '              <li class="text-red" data-ng-hide="pwdHasNumber">\n' +
    '                <span data-translate>At least one number</span>\n' +
    '              </li>\n' +
    '              <li class="text-red" data-ng-hide="pwdValidLength">\n' +
    '                <span data-translate>At least 8 characters</span>\n' +
    '              </li>\n' +
    '            </ul>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>Confirm password</span>\n' +
    '            <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8" data-ng-class="{\'has-error\': wizardForm.checkpassword.$error.required}">\n' +
    '            <input name="checkpassword" class="form-control" data-ng-model="admin_check_password" type="password" data-ng-attr-placeholder="{{\'Please confirm it\' | translate}}" required>\n' +
    '            <div class="text-red" data-ng-show="mismatch_password">\n' +
    '              <span data-translate>The two passwords do not match</span>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div class="col-md-6">\n' +
    '        <p class="wizard-help-hint">\n' +
    '          <span data-translate>The username for accessing the server as the administrator will be \'admin\'.</span>\n' +
    '        </p>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="row wizard-block">\n' +
    '      <div class="title" data-translate>Recipient</div>\n' +
    '      <div class="col-md-6">\n' +
    '        <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>Name</span>\n' +
    '            <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8" data-ng-class="{\'has-error\': wizardForm.receiver_name.$error.required}">\n' +
    '            <input name="receiver_name" class="form-control" data-ng-model="receiver.name" maxlength="{{node.maximum_namesize}}" type="text" data-ng-attr-placeholder="{{\'Enter the name of the recipient\' | translate}}" required>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>Email address</span>\n' +
    '            <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8" data-ng-class="{\'has-error\': wizardForm.receiver_email.$error.required}">\n' +
    '            <input name="receiver_email" class="form-control" data-ng-model="receiver.mail_address"  maxlength="{{node.maximum_namesize}}" data-ng-pattern="email_regexp" type="text" data-ng-attr-placeholder="{{\'Enter the email address used to notify the recipient\' | translate}}" required>\n' +
    '            <div class="text-red" data-ng-show="wizardForm.receiver_email.$error.pattern">\n' +
    '              <span data-translate>Invalid email address</span>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>Password</span>\n' +
    '            <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8">\n' +
    '            <div>\n' +
    '              <span data-translate>Default user password is:</span>\n' +
    '              <span class="label label-primary">globaleaks</span>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '        <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>PGP key</span>\n' +
    '            <span class="text-red" data-ng-show="!admin.node.allow_unencrypted" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8" data-ng-class="{\'has-error\': wizardForm.pgpkey.$error.required}">\n' +
    '            <textarea name="pgpkey" class="form-control" data-ng-attr-placeholder="{{\'Copy and paste the PGP public key here\' | translate}}" data-ng-model="receiver.pgp_key_public" data-ng-required="!admin.node.allow_unencrypted"></textarea>\n' +
    '            <input data-ng-model="admin.node.allow_unencrypted" data-ng-click="open_modal_allow_unencrypted()" type="checkbox" data-ng-change="receiver.pgp_key_public = admin.node.allow_unencrypted ? \'\' : receiver.pgp_key_public">\n' +
    '            <span data-translate>Enable insecure configuration without PGP encryption.</span>\n' +
    '            <div data-ng-show="admin.node.allow_unencrypted">\n' +
    '              <span class="label label-danger" data-translate>Danger</span>\n' +
    '              <span data-translate>By enabling this option, the system will be storing the submitted files unencrypted on your server.</span>\n' +
    '              <span data-translate>This happens whenever encryption is unavailable.</span>\n' +
    '            </div>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div class="col-md-6">\n' +
    '        <p class="wizard-help-hint">\n' +
    '          <span data-translate>Recipients are very important for a whistleblowing project. They are the people responsible for receiving the whistleblowers\' submissions, verifying their authenticity and for taking action too. Choose them wisely.</span>\n' +
    '        </p>\n' +
    '      </div>\n' +
    '      <div class="col-md-6">\n' +
    '        <p class="wizard-help-hint">\n' +
    '          <span data-translate>In order to deliver encrypted emails and files each recipient needs an associated PGP key. Cut and paste the key of the recipient or mark the checkbox:</span>\n' +
    '          <span data-translate>Enable insecure configuration without PGP encryption.</span>\n' +
    '        </p>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="row wizard-block">\n' +
    '      <div class="title" data-translate>Context</div>\n' +
    '      <div class="col-md-6">\n' +
    '        <div class="form-group col-md-12">\n' +
    '          <label class="col-md-4">\n' +
    '            <span data-translate>Name</span>\n' +
    '            <span class="text-red" uib-popover="{{\'This field is mandatory\' | translate}}" popover-placement="right" popover-trigger="mouseenter">*</span>\n' +
    '          </label>\n' +
    '          <div class="col-md-8" data-ng-class="{\'has-error\': wizardForm.context_name.$error.required}">\n' +
    '            <input name="context_name" class="form-control" data-ng-model="context.name" type="text" data-ng-attr-placeholder="{{\'What is the topic of your whistleblowing project?\' | translate}}" required>\n' +
    '          </div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div class="col-md-6">\n' +
    '        <p class="wizard-help-hint">\n' +
    '          <span data-translate>Contexts are the categories to be selected by whistleblowers, when they perform their submission. Make sure to make them pertinent to your project.</span>\n' +
    '        </p>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '    <div class="pager pull-right">\n' +
    '      <a id="ButtonPrevious1" class="btn btn-success btn-large" data-ng-click="step=step-1">\n' +
    '        <i class="glyphicon glyphicon-circle-arrow-left"></i>\n' +
    '        <span data-translate>previous step</span>\n' +
    '      </a>\n' +
    '      <a id="ButtonNext2" class="btn btn-success btn-large" data-ng-click="step=step+1" data-ng-disabled="wizardForm.$invalid || (!admin.node.allow_unencrypted && !receiver.pgp_key_public)">\n' +
    '        <span data-translate>next step</span>\n' +
    '        <i class="glyphicon glyphicon-circle-arrow-right"></i>\n' +
    '      </a>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '  <div id="WizardStep3" data-ng-show="step == 3">\n' +
    '    <div class="row">\n' +
    '      <div class="col-md-10">\n' +
    '        <div class="congratulations">\n' +
    '          <div class="title1" data-translate>Congratulations!</div>\n' +
    '          <div data-translate>You have succesfully completed the platform wizard. You are now ready to further tweak the platform with the admin interface.</div>\n' +
    '        </div>\n' +
    '      </div>\n' +
    '      <div class="pager pull-right">\n' +
    '        <button id="ButtonNext3" class="btn btn-success btn-large" data-ng-click="finish()" type="submit">\n' +
    '          <span data-translate>Go to admin interface</span>\n' +
    '        </button>\n' +
    '      </div>\n' +
    '    </div>\n' +
    '  </div>\n' +
    '</form>\n'
  );

}]);
